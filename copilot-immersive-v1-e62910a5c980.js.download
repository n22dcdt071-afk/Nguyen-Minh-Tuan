"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["copilot-immersive-v1","packages_global-sso-banner_GlobalSsoBanner_tsx"],{77939:(e,t,n)=>{n.d(t,{A:()=>i});let i={messageContainer:"ChatMessage-module__messageContainer--P78Nq","message-action":"ChatMessage-module__message-action--vjrqQ",user:"ChatMessage-module__user--UGo2h",ai:"ChatMessage-module__ai--zMYOs",contentContainer:"ChatMessage-module__contentContainer--XTssz",message:"ChatMessage-module__message--iDqZL",messageContent:"ChatMessage-module__messageContent--x5cFE",hasClientConfirmations:"ChatMessage-module__hasClientConfirmations--UEFyq",agentUnauthorizedAvatar:"ChatMessage-module__agentUnauthorizedAvatar--GTuSs",skillExecutionText:"ChatMessage-module__skillExecutionText--HOEoJ",fileListItem:"ChatMessage-module__fileListItem--hX_vZ",avatar:"ChatMessage-module__avatar--ublrF",clientConfirmationContainer:"ChatMessage-module__clientConfirmationContainer--LgTin",confirmationStatusText:"ChatMessage-module__confirmationStatusText--pUhyM",messageContentWrapper:"ChatMessage-module__messageContentWrapper--L96Ez","snippet-clipboard-content":"ChatMessage-module__snippet-clipboard-content--gS3Lo",messageActionsContainer:"ChatMessage-module__messageActionsContainer--WIjsz"}},8431:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--Sofy4",diffTargetable:"Diff-module__diffTargetable--kW3Cm",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--eH6zk",diffAddFileThread:"Diff-module__diffAddFileThread--f81Tx",diffFooter:"Diff-module__diffFooter--kHHJz"}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},54556:(e,t,n)=>{n.d(t,{E:()=>i});let i=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"var(--fontStack-monospace)",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},3482:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(24774);function a(e=null,t="bottom"){return[i.S7.of(()=>({dom:e,top:"top"===t}))]}},68605:(e,t,n)=>{n.d(t,{BE:()=>o,Cw:()=>w,I6:()=>_,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>b,TU:()=>m,YH:()=>g,Z3:()=>h,eO:()=>x,e_:()=>v,f9:()=>l,fJ:()=>N,fV:()=>p,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>C});var i=n(15874),a=n(54528),s=n(53839),r=n(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function h(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let p=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let i=p(e,t);v(e,i.from,i.from,n)},g=(e,t,n)=>{let i=p(e,t);v(e,i.from,i.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,n)=>e.sliceDoc(t,n),v=(e,t,n,i)=>{e.dispatch({changes:{from:t,to:n,insert:i}})},b=(e,t)=>{let n=o(e);v(e,n.from,n.to,t)},_=(e,t)=>new a.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let i=new a.ZX(e.state.doc,t).next();e.dispatch({changes:{from:i.value.from,to:i.value.to,insert:n}})},C=(e,t,n,i,a)=>{if(void 0!==n)try{let o=p(e,t),l=p(e,n);if(o&&l){e.focus();let t=a?l.from+a:l.to;u(e,o.from+(i??0),t),e.dispatch({effects:[r.Lz.scrollIntoView(s.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let n=p(e,t);n&&(e.focus(),l(e,n.from+(i??0)),e.dispatch({effects:[r.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function w(e){return e.state.facet(i.Xt)}function N(e,t){if(e===t)return[];let n=0,i=Math.min(e.length,t.length);for(;n<i&&e[n]===t[n];)n++;let a=e.length,s=t.length;for(;a>n&&s>n&&e[a-1]===t[s-1];)a--,s--;return[{from:n,to:a,insert:t.slice(n,s)}]}},31315:(e,t,n)=>{function i(e){return a(e)[0]}function a(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,a]=n.trim().split("=");e===i&&void 0!==a&&t.push({key:i,value:a})}return t}function s(e,t,n=null,i=!1,a="lax"){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let o="https:"===location.protocol?"; secure":"",l=n?`; expires=${n}`:"";!1===i&&(r=`.${r}`);try{document.cookie=`${e}=${t}; path=/; domain=${r}${l}${o}; samesite=${a}`}catch{}}function r(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let i=new Date(Date.now()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",s=`; expires=${i}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${s}${a}`}catch{}}n.d(t,{OR:()=>a,Ri:()=>i,TV:()=>s,Yj:()=>r})},27359:(e,t,n)=>{n.d(t,{v:()=>o});var i=n(21728),a=n(13017),s=n(47789),r=n(38627);function o(){let e,t=(0,i.c)(3),n=(0,s.qw)(),o=(0,a.zy)();return t[0]!==o||t[1]!==n?(e=(0,r.BW)(o,n),t[0]=o,t[1]=n,t[2]=e):e=t[2],e}},52940:(e,t,n)=>{n.d(t,{p:()=>p});var i=n(4559),a=n(53419),s=n(96540),r=n(46665),o=n(25641),l=n(2635),c=n(33592),d=n(72303),u=n(72206),m=n(17285),h=n(27359);function p({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:p,removeOutdatedContentPreviewItems:f}){let{message:g}=(0,r.V)(),y=(0,l.bP)("currentUserLogin","mode"),x=(0,u.tD)(),v=(0,c.b)(),b=(0,h.v)(),_=(0,o.Th)(g,y.currentUserLogin),j="Copilot"===_.name,C="user"===_.type,w=j||(0,o.yh)(_),N=j&&!!g.agentErrors?.length,S=!N&&!!j&&!!g.error&&g.error.isError,I=j&&!e&&(!n||!p)&&!S,k=(0,s.useRef)(null),T=g.interrupted,L=g.clientConfirmations&&g.clientConfirmations.length>0,E=S&&g.error?.retryable,[R,A]=(0,s.useState)([]),[D,P]=(0,s.useState)(void 0),O=(E||T)&&n,M=n&&p,F=(0,s.useMemo)(()=>({openLinksInCurrentTab:"assistive"===y.mode,isStreaming:M,extensions:b?.markdownExtensions?b.markdownExtensions.map(e=>e()):[]}),[y.mode,M,b?.markdownExtensions]),B=!S&&(I||w&&!!g.content&&!p)&&(!C||!g.confirmations)||C&&!n||S&&n,$=(0,s.useRef)(0);(0,s.useEffect)(()=>{P(void 0),A([])},[g.id]),(0,s.useEffect)(()=>{let e=(g.skillExecutions??[]).find(e=>!R.some(t=>t.slug===e.slug&&t.statusMessage===e.statusMessage));if(e){let t=setTimeout(()=>{$.current=Date.now(),A([...R,e]),P(e)},Math.max(0,2e3-(Date.now()-$.current)));return()=>clearTimeout(t)}},[g.skillExecutions,R]),(0,s.useEffect)(()=>{M&&(0,i.i)("Copilot is responding")},[M]),(0,s.useEffect)(()=>{n&&!p&&k.current&&(0,i.C)(k.current)},[n,p]);let U=(0,s.useCallback)(async(e,t,n)=>{if(n)n("accepted"===e.state);else{let n=x();await v.sendChatMessage({thread:(0,d.W)(n),content:`@${_.name} ${(0,m.Z)(e.state)} Confirmation: ${t}`,references:g.references??[],topic:n.currentTopic,context:n.context,confirmations:e,customInstructions:n.customInstructions,model:n.model})}},[x,v,_.name,g.references]),V=(0,s.useCallback)(()=>{window.setTimeout(()=>t?.current?.focus(),1)},[t]),H=(0,s.useCallback)(async()=>{let e=x(),t=(0,d.W)(e);t&&(f?.(),V(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY",mode:e.mode}),await v.retryLastUnsuccessfulChatMessage(t))},[x,f,V,v]),W=(0,s.useCallback)(async e=>{let t=x(),n=(0,d.W)(t);n&&(f?.(),V(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY_FOR_NEW_SUBTHREAD",mode:t.mode}),await v.retryUserChatMessage(n,g,e))},[x,v,g,f,V]),q=(0,s.useCallback)(async e=>{let t=x(),n=(0,d.W)(t);n&&(f?.(),await v.editUserChatMessage(n,g,e))},[x,v,g,f]);return{author:_,removeOutdatedContentPreviewItems:f,handleConfirmationAction:U,handleRetryErrorMessage:H,handleRetryCopilotResponse:W,handleEditUserMessage:q,hasClientConfirmations:L,isCopilot:j,isUser:C,isAI:w,isAgentError:N,isError:S,isInterrupted:T,myRef:k,rendererConfig:F,renderFeedback:I,shouldShowMessageActions:B,skillExecutionToUseForRespondingText:D,showRetryButton:O}}},87419:(e,t,n)=>{n.d(t,{Y:()=>d});var i=n(21728),a=n(96540),s=n(25641),r=n(79064),o=n(2635),l=n(33592),c=n(72303);function d(e){let t,n,d,u,m,h,p,f,g,y,x=(0,i.c)(26),v=(0,o.Pk)(),b=(0,l.b)(),{currentTopic:_,messages:j,selectedThreadID:C}=v;x[0]!==v?(t=(0,c.W)(v),x[0]=v,x[1]=t):t=x[1];let w=t,N=(0,a.useRef)(null),S=e||N;return x[2]!==b||x[3]!==j.length||x[4]!==w?(n=()=>{w&&j.length>0&&b.showTopicPicker(!1)},d=[w,j.length,b],x[2]=b,x[3]=j.length,x[4]=w,x[5]=n,x[6]=d):(n=x[5],d=x[6]),(0,a.useEffect)(n,d),x[7]!==_||x[8]!==C?(u=()=>{let e=_?(0,s.P)(_)?_.name:String(_.id):null;C&&e&&r.Jt.setSelectedTopic(C,e)},m=[C,_],x[7]=_,x[8]=C,x[9]=u,x[10]=m):(u=x[9],m=x[10]),(0,a.useEffect)(u,m),x[11]!==S?(h=()=>{let e=window.setTimeout(()=>{S.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[S],x[11]=S,x[12]=h,x[13]=p):(h=x[12],p=x[13]),(0,a.useEffect)(h,p),x[14]!==b||x[15]!==v.context?.[0]||x[16]!==v.currentRepository?(f=()=>{let e=v.context?.[0]??v.currentRepository;return e&&b.generateSuggestions(e),()=>{b.clearSuggestions()}},x[14]=b,x[15]=v.context?.[0],x[16]=v.currentRepository,x[17]=f):f=x[17],x[18]!==b||x[19]!==v.context||x[20]!==v.currentRepository||x[21]!==v.currentTopic||x[22]!==v.selectedThreadID?(g=[b,v.context,v.currentTopic,v.currentRepository,v.selectedThreadID],x[18]=b,x[19]=v.context,x[20]=v.currentRepository,x[21]=v.currentTopic,x[22]=v.selectedThreadID,x[23]=g):g=x[23],(0,a.useEffect)(f,g),x[24]!==S?(y={textAreaRef:S},x[24]=S,x[25]=y):y=x[25],y}},88392:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(96540),a=n(63262),s=n(73952),r=n(51213);function o(e){let{streamingMessage:t,isWaitingOnCopilot:n,messages:o,selectedThreadID:l,pendingFirstMessage:c}=e,d=(0,i.useMemo)(()=>{let e={id:r.Wp,role:"assistant",content:"",createdAt:"",threadID:l||"",references:[],clientSide:!0,messageIndex:-1},i=(0,s.B)(o,c);return n?[...i,t??e]:i},[l,o,c,n,t]);return{messages:d,groupedMessages:(0,a.A)(d)}}},84802:(e,t,n)=>{n.d(t,{G:()=>o});var i=n(21728),a=n(96459),s=n(25641),r=n(33592);function o(){let e,t=(0,i.c)(3),n=(0,r.b)(),o=(0,a.Z)();return t[0]!==n||t[1]!==o?(e=async e=>{window.location.pathname!==s.Jz&&(o(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=o,t[2]=e):e=t[2],e}},17285:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}},7812:(e,t,n)=>{n.d(t,{Bx:()=>p,GJ:()=>v,LU:()=>l,PO:()=>g,SI:()=>h,SX:()=>x,by:()=>u,g:()=>m,oR:()=>y,oy:()=>o,wt:()=>d,yA:()=>f});var i=n(1631),a=n(25641),s=n(51213),r=n(35247);function o(e){return e.split("#")[0]}function l(e,t){let n=o(e),i=t.get(n)??[],a=i.indexOf(e);return i.length>1&&-1!==a?a+1:null}function c(e,t){return`file:${e.name}#${t}`}function d(e,t,n){switch(e.type){case"thread-scoped-file":return l(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return l(y({ref:e,messageIndex:t}).id,n)??void 0}}function u(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function m(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?u(e.baseFile):i(e.headFile?.path||""),o=e.headFile?u(e.headFile):i(e.baseFile?.path||""),l=e.headFile||e.baseFile,c=l?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:o,name:c,language:(e.headFile?o:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function h(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function p(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e,!1),messageId:t,reference:e}}function f(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[]}}function g(e){var t;switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(t=e.projects)&&0!==t.length?t.filter(e=>!!e.title).map(e=>e.title):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags};default:return null}}function y({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){var i;let a=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:a,id:`${a}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(i=e.projects)&&0!==i.length?i.filter(e=>""!==e.trim()).map(e=>({title:e})):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function x(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}function v(e,t,n,i){return{type:"task-diff",id:`task-diff:${t}`,messageId:s.Wp,name:"Files changed",diffEntries:e,tabSize:4,repositoryNwo:n,commitish:i}}},50393:(e,t,n)=>{n.d(t,{M:()=>s});let i=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),a=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');function s(e=!1){return Object.values(e?a:i)}},62193:(e,t,n)=>{var i,a,s,r,o,l,c=n(27744),d=n(70103),u=n(40548),m=n(74848),h=n(21728);function p(e){let t,n=(0,h.c)(2);return n[0]!==e.children?(t=(0,m.jsx)(m.Fragment,{children:e.children}),n[0]=e.children,n[1]=t):t=n[1],t}try{p.displayName||(p.displayName="App")}catch{}var f=n(50467),g=n(76143),y=n(66565),x=n(34164),v=n(96540);let b={scrollContainer:"ContentView-module__scrollContainer--_BylN",contentContainer:"ContentView-module__contentContainer--q5UcY",content:"ContentView-module__content--kzPet",medium:"ContentView-module__medium--TcCTp",small:"ContentView-module__small--r1fwP",banner:"ContentView-module__banner--rgHMe",serviceHeader:"ContentView-module__serviceHeader--DEEHs",serviceTitle:"ContentView-module__serviceTitle--PbOYe",serviceDescription:"ContentView-module__serviceDescription--ZNDZz",serviceActions:"ContentView-module__serviceActions--IucKo",section:"ContentView-module__section--avH_l",sectionTitle:"ContentView-module__sectionTitle--MkQwz",sectionGrid:"ContentView-module__sectionGrid--unHY4",sectionGridEmpty:"ContentView-module__sectionGridEmpty--oxnzj",skeletonCard:"ContentView-module__skeletonCard--e4yHy"};function _(e){let t,n,i,a,s=(0,h.c)(10),{children:r,width:o}=e;if(s[0]!==r){for(let e of(t=[],n=[],v.Children.toArray(r)))v.isValidElement(e)&&e.type===j?t.push(e):n.push(e);s[0]=r,s[1]=t,s[2]=n}else t=s[1],n=s[2];let l="small"===o,c="medium"===o;return s[3]!==l||s[4]!==c?(i=(0,x.$)(b.content,{[b.small]:l,[b.medium]:c}),s[3]=l,s[4]=c,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a=(0,m.jsx)("div",{className:b.scrollContainer,children:(0,m.jsx)("div",{className:b.contentContainer,children:(0,m.jsxs)("div",{className:i,children:[t,n]})})}),s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}function j(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:b.banner,children:i}),n[0]=i,n[1]=t):t=n[1],t}function C(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:b.serviceHeader,children:i}),n[0]=i,n[1]=t):t=n[1],t}function w(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("section",{className:b.section,children:i}),n[0]=i,n[1]=t):t=n[1],t}function N(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("h2",{className:b.serviceTitle,children:i}),n[0]=i,n[1]=t):t=n[1],t}function S(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("p",{className:b.serviceDescription,children:i}),n[0]=i,n[1]=t):t=n[1],t}function I(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:b.serviceActions,children:i}),n[0]=i,n[1]=t):t=n[1],t}function k(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("h3",{className:b.sectionTitle,children:i}),n[0]=i,n[1]=t):t=n[1],t}function T(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:b.sectionGridEmpty,children:i}),n[0]=i,n[1]=t):t=n[1],t}function L(e){let t,n,i,a=(0,h.c)(8),{children:s,loading:r}=e;if(void 0!==r&&r){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:b.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(A)}),a[0]=e):e=a[0],e}if(a[1]!==s){let e=v.Children.toArray(s);t=e.find(R),n=e.filter(E),a[1]=s,a[2]=t,a[3]=n}else t=a[2],n=a[3];let o=n;if(0===o.length&&t){let e;return a[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),a[4]=t,a[5]=e):e=a[5],e}return a[6]!==o?(i=(0,m.jsx)("div",{className:b.sectionGrid,children:o}),a[6]=o,a[7]=i):i=a[7],i}function E(e){return!(v.isValidElement(e)&&e.type===T)}function R(e){return v.isValidElement(e)&&e.type===T}function A(e,t){return(0,m.jsx)(y.f,{className:b.skeletonCard},t)}L.Empty=T,w.Title=k,w.Grid=L;let D={Title:N,Description:S,Actions:I,Container:_,Banner:j,Header:C,Section:w};D.displayName="ContentView",_.displayName="ContentView.Container",j.displayName="ContentView.Banner",C.displayName="ContentView.Header",w.displayName="ContentView.Section",N.displayName="ContentView.Title",S.displayName="ContentView.Description",I.displayName="ContentView.Actions",k.displayName="ContentView.Section.Title",L.displayName="ContentView.Section.Grid",T.displayName="ContentView.Section.Grid.Empty";let P={header:"AgentsView-module__header--fVWLw",failedTaskCreationBanners:"AgentsView-module__failedTaskCreationBanners--bUn1A",copilotDisclosure:"AgentsView-module__copilotDisclosure--lAild",copilotDisclosureText:"AgentsView-module__copilotDisclosureText--myF9L"};var O=n(93654),M=n(64894),F=n(79634),B=n(97189),$=n(2635),U=n(33544),V=n(19524),H=n(33592),W=n(34295),q=n(97949);function z(e){let t,n,i,a=(0,h.c)(8),{problemStatement:s,handleRetry:r,handleDismiss:o}=e,l=function(e,t=50,n=2){let i=t*n;return e.length<=i?e:`${e.substring(0,i).trim()}...`}(s??"",20,1),c=`Failed to create a task for '${l}'. Please try again.`;return a[0]!==o?(t=(0,m.jsx)(q.l.SecondaryAction,{onClick:o,children:"Dismiss"}),a[0]=o,a[1]=t):t=a[1],a[2]!==r?(n=(0,m.jsx)(q.l.PrimaryAction,{onClick:r,children:"Retry"}),a[2]=r,a[3]=n):n=a[3],a[4]!==c||a[5]!==t||a[6]!==n?(i=(0,m.jsx)(q.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:c,secondaryAction:t,primaryAction:n}),a[4]=c,a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{z.displayName||(z.displayName="TaskCreationFailedBanner")}catch{}var G=n(69599),K=n(46251),Q=n(1805),Y=n(47865),J=n(27912),X=n(26822),Z=n(13017),ee=n(40090);let et={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemButton:"ListBlock-module__itemButton--o9fcO",actions:"ListBlock-module__actions--LfUWo",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function en(e){let t,n,i=(0,h.c)(5),{children:a,className:s}=e;return i[0]!==s?(t=(0,x.$)(et.container,s),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,m.jsx)("div",{className:t,children:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function ei(e){let t,n,i=(0,h.c)(5),{children:a,className:s}=e;return i[0]!==s?(t=(0,x.$)(et.header,s),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,m.jsx)("div",{className:t,children:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function ea(e){let t,n,i,a,s=(0,h.c)(11);if(s[0]!==e?({children:t,loading:i,...n}=e,s[0]=e,s[1]=t,s[2]=n,s[3]=i):(t=s[1],n=s[2],i=s[3]),void 0!==i&&i){let e,t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(es),s[4]=e):e=s[4],s[5]!==n||s[6]!==e?(t=(0,m.jsx)("ul",{className:et.list,"data-testid":"list-block-skeleton",...n,children:e}),s[5]=n,s[6]=e,s[7]=t):t=s[7],t}return s[8]!==t||s[9]!==n?(a=(0,m.jsx)("ul",{className:et.list,...n,children:t}),s[8]=t,s[9]=n,s[10]=a):a=s[10],a}function es(e,t){return(0,m.jsx)(el,{},t)}function er(e){let t,n,i,a,s,r=(0,h.c)(39),o=null,l=null,c=null,d=null,u=null;if(r[0]!==e.children){for(let t of v.Children.toArray(e.children))v.isValidElement(t)&&(t.type===ec?o=t:t.type===ed?l=t:t.type===eu?c=t:t.type===em?d=t:t.type===eo&&(u=t));r[0]=e.children,r[1]=o,r[2]=l,r[3]=c,r[4]=d,r[5]=u}else o=r[1],l=r[2],c=r[3],d=r[4],u=r[5];r[6]!==c||r[7]!==o||r[8]!==d||r[9]!==l?(t=(0,m.jsxs)(m.Fragment,{children:[o,l,c,d]}),r[6]=c,r[7]=o,r[8]=d,r[9]=l,r[10]=t):t=r[10];let p=t;if("href"in e){let t,n,i,a,s;if(r[11]!==e?({href:t,isExternalLink:i,...n}=e,r[11]=e,r[12]=t,r[13]=n,r[14]=i):(t=r[12],n=r[13],i=r[14]),void 0!==i&&i){let e,i;return r[15]!==p||r[16]!==t||r[17]!==n?(e=(0,m.jsx)("a",{href:t,className:et.itemButton,target:"_self",rel:"noopener noreferrer",...n,children:p}),r[15]=p,r[16]=t,r[17]=n,r[18]=e):e=r[18],r[19]!==u||r[20]!==e?(i=(0,m.jsxs)("li",{className:et.item,children:[e,u]}),r[19]=u,r[20]=e,r[21]=i):i=r[21],i}return r[22]!==p||r[23]!==t||r[24]!==n?(a=(0,m.jsx)(Z.N_,{...n,to:t,className:et.itemButton,children:p}),r[22]=p,r[23]=t,r[24]=n,r[25]=a):a=r[25],r[26]!==u||r[27]!==a?(s=(0,m.jsxs)("li",{className:et.item,children:[a,u]}),r[26]=u,r[27]=a,r[28]=s):s=r[28],s}return r[29]!==e?({onClick:n,...i}=e,r[29]=e,r[30]=n,r[31]=i):(n=r[30],i=r[31]),r[32]!==p||r[33]!==n||r[34]!==i?(a=(0,m.jsx)("button",{...i,className:et.itemButton,onClick:n,type:"button",children:p}),r[32]=p,r[33]=n,r[34]=i,r[35]=a):a=r[35],r[36]!==u||r[37]!==a?(s=(0,m.jsxs)("li",{className:et.item,children:[a,u]}),r[36]=u,r[37]=a,r[38]=s):s=r[38],s}function eo(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:et.actions,children:i}),n[0]=i,n[1]=t):t=n[1],t}function el(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("li",{className:et.item,children:(0,m.jsx)("div",{className:et.skeletonItem,children:(0,m.jsx)(ee.r,{lines:2})})}),t[0]=e):e=t[0],e}function ec(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:et.leadingVisual,children:i}),n[0]=i,n[1]=t):t=n[1],t}function ed(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:et.title,children:i}),n[0]=i,n[1]=t):t=n[1],t}function eu(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:et.description,children:i}),n[0]=i,n[1]=t):t=n[1],t}function em(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:et.metadata,children:i}),n[0]=i,n[1]=t):t=n[1],t}function eh(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("li",{className:et.emptyState,children:i}),n[0]=i,n[1]=t):t=n[1],t}er.LeadingVisual=ec,er.Title=ed,er.Description=eu,er.SecondaryDescription=em,er.Metadata=em,er.Actions=eo,er.Skeleton=el,en.Header=ei,en.List=ea,en.Item=er,en.EmptyState=eh,en.displayName="ListBlock",ei.displayName="ListBlock.Header",ea.displayName="ListBlock.List",er.displayName="ListBlock.Item",ec.displayName="ListBlock.Item.LeadingVisual",ed.displayName="ListBlock.Item.Title",eu.displayName="ListBlock.Item.Description",em.displayName="ListBlock.Item.Metadata",eo.displayName="ListBlock.Item.Actions",el.displayName="ListBlock.Item.Skeleton",eh.displayName="ListBlock.EmptyState";try{en.displayName||(en.displayName="ListBlock")}catch{}let ep={button:"TaskList-module__button--FzNZb",counter:"TaskList-module__counter--suSM7",filterButtons:"TaskList-module__filterButtons--DNyGe"};var ef=n(38621),eg=n(62935);let ey={description:"TaskListItem-module__description--GUKJ9",iconTransition:"TaskListItem-module__iconTransition--h8TDX",fadeOut:"TaskListItem-module__fadeOut--TTRa9",fadeText:"TaskListItem-module__fadeText--giNoG",entering:"TaskListItem-module__entering--aB9fl",exiting:"TaskListItem-module__exiting--m4Koz"};var ex=n(67154),ev=n(82595),eb=n(21998);let e_={animatedDot:"WithAnimatedEllipsis-module__animatedDot--Dbgsr"},ej=e=>{let t,n,i,a=(0,h.c)(4),{children:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("style",{children:`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `}),n=[1,2,3].map(eC),a[0]=t,a[1]=n):(t=a[0],n=a[1]),a[2]!==s?(i=(0,m.jsxs)(m.Fragment,{children:[s,t,n]}),a[2]=s,a[3]=i):i=a[3],i};try{ej.displayName||(ej.displayName="WithAnimatedEllipsis")}catch{}function eC(e){return(0,m.jsx)(eb.EY,{sx:{animationName:`dot${e}`},className:e_.animatedDot,children:"."},`dot${e}`)}let ew={diffstat:"DiffStatText-module__diffstat--E0sZy",added:"DiffStatText-module__added--ek533",deleted:"DiffStatText-module__deleted--DbtGy"};function eN(e){let t,n,i,a,s,r,o,l=(0,h.c)(17),{diffStat:c}=e;return c&&(0!==c.lines_added||0!==c.lines_deleted)?(l[0]!==c.lines_added?(t=c.lines_added.toLocaleString(),l[0]=c.lines_added,l[1]=t):t=l[1],l[2]!==t?(n=(0,m.jsxs)("span",{"aria-hidden":"true",className:`${ew.diffstat} ${ew.added}`,children:["+",t]}),l[2]=t,l[3]=n):n=l[3],l[4]!==c.lines_deleted?(i=c.lines_deleted.toLocaleString(),l[4]=c.lines_deleted,l[5]=i):i=l[5],l[6]!==i?(a=(0,m.jsxs)("span",{"aria-hidden":"true",className:`${ew.diffstat} ${ew.deleted}`,children:["-",i]}),l[6]=i,l[7]=a):a=l[7],l[8]!==c.lines_added||l[9]!==c.lines_deleted?(s=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:c.lines_added,linesDeleted:c.lines_deleted}),l[8]=c.lines_added,l[9]=c.lines_deleted,l[10]=s):s=l[10],l[11]!==s?(r=(0,m.jsx)("span",{className:"sr-only",children:s}),l[11]=s,l[12]=r):r=l[12],l[13]!==n||l[14]!==a||l[15]!==r?(o=(0,m.jsxs)(K.B,{direction:"horizontal",gap:"condensed",children:[n,a,r]}),l[13]=n,l[14]=a,l[15]=r,l[16]=o):o=l[16],o):null}try{eN.displayName||(eN.displayName="DiffStatText")}catch{}var eS=n(44334),eI=n(62189);let ek=e=>{let t,n,i,a=(0,h.c)(7),{text:s}=e,[r,o]=(0,v.useState)(null),[l,c]=(0,v.useState)("none");a[0]!==r||a[1]!==s?(t=()=>{if(null===r)return void o(s);if(s!==r){c("exiting");let e=setTimeout(()=>{o(s),c("entering")},400);return()=>clearTimeout(e)}},n=[s,r],a[0]=r,a[1]=s,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,v.useEffect)(t,n);let d=`${ey.fadeText} ${"entering"===l?ey.entering:"exiting"===l?ey.exiting:null}`;return a[4]!==r||a[5]!==d?(i=(0,m.jsx)("span",{className:d,children:r}),a[4]=r,a[5]=d,a[6]=i):i=a[6],i};function eT(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(39),{state:g,revisionCount:y,startedAt:x,prState:b,prUrl:_,prTitle:j,prNwo:C,prNumber:w,prGlobalId:N,prInMergeQueue:S,prDiffStats:I}=e,[k,T]=(0,v.useState)(null),[L,E]=(0,v.useState)(!1);f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,G.G7)("copilot_coding_agent_diff_stats"),f[0]=t):t=f[0];let R=t;f[1]!==S||f[2]!==b||f[3]!==g?(n="merged"===b?"Merged":"closed"===b?"Closed":S?"Queued to merge":g&&(0,ex.wG)(g)||"",f[1]=S,f[2]=b,f[3]=g,f[4]=n):n=f[4];let A=n;f[5]!==S||f[6]!==b||f[7]!==g?(i=(0,eS.T)(b,S,g),f[5]=S,f[6]=b,f[7]=g,f[8]=i):i=f[8];let D=i;f[9]!==k||f[10]!==D?(a=()=>{if(!k)return void T(D);if(k.icon!==D.icon){E(!0);let e=setTimeout(()=>{T(D),E(!1)},300);return()=>clearTimeout(e)}},s=[D,k],f[9]=k,f[10]=D,f[11]=a,f[12]=s):(a=f[11],s=f[12]),(0,v.useEffect)(a,s);let P=y>0?`${y} revision${y>1?"s":""} \xb7 `:null,O=_;if((0,G.G7)("copilot_mission_control")&&(0,G.G7)("copilot_mission_control_session_redirect")){let e;f[13]!==N?(e=(0,eI.U)(N),f[13]=N,f[14]=e):e=f[14],O=e}let M=`${ey.iconTransition} ${L?ey.fadeOut:""}`;return f[15]!==D||f[16]!==M?(r=(0,m.jsx)(en.Item.LeadingVisual,{children:(0,m.jsx)(ev.I,{...D,className:M})}),f[15]=D,f[16]=M,f[17]=r):r=f[17],f[18]!==j?(o=(0,m.jsx)(en.Item.Title,{children:j}),f[18]=j,f[19]=o):o=f[19],f[20]!==I||f[21]!==g?(l=R&&g&&"in_progress"!==g&&I&&(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(eN,{diffStat:I})}),f[20]=I,f[21]=g,f[22]=l):l=f[22],f[23]!==x?(c=(0,m.jsx)(eg.A,{format:"micro",datetime:x}),f[23]=x,f[24]=c):c=f[24],f[25]!==A?(d=(0,m.jsx)(ek,{text:A}),f[25]=A,f[26]=d):d=f[26],f[27]!==w||f[28]!==C||f[29]!==P||f[30]!==c||f[31]!==d?(u=(0,m.jsx)(en.Item.Description,{children:(0,m.jsxs)("span",{className:ey.description,children:[C,"#",w," \xb7 started ",c," ago \xb7"," ",P,d]})}),f[27]=w,f[28]=C,f[29]=P,f[30]=c,f[31]=d,f[32]=u):u=f[32],f[33]!==u||f[34]!==r||f[35]!==o||f[36]!==l||f[37]!==O?(p=(0,m.jsxs)(en.Item,{href:O,isExternalLink:!0,children:[r,o,l,u]}),f[33]=u,f[34]=r,f[35]=o,f[36]=l,f[37]=O,f[38]=p):p=f[38],p}function eL(e){let t,n,i,a,s=(0,h.c)(7),{repositoryNwo:r}=e,o=`Creating task in ${r}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(en.Item.LeadingVisual,{children:(0,m.jsx)(ev.I,{icon:ef.DotFillIcon,color:"var(--fgColor-attention)"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(en.Item.Title,{children:(0,m.jsx)(ej,{children:"Creating task"})}),s[1]=n):n=s[1],s[2]!==r?(i=(0,m.jsxs)(en.Item.Description,{children:[(0,m.jsx)("span",{className:ey.description,children:r})," \xb7 Initializing pull request\u2026"]}),s[2]=r,s[3]=i):i=s[3],s[4]!==o||s[5]!==i?(a=(0,m.jsxs)(en.Item,{"aria-label":o,children:[t,n,i]}),s[4]=o,s[5]=i,s[6]=a):a=s[6],a}try{ek.displayName||(ek.displayName="FadeText")}catch{}try{eT.displayName||(eT.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(en.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{eL.displayName||(eL.displayName="OptimisticTaskListItem")}catch{}function eE(e){let t,n=(0,h.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,m.jsx)(en.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsx)(ef.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,m.jsx)(en.EmptyState,{children:(0,m.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,m.jsx)(m.Fragment,{children:i.map(eR)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function eR(e){return e.isOptimistic?(0,m.jsx)(eL,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,m.jsx)(eT,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffStats:e.pull.diffstat},e.pull.id)}try{eE.displayName||(eE.displayName="OpenTaskList")}catch{}function eA(e){let t,n,i=(0,h.c)(5),{tasks:a,isError:s}=e;return i[0]!==s||i[1]!==a?(t=s?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsx)(ef.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,m.jsx)(en.EmptyState,{children:(0,m.jsx)("p",{children:"No closed tasks yet."})}):a.map(eD),i[0]=s,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,m.jsx)(en.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function eD(e){return(0,m.jsx)(eT,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffStats:e.pull.diffstat},e.pull.id)}try{eA.displayName||(eA.displayName="ClosedTaskList")}catch{}function eP(e){let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:x}=e;p[0]!==f?(t=f.filter(eM),p[0]=f,p[1]=t):t=p[1];let v=t;p[2]!==f?(n=f.filter(eO),p[2]=f,p[3]=n):n=p[3];let b=n;p[4]!==x?(i=()=>x("open"),p[4]=x,p[5]=i):i=p[5];let _="open"===y;p[6]!==v.length?(a=(0,m.jsx)("span",{className:ep.counter,children:v.length}),p[6]=v.length,p[7]=a):a=p[7],p[8]!==i||p[9]!==_||p[10]!==a?(s=(0,m.jsxs)("button",{onClick:i,role:"tab","aria-selected":_,"aria-controls":"tasks-list",id:"open-tab",className:ep.button,children:["Open ",a]}),p[8]=i,p[9]=_,p[10]=a,p[11]=s):s=p[11],p[12]!==x?(r=()=>x("closed"),p[12]=x,p[13]=r):r=p[13];let j="closed"===y;return p[14]!==b.length?(o=(0,m.jsx)("span",{className:ep.counter,children:b.length}),p[14]=b.length,p[15]=o):o=p[15],p[16]!==r||p[17]!==j||p[18]!==o?(l=(0,m.jsxs)("button",{onClick:r,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"closed-tab",className:ep.button,children:["Closed ",o]}),p[16]=r,p[17]=j,p[18]=o,p[19]=l):l=p[19],p[20]!==l||p[21]!==s?(c=(0,m.jsx)(en.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:ep.filterButtons,children:[s,l]})}),p[20]=l,p[21]=s,p[22]=c):c=p[22],p[23]!==y||p[24]!==b||p[25]!==g||p[26]!==v?(d="open"===y?(0,m.jsx)(eE,{tasks:v,isError:g}):(0,m.jsx)(eA,{tasks:b,isError:g}),p[23]=y,p[24]=b,p[25]=g,p[26]=v,p[27]=d):d=p[27],p[28]!==c||p[29]!==d?(u=(0,m.jsxs)(en,{children:[c,d]}),p[28]=c,p[29]=d,p[30]=u):u=p[30],u}function eO(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function eM(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{eP.displayName||(eP.displayName="TaskList")}catch{}function eF(){let e,t,n,i=(0,h.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)("div",{className:P.header})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(B.Fn,{children:(0,m.jsxs)(J.P,{"data-testid":"agents-layout",children:[e,t,(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(eB,{})})]})}),i[2]=n):n=i[2],n}function eB(){let e,t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N=(0,h.c)(50),[S,I]=(0,v.useState)("open"),{sessionsPollingInterval:k,showCopilotCodingAgentPremiumRequestsBanner:T,tasks:L,pullRequestsMap:E}=(0,F.X)();N[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],N[0]=e):e=N[0];let[R,A]=(0,v.useState)(e);N[1]!==E||N[2]!==L||N[3]!==k?(t={sessionsPollingInterval:k,initialTasks:L,initialPullRequestsMap:E},N[1]=E,N[2]=L,N[3]=k,N[4]=t):t=N[4];let{tasks:B,isError:q}=(0,O.si)(t);N[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{A(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},N[5]=n):n=N[5];let{createTask:Q}=(0,Y.Z)(n),J=(0,H.b)();N[6]===Symbol.for("react.memo_cache_sentinel")?(i=[],N[6]=i):i=N[6],(0,v.useEffect)(eH,i),N[7]!==J?(a=()=>{J.selectThread(null,{includeThreads:!1,clearTopic:!0})},s=[J],N[7]=J,N[8]=a,N[9]=s):(a=N[8],s=N[9]),(0,v.useEffect)(a,s),N[10]!==Q||N[11]!==J?(r=async(e,t,n,i)=>{let a=e.trim();""!==a&&n&&""!==n.trim()&&(t?(I("open"),Q({nwo:t.nameWithOwner,problemStatement:a,baseRef:n,eventType:"agents_page",customAgent:i})):J.sendChatMessage({content:a,thread:null,references:[]}))},N[10]=Q,N[11]=J,N[12]=r):r=N[12];let X=r;N[13]!==Q||N[14]!==R?(o=e=>{let t=R[e];t&&(A(t=>t.filter((t,n)=>n!==e)),Q({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},N[13]=Q,N[14]=R,N[15]=o):o=N[15];let Z=o,{ssoOrganizations:ee,currentReferences:et}=(0,$.Pk)();N[16]!==ee?(l=ee.map(eV),N[16]=ee,N[17]=l):l=N[17];let en=l;N[18]!==et?(c=et.find(eU),N[18]=et,N[19]=c):c=N[19];let ei=c;N[20]!==en?(d=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(en)!==e&&(new W.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(en)))},u=[en],N[20]=en,N[21]=d,N[22]=u):(d=N[21],u=N[22]),(0,v.useEffect)(d,u);let[ea,es]=(0,v.useState)(!1);N[23]!==ei?(p=ei?{...ei,private:ei?.visibility==="private"}:void 0,N[23]=ei,N[24]=p):p=N[24];let er=p;return N[25]!==ea||N[26]!==T?(f=T&&!ea&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(M.C,{onBannerDismiss:()=>es(!0)})}),N[25]=ea,N[26]=T,N[27]=f):f=N[27],N[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Agents"}),(0,m.jsx)(D.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),N[28]=g):g=N[28],N[29]!==en?(y=en.length>0&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)(D.Section,{children:(0,m.jsx)(U.x,{protectedOrgs:en,redirectURI:e$})}),N[29]=en,N[30]=y):y=N[30],N[31]!==X||N[32]!==er?(x=(0,m.jsx)(V.Q,{handleUserSubmit:X,initialRepo:er}),N[31]=X,N[32]=er,N[33]=x):x=N[33],N[34]!==R||N[35]!==Z?(b=R.length>0&&(0,m.jsx)(K.B,{direction:"vertical",className:P.failedTaskCreationBanners,children:R.map((e,t)=>(0,m.jsx)(z,{problemStatement:e?.problemStatement,handleRetry:()=>Z(t),handleDismiss:()=>{A(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),N[34]=R,N[35]=Z,N[36]=b):b=N[36],N[37]!==x||N[38]!==b?(_=(0,m.jsxs)(D.Section,{children:[x,b]}),N[37]=x,N[38]=b,N[39]=_):_=N[39],N[40]!==S||N[41]!==q||N[42]!==B?(j=(0,m.jsx)(D.Section,{children:(0,m.jsx)(eP,{tasks:B,isError:q,activeTab:S,setActiveTab:I})}),N[40]=S,N[41]=q,N[42]=B,N[43]=j):j=N[43],N[44]===Symbol.for("react.memo_cache_sentinel")?(C=(0,m.jsx)(eW,{}),N[44]=C):C=N[44],N[45]!==f||N[46]!==y||N[47]!==_||N[48]!==j?(w=(0,m.jsxs)(D.Container,{width:"small",children:[f,g,y,_,j,C]}),N[45]=f,N[46]=y,N[47]=_,N[48]=j,N[49]=w):w=N[49],w}function e$(){return location.href}function eU(e){return"repository"===e.type}function eV(e){return e.login}function eH(){(0,g.D)("Agents \xb7 GitHub Copilot")}function eW(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:P.copilotDisclosure,children:(0,m.jsxs)("p",{className:P.copilotDisclosureText,children:[(0,m.jsx)(Q.A,{href:"https://docs.github.com/copilot/responsible-use/copilot-coding-agent",target:"_blank",rel:"noopener noreferrer",muted:!0,inline:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]})}),t[0]=e):e=t[0],e}try{eF.displayName||(eF.displayName="AgentsViewWrapper")}catch{}try{eB.displayName||(eB.displayName="AgentsView")}catch{}try{eW.displayName||(eW.displayName="CopilotDisclosure")}catch{}var eq=n(47723),ez=n(55248),eG=n(26607);let eK=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{constructor(){(0,f._)(this,"id",eq.Dv),(0,f._)(this,"displayName",eq.Ff),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:"agents-view",Component:eF,routes:[eK]}]),(0,f._)(this,"navigationItems",[{id:eq.Dv,displayName:"Agents",href:eq.pr,icon:ez.p,label:(0,G.G7)("copilot_coding_agent_ga")?null:(0,v.createElement)(eG.A,{variant:"success"},"Preview")}])}};var eQ=n(1747),eY=n(42312),eJ=n(79684),eX=n(1992),eZ=n(5524),e0=n(80679),e1=n(71205);let e2={empty:"TaskList-module__empty--Rep1M",emptyStateHeading:"TaskList-module__emptyStateHeading--P4BVB",clockIcon:"TaskList-module__clockIcon--kx3d1",stopIcon:"TaskList-module__stopIcon--O5nlX",checkCircleIcon:"TaskList-module__checkCircleIcon--fj_E_",dotFillIcon:"TaskList-module__dotFillIcon--x5Tte",skipIcon:"TaskList-module__skipIcon--niuIE"};function e3(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(B.Fn,{children:(0,m.jsx)(e4,{})}),t[0]=e):e=t[0],e}function e4(){let e,t=(0,h.c)(4),n=(0,Z.zy)(),{tasks:i,isLoading:a}=(0,O.si)();if(t[0]!==a||t[1]!==n||t[2]!==i){let s=i.filter(e5),r=0===s.length;e=(0,m.jsx)(m.Fragment,{children:r&&!a?(0,m.jsx)("div",{className:e2.empty,children:(0,m.jsx)("div",{className:e2.emptyStateHeading,children:"No recent tasks"})}):(0,m.jsx)(m.Fragment,{children:s.map(e=>{let t=(0,eI.U)(e.resource_global_id),i=n.pathname===t;return(0,m.jsx)(e1.W,{href:t,text:e7(e)?e.problemStatement:e.pull.title,leadingVisual:()=>e8(e),isSelected:i},e.resource_id)})})}),t[0]=a,t[1]=n,t[2]=i,t[3]=e}else e=t[3];return e}function e5(e){return e6(e)}function e6(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}function e7(e){return!!e.isOptimistic}function e8(e){let t=e.latest_session_state,n=e.pull?.state??"unknown";if("queued"===t)return(0,m.jsx)(ef.ClockIcon,{className:e2.clockIcon});if("open"===n){if("waiting_for_user"===t||"completed"===t)return(0,m.jsx)(ef.CheckCircleFillIcon,{className:e2.checkCircleIcon});if("failed"===t||"timed_out"===t)return(0,m.jsx)(ef.StopIcon,{className:e2.stopIcon});if("in_progress"===t)return(0,m.jsx)(e0.gX,{animated:!0});if("idle"===t)return(0,m.jsx)(ef.DotFillIcon,{className:e2.dotFillIcon});if("cancelled"===t)return(0,m.jsx)(ef.SkipIcon,{className:e2.skipIcon})}return(0,m.jsx)(ef.DotFillIcon,{className:e2.dotFillIcon})}try{e3.displayName||(e3.displayName="TasksListWrapper")}catch{}try{e4.displayName||(e4.displayName="TasksList")}catch{}function e9(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(29),{pull:g}=e,{tasks:y}=(0,O.si)();if(f[0]!==g?.id||f[1]!==y){let e;f[9]!==g?.id?(e=e=>e6(e)&&e.pull?.id!==g?.id,f[9]=g?.id,f[10]=e):e=f[10];let l=y.filter(e);a=eJ.B,f[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(eJ.B.Item,{href:"/copilot/agents",children:"Tasks"}),f[11]=o):o=f[11],i=eJ.B.ItemWithMenu,n=eX.W.Overlay,r="end",t=eZ.l,s=l.map(te),f[0]=g?.id,f[1]=y,f[2]=t,f[3]=n,f[4]=i,f[5]=a,f[6]=s,f[7]=r,f[8]=o}else t=f[2],n=f[3],i=f[4],a=f[5],s=f[6],r=f[7],o=f[8];f[12]!==t||f[13]!==s?(l=(0,m.jsx)(t,{children:s}),f[12]=t,f[13]=s,f[14]=l):l=f[14],f[15]!==n||f[16]!==r||f[17]!==l?(c=(0,m.jsx)(n,{align:r,children:l}),f[15]=n,f[16]=r,f[17]=l,f[18]=c):c=f[18];let x=g?.title??"Error loading data";return f[19]!==x?(d=(0,m.jsx)("span",{children:x}),f[19]=x,f[20]=d):d=f[20],f[21]!==i||f[22]!==c||f[23]!==d?(u=(0,m.jsx)(i,{menuOverlay:c,children:d}),f[21]=i,f[22]=c,f[23]=d,f[24]=u):u=f[24],f[25]!==a||f[26]!==o||f[27]!==u?(p=(0,m.jsxs)(a,{children:[o,u]}),f[25]=a,f[26]=o,f[27]=u,f[28]=p):p=f[28],p}function te(e){return(0,m.jsxs)(eZ.l.LinkItem,{as:Z.N_,to:(0,eI.U)(e.resource_global_id),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:e8(e)}),(0,m.jsx)("span",{children:e7(e)?e.problemStatement:e.pull?.title})]},e.resource_id)}try{e9.displayName||(e9.displayName="TaskBreadcrumbs")}catch{}var tt=n(26108);function tn(e){let t,n=(0,h.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,s=(0,eY.U)();return n[0]!==s||n[1]!==i||n[2]!==a?(t=!i&&(0,m.jsx)(tt.K,{icon:ef.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a()},ref:s}),n[0]=s,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{tn.displayName||(tn.displayName="PreviewPaneButton")}catch{}var ti=n(19199),ta=n(26410),ts=n(99223),tr=n(13107),to=n(71315);let tl={actionList:"OpenInMenu-module__actionList--jMOLM",menuItem:"OpenInMenu-module__menuItem--SS743",menuContent:"OpenInMenu-module__menuContent--dtUPD",menuIcon:"OpenInMenu-module__menuIcon--TWmG3",menuTitle:"OpenInMenu-module__menuTitle--hwhpE",cliSection:"OpenInMenu-module__cliSection--nAe4Q",cliHeader:"OpenInMenu-module__cliHeader--ggn5w",cliDescription:"OpenInMenu-module__cliDescription--TKlSI"};function tc(e,t){let n=`git clone https://github.com/${t}.git && code ${t.split("/")[1]}`;window.open(e,"_blank"),navigator.clipboard&&navigator.clipboard.writeText(n)}function td(e){let t,n,i,a,s,r,o=(0,h.c)(17),{pull:l}=e;if(o[0]!==l.repository_nwo){let e;e=l.repository_nwo,t=()=>{tc(`vscode://vscode.git/clone?url=https://github.com/${e}.git`,e)},o[0]=l.repository_nwo,o[1]=t}else t=o[1];let c=t;if(o[2]!==l.number||o[3]!==l.repository_nwo){let e,t;e=l.repository_nwo,t=l.number,n=()=>{tc(function(e,t){let n=to.cg?.location.origin||"https://github.com";return`x-github-client://openRepo/${n}/${e}?pr=${t}`}(e,t),e)},o[2]=l.number,o[3]=l.repository_nwo,o[4]=n}else n=o[4];let d=n;o[5]!==l.head_ref_name||o[6]!==l.repository_id?(i=(0,tr.QS)(l.repository_id,l.head_ref_name),o[5]=l.head_ref_name,o[6]=l.repository_id,o[7]=i):i=o[7];let u=i;o[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,ts.k)(),o[8]=a):a=o[8];let p=a,f=!!u;return o[9]!==d||o[10]!==c||o[11]!==l.url?(s=(0,m.jsx)(tu,{pullURL:l.url,onOpenInVSCode:c,onOpenInGitHubDesktop:d}),o[9]=d,o[10]=c,o[11]=l.url,o[12]=s):s=o[12],o[13]!==u||o[14]!==f||o[15]!==s?(r=(0,m.jsx)(ti.n,{primary:!1,size:"small",isEnterprise:p,showCodespacesTab:f,codespacesPath:u,localTab:s}),o[13]=u,o[14]=f,o[15]=s,o[16]=r):r=o[16],r}function tu(e){let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(18),{pullURL:f,onOpenInVSCode:g,onOpenInGitHubDesktop:y}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:tl.menuContent,children:[(0,m.jsx)(ef.TerminalIcon,{className:tl.menuIcon}),(0,m.jsx)("p",{className:tl.menuTitle,children:"Open in VS Code"})]}),p[0]=t):t=p[0],p[1]!==g?(n=(0,m.jsx)(eZ.l.Item,{className:tl.menuItem,onSelect:g,children:t}),p[1]=g,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(eZ.l.Divider,{}),p[3]=i):i=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsxs)("div",{className:tl.menuContent,children:[(0,m.jsx)(ef.DesktopDownloadIcon,{className:tl.menuIcon}),(0,m.jsx)("p",{className:tl.menuTitle,children:"Checkout with GitHub Desktop"})]}),p[4]=a):a=p[4],p[5]!==y?(s=(0,m.jsx)(eZ.l.Item,{className:tl.menuItem,onSelect:y,children:a}),p[5]=y,p[6]=s):s=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(eZ.l.Divider,{}),p[7]=r):r=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)("div",{className:tl.cliHeader,children:[(0,m.jsx)(ef.TerminalIcon,{className:tl.menuIcon}),(0,m.jsx)("p",{className:tl.menuTitle,children:"GitHub CLI"})]}),p[8]=o):o=p[8];let x=`gh pr view ${f}`;return p[9]!==x?(l=(0,m.jsx)(ta.J,{buttonAriaLabel:"Copy GitHub PR CLI command to clipboard",inputId:"github-cli",inputLabel:"GitHub CLI command",url:x}),p[9]=x,p[10]=l):l=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("p",{className:tl.cliDescription,children:"View this pull request in the GitHub CLI PR view."}),p[11]=c):c=p[11],p[12]!==l?(d=(0,m.jsx)("ul",{children:(0,m.jsxs)("li",{className:tl.cliSection,children:[o,l,c]})}),p[12]=l,p[13]=d):d=p[13],p[14]!==d||p[15]!==n||p[16]!==s?(u=(0,m.jsxs)(eZ.l,{className:tl.actionList,children:[n,i,s,r,d]}),p[14]=d,p[15]=n,p[16]=s,p[17]=u):u=p[17],u}try{td.displayName||(td.displayName="OpenInMenu")}catch{}try{tu.displayName||(tu.displayName="CustomLocalTab")}catch{}var tm=n(21373);function th(e){let t,n=(0,h.c)(2),{pullUrl:i}=e;return n[0]!==i?(t=(0,m.jsx)(tm.Q,{as:"a",href:i,target:"_blank",leadingVisual:ef.GitPullRequestIcon,variant:"primary",size:"small",children:"View pull request"}),n[0]=i,n[1]=t):t=n[1],t}try{th.displayName||(th.displayName="ViewPullRequestButton")}catch{}var tp=n(50129);function tf(e){let t,n,i,a,s,r,o=(0,h.c)(16),{pull:l,isContentPreviewOpen:c,openPreviewPane:d}=e,u=`/${l?.repository_nwo}/pull/${l?.number}`;return o[0]!==l?(t=(0,m.jsx)(e9,{pull:l}),o[0]=l,o[1]=t):t=o[1],o[2]!==l?(n=l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(td,{pull:l}),(0,m.jsx)(th,{pullUrl:l.url})]}),o[2]=l,o[3]=n):n=o[3],o[4]!==c||o[5]!==d?(i=(0,m.jsx)(tn,{isContentPreviewOpen:c,openPreviewPane:d}),o[4]=c,o[5]=d,o[6]=i):i=o[6],o[7]!==n||o[8]!==i?(a=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",children:[n,i]}),o[7]=n,o[8]=i,o[9]=a):a=o[9],o[10]!==t||o[11]!==a?(s=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",justify:"space-between",className:"flex-1",children:[t,a]}),o[10]=t,o[11]=a,o[12]=s):s=o[12],o[13]!==u||o[14]!==s?(r=(0,m.jsx)(tp.Kg,{basePageDataUrl:u,children:s}),o[13]=u,o[14]=s,o[15]=r):r=o[15],r}try{tf.displayName||(tf.displayName="TaskHeader")}catch{}var tg=n(51213),ty=n(7730),tx=n(35247),tv=n(53419),tb=n(11607),t_=n(77999),tj=n(75202),tC=n(6551),tw=n(11683),tN=n(45800),tS=n(71941),tI=n(26382);let tk={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--uGjJA"};function tT(e){let t,n,i,a,s,r,o=(0,h.c)(8),{regionName:l}=e;return o[0]!==l?(t=()=>{let e=`ERROR_FALLBACK_${l.toUpperCase().replace(/\s+/g,"_")}`;(0,tv.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${l} error fallback`})},n=[l],o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,v.useEffect)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tI.E.Visual,{children:(0,m.jsx)(ef.AlertIcon,{size:"medium"})}),a=(0,m.jsx)(tI.E.Heading,{children:"Something went wrong"}),o[3]=i,o[4]=a):(i=o[3],a=o[4]),o[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(Q.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),o[5]=s):s=o[5],o[6]!==l?(r=(0,m.jsx)("div",{className:tk.errorFallbackContainer,children:(0,m.jsxs)(tI.E,{children:[i,a,(0,m.jsxs)(tI.E.Description,{children:[l," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",s,"."]})]})}),o[6]=l,o[7]=r):r=o[7],r}try{tT.displayName||(tT.displayName="ErrorFallback")}catch{}let tL={container:"ContentPreview-module__container--y5_MG",resourcePanelOpen:"ContentPreview-module__resourcePanelOpen--YIQql",toolbar:"ContentPreview-module__toolbar--_XWuB",rightActions:"ContentPreview-module__rightActions--Ed1c0",actions:"ContentPreview-module__actions--o_YRg",tabsContainer:"ContentPreview-module__tabsContainer--t0I1P",tabs:"ContentPreview-module__tabs--X2Pn9",rightDivider:"ContentPreview-module__rightDivider--LY__Z",leftDivider:"ContentPreview-module__leftDivider--FCyvC",content:"ContentPreview-module__content--FgZZL"};var tE=n(47789),tR=n(90651),tA=n(49246),tD=n(66827),tP=n(29731);let tO="/favicons/favicon-copilot.svg",tM={container:"FailureState-module__container--EliAz",icon:"FailureState-module__icon--TP632",heading:"FailureState-module__heading--ohXqD",subtitle:"FailureState-module__subtitle--VM7x1"};function tF(e){let t,n,i,a,s,r=(0,h.c)(11),{title:o,description:l,icon:c}=e;return r[0]!==c?(t=(0,m.jsx)(c,{size:24,className:tM.icon}),r[0]=c,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==o?(i=(0,m.jsx)("h2",{className:tM.heading,children:o}),r[3]=o,r[4]=i):i=r[4],r[5]!==l?(a=(0,m.jsx)("p",{className:tM.subtitle,children:l}),r[5]=l,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,m.jsxs)("div",{className:tM.container,children:[t,n,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}try{tF.displayName||(tF.displayName="FailureState")}catch{}var tB=n(26100),t$=n(7812);let tU={anchor:"VersionSelector-module__anchor--Tx_UX"};function tV(e){let t,n,i,a,s,r=(0,h.c)(16),{item:o,onVersionSelect:l}=e,{versionedItems:c,openItem:d}=(0,eQ.xx)(),u=(0,t$.oy)(o.id),p=c.get(u)??[],f=p.indexOf(o.id);if((0,v.useEffect)(()=>{l&&p.length>1&&l(`Version${f+1}`)},[f,l,p.length]),p.length<=1)return null;let g=eX.W,y=f+1;r[0]!==y?(t=(0,m.jsx)(eX.W.Button,{variant:"invisible",className:tU.anchor,children:(0,m.jsx)(tB.g,{version:y,"data-testid":"version-selector"})}),r[0]=y,r[1]=t):t=r[1];let x=eX.W,b=eZ.l;r[2]!==o.id||r[3]!==l||r[4]!==d?(n=(e,t)=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>{d(e),l&&l(`Version${t+1}`)},selected:e===o.id,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(tB.g,{version:t+1})}),"Version ",t+1]},e),r[2]=o.id,r[3]=l,r[4]=d,r[5]=n):n=r[5];let _=p.map(n);return r[6]!==b||r[7]!==_?(i=(0,m.jsx)(b,{selectionVariant:"single",children:_}),r[6]=b,r[7]=_,r[8]=i):i=r[8],r[9]!==x.Overlay||r[10]!==i?(a=(0,m.jsx)(x.Overlay,{children:i}),r[9]=x.Overlay,r[10]=i,r[11]=a):a=r[11],r[12]!==g||r[13]!==t||r[14]!==a?(s=(0,m.jsxs)(g,{children:[t,a]}),r[12]=g,r[13]=t,r[14]=a,r[15]=s):s=r[15],s}try{tV.displayName||(tV.displayName="VersionSelector")}catch{}var tH=n(58335),tW=n(17831),tq=n(83494),tz=n(15042),tG=n(69726),tK=n(79431);let tQ={dialogFooter:"BulkCreateDialog-module__dialogFooter--aWAd9",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--BvuR4",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--sRZcS"};function tY(e){let t,n=(0,h.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(ef.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{tY.displayName||(tY.displayName="IssueIcon")}catch{}var tJ=n(67955),tX=n(54070);let tZ={container:"IssueTree-module__container--kYTT7",subHeader:"IssueTree-module__subHeader--BDblp",tree:"IssueTree-module__tree--GQG9_",grid:"IssueTree-module__grid--hqjkj",description:"IssueTree-module__description--b8yCi",item:"IssueTree-module__item--th4vZ",rootItem:"IssueTree-module__rootItem--hxb6j",spacer:"IssueTree-module__spacer--Z4HHo",leadingVisual:"IssueTree-module__leadingVisual--e_q3O",content:"IssueTree-module__content--Ko11D",title:"IssueTree-module__title--v0mbM",blockedBy:"IssueTree-module__blockedBy--z0s4g",trailingVisual:"IssueTree-module__trailingVisual--SewMY"},t0=v.createContext({hasTrailingVisuals:void 0}),t1=v.createContext({level:0});function t2(e){let t,n,i,a,s,r,o=(0,h.c)(16),{subIssueCount:l,subIssueHeaderText:c,hasTrailingVisuals:d,children:u}=e,p=void 0===c?"Sub-issues":c,f=void 0!==d&&d;if(o[0]!==u){let e=v.Children.toArray(u);t=e.find(t4),n=e.filter(t3),o[0]=u,o[1]=t,o[2]=n}else t=o[1],n=o[2];let g=n;o[3]!==f?(i={hasTrailingVisuals:f},o[3]=f,o[4]=i):i=o[4];let y=i,x=!!f||void 0;return o[5]!==g||o[6]!==l||o[7]!==p?(a=g.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:tZ.subHeader,children:[p,(0,m.jsx)(tJ.A,{children:l})]}),(0,m.jsx)("ul",{role:"tree",className:tZ.tree,children:g})]}),o[5]=g,o[6]=l,o[7]=p,o[8]=a):a=o[8],o[9]!==t||o[10]!==x||o[11]!==a?(s=(0,m.jsxs)("div",{className:tZ.container,"data-has-trailing-visual":x,children:[t,a]}),o[9]=t,o[10]=x,o[11]=a,o[12]=s):s=o[12],o[13]!==y||o[14]!==s?(r=(0,m.jsx)(t0.Provider,{value:y,children:s}),o[13]=y,o[14]=s,o[15]=r):r=o[15],r}function t3(e){return v.isValidElement(e)&&e.type===t6}function t4(e){return v.isValidElement(e)&&e.type===t5}function t5(e){let t,n,i,a=(0,h.c)(4);a[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},a[0]=t):t=a[0];let s=t;return a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)(tZ.item,tZ.rootItem),a[1]=n):n=a[1],a[2]!==e?(i=(0,m.jsx)(t1.Provider,{value:s,children:(0,m.jsx)("div",{className:n,children:(0,m.jsx)(t9,{...e})})}),a[2]=e,a[3]=i):i=a[3],i}function t6(e){let t,n,i,a,s,r,o,l,c,d=(0,h.c)(19);if(d[0]!==e?({children:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]),d[3]!==t){let e=v.Children.toArray(t);i=e.filter(t8),a=e.filter(t7),d[3]=t,d[4]=i,d[5]=a}else i=d[4],a=d[5];let u=a,{level:p}=v.useContext(t1),f=p+1;d[6]!==f?(s={level:f},d[6]=f,d[7]=s):s=d[7];let g=s;return d[8]!==u||d[9]!==n?(r=(0,m.jsx)(t9,{...n,children:u}),d[8]=u,d[9]=n,d[10]=r):r=d[10],d[11]!==i?(o=i.length>0&&(0,m.jsx)("ul",{role:"group",className:tZ.tree,children:i}),d[11]=i,d[12]=o):o=d[12],d[13]!==r||d[14]!==o?(l=(0,m.jsxs)("li",{role:"treeitem","aria-selected":"false",className:tZ.item,children:[r,o]}),d[13]=r,d[14]=o,d[15]=l):l=d[15],d[16]!==g||d[17]!==l?(c=(0,m.jsx)(t1.Provider,{value:g,children:l}),d[16]=g,d[17]=l,d[18]=c):c=d[18],c}function t7(e){return!(v.isValidElement(e)&&e.type===t6)}function t8(e){return v.isValidElement(e)&&e.type===t6}function t9(e){let t,n,i,a,s,r,o,l,c,d=(0,h.c)(32),{leadingVisual:u,title:p,description:f,trailingBadge:g,trailingVisual:y,href:x,onClick:b,blockedBy:_}=e,{level:j}=v.useContext(t1),{hasTrailingVisuals:C}=v.useContext(t0),w=null!=_&&_.length>0;e:{if(x){t="a";break e}if(b){t="button";break e}t="div"}let N=t;d[0]!==j?(n={"--level":j},d[0]=j,d[1]=n):n=d[1];let S=!!b||void 0;if(d[2]!==j?(i=j>0&&(0,m.jsx)("div",{className:tZ.spacer}),d[2]=j,d[3]=i):i=d[3],d[4]!==u?(a=(0,m.jsx)("div",{className:tZ.leadingVisual,children:u}),d[4]=u,d[5]=a):a=d[5],d[6]!==x||d[7]!==b||d[8]!==p||d[9]!==N){let e;d[11]!==x||d[12]!==b?(e={className:tZ.title,href:x,onClick:b},d[11]=x,d[12]=b,d[13]=e):e=d[13],s=v.createElement(N,e,p),d[6]=x,d[7]=b,d[8]=p,d[9]=N,d[10]=s}else s=d[10];return d[14]!==s||d[15]!==g?(r=(0,m.jsxs)("div",{className:tZ.content,children:[s,g]}),d[14]=s,d[15]=g,d[16]=r):r=d[16],d[17]!==_||d[18]!==f||d[19]!==w?(o=(null!=f||w)&&(0,m.jsxs)("div",{className:tZ.description,children:[w&&(0,m.jsx)(ne,{dependencyType:"Blocked by",blockedBy:_}),f]}),d[17]=_,d[18]=f,d[19]=w,d[20]=o):o=d[20],d[21]!==C||d[22]!==y?(l=C&&(0,m.jsx)("div",{className:tZ.trailingVisual,children:y}),d[21]=C,d[22]=y,d[23]=l):l=d[23],d[24]!==n||d[25]!==S||d[26]!==i||d[27]!==a||d[28]!==r||d[29]!==o||d[30]!==l?(c=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:tZ.grid,style:n,"data-has-onclick":S,children:[i,a,r,o,l]})}),d[24]=n,d[25]=S,d[26]=i,d[27]=a,d[28]=r,d[29]=o,d[30]=l,d[31]=c):c=d[31],c}function ne(e){let t,n,i=(0,h.c)(8),{dependencyType:a,blockedBy:s}=e;if(!s.length)return null;let r=s[0]?.href,o=s[0]?.onClick,l=s[0]?.title;i[0]!==r||i[1]!==o||i[2]!==l?(t=(0,m.jsx)(Q.A,{"data-testid":"blocked-by-link",className:tZ.blockedBy,muted:!0,href:r,onClick:o,children:l}),i[0]=r,i[1]=o,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==s.length||i[5]!==c||i[6]!==a?(n=(0,m.jsx)(tX.A,{size:"medium",className:"mr-2",leadingVisual:nt,text:s.length>1?(0,m.jsxs)(m.Fragment,{children:[a," ",s.length]}):(0,m.jsxs)(m.Fragment,{children:[a,": ",c]})}),i[4]=s.length,i[5]=c,i[6]=a,i[7]=n):n=i[7],n}function nt(){return(0,m.jsx)(ef.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let nn=Object.assign(t2,{RootItem:t5,Item:t6});try{t2.displayName||(t2.displayName="Tree")}catch{}try{t5.displayName||(t5.displayName="TreeRootItem")}catch{}try{t6.displayName||(t6.displayName="TreeItem")}catch{}try{t9.displayName||(t9.displayName="TreeItemContent")}catch{}try{ne.displayName||(ne.displayName="IssueDependencies")}catch{}try{nn.displayName||(nn.displayName="IssueTree")}catch{}var ni=n(16654),na=n(94747),ns=n(97286),nr=n(96379),no=n(18312);function nl(e,t){for(let n of(t(e),e.children))nl(n,t)}function nc(e,t,n,i){let a=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let s of e){let e=a.get(t(s)),r=n(s);if(null!=r){let t=a.get(r);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(s)??[]){let n=a.get(t);n&&e&&(e.blockedBy.push(n),n.isBlocking.push(e))}}return a}function nd(){let e,t,n=(0,h.c)(6),{items:i,allOpenItems:a,versionedItems:s}=(0,eQ.xx)();n[0]!==a?(e=new Set(a),n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==i||n[3]!==r||n[4]!==s?(t=nc([...s.entries()].filter(nf).map(e=>{let[,t]=e,n=t.find(e=>r.has(e));if(n)return i.get(n);let a=t.at(-1);return a?i.get(a):void 0}).filter(np),nh,nm,nu),n[2]=i,n[3]=r,n[4]=s,n[5]=t):t=n[5],t}function nu(e){return e.blockedByTags}function nm(e){return e.parentTag}function nh(e){return e.tag}function np(e){return!!e}function nf(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}var ng=n(16049),ny=n(73952);function nx(){let e,t,n=(0,h.c)(4),{messages:i}=(0,$.Pk)();n[0]!==i?(e=(0,ny.B)(i),n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):nv(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function nv(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,ng.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function nb(e){return!!e}function n_(e){return e.title}function nj(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var nC=n(62559),nw=n(81724),nN=n(977),nS=n(18501),nI=n(40961),nk=n(5338);let nT={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};nT.hash="a175c12fb4b38762491470789bca7dee";let nL=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"number"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},i=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],a=[{kind:"Variable",name:"number",variableName:"number"}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},h=[m],p={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},g=[u],y=[{kind:"Literal",name:"first",value:20}],x={alias:null,args:y,concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[s,l],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},v={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},b=[u,s];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[s,r,o,l,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:h,storageKey:null},p,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:g,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:h,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[l],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:g,storageKey:null},x,v],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[s,r,o,l,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m,s],storageKey:null},p,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:b,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[m,s],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:b,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[l,s],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:b,storageKey:null},x,v],storageKey:null},s],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}}}();async function nE(e,t,n,i,a=!1){try{var s;let r=await (0,no.fetchQuery)(e,nL,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,no.readInlineData)(nT,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}nL.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var nR=n(72767),nA=n(93997);function nD(e){let t,n,i,a,s=(0,h.c)(13),{repoId:r,filename:o}=e,l=(0,no.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,o],s[2]=o,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==o||s[8]!==r?(i=async()=>r&&o?await nP(l,r,o):null,s[6]=l,s[7]=o,s[8]=r,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,ns.I)(a)}async function nP(e,t,n){let i=await (0,no.fetchQuery)(e,nR.F,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,nA.EV)(i.node)??null:null}let nO=crypto.randomUUID();async function nM(e,t,n){let i={},a=new Map;if(nl(n,e=>a.set(e.item.tag,e)),a.size>60)return i[nO]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return i[nO]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,s]of a){let r=s.item;if(i[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=a.get(r.parentTag)?.item?.repository),!r.repository)){i[n].errorMessages.push("Repository is required");continue}let[o,l]=r.repository?.split("/")||[];if(!o||!l){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let c=await (0,ni.tZ)(e,o,l);if(!c){i[n].errorMessages.push("Repository not found");continue}if(c.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!c.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(c.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(c.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(c.isLocked||!1===c.viewerCanPush&&c.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){i[n].errorMessages.push("Issue number is required");continue}let t=await nE(e,o,l,r.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(s.children.length>0){let e=t.subIssues?.totalCount??0,a=s.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let d=r.template?.split("/").findLast(Boolean),u=d?await nP(e,c.id,d):void 0;if(r.template&&!u){i[n].errorMessages.push("Issue template not found");continue}if(!c.isBlankIssuesEnabled&&!u){i[n].errorMessages.push("Issue template is required");continue}let h=(0,nC.O_)(r.name);if(h.isValid||i[n].errorMessages.push(h.errorMessage||"Issue title is invalid"),u&&(0,nw.GQ)(u.data)){t.current=null;let a=document.createElement("div"),s=(0,nk.H)(a);if((0,nI.flushSync)(()=>{s.render((0,m.jsx)(nS.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,m.jsx)(no.RelayEnvironmentProvider,{environment:e,children:(0,m.jsx)(nF,{repository:c,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let o=t.current;try{if(o.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}r.body=o.markdown()}finally{o.clearSessionStorage(),s.unmount(),a.remove()}}let p=(0,nC.QK)(r.body??"");p.isValid||i[n].errorMessages.push(p.errorMessage||"Issue body is invalid")}return i}function nF(e){let t,n,i=(0,h.c)(10),{repository:a,draftIssue:s,template:r,outputRef:o}=e,l=`${a.owner.login}/${a.name}`;i[0]!==a.databaseId||i[1]!==a.slashCommandsEnabled||i[2]!==l?(t={type:"issue",repository:{databaseId:a.databaseId,nwo:l,slashCommandsEnabled:a.slashCommandsEnabled}},i[0]=a.databaseId,i[1]=a.slashCommandsEnabled,i[2]=l,i[3]=t):t=i[3];let c=t;if(!(0,nw.GQ)(r.data))return;let d=`copilot-creates-issues:${s.tag}`;return i[4]!==s.defaultValuesById||i[5]!==o||i[6]!==c||i[7]!==d||i[8]!==r.data?(n=(0,m.jsx)(nN.Z,{outputRef:o,issueFormRef:r.data,subject:c,sessionStorageKey:d,defaultValuesById:s.defaultValuesById}),i[4]=s.defaultValuesById,i[5]=o,i[6]=c,i[7]=d,i[8]=r.data,i[9]=n):n=i[9],n}try{nO.displayName||(nO.displayName="TREE_ERROR_KEY")}catch{}try{nF.displayName||(nF.displayName="IssueFormWrapper")}catch{}var nB=n(17855),n$=n(72303),nU=n(20382);function nV(){let e,t=(0,h.c)(8),n=(0,H.b)(),i=(0,$.Pk)(),{closeItems:a,openItem:s,openPreviewPane:r,versionedItems:o,updateItem:l}=(0,eQ.xx)();return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==i||t[5]!==l||t[6]!==o?(e=async(e,t)=>{if(0===e.length)return;let c=e.find(nY)??e[0];(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,n$.W)(i)?.id,chatReferrer:document.referrer,repositoryId:c.repository.databaseId,draftType:c.draftType,issueTag:c.tag,issueNumber:c.number,templateType:c.template?c.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(nK).length,savedIssuesCount:e.length});let d=[],u=[],m=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,a=t.number;l({type:"issue",id:nX(t),messageId:tg.Wp,name:t.title,owner:n,repo:i,number:a,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=tx.W.draftIssuesWithDependencies?t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(nG):void 0;u.push({tag:`${n}/${i}#${a}`,parentTag:s?`${s.repository.owner.login}/${s.repository.name}#${s.number}`:void 0,blockedByTags:null!=r&&r.length>0?r?.map(nz):void 0,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(nJ(t)),m.push(t.tag)}a(e.map(nq).flatMap(e=>o.get(e)??[])),s(nX(c)),r();let h=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=nJ(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,nU.Bh)({data:u},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${m.join(", ")}`},...i.currentReferences];e.some(nW)&&h.push({type:"text",name:"summarize-project-errors",text:"You MUST add this note at the end of your message in the user's language: 'Note: Copilot encountered an error adding at least one project to the issues. Navigate to the issues to review and make changes.'"}),e.some(nH)&&h.push({type:"text",name:"summarize-dependency-errors",text:"You MUST add this note at the end of your message in the user's language: 'Note: Copilot encountered an error adding at least one dependency to the issues. Navigate to the issues to review and make changes.'"});let p=d.length>1?`Saved the issues: ${d.join(", ")}`:`Saved the issue: ${d[0]}`;t&&(p+=`

${t}`),await n.sendChatMessage({thread:(0,n$.W)(i),content:p,references:h,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=l,t[6]=o,t[7]=e):e=t[7],e}function nH(e){return e.dependencyErrors?.length}function nW(e){return e.projectErrors?.length}function nq(e){return`${e.draftType}:${e.tag}`}function nz(e){return`${e.repository.owner.login}/${e.repository.name}#${e.number}`}function nG(e){return void 0!==e}function nK(e){return e.assignees.some(nQ)}function nQ(e){return(0,nB.v)(e)}function nY(e){return!e.parentTag}function nJ(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`[${t}/${n}#${i}](${e.url})`}function nX(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}function nZ({issueNode:e,onComplete:t,onCancel:n}){let i=(0,v.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,v.useMemo)(()=>{let e=0;return nl(i,t=>{"new-issue"===t.item.type&&e++}),e},[i]),{mutate:s,isLoading:r,data:o,isComplete:l,isError:c,error:d}=function(e){let t,n,i,a=(0,h.c)(13),{issueNode:s}=e;a[0]!==s?(t={issueNode:s},a[0]=s,a[1]=t):t=a[1];let r=function(e){let t,n,i,a=(0,h.c)(9),{issueNode:s}=e,r=(0,no.useRelayEnvironment)(),o=nx();return a[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],a[0]=s.item.tag,a[1]=t):t=a[1],a[2]!==r||a[3]!==s||a[4]!==o?(n=async()=>{let e=new Map;!function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i)}}(s,t=>e.set(t.item.tag,t.item));let t=[],n=new Map;for(let[,i]of e){if("existing-issue"===i.type){t.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:i.blockedByTags});continue}let e=i.body;if(e&&i.repository){let t=n.get(i.repository);if(!t){let[e,a]=i.repository.split("/");null!=e&&null!=a&&(t=await (0,ni.tZ)(r,e,a),n.set(i.repository,t))}e=await o(t,e)}t.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:e,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:i.template,projects:i.projects?.map(n_).filter(nb),blocked_by_tags:i.blockedByTags})}let i=await (0,nr.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:t}}});if(429===i.status)throw Error((await i.json()).error||"Rate limit exceeded. Please try again later.");if(!i.ok)throw Error((await i.json()).error.message||"Failed to create issues.");return await i.json()},a[2]=r,a[3]=s,a[4]=o,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i={mutationKey:t,mutationFn:n},a[6]=t,a[7]=n,a[8]=i):i=a[8],(0,na.n)(i)}(t),o=function(e){let t,n,i,a=(0,h.c)(7),s=!!e;return a[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async t=>{let n=await (0,nr.Sr)(e);if(!n.ok){let e=await n.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await n.json()},a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==s||a[4]!==t||a[5]!==n?(i={enabled:s,queryKey:t,queryFn:n,refetchInterval:nj},a[3]=s,a[4]=t,a[5]=n,a[6]=i):i=a[6],(0,ns.I)(i)}(r.data?.jobStatusUrl),l=r.error||o.error,c=r.isError||o.isError;a[2]!==r.isPending||a[3]!==o.data?.job.state||a[4]!==o.isLoading?(n=r.isPending||o.isLoading||["pending","queued","started"].includes(o.data?.job.state||""),a[2]=r.isPending,a[3]=o.data?.job.state,a[4]=o.isLoading,a[5]=n):n=a[5];let d=o.data?.job.state==="success";return a[6]!==r.mutate||a[7]!==o.data||a[8]!==l||a[9]!==c||a[10]!==n||a[11]!==d?(i={mutate:r.mutate,data:o.data,error:l,isError:c,isLoading:n,isComplete:d},a[6]=r.mutate,a[7]=o.data,a[8]=l,a[9]=c,a[10]=n,a[11]=d,a[12]=i):i=a[12],i}({issueNode:i}),u=nV(),{loading:p,result:f}=function(e){let t,n,i,a,s=(0,h.c)(8),[r,o]=(0,v.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[l,c]=(0,v.useState)(t),d=(0,no.useRelayEnvironment)(),u=(0,v.useRef)(null);return s[1]!==d||s[2]!==e?(n=()=>{!async function(){o(!0),c(await nM(d,u,e)),o(!1)}()},i=[d,e],s[1]=d,s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,v.useEffect)(n,i),s[5]!==r||s[6]!==l?(a={loading:r,result:l},s[5]=r,s[6]=l,s[7]=a):a=s[7],a}(i),g=(0,v.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]);(0,v.useEffect)(()=>{if(!o||!l)return;let e=new Map;nl(i,t=>{e.set(t.item.tag,t.item)});let n=o.job.completed_issues.map(t=>{let n=e.get(t.tag),[i,a]=n.repository.split("/");return{draftType:n.type,tag:t.tag,parentTag:n.parentTag,blockedByTags:n.blockedByTags,template:"new-issue"===n.type?n.template:void 0,repository:{databaseId:t.repository_id,name:a,owner:{login:i}},number:t.number,title:n.name,url:t.href,assignees:"assignees"in n?n.assignees??[]:[],projectErrors:t.project_errors||[],dependencyErrors:t.dependency_errors||[]}});t(),u(n)},[i,o,l,t,u]);let y=(0,v.useCallback)(()=>{r||l||s()},[r,l,s]),x=(0,v.useCallback)(()=>{r||l||n()},[r,l,n]),b=(0,v.useMemo)(()=>{let e=new Set;return(nl(i,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===i.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===a?"Create 1 issue":`Create ${a} issues`}:e.size>1&&"new-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===a?"Create 1 issue":`Create ${a} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===a?"Create 1 issue":`Create ${a} issues`}},[i,a]),{openItem:_,openPreviewPane:j}=(0,eQ.xx)(),C=(0,v.useCallback)(e=>{r||l||(_(e.item.id,!0),j(),n())},[l,r,n,_,j]),w=(0,v.useMemo)(()=>f[nO]?f[nO]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[f]);return(0,m.jsx)(tz.l,{title:b.title,onClose:x,renderFooter:()=>p?null:(0,m.jsxs)(tz.l.Footer,{className:tQ.dialogFooter,children:[(0,m.jsx)("div",{className:tQ.dialogFooterStatus,children:c&&(0,m.jsx)(tK.v,{variant:"critical",children:d?.message})}),(0,m.jsxs)("div",{className:tQ.dialogFooterActions,children:[(0,m.jsx)(tm.Q,{variant:"default",onClick:x,inactive:r||l,children:"Cancel"}),(0,m.jsx)(tm.Q,{variant:"primary",onClick:y,loading:r||l,disabled:g||c,children:b.button})]})]}),children:p?(0,m.jsx)("div",{className:tQ.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,m.jsx)(tG.A,{})}):g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:w,className:"mb-3"}),(0,m.jsx)(n0,{issueNode:i,onNodeClick:C,statusSelector:e=>{let t=f[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,m.jsx)(ef.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,m.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:b.description}),(0,m.jsx)(n0,{issueNode:i,onNodeClick:C,statusSelector:e=>({trailingVisual:o?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,m.jsx)(ef.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function n0({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i}=(0,eQ.xx)(),a=(0,v.useMemo)(()=>{let t=0;return nl(e,e=>{e.parent&&t++}),t},[e]),s=e=>{if(tx.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}}))},r=e=>{let a=(0,t$.LU)(e.item.id,i),o=n?.(e);return(0,m.jsx)(nn.Item,{title:e.item.name,leadingVisual:(0,m.jsx)(tY,{...e.item}),trailingBadge:(0,m.jsxs)(m.Fragment,{children:[null!=a?(0,m.jsx)(tB.g,{version:a}):void 0,(0,m.jsx)(n1,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:s(e),children:e.children.map(r)},e.item.tag)},o=(0,t$.LU)(e.item.id,i),l=n?.(e);return(0,m.jsxs)(nn,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:a,hasTrailingVisuals:!0,children:[(0,m.jsx)(nn.RootItem,{title:e.item.name,leadingVisual:(0,m.jsx)(tY,{...e.item}),trailingBadge:(0,m.jsxs)(m.Fragment,{children:[null!=o?(0,m.jsx)(tB.g,{version:o}):void 0,(0,m.jsx)(n1,{node:e})]}),trailingVisual:l?.trailingVisual,description:l?.description,onClick:()=>t(e),blockedBy:s(e)}),e.children.map(r)]})}function n1(e){let t,n=(0,h.c)(2),{node:i}=e;if(i.item.repository&&i.item.repository!==i.parent?.item.repository)return n[0]!==i.item.repository?(t=(0,m.jsx)("span",{className:"fgColor-muted no-wrap",children:i.item.repository}),n[0]=i.item.repository,n[1]=t):t=n[1],t}try{nZ.displayName||(nZ.displayName="BulkCreateDialog")}catch{}try{n0.displayName||(n0.displayName="IssueTree")}catch{}try{n1.displayName||(n1.displayName="IssueLocation")}catch{}function n2(e){let t,n,i,a,s,r=(0,h.c)(11),{issueNode:o,disabled:l,onSuccess:c}=e,d=void 0!==l&&l,[u,p]=(0,v.useState)(!1),f=o;for(;f?.parent;)f=f.parent;let g=f,y=new Set;nl(g,e=>y.add(e.item.type));e:{if(1===y.size&&y.has("existing-issue")){t="Review and update";break e}t="Review and create"}let x=t;return y.size>1&&"existing-issue"===o.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),p(!0)},r[0]=n):n=r[0],r[1]!==x||r[2]!==d?(i=(0,m.jsx)(tq.cQ,{commandId:"github:submit-form",variant:"primary",disabled:d,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:x}),r[1]=x,r[2]=d,r[3]=i):i=r[3],r[4]!==c||r[5]!==g||r[6]!==u?(a=u&&(0,m.jsx)(nZ,{issueNode:g,onComplete:()=>{p(!1),c()},onCancel:()=>{p(!1)}}),r[4]=c,r[5]=g,r[6]=u,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,m.jsxs)(m.Fragment,{children:[i,a]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s)}try{n2.displayName||(n2.displayName="BulkCreateButton")}catch{}function n3(e){let t,n,i,a=(0,h.c)(16),{issueTemplate:s,issueNode:r,issueFormRef:o,noRepoAccess:l,onClose:c}=e,d=void 0!==l&&l,[u,p]=v.useState(!1),f=v.useRef(null),{repository:g}=(0,tW.u)(),y=g&&!s&&!g.isBlankIssuesEnabled,{clearSessionData:x}=(0,tW.u)();a[0]!==x||a[1]!==o?(t=()=>{x(),o.current?.clearSessionStorage()},a[0]=x,a[1]=o,a[2]=t):t=a[2];let b=t;a[3]!==b||a[4]!==c?(n=()=>{b(),c?.()},a[3]=b,a[4]=c,a[5]=n):n=a[5];let _=n;if(r?.parent||r?.children.length){let e;return a[6]!==_||a[7]!==r||a[8]!==d?(e=(0,m.jsx)(n2,{issueNode:r,disabled:d,onSuccess:_}),a[6]=_,a[7]=r,a[8]=d,a[9]=e):e=a[9],e}if(!g||!g.hasIssuesEnabled)return null;if(y){let e,t,n;return a[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tq.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:f,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),p(!0)},children:"Create"}),a[10]=e):e=a[10],a[11]!==u?(t=u&&(0,m.jsx)(tz.l,{title:"Select a template",onClose:()=>p(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>p(!1)}],returnFocusRef:f,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),a[11]=u,a[12]=t):t=a[12],a[13]!==t?(n=(0,m.jsxs)(m.Fragment,{children:[e,t]}),a[13]=t,a[14]=n):n=a[14],n}return a[15]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tH.l,{hideCreateMore:!0,className:"width-auto"}),a[15]=i):i=a[15],i}try{n3.displayName||(n3.displayName="CreateIssueButton")}catch{}var n4=n(99726),n5=n(73189),n6=n(25641),n7=n(88752);function n8(e){let t,n=(0,h.c)(8),{messageId:i,messageIndex:a,messageTimestamp:s}=e,{openPreviewPane:r,openItem:o,updateItem:l}=(0,eQ.xx)(),c=(0,tE.qw)();return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==o||n[4]!==r||n[5]!==c||n[6]!==l?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,t$.by)(e,i,s);break;case"file-diff":n=(0,t$.g)(e,i,s);break;case"thread-scoped-file":n=(0,t$.oR)({ref:e,messageIndex:a,messageId:i,timestamp:s});break;case"draft-issue":case"draft-update-issue":n=(0,t$.oR)({ref:e,messageIndex:a,messageId:i});break;case"issue":n=(0,t$.SI)(e,i);break;default:for(let t of c)if(t.previewComponents?.[e.type]){n=(0,t$.Bx)(e,i);break}}n&&(t?.preventDefault(),l(n),o(n.id),r())},n[0]=i,n[1]=a,n[2]=s,n[3]=o,n[4]=r,n[5]=c,n[6]=l,n[7]=t):t=n[7],t}function n9(e){let t,n,i,a,s,r=(0,h.c)(20),{className:o,messageId:l,messageIndex:c,messageTimestamp:d,references:u,size:p}=e;r[0]!==l||r[1]!==c||r[2]!==d?(t={messageId:l,messageIndex:c,messageTimestamp:d},r[0]=l,r[1]=c,r[2]=d,r[3]=t):t=r[3];let f=n8(t),{updateItem:g,versionedItems:y}=(0,eQ.xx)();return r[4]!==l||r[5]!==c||r[6]!==d||r[7]!==u||r[8]!==g?(n=()=>{for(let e of u){let t=(0,t$.oR)({ref:e,messageIndex:void 0!==c?c:1,messageId:l,timestamp:d});null!=t&&g(t)}},i=[l,c,d,u,g],r[4]=l,r[5]=c,r[6]=d,r[7]=u,r[8]=g,r[9]=n,r[10]=i):(n=r[9],i=r[10]),(0,v.useEffect)(n,i),r[11]!==c||r[12]!==y?(a=e=>(0,t$.wt)(e,c,y),r[11]=c,r[12]=y,r[13]=a):a=r[13],r[14]!==o||r[15]!==f||r[16]!==u||r[17]!==p||r[18]!==a?(s=(0,m.jsx)(n7.t,{references:u,onClickReference:f,size:p,className:o,getReferenceVersion:a}),r[14]=o,r[15]=f,r[16]=u,r[17]=p,r[18]=a,r[19]=s):s=r[19],s}try{n9.displayName||(n9.displayName="ChatMessageReferences")}catch{}var ie=n(4817);let it=(0,v.createContext)(null),ii=()=>{let e=(0,v.useContext)(it);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{it.displayName||(it.displayName="ContentPreviewBlockContext")}catch{}var ia=n(85094),is=n(47970),ir=n(46665),io=n(39876),il=n(23967),ic=n(22072);function id(e){let t,n,i,a=(0,h.c)(4),{className:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,m.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),a[1]=n):n=a[1],a[2]!==s?(i=(0,m.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:s,children:[t,n]}),a[2]=s,a[3]=i):i=a[3],i}try{id.displayName||(id.displayName="ExpandIcon")}catch{}let iu={container:"FileBlock-module__container--Dzsqa",header:"FileBlock-module__header--AdNd3",language:"FileBlock-module__language--hjnkp",name:"FileBlock-module__name--PRLLi",previewCode:"FileBlock-module__previewCode--xp45Y",isClipped:"FileBlock-module__isClipped--g6E0E",expandIconContainer:"FileBlock-module__expandIconContainer--re33w",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--QtzBn"};function im(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function ih(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_,j,C,w,N=(0,h.c)(89),{language:S,name:I,url:k,code:T,line:L,children:E,isClipped:R,isStreaming:A,index:D,startOffset:P,endOffset:O}=e,{message:M}=(0,ir.V)(),{updateItem:F,openItem:B,openPreviewPane:$,versionedItems:U,getOpenItems:V}=(0,eQ.xx)(),{messageIndex:H,messageId:W,messageTimestamp:q,autoOpenPreviewPane:z,markdown:G,hasAutoOpenedPreviewPaneRef:K,setHasAutoOpenedPreviewPane:Q}=ii(),{name:Y}=(0,il.vL)(S),J=`file:${I}`,X=`${J}#${H}.${L}`,Z=!!T,ee=U.get(J)??[],et=ee.indexOf(X),en=ee.length>1&&-1!==et?et+1:null;N[0]!==M.references||N[1]!==k?(t=function(e,t){if(!tx.W.fileBlockRefMatching||!e||!t)return;let n=im(e);return t.find(e=>im(e.url)===n)}(k,M.references?.filter(ip)),N[0]=M.references,N[1]=k,N[2]=t):t=N[2];let ei=t;N[3]!==ei||N[4]!==V||N[5]!==X||N[6]!==D||N[7]!==B||N[8]!==$?(n=(e,t)=>{(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...tx.W.fileBlockRefMatching?{isRepoFile:!!ei}:{}}),B(X,void 0===t||t||V().length<1||0===D),e&&$()},N[3]=ei,N[4]=V,N[5]=X,N[6]=D,N[7]=B,N[8]=$,N[9]=n):n=N[9];let ea=n;N[10]!==T||N[11]!==ei||N[12]!==X||N[13]!==A||N[14]!==S||N[15]!==G||N[16]!==W||N[17]!==q||N[18]!==I||N[19]!==Z||N[20]!==F?(i=()=>{let e=T?.trimEnd();Z&&W!==tg.Wp&&-1!==G.indexOf(e)&&(tx.W.fileBlockRefMatching?F({messageId:W,id:X,language:S,name:I,value:T,type:"file",timestamp:new Date(q),isStreaming:A,isUserEdited:!1,reference:(()=>{if(!ei)return;let e=function(e){if(!tx.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(ei.url);return{type:"file",url:im(ei.url),path:ei.path,repoID:ei.repoID,repoOwner:e?.owner??ei.repoOwner??"",repoName:e?.name??ei.repoName??"",ref:ei.ref,commitOID:ei.commitOID}})()}):F({messageId:W,id:X,language:S,name:I,value:T,type:"file",timestamp:new Date(q),isStreaming:A,isUserEdited:!1}))},N[10]=T,N[11]=ei,N[12]=X,N[13]=A,N[14]=S,N[15]=G,N[16]=W,N[17]=q,N[18]=I,N[19]=Z,N[20]=F,N[21]=i):i=N[21],N[22]!==T||N[23]!==ei||N[24]!==X||N[25]!==D||N[26]!==A||N[27]!==S||N[28]!==G||N[29]!==W||N[30]!==q||N[31]!==I||N[32]!==Z||N[33]!==F||N[34]!==k?(a=[T,S,W,I,k,F,X,Z,q,A,G,ei,D],N[22]=T,N[23]=ei,N[24]=X,N[25]=D,N[26]=A,N[27]=S,N[28]=G,N[29]=W,N[30]=q,N[31]=I,N[32]=Z,N[33]=F,N[34]=k,N[35]=a):a=N[35],(0,v.useEffect)(i,a),N[36]!==z||N[37]!==K||N[38]!==A||N[39]!==W||N[40]!==ea||N[41]!==Z||N[42]!==Q?(s=()=>{A&&Z&&W!==tg.Wp&&(ea(z&&!K.current,!1),Q(!0))},r=[A,Z,ea,z,W,K,Q],N[36]=z,N[37]=K,N[38]=A,N[39]=W,N[40]=ea,N[41]=Z,N[42]=Q,N[43]=s,N[44]=r):(s=N[43],r=N[44]),(0,v.useEffect)(s,r);let[es,er]=(0,v.useState)(!1),{publicCodeReferences:eo,codeVulnerabilities:el}=(0,io.R)(M.copilotAnnotations,P,O);N[45]!==ea?(o=()=>ea(!0),N[45]=ea,N[46]=o):o=N[46];let ec=`View file: ${I}`,ed=`chat-message-view-file-${I}`,eu=A?(0,m.jsx)(tG.A,{size:"small",className:ie.sX}):il.Yr.has(Y)?(0,m.jsx)(ef.MarkdownIcon,{className:ie.sX}):(0,m.jsx)(ef.CodeIcon,{className:ie.sX});N[47]!==I?(l=(0,m.jsx)("span",{className:iu.name,children:I}),N[47]=I,N[48]=l):l=N[48],N[49]!==en?(c=null!==en&&(0,m.jsx)(tB.g,{version:en}),N[49]=en,N[50]=c):c=N[50],N[51]!==iu.language||N[52]!==eu||N[53]!==l||N[54]!==c?(d=(0,m.jsxs)("div",{className:iu.language,children:[eu,l,c]}),N[51]=iu.language,N[52]=eu,N[53]=l,N[54]=c,N[55]=d):d=N[55],N[56]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)("div",{className:iu.expandIconContainer,children:(0,m.jsx)(id,{})}),N[56]=u):u=N[56],N[57]!==iu.header||N[58]!==d?(p=(0,m.jsxs)("div",{className:iu.header,children:[d,u]}),N[57]=iu.header,N[58]=d,N[59]=p):p=N[59];let em=R&&iu.isClipped;return N[60]!==em?(f=(0,x.$)(iu.previewCode,em),N[60]=em,N[61]=f):f=N[61],N[62]!==E?(g=(0,m.jsx)("code",{children:E}),N[62]=E,N[63]=g):g=N[63],N[64]!==f||N[65]!==g?(y=(0,m.jsx)("pre",{className:f,"aria-hidden":!0,children:g}),N[64]=f,N[65]=g,N[66]=y):y=N[66],N[67]!==ec||N[68]!==ed||N[69]!==p||N[70]!==y||N[71]!==iu.container||N[72]!==o?(b=(0,m.jsxs)("button",{className:iu.container,onClick:o,"aria-label":ec,"data-testid":ed,children:[p,y]}),N[67]=ec,N[68]=ed,N[69]=p,N[70]=y,N[71]=iu.container,N[72]=o,N[73]=b):b=N[73],N[74]!==el||N[75]!==eo.length||N[76]!==er?(_=(eo.length>0||el.length>0)&&(0,m.jsx)("div",{className:iu.insightsButtonContainer,children:(0,m.jsx)(tt.K,{variant:"invisible",size:"small",icon:ef.ShieldIcon,"aria-label":"Code insights",onClick:()=>er(!0)})}),N[74]=el,N[75]=eo.length,N[76]=er,N[77]=_):_=N[77],N[78]!==b||N[79]!==_?(j=(0,m.jsxs)("div",{className:"position-relative",children:[b,_]}),N[78]=b,N[79]=_,N[80]=j):j=N[80],N[81]!==el||N[82]!==es||N[83]!==eo||N[84]!==er?(C=es&&(0,m.jsx)(ic.t,{publicCodeReferences:eo,codeVulnerabilities:el,onClose:()=>er(!1)}),N[81]=el,N[82]=es,N[83]=eo,N[84]=er,N[85]=C):C=N[85],N[86]!==j||N[87]!==C?(w=(0,m.jsxs)(m.Fragment,{children:[j,C]}),N[86]=j,N[87]=C,N[88]=w):w=N[88],w}function ip(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{ih.displayName||(ih.displayName="FileBlock")}catch{}let ig="data-fileblock-props",iy=(0,ia.F)(ig),ix=/^name=(?<name>[^\s]+)/,iv=/^name=(?<name>[^\s]+)\n?/,ib=/url=(?<url>[^\s]+)/,i_={code:(e,t)=>{let n=(0,ia.k)(e,ig);return n?(0,m.jsx)(ih,{...n,children:e.children}):t}},ij=/^type=(?<type>[^\s]+)\n?/,iC=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,ia.F)(this.dataAttribute)}constructor(){(0,f._)(this,"transformMarkdown",e=>{(0,is.YR)(e,"code",e=>{let t=e.lang;if(!t)return;let n=iC(ij.exec(e.meta??"")?.groups?.type??"");if(!n)return;let i={lang:t,type:n,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(i))return;let a=this.extractProps(i);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(a)},hChildren:[]}})}),(0,f._)(this,"transformHtml",e=>{(0,is.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,f._)(this,"reactComponents",{div:(e,t)=>{let n=(0,ia.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};function iw(e){let{messages:t}=(0,$.Pk)(),n=(0,ny.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}(e,(0,v.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}var iN=n(46996),iS=n(99852);let iI=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),ik=(e,t)=>{let n=(e||[]).map(e=>iI(e)),i=(t||[]).map(e=>iI(e));return n.length===i.length&&(0,iN.A)((0,iS.A)(n),(0,iS.A)(i))},iT=e=>null==e?"":iI(e),iL=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?iI(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?iT(e):JSON.stringify(e)},iE=(e,t)=>{let n=[],i={};return iT(e.title)!==iT(t.title)&&(n.push("title"),i.title={expected:iL(t.title),actual:iL(e.title)}),iT(e.body)!==iT(t.description)&&(n.push("body"),i.body={expected:iL(t.description),actual:iL(e.body)}),iT(e.repository)!==iT(t.repository)&&(n.push("repository"),i.repository={expected:iL(t.repository),actual:iL(e.repository)}),iT(e.template)!==iT(t.template)&&(n.push("template"),i.template={expected:iL(t.template),actual:iL(e.template)}),iT(e.issueType)!==iT(t.issueType)&&(n.push("issueType"),i.issueType={expected:iL(t.issueType),actual:iL(e.issueType)}),iT(e.milestone)!==iT(t.milestone)&&(n.push("milestone"),i.milestone={expected:iL(t.milestone),actual:iL(e.milestone)}),ik(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:iL(t.assignees),actual:iL(e.assignees)}),ik(e.labels,t.labels)||(n.push("labels"),i.labels={expected:iL(t.labels),actual:iL(e.labels)}),((e,t)=>{let n=(e||[]).map(e=>iI(e)),i=(t||[]).map(e=>iI(e));return n.length===i.length&&(0,iN.A)((0,iS.A)(n),(0,iS.A)(i))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:iL(t.projects),actual:iL(e.projects)}),(0,iN.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:iL(t.templateFormValuesById),actual:iL(e.templateFormValues)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function iR(e){let t,n,i=(0,h.c)(8),{issues:a,isStreaming:s,isIssueTree:r}=e,o=void 0!==r&&r,{messages:l,threadSelectedAt:c}=(0,$.Pk)(),{messageId:d}=ii();i[0]!==o||i[1]!==s||i[2]!==a||i[3]!==d||i[4]!==l||i[5]!==c?(t=()=>{let e=(0,ny.B)(l),t=e[e.length-1],n=e.find(e=>e.id===d);if(!s&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=c&&n.references&&a.length>0){let e=n.references.filter(iA);for(let t of a)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=iE(t,n);if(!e.isEqual)return void(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:d,issueTree:o,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,G.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[s,a,l,c,o,d],i[0]=o,i[1]=s,i[2]=a,i[3]=d,i[4]=l,i[5]=c,i[6]=t,i[7]=n):(t=i[6],n=i[7]),(0,v.useEffect)(t,n)}function iA(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}function iD(e,t,n){let i=(0,v.useRef)(n);return(0,v.useMemo)(()=>{let n=t(e);return null!=n&&(i.current=n),i.current},[e,t])}let iP={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t}},iO=e=>{try{let t=(0,nU.Hh)(e);return iP.fromUnknown(t)}catch{return null}};function iM(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w=(0,h.c)(89),{yaml:N,isStreaming:S}=e,[I,k]=(0,v.useState)(S);w[0]!==S?(t=()=>{S&&k(!0)},n=[S],w[0]=S,w[1]=t,w[2]=n):(t=w[1],n=w[2]),(0,v.useEffect)(t,n);let{updateItem:T,openItem:L,openPreviewPane:E,closeItem:R,versionedItems:A,items:D}=(0,eQ.xx)(),{messageId:P,messageIndex:O,autoOpenPreviewPane:M,hasAutoOpenedPreviewPaneRef:F,setHasAutoOpenedPreviewPane:B}=ii();N=iw(N),w[3]===Symbol.for("react.memo_cache_sentinel")?(i={},w[3]=i):i=w[3];let $=iD(N,iO,i);w[4]!==$?(a=[$],w[4]=$,w[5]=a):a=w[5],w[6]!==S||w[7]!==a?(s={issues:a,isStreaming:S,isIssueTree:!1},w[6]=S,w[7]=a,w[8]=s):s=w[8],iR(s),w[9]===Symbol.for("react.memo_cache_sentinel")?(r=[],w[9]=r):r=w[9],(0,v.useEffect)(i$,r),w[10]!==S||w[11]!==$.type?(o="new-issue",tx.W.draftUpdateIssue&&(o=null==$.type&&S?void 0:"draft-update-issue"===$.type?"update-issue":"new-issue"),w[10]=S,w[11]=$.type,w[12]=o):o=w[12];let U=null!=$.tag&&null!=o?`${o}:${$.tag}#${O}`:void 0;w[13]!==U||w[14]!==A?(l=null!=U?(0,t$.LU)(U,A):null,w[13]=U,w[14]=A,w[15]=l):l=w[15];let V=l;w[16]!==U||w[17]!==D?(c=null!=U?D.get(U):void 0,w[16]=U,w[17]=D,w[18]=c):c=w[18];let H=c,W=$.repository||null==o||H?.type!==o?$.repository:H.repository||"";w[19]!==M||w[20]!==F||w[21]!==U||w[22]!==L||w[23]!==E||w[24]!==B?(d=e=>{let{selectItem:t}=e;null!=U&&(L(U,t),(t||M&&!F.current)&&(E(),B(!0)),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},w[19]=M,w[20]=F,w[21]=U,w[22]=L,w[23]=E,w[24]=B,w[25]=d):d=w[25];let q=d;w[26]!==$.projects?(u=$.projects??[],w[26]=$.projects,w[27]=u):u=w[27],w[28]!==u?(p=u.map(iB),w[28]=u,w[29]=p):p=w[29];let z=p;w[30]!==R||w[31]!==o||w[32]!==U||w[33]!==S||w[34]!==$.assignees||w[35]!==$.body||w[36]!==$.bodyVersion||w[37]!==$.issueNumber||w[38]!==$.issueType||w[39]!==$.labels||w[40]!==$.milestone||w[41]!==$.parentTag||w[42]!==$.tag||w[43]!==$.template||w[44]!==$.templateFormValues||w[45]!==$.title||w[46]!==P||w[47]!==z||w[48]!==W||w[49]!==T?(f=()=>{null!=U&&("update-issue"===o&&W&&$.issueNumber&&R(`issue:${W}/${$.issueNumber}`),T({messageId:P,name:$.title??"",body:$.body,bodyVersion:$.bodyVersion,repository:W,id:U,type:o,tag:$.tag??"",parentTag:$.parentTag,isStreaming:S,template:$.template,issueType:$.issueType,milestone:$.milestone,assignees:$.assignees?.sort(),labels:$.labels?.sort(),projects:z,rawProjectsInput:z.map(iF).sort(),isUserEdited:!1,defaultValuesById:$.templateFormValues??{},issueNumber:$.issueNumber}))},w[30]=R,w[31]=o,w[32]=U,w[33]=S,w[34]=$.assignees,w[35]=$.body,w[36]=$.bodyVersion,w[37]=$.issueNumber,w[38]=$.issueType,w[39]=$.labels,w[40]=$.milestone,w[41]=$.parentTag,w[42]=$.tag,w[43]=$.template,w[44]=$.templateFormValues,w[45]=$.title,w[46]=P,w[47]=z,w[48]=W,w[49]=T,w[50]=f):f=w[50],w[51]!==R||w[52]!==o||w[53]!==U||w[54]!==S||w[55]!==$.assignees||w[56]!==$.body||w[57]!==$.bodyVersion||w[58]!==$.issueNumber||w[59]!==$.issueType||w[60]!==$.labels||w[61]!==$.milestone||w[62]!==$.parentTag||w[63]!==$.projects||w[64]!==$.tag||w[65]!==$.template||w[66]!==$.templateFormValues||w[67]!==$.title||w[68]!==P||w[69]!==z||w[70]!==W||w[71]!==T?(g=[R,o,U,S,$.assignees,$.body,$.bodyVersion,$.issueNumber,$.issueType,$.labels,$.milestone,$.parentTag,$.projects,$.tag,$.template,$.templateFormValues,$.title,P,z,W,T],w[51]=R,w[52]=o,w[53]=U,w[54]=S,w[55]=$.assignees,w[56]=$.body,w[57]=$.bodyVersion,w[58]=$.issueNumber,w[59]=$.issueType,w[60]=$.labels,w[61]=$.milestone,w[62]=$.parentTag,w[63]=$.projects,w[64]=$.tag,w[65]=$.template,w[66]=$.templateFormValues,w[67]=$.title,w[68]=P,w[69]=z,w[70]=W,w[71]=T,w[72]=g):g=w[72],(0,v.useEffect)(f,g),w[73]!==I||w[74]!==U||w[75]!==q?(y=()=>{null!=U&&I&&q({selectItem:!0})},x=[U,q,I],w[73]=I,w[74]=U,w[75]=q,w[76]=y,w[77]=x):(y=w[76],x=w[77]),(0,v.useEffect)(y,x);let G=$.title??"";return w[78]!==S?(b=S?(0,m.jsx)(tG.A,{size:"small",className:ie.sX}):(0,m.jsx)(tY,{type:"new-issue"}),w[78]=S,w[79]=b):b=w[79],w[80]!==V?(_=null!=V&&(0,m.jsx)(tB.g,{"data-testid":"version-label",version:V}),w[80]=V,w[81]=_):_=w[81],w[82]!==q?(j=()=>q({selectItem:!0}),w[82]=q,w[83]=j):j=w[83],w[84]!==G||w[85]!==b||w[86]!==_||w[87]!==j?(C=(0,m.jsx)(nn,{subIssueCount:0,children:(0,m.jsx)(nn.RootItem,{title:G,leadingVisual:b,trailingBadge:_,onClick:j})}),w[84]=G,w[85]=b,w[86]=_,w[87]=j,w[88]=C):C=w[88],C}function iF(e){return e.title}function iB(e){return{title:e}}function i$(){return(0,tv.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{iM.displayName||(iM.displayName="DraftIssueBlock")}catch{}let iU=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(iM,{...e})}},iV={container:"DraftIssueTreeBlock-module__container--framP"},iH={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),t}};function iW(e){try{let t=(0,nU.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(iH.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function iq({data:e}){let t=iD(e,iW,[]),{messageId:n}=ii(),{updateItem:i,openItem:a,openPreviewPane:s}=(0,eQ.xx)(),r=(0,v.useMemo)(()=>Array.from(nc(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags).values()).filter(e=>!e.parent),[t]);function o(e){if(!e.url)return;let[t,r]=e.repository?.split("/")??[];if(!t||!r||!e.number)return;let o=`issue:${t}/${r}/${e.number}`;i({messageId:n,name:e.title??"",number:e.number,owner:t,repo:r,id:o,href:e.url,type:"issue"}),a(o),s()}let l=e=>{if(tx.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url??"#",onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),o(e.item))}}))};function c(e){return(0,m.jsx)(nn.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(iz,{item:e.item}),trailingBadge:(0,m.jsx)(iG,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),o(e.item)},blockedBy:l(e),children:e.children.map(c)},e.item.tag)}return(0,m.jsx)("div",{className:iV.container,children:r.map(e=>{let t=-1;return nl(e,()=>t++),(0,m.jsxs)(nn,{subIssueCount:t,children:[(0,m.jsx)(nn.RootItem,{leadingVisual:(0,m.jsx)(iz,{item:e.item}),title:e.item.title??"",trailingBadge:(0,m.jsx)(iG,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),o(e.item)},blockedBy:l(e)}),e.children.map(c)]},e.item.tag)})})}function iz(e){let t=(0,h.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function iG(e){let t,n=(0,h.c)(5),{node:i}=e;if(!i.item.repository||!i.item.number)return null;if(i.item.repository===i.parent?.item.repository){let e;return n[0]!==i.item.number?(e=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",i.item.number]}),n[0]=i.item.number,n[1]=e):e=n[1],e}return n[2]!==i.item.number||n[3]!==i.item.repository?(t=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:[i.item.repository,"#",i.item.number]}),n[2]=i.item.number,n[3]=i.item.repository,n[4]=t):t=n[4],t}try{iq.displayName||(iq.displayName="IssueTreeBlock")}catch{}try{iz.displayName||(iz.displayName="LeadingVisual")}catch{}try{iG.displayName||(iG.displayName="IssueLocation")}catch{}function iK(e){return"state"in e?"draft"===e.state:"assignees"in e||"labels"in e||"issueType"in e||"projects"in e||"milestone"in e||"template"in e||"templateFormValues"in e||"body"in e}function iQ(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function iY(e){try{let t=(0,nU.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return iP.fromUnknown(e);case"open":case"closed":return iH.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function iJ({data:e,isStreaming:t}){let n=iD(e=iw(e),iY,[]),{items:i,updateItem:a,openItem:s,openPreviewPane:r,closeItem:o,versionedItems:l}=(0,eQ.xx)(),{messageId:c,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:p,setHasAutoOpenedPreviewPane:f}=ii(),g=(0,v.useCallback)(e=>iK(e)&&e.tag?`new-issue:${e.tag}#${d}`:iQ(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[d]);iR({issues:n,isStreaming:t,isIssueTree:!0}),(0,v.useEffect)(()=>{for(let e of n)e.tag&&g(e)&&(iK(e)&&a({messageId:c,type:"new-issue",id:`new-issue:${e.tag}#${d}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>({title:e})).sort((e,t)=>e.title.localeCompare(t.title)),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[]}),iQ(e)&&e.repository&&e.number&&e.url&&(o(`issue:${e.repository}/${e.number}`),a({messageId:c,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[]})))},[g,t,n,c,d,a,o]);let y=(0,v.useCallback)((e,{selectItem:t})=>{let n=g(e);n&&(s(n,t),(t||u&&!p.current)&&(r(),f(!0)),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[g,s,u,p,r,f]),x=(0,v.useCallback)(e=>{let t=[...i.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,a=(0,t$.oy)(n),s=l.get(a),r=s?.at(-1);if(!r)return;let o=i.get(r);if(o)switch(o?.type){case"new-issue":return iP.fromUnknown(o);case"existing-issue":return iH.fromUnknown(o);default:return}},[i,l]),b=(0,v.useMemo)(()=>{let e=new Set(n.map(e=>e.tag)),t=Array.from(new Set([...new Set(n.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(n.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>x(e)).filter(e=>null!=e);return Array.from(nc([...n,...t],e=>e.tag,e=>e.parentTag,e=>e.blockedByTags).values()).filter(e=>!e.parent)},[n,x]),_=function(e){let t,n,i=(0,h.c)(4),[a,s]=(0,v.useState)(!1),r=(0,v.useRef)(e);return i[0]!==a||i[1]!==e?(t=()=>{e&&(r.current=!0),e||!r.current||a||s(!0)},n=[e,a],i[0]=a,i[1]=e,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,v.useEffect)(t,n),a}(t);(0,v.useEffect)(()=>{if(!_)return;let e=!0;for(let t of b.values()){if(iK(t.item)){y(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)iK(n.item)&&(y(n.item,{selectItem:e}),e=!1)}},[_,b,y]);let j=e=>{if(tx.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",onClick:()=>{y(e.item,{selectItem:!0})}}))},C=e=>{let n=g(e.item),i=n?(0,t$.LU)(n,l):null;return(0,m.jsx)(nn.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(iX,{isStreaming:t,item:e.item}),trailingBadge:null!=i?(0,m.jsx)(tB.g,{version:i}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),y(e.item,{selectItem:!0}))},href:iQ(e.item)?e.item.url:void 0,blockedBy:j(e),children:e.children.map(C)},e.item.tag)};return(0,m.jsx)("div",{className:iV.container,children:b.map(e=>{let n=g(e.item),i=n?(0,t$.LU)(n,l):null,a=-1;return nl(e,()=>a++),(0,m.jsxs)(nn,{subIssueHeaderText:iQ(e.item)?"New sub-issues":void 0,subIssueCount:a,children:[(0,m.jsx)(nn.RootItem,{title:e.item.title??"",leadingVisual:(0,m.jsx)(iX,{isStreaming:t,item:e.item}),trailingBadge:null!=i?(0,m.jsx)(tB.g,{"data-testid":"version-label",version:i}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),y(e.item,{selectItem:!0}))},href:iQ(e.item)?e.item.url:void 0,blockedBy:j(e)}),e.children.map(C)]},e.item.tag)})})}function iX(e){let t=(0,h.c)(4),{isStreaming:n,item:i}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tG.A,{size:"small",className:`${ie.sX} mt-1`}),t[0]=e):e=t[0],e}if(iK(i)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tY,{type:"new-issue"}),t[1]=e):e=t[1],e}if(iQ(i)){let e;return t[2]!==i.state?(e=(0,m.jsx)(tY,{type:"existing-issue",state:i.state}),t[2]=i.state,t[3]=e):e=t[3],e}}try{iJ.displayName||(iJ.displayName="DraftIssueTreeBlock")}catch{}try{iX.displayName||(iX.displayName="LeadingVisual")}catch{}let iZ=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(iJ,{...e})}};var i0=n(72534);function i1(e){let t,n,i,a,s,r,o=(0,h.c)(28),{owner:l,repo:c,issueNumber:d,href:u,children:p}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:x}=(0,eQ.xx)(),{messageId:b}=ii(),_=(0,$.A3)("messages"),j=Number(d),C=`issue:${l}/${c}/${j}`;o[0]!==C||o[1]!==x?(t=x.get(C),o[0]=C,o[1]=x,o[2]=t):t=o[2];let w=t;o[3]!==w?.name||o[4]!==b||o[5]!==_||o[6]!==j||o[7]!==l||o[8]!==c?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,o=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),l=o?.title;if(l)return l;let c=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),d=c?.data;return d?.title}(_,b,l,c,j)??w?.name??`Issue #${j}`,o[3]=w?.name,o[4]=b,o[5]=_,o[6]=j,o[7]=l,o[8]=c,o[9]=n):n=o[9];let N=n;return o[10]!==u||o[11]!==C||o[12]!==b||o[13]!==j||o[14]!==l||o[15]!==c||o[16]!==N||o[17]!==f?(i=()=>{l&&c&&f({messageId:b,name:N,number:j,owner:l,repo:c,id:C,href:u,type:"issue"})},a=[C,b,u,j,l,c,N,f],o[10]=u,o[11]=C,o[12]=b,o[13]=j,o[14]=l,o[15]=c,o[16]=N,o[17]=f,o[18]=i,o[19]=a):(i=o[18],a=o[19]),(0,v.useEffect)(i,a),o[20]!==C||o[21]!==g||o[22]!==y?(s=e=>{e.metaKey||e.ctrlKey||(g(C),y(),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},o[20]=C,o[21]=g,o[22]=y,o[23]=s):s=o[23],o[24]!==p||o[25]!==u||o[26]!==s?(r=(0,m.jsx)(Q.A,{href:u,onClick:s,target:"_blank",rel:"noreferrer",children:p}),o[24]=p,o[25]=u,o[26]=s,o[27]=r):r=o[27],r}try{i1.displayName||(i1.displayName="IssueLinkBlock")}catch{}let i2="data-issuelink-props",i3=(0,ia.F)(i2),i4=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,i5={span:(e,t)=>{let n=(0,ia.k)(e,i2);return n?(0,m.jsx)(i1,{...n}):t}};var i6=n(77430),i7=n(94602),i8=n(69497);let i9={list:"IssueListBlock-module__list--hU3Jz",streaming:"IssueListBlock-module__streaming--sTYSD",toggleContent:"IssueListBlock-module__toggleContent--NWbi1",item:"IssueListBlock-module__item--gmkkY",link:"IssueListBlock-module__link--fc5wy",content:"IssueListBlock-module__content--bNFq8",metadata:"IssueListBlock-module__metadata--W4tCj",header:"IssueListBlock-module__header--NtmSe",title:"IssueListBlock-module__title--Di3wj",unknownTitle:"IssueListBlock-module__unknownTitle--JszGm",number:"IssueListBlock-module__number--vsvJy",labels:"IssueListBlock-module__labels--xeeTb",label:"IssueListBlock-module__label--tGgUZ",labelIcon:"IssueListBlock-module__labelIcon--g4B1V",description:"IssueListBlock-module__description--Uf86U",icon:"IssueListBlock-module__icon--qAaLP",open:"IssueListBlock-module__open--CQmwr",draft:"IssueListBlock-module__draft--ymDJ6",done:"IssueListBlock-module__done--bWmcu",closed:"IssueListBlock-module__closed--Iuz7v",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--RB1C7",toggleButton:"IssueListBlock-module__toggleButton--C9dbQ",shimmer:"IssueListBlock-module__shimmer--xZ0Bt",toggleIcon:"IssueListBlock-module__toggleIcon--hynWs"},ae={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function at(e){let t,n,i,a,s,r=(0,h.c)(8),{item:o,isStreaming:l}=e,c=o.author;return o.merged_at?(a=o.merged_at,s="Merged"):o.closed_at?(a=o.closed_at,s="Closed"):o.created_at&&(a=o.created_at,s="Opened"),r[0]!==a?(n=(t=a?new Date(a):null)&&isNaN(t.getTime()),r[0]=a,r[1]=t,r[2]=n):(t=r[1],n=r[2]),n&&(t=null),r[3]!==s||r[4]!==c||r[5]!==l||r[6]!==t?(i=c&&t||!l?(0,m.jsxs)("span",{className:i9.description,children:[c," ",c?s?.toLowerCase():s," ",t&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(eg.A,{date:t,format:"relative"})})]}):null,r[3]=s,r[4]=c,r[5]=l,r[6]=t,r[7]=i):i=r[7],i}let an=e=>{try{let t=(0,nU.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ae.fromUnknown);return null}catch{return null}};function ai(e){let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(39),{data:f,type:g,isStreaming:y}=e;p[0]!==f?(t=()=>an(f)??[],p[0]=f,p[1]=t):t=p[1];let[b,_]=(0,v.useState)(t),{updateItem:j,openItem:C,openPreviewPane:w}=(0,eQ.xx)(),{messageId:N}=ii(),[S,I]=(0,v.useState)(!0);p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,G.G7)("copilot_issue_list_show_more"),p[2]=n):n=p[2];let k=n;p[3]!==S||p[4]!==b?(i=k&&S?b.slice(0,10):b,p[3]=S,p[4]=b,p[5]=i):i=p[5];let T=i,L=k&&b.length>10;p[6]!==f?(a=()=>_(e=>an(f)??e),s=[f],p[6]=f,p[7]=a,p[8]=s):(a=p[7],s=p[8]),(0,v.useEffect)(a,s),p[9]!==g?(r=()=>{"issue"===g?(0,tv.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,tv.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},o=[g],p[9]=g,p[10]=r,p[11]=o):(r=p[10],o=p[11]),(0,v.useEffect)(r,o);let E=y&&i9.streaming;if(p[12]!==E?(l=(0,x.$)(i9.list,E),p[12]=E,p[13]=l):l=p[13],p[14]!==y||p[15]!==N||p[16]!==C||p[17]!==w||p[18]!==g||p[19]!==j||p[20]!==T){let e;p[22]!==y||p[23]!==N||p[24]!==C||p[25]!==w||p[26]!==g||p[27]!==j||p[28]!==T.length?(e=(e,t)=>{let n={...e,type:g},i=y&&t===T.length-1,{icon:a,colorClass:s}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,m.jsx)(ef.IssueDraftIcon,{"aria-label":"Draft issue"}),t=i9.draft):"closed"===e.state&&e.draft&&(n=(0,m.jsx)(ef.SkipIcon,{"aria-label":"Closed draft issue"}),t=i9.draft):(n=(0,m.jsx)(ef.IssueClosedIcon,{"aria-label":"Closed issue"}),t=i9.done):(n=(0,m.jsx)(ef.IssueOpenedIcon,{"aria-label":"Open issue"}),t=i9.open);else if("pr"===e.type){let i="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!i&&e.draft?(n=(0,m.jsx)(ef.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=i9.draft):"open"!==e.state||i||e.draft?"closed"!==e.state||i?"closed"===e.state&&i&&(n=(0,m.jsx)(ef.GitMergeIcon,{"aria-label":"Merged pull request"}),t=i9.done):(n=(0,m.jsx)(ef.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=i9.closed):(n=(0,m.jsx)(ef.GitPullRequestIcon,{"aria-label":"Pull request"}),t=i9.open)}return{icon:n,colorClass:t}}(n);return(0,m.jsx)("li",{className:i9.item,children:(0,m.jsxs)("div",{className:i9.content,children:[(0,m.jsx)("div",{className:(0,x.$)(s,i9.icon),children:a}),(0,m.jsxs)("div",{className:i9.header,children:[i&&!n.title?null:(0,m.jsx)("a",{...(0,tP.G)("issue-list-item-link"),href:n.url??"#",className:i9.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),n.url))if("issue"===n.type){(0,tv.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:i}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(n.url);if(e&&t&&i){let a=`issue:${e}/${t}/${i}`;j({messageId:N,name:n.title??`Issue #${i}`,number:i,owner:e,repo:t,id:a,href:n.url,type:"issue"}),C(a),w()}}else(0,tv.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(n.url,"_self")},target:"_blank",rel:"noreferrer",children:n.title||void 0===n.number?(0,m.jsxs)(m.Fragment,{children:[n.title?(0,m.jsx)("span",{className:i9.title,children:n.title}):(0,m.jsx)("span",{className:(0,x.$)(i9.title,i9.unknownTitle),children:"Unknown issue"}),void 0!==n.number&&(0,m.jsxs)("span",{className:i9.number,children:["#",n.number]})]}):(0,m.jsxs)("span",{className:i9.title,children:["#",n.number]})}),(0,m.jsxs)("div",{className:i9.labels,children:[n.labels?.length?n.labels.map(as):null,0!==n.comments&&void 0!==n.comments&&(0,m.jsxs)(eG.A,{size:"small",variant:"secondary",children:[(0,m.jsx)(ef.CommentIcon,{className:i9.labelIcon,size:12}),n.comments]})]})]}),(0,m.jsx)(at,{item:n,isStreaming:i}),(0,m.jsx)("div",{className:i9.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,m.jsx)("div",{className:i9.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,m.jsx)(ef.PersonIcon,{size:12})}):(0,m.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,m.jsx)(i7.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(aa)})})})]})},t)},p[22]=y,p[23]=N,p[24]=C,p[25]=w,p[26]=g,p[27]=j,p[28]=T.length,p[29]=e):e=p[29],c=T.map(e),p[14]=y,p[15]=N,p[16]=C,p[17]=w,p[18]=g,p[19]=j,p[20]=T,p[21]=c}else c=p[21];return p[30]!==S||p[31]!==L||p[32]!==y||p[33]!==b?(d=L&&(0,m.jsx)("li",{className:i9.item,children:(0,m.jsx)("div",{className:(0,x.$)(i9.content,i9.toggleContent),children:(0,m.jsxs)("button",{type:"button",className:(0,x.$)(i9.toggleButton,y&&i9.shimmer),onClick:()=>I(!S),"aria-expanded":!S,"aria-controls":"issue-list",children:[(0,m.jsx)("span",{className:i9.toggleIcon,children:S?(0,m.jsx)(ef.UnfoldIcon,{size:16}):(0,m.jsx)(ef.FoldIcon,{size:16})}),S?`Show ${b.length-10} more`:"Show less"]})})}),p[30]=S,p[31]=L,p[32]=y,p[33]=b,p[34]=d):d=p[34],p[35]!==c||p[36]!==d||p[37]!==l?(u=(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{id:"issue-list",className:l,children:[c,d]})}),p[35]=c,p[36]=d,p[37]=l,p[38]=u):u=p[38],u}function aa(e){return(0,m.jsx)(i6.r,{src:e,alt:"Assignee avatar"},e)}function as(e){return(0,m.jsx)(eG.A,{size:"small",variant:"secondary",className:i9.label,children:(0,m.jsx)(i8.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{at.displayName||(at.displayName="Description")}catch{}try{ai.displayName||(ai.displayName="ListBlock")}catch{}let ar=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(ai,{...e})}},ao=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,m.jsx)(iq,{...e})}};function al(e){let t,n,i=(0,h.c)(6),a=(0,H.b)(),s=(0,$.Pk)();i[0]!==a||i[1]!==s||i[2]!==e?(t=async()=>{(0,tv.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,n$.W)(s)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await a.sendChatMessage({thread:(0,n$.W)(s),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:s.currentTopic,context:s.context,customInstructions:s.customInstructions,model:s.model,intent:tg.wh.planningAgent})},i[0]=a,i[1]=s,i[2]=e,i[3]=t):t=i[3];let r=t;return i[4]!==r?(n={convertAllToDraftIssues:r},i[4]=r,i[5]=n):n=i[5],n}let ac={container:"PlanningTasklistBlock-module__container--Vl4PK"};function ad(e){let t,n=(0,h.c)(8),{children:i,hasAggregateTask:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}if(a){let e,t;return n[1]!==r?(e=(0,m.jsxs)(eZ.l.GroupHeading,{as:"h4",className:"my-0",children:["Individual Tasks",(0,m.jsx)(tJ.A,{className:"ml-2 pb-1",children:r})]}),n[1]=r,n[2]=e):e=n[2],n[3]!==i||n[4]!==e?(t=(0,m.jsxs)(eZ.l.Group,{children:[e,i]}),n[3]=i,n[4]=e,n[5]=t):t=n[5],t}return n[6]!==i?(t=(0,m.jsx)(m.Fragment,{children:i}),n[6]=i,n[7]=t):t=n[7],t}try{ad.displayName||(ad.displayName="SubtasksGroup")}catch{}var au=n(35673);function am(e){let t,n,i,a=(0,h.c)(10),{onConvertAllToDraftIssues:s,taskCount:r,title:o}=e;return a[0]!==r?(t=(0,m.jsx)(tJ.A,{className:"ml-2 pb-1",children:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==s||a[3]!==r||a[4]!==o?(n=r>0&&(0,m.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{"aria-label":`Tasklist '${o}' options`,icon:ef.KebabHorizontalIcon,variant:"invisible"})}),(0,m.jsx)(au.UJ,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(eZ.l.Item,{onSelect:s,children:"Draft all as issues"})})})]})}),a[2]=s,a[3]=r,a[4]=o,a[5]=n):n=a[5],a[6]!==t||a[7]!==n||a[8]!==o?(i=(0,m.jsxs)(eZ.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),a[6]=t,a[7]=n,a[8]=o,a[9]=i):i=a[9],i}try{am.displayName||(am.displayName="TasklistHeader")}catch{}let ah="copilot-chat-spec-task";function ap(e,t){if(e&&t)return`${ah}-${e}-${t}`}function af(e){let{selectedThreadID:t}=(0,$.Pk)(),n=function(e){let t,n=(0,h.c)(3),i=(0,$.Pk)();return n[0]!==i.selectedThreadID||n[1]!==e.tag?(t=ap(i.selectedThreadID,e.tag),n[0]=i.selectedThreadID,n[1]=e.tag,n[2]=t):t=n[2],t}(e),{createTask:i,isCreating:a}=(0,Y.Z)({}),s=e.name,r=e.repository,o=(0,v.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,v.useCallback)(()=>{if(!a){(0,tv.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});try{if(!r)throw Error("Repository is required to start a task");let e=r.split("/");if(2!==e.length||!e[0]||!e[1])throw Error('Invalid repository format. Expected "owner/repo"');if(!n)throw Error("Unable to generate task ID - thread or task tag missing");i({nwo:r,problemStatement:o,title:s,eventType:ah},n)}catch{}}},[a,t,n,i,r,o,s]),isStarting:a}}function ag(e){let t=(0,$.Pk)(),n=e.map(e=>ap(t.selectedThreadID,e.tag)),{tasks:i,isLoading:a}=(0,O.si)({});return(0,v.useMemo)(()=>n.map(e=>{if(!e)return{isLoading:!1,pullRequest:void 0};let t=i.find(t=>t.event_identifiers?.includes(e));return{isLoading:a||!!t?.isOptimistic,pullRequest:t?.pull}}),[n,i,a])}function ay(e){let t,n,i=(0,h.c)(4);i[0]!==e?(t=e?[e]:[],i[0]=e,i[1]=t):t=i[1];let a=ag(t);return i[2]!==a[0]?(n=a[0]??{isLoading:!1,pullRequest:void 0},i[2]=a[0],i[3]=n):n=i[3],n}function ax(e){let t,n=(0,h.c)(4),{isStreaming:i,onClick:a,task:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,m.jsx)(B.Fn,{children:(0,m.jsx)(av,{isStreaming:i,onClick:a,task:s})}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}function av(e){let t,n,i,a,s,r,o,l=(0,h.c)(22),{isStreaming:c,onClick:d,task:u}=e;l[0]!==u?(t=[u],l[0]=u,l[1]=t):t=l[1];let{pullRequest:p,isLoading:f}=ag(t)[0],{versionedItems:g}=(0,eQ.xx)();l[2]!==u.id||l[3]!==g?(n=(0,t$.LU)(u.id,g),l[2]=u.id,l[3]=g,l[4]=n):n=l[4];let y=n;l[5]!==f||l[6]!==c||l[7]!==p?(i=()=>c||f?(0,m.jsx)(tG.A,{size:"small",className:ie.sX}):null!=p?(0,m.jsx)(ef.GitPullRequestIcon,{}):(0,m.jsx)(ef.TasklistIcon,{}),l[5]=f,l[6]=c,l[7]=p,l[8]=i):i=l[8];let x=i,v=u.isAggregate?"mt-3":"";return l[9]!==x?(a=(0,m.jsx)(eZ.l.LeadingVisual,{children:x()}),l[9]=x,l[10]=a):a=l[10],l[11]!==y?(s=null!=y&&(0,m.jsx)(tB.g,{version:y}),l[11]=y,l[12]=s):s=l[12],l[13]!==s?(r=(0,m.jsx)(eZ.l.TrailingVisual,{children:s}),l[13]=s,l[14]=r):r=l[14],l[15]!==v||l[16]!==d||l[17]!==a||l[18]!==r||l[19]!==u.id||l[20]!==u.name?(o=(0,m.jsxs)(eZ.l.Item,{className:v,onSelect:d,children:[a,u.name,r]},u.id),l[15]=v,l[16]=d,l[17]=a,l[18]=r,l[19]=u.id,l[20]=u.name,l[21]=o):o=l[21],o}try{ax.displayName||(ax.displayName="TasklistItem")}catch{}try{av.displayName||(av.displayName="TasklistItemImpl")}catch{}let ab=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0,a_="data-planning-tasklist-block";function aj({yaml:e,isStreaming:t}){let[n,i]=(0,v.useState)(t),a=(0,v.useRef)(new Set);(0,v.useEffect)(()=>{t&&i(!0)},[t]);let{selectedThreadID:s}=(0,$.Pk)(),{updateItem:r,openItem:o,openPreviewPane:l}=(0,eQ.xx)(),{messageId:c,messageIndex:d,setHasAutoOpenedPreviewPane:u}=ii(),h=(0,v.useRef)({name:"Tasklist",tasks:[]}),p=(0,v.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,nU.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("aggregateTask"in n&&ab(n.aggregateTask)&&(t.aggregateTask=n.aggregateTask),"tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&ab(e)&&t.tasks.push(e);return t}catch{return(0,tv.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,s);return null!=t?(h.current=t,t):h.current},[e,s]),f=(0,v.useMemo)(()=>p.tasks.map(e=>{let n=`planning-task:${e.tag}#${d}`,{title:i,...a}=e;return{...a,name:i,messageId:c,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,isAggregate:!1,aggregateTag:p.aggregateTask?.tag,subtaskTags:[]}}),[p,d,c,t]),g=(0,v.useMemo)(()=>{if(!tx.W.planningAgentAggregateTask||!p.aggregateTask)return null;let e=`planning-task:${p.aggregateTask.tag}#${d}`;return{...p.aggregateTask,name:p.aggregateTask.title,messageId:c,id:e,type:"planning-task",isUserEdited:!1,isStreaming:t,isAggregate:!0,aggregateTag:p.aggregateTask?.tag,subtaskTags:f.map(e=>e.tag)}},[p.aggregateTask,d,c,t,f]),{convertAllToDraftIssues:y}=al(f.map(e=>e.tag)),x=(0,v.useCallback)((e,t={})=>{let{selectItem:n}=t;o(e.id,n),l(),u(!0)},[o,l,u]);(0,v.useEffect)(()=>{g&&r(g);for(let e=0;e<f.length;e++){let t=f[e];r(t),n&&!a.current.has(t.id)&&(a.current.add(t.id),x(t,{selectItem:0===e}))}},[g,f,r,x,n]);let b=(0,v.useCallback)(e=>x(e),[x]);(0,v.useEffect)(()=>(0,tv.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:s}),[s]),(0,v.useEffect)(()=>{!t&&n&&0===f.length&&(0,tv.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:s})},[s,n,t,f]);let _=f.map(e=>(0,m.jsx)(ax,{isStreaming:!!t,onClick:()=>b(e),task:e},e.id)),j=g?(0,m.jsx)(ax,{isStreaming:!!t,onClick:()=>b(g),task:g},g.id):(0,m.jsx)(am,{onConvertAllToDraftIssues:y,taskCount:f.length,title:p?.name??"Tasklist"});return(0,m.jsx)("div",{className:ac.container,children:(0,m.jsxs)(eZ.l,{variant:"full",showDividers:!0,children:[j,g&&f.length>0&&(0,m.jsx)(eZ.l.Divider,{}),(0,m.jsx)(ad,{hasAggregateTask:!!g,isStreaming:!!t,taskCount:f.length,children:_})]})})}try{aj.displayName||(aj.displayName="PlanningTasklistBlock")}catch{}let aC=(0,ia.F)(a_),aw={div:(e,t)=>{let n=(0,ia.k)(e,a_);return n?(0,m.jsx)(aj,{...n}):t}},aN={markdownOverrides:"MarkdownViewer-module__markdownOverrides--xtpOl"},aS=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:i,markdown:a,...s})=>{let r=(0,v.useRef)(!1),o=(0,v.useCallback)(e=>{r.current=e},[]),l=(0,v.useMemo)(()=>[...s.extensions??[],function(e){return{transformMarkdown:t=>(0,is.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&ix.exec(e);if(n)return{name:n.groups?.name,code:t};let i=iv.exec(t);return i?{name:i.groups?.name,code:t.replace(iv,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=ib.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),o=6===r.length,l=o?r.join(`
`):`${r.join(`
`)}
`,c=t.position?.start.line??0;t.value=l,t.data={...t.data,hName:"code",hProperties:{[iy]:JSON.stringify({language:n,name:i,url:s,code:a,line:c,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,is.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&iy in i.properties&&n.children.splice(t,1,i)}),reactComponents:i_}}([]),{transformMarkdown:e=>(0,is.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=i4.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[i3]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,i0.d)(e)})}}}),reactComponents:i5},ar,ao,iU,iZ,{transformMarkdown:e=>(0,is.YR)(e,"code",e=>{"yaml"===e.lang&&"planning-tasklist"===iC(ij.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[aC]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,is.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&aC in i.properties&&n.children.splice(t,1,i)}),reactComponents:aw}],[s.extensions]);return(0,m.jsx)(it.Provider,{value:(0,v.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:i,markdown:a,hasAutoOpenedPreviewPaneRef:r,setHasAutoOpenedPreviewPane:o}),[e,t,n,i,a,r,o]),children:(0,m.jsx)(ie.To,{...s,markdown:a,extensions:l,chatMode:"immersive",className:aN.markdownOverrides})})},aI=v.memo(aS);try{aS.displayName||(aS.displayName="MarkdownViewer")}catch{}try{aI.displayName||(aI.displayName="MemoizedMarkdownViewer")}catch{}let ak={timelineEvent:"TimelineEvents-module__timelineEvent--FV3V3",icon:"TimelineEvents-module__icon--E6IJb",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3",references:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH"};function aT(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function aL(e,t){return e.references?.some(e=>aT(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function aE(e){let t,n,i,a=(0,h.c)(10),{message:s,messageIndex:r,isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}=e;return a[0]!==s||a[1]!==r?(t=aL(s)&&(0,m.jsx)(aR,{message:s,messageIndex:r}),a[0]=s,a[1]=r,a[2]=t):t=a[2],a[3]!==c||a[4]!==l||a[5]!==o?(n=(0,m.jsx)(aD,{isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}),a[3]=c,a[4]=l,a[5]=o,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i=(0,m.jsxs)(m.Fragment,{children:[t,n]}),a[7]=t,a[8]=n,a[9]=i):i=a[9],i}function aR(e){let t,n,i,a,s,r,o,l=(0,h.c)(24),{message:c,messageIndex:d}=e,{updateItem:u}=(0,eQ.xx)();if(l[0]!==c.createdAt||l[1]!==c.id||l[2]!==c.references||l[3]!==d||l[4]!==u?(t=()=>{if(c.references)for(let e of c.references){let t=(0,t$.oR)({ref:e,messageIndex:d,messageId:c.id,timestamp:c.createdAt});null!=t&&u(t)}},n=[c.references,c.id,d,c.createdAt,u],l[0]=c.createdAt,l[1]=c.id,l[2]=c.references,l[3]=d,l[4]=u,l[5]=t,l[6]=n):(t=l[5],n=l[6]),(0,v.useEffect)(t,n),l[7]!==c.references){i=Symbol.for("react.early_return_sentinel");e:{let e=c.references?.filter(aA);if(!e){i=void 0;break e}for(let t of(a=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||ef.CheckIcon;a.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}l[7]=c.references,l[8]=i,l[9]=a}else i=l[8],a=l[9];return i!==Symbol.for("react.early_return_sentinel")?i:(l[10]!==c.createdAt||l[11]!==c.id||l[12]!==c.references||l[13]!==d?(s=c.references&&c.references.length>0&&(0,m.jsx)(n9,{className:ak.references,messageId:c.id,messageTimestamp:c.createdAt,messageIndex:d,references:c.references,size:"medium"}),l[10]=c.createdAt,l[11]=c.id,l[12]=c.references,l[13]=d,l[14]=s):s=l[14],l[15]!==c.content||l[16]!==c.createdAt||l[17]!==c.id||l[18]!==d||l[19]!==a?(r=a.map(e=>{let{type:t,markdownContent:n,icon:i}=e;return(0,m.jsxs)("div",{className:ak.timelineEvent,children:[(0,m.jsx)(i,{className:ak.icon}),(0,m.jsx)(aS,{autoOpenPreviewPane:!1,markdown:n,messageId:c.id,messageIndex:d,messageTimestamp:c.createdAt,accessibleHeader:(0,n6.hV)("Timeline",c.content??"")})]},t)}),l[15]=c.content,l[16]=c.createdAt,l[17]=c.id,l[18]=d,l[19]=a,l[20]=r):r=l[20],l[21]!==s||l[22]!==r?(o=(0,m.jsxs)(m.Fragment,{children:[s,r]}),l[21]=s,l[22]=r,l[23]=o):o=l[23],o)}function aA(e){return aT(e)}function aD(e){let t,n,i,a=(0,h.c)(9),{isSharedMessage:s,isViewingSharedThread:r,isLatestMessage:o}=e;return a[0]!==s||a[1]!==r?(t=s&&!r&&(0,m.jsxs)("div",{className:ak.situationalTimelineEvent,children:[(0,m.jsx)(ef.LinkIcon,{className:ak.icon})," Messages up to this point are included in shared link"]}),a[0]=s,a[1]=r,a[2]=t):t=a[2],a[3]!==o||a[4]!==r?(n=o&&tx.W.copilotDuplicateThread&&r&&(0,m.jsxs)("div",{className:ak.situationalTimelineEvent,children:[(0,m.jsx)(ef.RepoForkedIcon,{className:ak.icon})," Messages beyond this point will start a new private conversation"]}),a[3]=o,a[4]=r,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,m.jsxs)(m.Fragment,{children:[t,n]}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i}try{aE.displayName||(aE.displayName="TimelineEvents")}catch{}try{aR.displayName||(aR.displayName="UserMessageTimelineEvent")}catch{}try{aD.displayName||(aD.displayName="SituationalTimelineEvents")}catch{}var aP=n(15106),aO=n(66457),aM=n(58321),aF=n(921),aB=n(85391),a$=n(97764),aU=n(46036),aV=n(43063);let aH={container:"RelationshipList-module__container--djndN"};function aW(e){let t,n,i,a,s,r,o,l,c,d,u=(0,h.c)(32),{listItem:p,actions:f}=e,{openItem:g,versionedItems:y}=(0,eQ.xx)(),{item:x}=p;u[0]!==x.id||u[1]!==y?(t=(0,t$.LU)(x.id,y),u[0]=x.id,u[1]=y,u[2]=t):t=u[2];let v=t,b=x.tag;if(u[3]!==x.id||u[4]!==g?(n=()=>g(x.id,!0),u[3]=x.id,u[4]=g,u[5]=n):n=u[5],u[6]!==x.tag||u[7]!==v?(i=null!=v?[(0,m.jsx)(tB.g,{version:v},`${x.tag}#${v}`)]:void 0,u[6]=x.tag,u[7]=v,u[8]=i):i=u[8],u[9]!==x.name||u[10]!==n||u[11]!==i?(a=(0,m.jsx)(a$.T,{value:x.name,onClick:n,trailingBadges:i}),u[9]=x.name,u[10]=n,u[11]=i,u[12]=a):a=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(s=[],u[13]=s):s=u[13],u[14]!==f||u[15]!==x){let e;u[17]!==x?(e=e=>({key:e.key,render:()=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>e.onSelect(x),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:e.icon}),e.label]},`${x.tag}-${e.key}`)}),u[17]=x,u[18]=e):e=u[18],r=f.map(e),u[14]=f,u[15]=x,u[16]=r}else r=u[16];return u[19]!==r?(o=(0,m.jsx)(aM.o,{actions:s,staticMenuActions:r}),u[19]=r,u[20]=o):o=u[20],u[21]!==f||u[22]!==p.children?(l=p.children?.length?p.children?.map(e=>(0,m.jsx)(aW,{listItem:e,actions:f},e.item.tag)):void 0,u[21]=f,u[22]=p.children,u[23]=l):l=u[23],u[24]!==x?(c=(0,m.jsx)(aF.Q,{children:(0,m.jsx)(aB.D,{children:(0,m.jsx)(tY,{...x})})}),u[24]=x,u[25]=c):c=u[25],u[26]!==x.tag||u[27]!==c||u[28]!==a||u[29]!==o||u[30]!==l?(d=(0,m.jsx)(aO.r,{title:a,secondaryActions:o,subItems:l,defaultExpanded:!0,children:c},b),u[26]=x.tag,u[27]=c,u[28]=a,u[29]=o,u[30]=l,u[31]=d):d=u[31],d}function aq(e){let t,n,i,a,s,r=(0,h.c)(15),{title:o,items:l,totalCount:c,actions:d}=e;if(0===l.length)return null;if(r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(aH.container,"mt-2 pb-1 border rounded-2"),r[0]=t):t=r[0],r[1]!==c?(n=(0,m.jsx)(tJ.A,{children:c}),r[1]=c,r[2]=n):n=r[2],r[3]!==n||r[4]!==o?(i=(0,m.jsx)(aU.s,{title:(0,m.jsx)(aV.c,{title:o,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),r[3]=n,r[4]=o,r[5]=i):i=r[5],r[6]!==d||r[7]!==l){let e;r[9]!==d?(e=e=>(0,m.jsx)(aW,{listItem:e,actions:d},e.item.tag),r[9]=d,r[10]=e):e=r[10],a=l.map(e),r[6]=d,r[7]=l,r[8]=a}else a=r[8];return r[11]!==i||r[12]!==a||r[13]!==o?(s=(0,m.jsx)("div",{className:t,children:(0,m.jsx)(aP.v,{title:o,header:i,children:a})}),r[11]=i,r[12]=a,r[13]=o,r[14]=s):s=r[14],s}try{aW.displayName||(aW.displayName="RelationshipListItemComponent")}catch{}try{aq.displayName||(aq.displayName="RelationshipList")}catch{}function az(){let e,t=(0,h.c)(4),n=(0,H.b)(),i=(0,$.Pk)(),{updateItem:a}=(0,eQ.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t)=>{(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,n$.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency on the issue '${t.tag}' by removing it from the 'blockedByTags' field. Return the updated '${e.tag}' draft-issue.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};a(r);let o="existing-issue"===r.type?(0,t$.yA)(r):(0,t$.PO)(r);await n.sendChatMessage({thread:(0,n$.W)(i),content:"Remove the blocking dependency from the issue",references:[s,o],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}function aG(e){let t,n,i,a,s=(0,h.c)(10),{issueNode:r}=e,o=az();return tx.W.draftIssuesWithDependencies?(s[0]!==r.blockedBy?(t=r.blockedBy.map(aK),s[0]=r.blockedBy,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(ef.UnlinkIcon,{}),s[2]=n):n=s[2],s[3]!==r.item||s[4]!==o?(i=[{key:"unlink",label:"Remove dependency",icon:n,onSelect:e=>{o(r.item,e)}}],s[3]=r.item,s[4]=o,s[5]=i):i=s[5],s[6]!==r.blockedBy.length||s[7]!==t||s[8]!==i?(a=(0,m.jsx)(aq,{title:"Blocked by",items:t,totalCount:r.blockedBy.length,actions:i}),s[6]=r.blockedBy.length,s[7]=t,s[8]=i,s[9]=a):a=s[9],a):null}function aK(e){return{item:e.item}}try{aG.displayName||(aG.displayName="BlockedByList")}catch{}function aQ(e){let t,n,i,a,s=(0,h.c)(10),{issueNode:r}=e,o=az();return tx.W.draftIssuesWithDependencies?(s[0]!==r.isBlocking?(t=r.isBlocking.map(aY),s[0]=r.isBlocking,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(ef.UnlinkIcon,{}),s[2]=n):n=s[2],s[3]!==r.item||s[4]!==o?(i=[{key:"unlink",label:"Remove dependency",icon:n,onSelect:e=>{o(e,r.item)}}],s[3]=r.item,s[4]=o,s[5]=i):i=s[5],s[6]!==r.isBlocking.length||s[7]!==t||s[8]!==i?(a=(0,m.jsx)(aq,{title:"Is blocking",items:t,totalCount:r.isBlocking.length,actions:i}),s[6]=r.isBlocking.length,s[7]=t,s[8]=i,s[9]=a):a=s[9],a):null}function aY(e){return{item:e.item}}try{aQ.displayName||(aQ.displayName="BlockingList")}catch{}function aJ({issueNode:e}){let t=function(){let e,t=(0,h.c)(4),n=(0,H.b)(),i=(0,$.Pk)(),{updateItem:a}=(0,eQ.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async e=>{(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,n$.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};a(s);let r="existing-issue"===s.type?(0,t$.yA)(s):(0,t$.PO)(s);await n.sendChatMessage({thread:(0,n$.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),n=(0,v.useMemo)(()=>{if(!e)return 0;let t=-1;return nl(e,()=>t++),t},[e]);return(0,m.jsx)(aq,{title:"Sub-issues",items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:n,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,m.jsx)(ef.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{aJ.displayName||(aJ.displayName="SubissuesList")}catch{}function aX(e){let t,n=(0,h.c)(2),{issueNode:i}=e;return n[0]!==i?(t=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(aJ,{issueNode:i}),(0,m.jsx)(aG,{issueNode:i}),(0,m.jsx)(aQ,{issueNode:i})]}),n[0]=i,n[1]=t):t=n[1],t}try{aX.displayName||(aX.displayName="RelationshipsSection")}catch{}var aZ=n(33987),a0=n(98233),a1=n(40104);function a2(e){let{openItem:t,updateItem:n}=(0,eQ.xx)(),{selectedThreadID:i}=(0,$.Pk)(),a=function(e){let{messages:t}=(0,$.Pk)(),{tag:n,issueNumber:i}=e,a=i&&tx.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),s=`edited-${i}-${a}`,[r,o]=(0,a1.Fo)(s,void 0);return(0,v.useCallback)((s,r=!1)=>{let l,c=!1;for(l in s)(0,iN.A)(s[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...s};!r&&(d.id=a,d.isUserEdited=!0,tx.W.copilotPersistEditedDraftIssues&&o(d)),n(d),t(d.id)},[e,n,t,i,a,o])}function a3(e){return(0,aZ.i)(e)}let a4=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},i={defaultValue:null,kind:"LocalArgument",name:"repo"},a=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],s=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,i],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},r],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();a4.hash="e88ca04244b8cb67aad293081213c7ad";var a5=n(62973),a6=n(30721);function a7(e){return(0,a5.P5)(e)}function a8(e){return!!e}function a9(e){return e.name}var se=n(63684),st=n(72741),sn=n(97665),si=n(84172);function sa(e){return!1===e.hasReachedItemsLimit}function ss(e){return!1===e.closed}function sr(e,t){return e.set(t.id,t),e}function so(e){return e.toLowerCase()}function sl(e){return!!e}function sc(e){return e.title}function sd(e){return e.id}function su(e){return!!e.id}function sm(e){return{id:e.id,title:e.title}}var sh=n(22583);function sp(e,t){return e?.toLowerCase()===t?.toLowerCase()}function sf(e){let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(47),{draftIssue:f,issueNode:g,template:y,issueFormRef:x,loadingDraftIssueRepo:b,onCreate:_,onChange:j,onClose:C,onBeforeCreate:w,onFieldChange:N}=e,{name:S,body:I,defaultValuesById:k}=f,T=void 0===I?"":I,{repository:L,clearSessionData:E}=(0,tW.u)(),[R,A]=(0,v.useState)(S),[D,P]=(0,v.useState)(T),O=function(){let e,t=(0,h.c)(3),n=(0,H.b)(),i=(0,$.Pk)();return t[0]!==n||t[1]!==i?(e=async(e,t)=>{let a;if(e.parentMessageID&&(a=i.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!a||!a.content)return;(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,n$.W)(i)?.id,customMessage:t});let s={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,icon:ef.XIcon};await n.sendChatMessage({thread:(0,n$.W)(i),content:a.content,references:[...a.references??[],s],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model,parentMessageId:e.id})},t[0]=n,t[1]=i,t[2]=e):e=t[2],e}(),M=(0,$.Pk)();p[0]!==E||p[1]!==x?(t=()=>{E(),x.current?.clearSessionStorage()},p[0]=E,p[1]=x,p[2]=t):t=p[2];let F=t;p[3]!==F||p[4]!==C?(n=()=>{F(),C?.()},p[3]=F,p[4]=C,p[5]=n):n=p[5];let B=n;if(p[6]!==T||p[7]!==S?(i=()=>{A(S),P(T)},a=[T,S],p[6]=T,p[7]=S,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,v.useEffect)(i,a),!function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p,f=(0,h.c)(42),{repository:g,assignees:y,setAssignees:x}=(0,tW.u)(),b=(0,v.useRef)(!0),_=(0,v.useRef)(e.id),j=(0,v.useRef)(void 0),C=a2(e);f[0]!==e.id?(t=()=>{_.current!==e.id&&(b.current=!0,j.current=void 0,_.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,v.useEffect)(t,n),g?.nameWithOwner;let w=e.repository&&g?.nameWithOwner===e.repository,N=g?.owner.login,S=g?.name;f[5]!==e.assignees?(i=e.assignees??[],f[5]=e.assignees,f[6]=i):i=f[6],f[7]!==N||f[8]!==S||f[9]!==i?(a={owner:N,repo:S,assignees:i},f[7]=N,f[8]=S,f[9]=i,f[10]=a):a=f[10];let{isLoading:I,data:k}=function(e){let t,n,i,a,s,r=(0,h.c)(16),{owner:o,repo:l,assignees:c}=e,d=(0,no.useRelayEnvironment)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,aZ.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let u=t;return r[1]!==d?(n=JSON.stringify(d),r[1]=d,r[2]=n):n=r[2],r[3]!==c||r[4]!==o||r[5]!==l||r[6]!==n?(i=["copilot-immersive-assignees",n,u,o,l,c],r[3]=c,r[4]=o,r[5]=l,r[6]=n,r[7]=i):i=r[7],r[8]!==c||r[9]!==d||r[10]!==o||r[11]!==l?(a=async()=>o&&l&&c?await (0,a0.fH)(d,{owner:o,repo:l,assignees:c,capabilities:u}):[],r[8]=c,r[9]=d,r[10]=o,r[11]=l,r[12]=a):a=r[12],r[13]!==i||r[14]!==a?(s={queryKey:i,queryFn:a},r[13]=i,r[14]=a,r[15]=s):s=r[15],(0,ns.I)(s)}(a),T=(null!=e.assignees||!e.isStreaming)&&!I;f[11]!==w||f[12]!==T?(s=()=>{w&&!T&&(b.current=!0)},r=[w,T],f[11]=w,f[12]=T,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,v.useEffect)(s,r),f[15]!==C?(o=(e,t)=>{void 0!==j.current&&(0,iN.A)(j.current,e)||(C({assignees:e.map(a3)},t),j.current=e)},f[15]=C,f[16]=o):o=f[16];let L=o;f[17]!==w||f[18]!==T||f[19]!==L||f[20]!==g||f[21]!==k||f[22]!==x?(c=()=>{w&&T&&null!=k&&(g?.viewerIssueCreationPermissions?.assignable?(x(k),L(k,!0)):null!=g&&(x([]),L([],!0)))},l=[w,T,L,g,k,x],f[17]=w,f[18]=T,f[19]=L,f[20]=g,f[21]=k,f[22]=x,f[23]=l,f[24]=c):(l=f[23],c=f[24]),(0,v.useEffect)(c,l),f[25]!==y||f[26]!==w||f[27]!==T||f[28]!==g||f[29]!==k?(d=()=>{if(!b.current||void 0===j.current||!w||!T||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.assignable;e&&y===k?b.current=!1:e||0!==y.length||(b.current=!1)},f[25]=y,f[26]=w,f[27]=T,f[28]=g,f[29]=k,f[30]=d):d=f[30],f[31]!==e.id||f[32]!==y||f[33]!==w||f[34]!==T||f[35]!==g||f[36]!==k?(u=[e.id,w,T,k,g,y],f[31]=e.id,f[32]=y,f[33]=w,f[34]=T,f[35]=g,f[36]=k,f[37]=u):u=f[37],(0,v.useEffect)(d,u),f[38]!==y||f[39]!==L?(m=()=>{b.current||L(y,!1)},p=[y,L],f[38]=y,f[39]=L,f[40]=m,f[41]=p):(m=f[40],p=f[41]),(0,v.useEffect)(m,p)}(f),!function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p,f=(0,h.c)(42),{repository:g,labels:y,setLabels:x}=(0,tW.u)(),b=(0,v.useRef)(!0),_=(0,v.useRef)(e.id),j=(0,v.useRef)(void 0),C=a2(e);f[0]!==e.id?(t=()=>{_.current!==e.id&&(b.current=!0,j.current=void 0,_.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,v.useEffect)(t,n),g?.nameWithOwner;let w=e.repository&&g?.nameWithOwner===e.repository,N=g?.owner.login,S=g?.name;f[5]!==e.labels?(i=e.labels??[],f[5]=e.labels,f[6]=i):i=f[6],f[7]!==N||f[8]!==S||f[9]!==i?(a={owner:N,repo:S,labels:i},f[7]=N,f[8]=S,f[9]=i,f[10]=a):a=f[10];let{isLoading:I,data:k}=function(e){let t,n,i,a,s=(0,h.c)(15),{owner:r,repo:o,labels:l}=e,c=(0,no.useRelayEnvironment)();return s[0]!==c?(t=JSON.stringify(c),s[0]=c,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==o||s[5]!==t?(n=["copilot-immersive-labels",t,r,o,l],s[2]=l,s[3]=r,s[4]=o,s[5]=t,s[6]=n):n=s[6],s[7]!==c||s[8]!==l||s[9]!==r||s[10]!==o?(i=async()=>{if(!r||!o||!l)return[];let e=await (0,a6.SD)({environment:c,query:a4,variables:{owner:r,repo:o,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(a8).map(a7)},s[7]=c,s[8]=l,s[9]=r,s[10]=o,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,ns.I)(a)}(a),T=(null!=e.labels||!e.isStreaming)&&!I;f[11]!==w||f[12]!==T?(s=()=>{w&&!T&&(b.current=!0)},r=[w,T],f[11]=w,f[12]=T,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,v.useEffect)(s,r),f[15]!==C?(o=(e,t)=>{void 0!==j.current&&(0,iN.A)(j.current,e)||(C({labels:e.map(a9)},t),j.current=e)},f[15]=C,f[16]=o):o=f[16];let L=o;f[17]!==w||f[18]!==T||f[19]!==L||f[20]!==g||f[21]!==k||f[22]!==x?(c=()=>{w&&T&&null!=k&&(g?.viewerIssueCreationPermissions?.labelable?(x(k),L(k,!0)):null!=g&&(x([]),L([],!0)))},l=[w,T,L,g,k,x],f[17]=w,f[18]=T,f[19]=L,f[20]=g,f[21]=k,f[22]=x,f[23]=l,f[24]=c):(l=f[23],c=f[24]),(0,v.useEffect)(c,l),f[25]!==y||f[26]!==w||f[27]!==T||f[28]!==g||f[29]!==k?(d=()=>{if(!b.current||void 0===j.current||!w||!T||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.labelable;e&&y===k?b.current=!1:e||0!==y.length||(b.current=!1)},f[25]=y,f[26]=w,f[27]=T,f[28]=g,f[29]=k,f[30]=d):d=f[30],f[31]!==e.id||f[32]!==y||f[33]!==w||f[34]!==T||f[35]!==g||f[36]!==k?(u=[e.id,w,T,k,g,y],f[31]=e.id,f[32]=y,f[33]=w,f[34]=T,f[35]=g,f[36]=k,f[37]=u):u=f[37],(0,v.useEffect)(d,u),f[38]!==y||f[39]!==L?(m=()=>{b.current||L(y,!1)},p=[y,L],f[38]=y,f[39]=L,f[40]=m,f[41]=p):(m=f[40],p=f[41]),(0,v.useEffect)(m,p)}(f),!function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p,f=(0,h.c)(45),{repository:g,issueType:y,setIssueType:x}=(0,tW.u)(),b=(0,v.useRef)(!0),_=(0,v.useRef)(e.id),j=(0,v.useRef)(void 0),C=a2(e);f[0]!==e.id?(t=()=>{_.current!==e.id&&(b.current=!0,j.current=void 0,_.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,v.useEffect)(t,n),g?.nameWithOwner;let w=e.repository&&g?.nameWithOwner===e.repository,N=g?.owner.login,S=g?.name;f[5]!==N||f[6]!==S?(i={owner:N,repo:S},f[5]=N,f[6]=S,f[7]=i):i=f[7];let{isLoading:I,data:k}=function(e){let t,n,i,a,s=(0,h.c)(13),{owner:r,repo:o}=e,l=(0,no.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-issue-types",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(i=async()=>r&&o?await (0,sh.RX)(l,{owner:r,repo:o,pageSize:25}):[],s[6]=l,s[7]=r,s[8]=o,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,ns.I)(a)}(i);e:{let t;if(I||!e.issueType){a=null;break e}f[8]!==e.issueType||f[9]!==k?(t=k?.find(t=>sp(t.name,e.issueType))||null,f[8]=e.issueType,f[9]=k,f[10]=t):t=f[10],a=t}let T=a,L=(null!=e.issueType||!e.isStreaming)&&!I;f[11]!==w||f[12]!==L?(s=()=>{w&&!L&&(b.current=!0)},r=[w,L],f[11]=w,f[12]=L,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,v.useEffect)(s,r),f[15]!==C?(o=(e,t)=>{void 0!==j.current&&sp(j.current?.name,e?.name)||(C({issueType:e?.name},t),j.current=e)},f[15]=C,f[16]=o):o=f[16];let E=o;f[17]!==w||f[18]!==L||f[19]!==E||f[20]!==g||f[21]!==T||f[22]!==k||f[23]!==x?(c=()=>{w&&L&&null!=k&&(g?.viewerIssueCreationPermissions?.typeable?(x(T),E(T,!0)):null!=g&&(x(null),E(null,!0)))},l=[w,L,E,g,T,k,x],f[17]=w,f[18]=L,f[19]=E,f[20]=g,f[21]=T,f[22]=k,f[23]=x,f[24]=l,f[25]=c):(l=f[24],c=f[25]),(0,v.useEffect)(c,l),f[26]!==y||f[27]!==w||f[28]!==L||f[29]!==g||f[30]!==T||f[31]!==k?(d=()=>{if(!b.current||void 0===j.current||!w||!L||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.typeable;e&&y===T?b.current=!1:e||null!==y||(b.current=!1)},f[26]=y,f[27]=w,f[28]=L,f[29]=g,f[30]=T,f[31]=k,f[32]=d):d=f[32],f[33]!==e.id||f[34]!==y||f[35]!==w||f[36]!==L||f[37]!==g||f[38]!==T||f[39]!==k?(u=[e.id,w,L,k,T,g,y],f[33]=e.id,f[34]=y,f[35]=w,f[36]=L,f[37]=g,f[38]=T,f[39]=k,f[40]=u):u=f[40],(0,v.useEffect)(d,u),f[41]!==y||f[42]!==E?(m=()=>{b.current||E(y,!1)},p=[y,E],f[41]=y,f[42]=E,f[43]=m,f[44]=p):(m=f[43],p=f[44]),(0,v.useEffect)(m,p)}(f),!function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p=(0,h.c)(43),{repository:f,milestone:g,setMilestone:y}=(0,tW.u)(),x=(0,v.useRef)(!0),b=(0,v.useRef)(e.id),_=(0,v.useRef)(void 0),j=a2(e);p[0]!==e.id?(t=()=>{b.current!==e.id&&(x.current=!0,_.current=void 0,b.current=e.id)},p[0]=e.id,p[1]=t):t=p[1],p[2]!==e.id||p[3]!==g?(n=[e.id,g],p[2]=e.id,p[3]=g,p[4]=n):n=p[4],(0,v.useEffect)(t,n),f?.nameWithOwner;let C=e.repository&&f?.nameWithOwner===e.repository,w=f?.owner.login,N=f?.name;p[5]!==e.milestone||p[6]!==w||p[7]!==N?(i={owner:w,repo:N,milestone:e.milestone},p[5]=e.milestone,p[6]=w,p[7]=N,p[8]=i):i=p[8];let{isLoading:S,data:I}=function({owner:e,repo:t,milestone:n}){let i=(0,no.useRelayEnvironment)(),a=(0,sn.jE)();return(0,G.G7)("item_picker_milestone_tsq_migration")?(0,ns.I)({queryKey:["copilot-immersive-milestones",JSON.stringify(a),e,t,n],queryFn:async()=>e&&t&&n?(await (0,st.U)(a,{owner:e,repo:t,query:n,count:1})).milestones:[]}):(0,ns.I)({queryKey:["copilot-immersive-milestones",JSON.stringify(i),e,t,n],queryFn:async()=>e&&t&&n?await (0,se.Ud)(i,{owner:e,repo:t,query:n,count:1}):[]})}(i),k=I?.[0]??null,T=(null!=e.milestone||!e.isStreaming)&&!S;p[9]!==C||p[10]!==T?(a=()=>{C&&!T&&(x.current=!0)},s=[C,T],p[9]=C,p[10]=T,p[11]=a,p[12]=s):(a=p[11],s=p[12]),(0,v.useEffect)(a,s),p[13]!==j?(r=(e,t)=>{var n,i;(void 0===_.current||(n=_.current?.title,i=e?.title,n?.toLowerCase()!==i?.toLowerCase()))&&(j({milestone:e?.title},t),_.current=e)},p[13]=j,p[14]=r):r=p[14];let L=r;p[15]!==C||p[16]!==T||p[17]!==L||p[18]!==f||p[19]!==k||p[20]!==I||p[21]!==y?(o=()=>{C&&T&&null!=I&&(f?.viewerIssueCreationPermissions?.milestoneable?(y(k),L(k,!0)):null!=f&&(y(null),L(null,!0)))},l=[C,T,L,f,k,I,y],p[15]=C,p[16]=T,p[17]=L,p[18]=f,p[19]=k,p[20]=I,p[21]=y,p[22]=o,p[23]=l):(o=p[22],l=p[23]),(0,v.useEffect)(o,l),p[24]!==g||p[25]!==C||p[26]!==T||p[27]!==f||p[28]!==k||p[29]!==I?(c=()=>{if(!x.current||void 0===_.current||!C||!T||null==I||!f)return;let e=f.viewerIssueCreationPermissions?.milestoneable;e&&g===k?x.current=!1:e||null!==g||(x.current=!1)},p[24]=g,p[25]=C,p[26]=T,p[27]=f,p[28]=k,p[29]=I,p[30]=c):c=p[30],p[31]!==e.id||p[32]!==g||p[33]!==C||p[34]!==T||p[35]!==f||p[36]!==k||p[37]!==I?(d=[e.id,C,T,I,k,f,g],p[31]=e.id,p[32]=g,p[33]=C,p[34]=T,p[35]=f,p[36]=k,p[37]=I,p[38]=d):d=p[38],(0,v.useEffect)(c,d),p[39]!==g||p[40]!==L?(u=()=>{x.current||L(g,!1)},m=[g,L],p[39]=g,p[40]=L,p[41]=u,p[42]=m):(u=p[41],m=p[42]),(0,v.useEffect)(u,m)}(f),!function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p=(0,h.c)(40),{repository:f,projects:g,setProjects:y}=(0,tW.u)(),x=(0,v.useRef)(!0),b=(0,v.useRef)(e.id),_=(0,v.useRef)(void 0),j=a2(e);p[0]!==e.id?(t=()=>{b.current!==e.id&&(x.current=!0,_.current=void 0,b.current=e.id)},p[0]=e.id,p[1]=t):t=p[1],p[2]!==e.id||p[3]!==g?(n=[e.id,g],p[2]=e.id,p[3]=g,p[4]=n):n=p[4],(0,v.useEffect)(t,n),f?.nameWithOwner;let C=e.repository&&f?.nameWithOwner===e.repository,w=f?.owner.login,N=f?.name;p[5]!==e.projects||p[6]!==w||p[7]!==N?(i={owner:w,repo:N,projects:e.projects},p[5]=e.projects,p[6]=w,p[7]=N,p[8]=i):i=p[8];let{isLoading:S,data:I}=function(e){let t,n,i,a,s=(0,h.c)(15),{owner:r,repo:o,projects:l}=e,c=(0,no.useRelayEnvironment)();return s[0]!==c?(t=JSON.stringify(c),s[0]=c,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o||s[5]!==t?(n=["copilot-immersive-projects",t,r,o,l],s[2]=r,s[3]=l,s[4]=o,s[5]=t,s[6]=n):n=s[6],s[7]!==c||s[8]!==r||s[9]!==l||s[10]!==o?(i=async()=>{if(!r||!o||!l||!l.length)return[];let e=new Set(l.filter(su).map(sd)),t=l.map(sc).filter(sl),n=new Set(t.map(so)),i=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:a,recentRepositoryProjects:s,ownerProjects:d,recentOwnerProjects:u}=await (0,si.vj)(c,{owner:r,repo:o,query:i}),m=[...[...a,...s,...d,...u].reduce(sr,new Map).values()].filter(ss).filter(sa).filter(t=>!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase())),h=new Set;return m.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let t=e.title.toLowerCase();return!h.has(t)&&(h.add(t),!0)})},s[7]=c,s[8]=r,s[9]=l,s[10]=o,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,ns.I)(a)}(i),k=(null!=e.projects||!e.isStreaming)&&!S;p[9]!==C||p[10]!==k?(a=()=>{C&&!k&&(x.current=!0)},s=[C,k],p[9]=C,p[10]=k,p[11]=a,p[12]=s):(a=p[11],s=p[12]),(0,v.useEffect)(a,s),p[13]!==j?(r=(e,t)=>{void 0!==_.current&&(0,iN.A)(_.current,e)||(j({projects:e.map(sm)},t),_.current=e)},p[13]=j,p[14]=r):r=p[14];let T=r;p[15]!==C||p[16]!==k||p[17]!==T||p[18]!==f||p[19]!==I||p[20]!==y?(o=()=>{C&&k&&null!=I&&(f?.viewerIssueCreationPermissions?.triageable?(y(I),T(I,!0)):null!=f&&(y([]),T([],!0)))},l=[C,k,T,f,I,y],p[15]=C,p[16]=k,p[17]=T,p[18]=f,p[19]=I,p[20]=y,p[21]=o,p[22]=l):(o=p[21],l=p[22]),(0,v.useEffect)(o,l),p[23]!==g||p[24]!==C||p[25]!==k||p[26]!==f||p[27]!==I?(c=()=>{if(!x.current||void 0===_.current||!C||!k||null==I||!f)return;let e=f.viewerIssueCreationPermissions?.triageable;e&&g===I?x.current=!1:e||0!==g.length||(x.current=!1)},p[23]=g,p[24]=C,p[25]=k,p[26]=f,p[27]=I,p[28]=c):c=p[28],p[29]!==e.id||p[30]!==g||p[31]!==C||p[32]!==k||p[33]!==f||p[34]!==I?(d=[e.id,C,k,I,f,g],p[29]=e.id,p[30]=g,p[31]=C,p[32]=k,p[33]=f,p[34]=I,p[35]=d):d=p[35],(0,v.useEffect)(c,d),p[36]!==g||p[37]!==T?(u=()=>{x.current||T(g,!1)},m=[g,T],p[36]=g,p[37]=T,p[38]=u,p[39]=m):(u=p[38],m=p[39]),(0,v.useEffect)(u,m)}(f),null==L){let e;if(void 0===f.repository&&f.isStreaming||b){let e;return p[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),p[10]=e):e=p[10],e}return p[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tF,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:ef.IssueDraftIcon}),p[11]=e):e=p[11],e}let U=M.messages.at(-1);if(U&&aL(U,["switch-issue-template","switch-issue-repo"])){let e;return p[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),p[12]=e):e=p[12],e}let V=M.messages;if(p[13]!==k||p[14]!==f.messageId||p[15]!==O||p[16]!==M.isWaitingOnCopilot||p[17]!==M.messages||p[18]!==y){s=Symbol.for("react.early_return_sentinel");e:{let e=V.find(e=>e.id===f.messageId),t=e?.parentMessageIndex!==void 0?M.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=y&&(0,nw.GQ)(y.data),i=0===Object.keys(k||{}).length,a=!M.isWaitingOnCopilot,r=e.messageIndex===M.messages.length-1,o="assistant"===e.role,l=aL(t,["automatic-retry"]);if(n&&i)if(a)if(r&&o&&!l){let t;O(e,"Copilot failed to use the issue template, retrying\u2026"),p[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),p[21]=t):t=p[21],s=t;break e}else{let e;p[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tF,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:ef.IssueDraftIcon}),p[22]=e):e=p[22],s=e;break e}else{let e;p[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),p[20]=e):e=p[20],s=e;break e}}}p[13]=k,p[14]=f.messageId,p[15]=O,p[16]=M.isWaitingOnCopilot,p[17]=M.messages,p[18]=y,p[19]=s}else s=p[19];return s!==Symbol.for("react.early_return_sentinel")?s:(p[23]!==j?(r=e=>{A(e),j?.({name:e})},o=e=>{P(e),j?.({body:e})},p[23]=j,p[24]=r,p[25]=o):(r=p[24],o=p[25]),p[26]!==_?(l=e=>{let{issue:t}=e;return _?.(t)},p[26]=_,p[27]=l):l=p[27],p[28]!==k||p[29]!==D||p[30]!==f.messageId||p[31]!==x||p[32]!==w||p[33]!==B||p[34]!==N||p[35]!==L||p[36]!==l||p[37]!==r||p[38]!==o||p[39]!==y||p[40]!==R?(c=(0,m.jsx)(n4.e,{repository:L,title:R,body:D,setTitle:r,setBody:o,clearOnCreate:B,issueFormRef:x,onCreateSuccess:l,onCreateError:n5.l,onCancel:B,onBeforeCreate:w,defaultValuesById:k,selectedTemplate:y,onFieldChange:N,clientMutationId:f.messageId}),p[28]=k,p[29]=D,p[30]=f.messageId,p[31]=x,p[32]=w,p[33]=B,p[34]=N,p[35]=L,p[36]=l,p[37]=r,p[38]=o,p[39]=y,p[40]=R,p[41]=c):c=p[41],p[42]!==g?(d=g&&(0,m.jsx)(aX,{issueNode:g}),p[42]=g,p[43]=d):d=p[43],p[44]!==c||p[45]!==d?(u=(0,m.jsxs)(m.Fragment,{children:[c,d]}),p[44]=c,p[45]=d,p[46]=u):u=p[46],u)}try{sf.displayName||(sf.displayName="CreateIssueForm")}catch{}let sg={container:"CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",truncateText:"CreateIssuePreview-module__truncateText--Cyrbf",form:"CreateIssuePreview-module__form--X4Vwp",viewerContainer:"CreateIssuePreview-module__viewerContainer--bRxNh"};function sy({node:e,onItemSelected:t}){let n=(0,v.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,m.jsxs)(eX.W,{children:[(0,m.jsxs)(eX.W.Button,{variant:"invisible",className:sg.parentSelectorAnchor,children:[(0,m.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,m.jsx)(eX.W.Overlay,{width:"large",children:(0,m.jsx)(eb.lF,{children:n.map((n,i)=>(0,m.jsxs)(eb.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,m.jsx)(eb.lF.LeadingVisual,{children:(0,m.jsx)(tY,{...n.item})}),(0,m.jsx)("div",{className:sg.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{sy.displayName||(sy.displayName="ParentSelector")}catch{}let sx=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},c=[n,i,a,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[r,o,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[l],storageKey:null}],storageKey:null}],d=[n,i,a,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[r,o,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,n],storageKey:null},n],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"addBlockedByMutationMutation",selections:[{alias:null,args:t,concreteType:"AddBlockedByPayload",kind:"LinkedField",name:"addBlockedBy",plural:!1,selections:[{alias:"blockedIssue",args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"blockingIssue",plural:!1,selections:c,storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"addBlockedByMutationMutation",selections:[{alias:null,args:t,concreteType:"AddBlockedByPayload",kind:"LinkedField",name:"addBlockedBy",plural:!1,selections:[{alias:"blockedIssue",args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"blockingIssue",plural:!1,selections:d,storageKey:null}],storageKey:null}]},params:{id:"85d6aca0fda73df868502edfef193ec6",metadata:{},name:"addBlockedByMutationMutation",operationKind:"mutation",text:null}}}();sx.hash="41775f78ca715d37a0e9b033efd651fe";var sv=n(69487);function sb({environment:e,input:{blockedIssueId:t,blockingIssueId:n},onCompleted:i,onError:a}){(0,sv.commitMutation)(e,{mutation:sx,variables:{input:{issueId:t,blockingIssueId:n}},onCompleted:e=>i?.(e.addBlockedBy),onError:e=>a?.(e)})}async function s_(e,t){if("existing-issue"!==t.type)return;let[n,i]=t.repository.split("/");if(n&&i&&t.number)return await nE(e,n,i,t.number)}function sj(e,t){return null==t?{savedIssue:void 0,errors:["An unknown error occurred while adding an issue relationship"]}:{savedIssue:{draftType:e.type,tag:e.tag,parentTag:e.parentTag,blockedByTags:e.blockedByTags,repository:{databaseId:t.repository.databaseId||0,name:t.repository.name,owner:{login:t.repository.owner.login}},number:t.number,title:t.title,url:t.url,template:void 0,assignees:[]},errors:[]}}var sC=n(3398);let sw={container:"RepositoryPicker-module__container--codNO",label:"RepositoryPicker-module__label--WplGo",ssoBanner:"RepositoryPicker-module__ssoBanner--TbTWl"};function sN(e){let t,n,i,a,s,r,o,l,c=(0,h.c)(23),{draftIssue:d,resolvedDraftIssueRepo:u,loadingDraftIssueRepo:p,topRepos:f}=e,[g,y]=(0,v.useState)(void 0),{repository:b,setRepository:_}=(0,tW.u)(),j=a2(d),C=function(e){let t,n=(0,h.c)(5),i=(0,H.b)(),a=(0,$.Pk)(),{updateItem:s}=(0,eQ.xx)();return n[0]!==e||n[1]!==i||n[2]!==a||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,o=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),o.push((0,t$.PO)(t))}await i.sendChatMessage({thread:(0,n$.W)(a),content:`Use the ${r} repository`,references:[...o,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=e,n[1]=i,n[2]=a,n[3]=s,n[4]=t):t=n[4],t}(d);c[0]!==j||c[1]!==C||c[2]!==_?(t=e=>{null!=e&&(tx.W.draftIssueCodeSearch?C(e.name,e.owner.login):j({repository:e.nameWithOwner,template:void 0},!1),_(e))},c[0]=j,c[1]=C,c[2]=_,c[3]=t):t=c[3];let w=t;!function(e,t,n,i){let a,s,r,o,l,c,d,u,m,p,f,g=(0,h.c)(32),{repository:y,setRepository:x}=(0,tW.u)(),b=(0,v.useRef)(!0),_=(0,v.useRef)(null),j=(0,v.useRef)(void 0),C=a2(e);g[0]!==e.id?(a=()=>{_.current!==e.id&&(b.current=!0,j.current=void 0,_.current=e.id)},g[0]=e.id,g[1]=a):a=g[1],g[2]!==e.id||g[3]!==y?(s=[e.id,y],g[2]=e.id,g[3]=y,g[4]=s):s=g[4],(0,v.useEffect)(a,s);let w=(null!=e.repository||!e.isStreaming)&&!n;g[5]!==w?(r=()=>{w||(b.current=!0)},o=[w],g[5]=w,g[6]=r,g[7]=o):(r=g[6],o=g[7]),(0,v.useEffect)(r,o),g[8]!==C?(l=(e,t)=>{var n,i;(void 0===j.current||(n=j.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(C({repository:e?.nameWithOwner},t),j.current=e??null)},g[8]=C,g[9]=l):l=g[9];let N=l;g[10]!==w||g[11]!==N||g[12]!==t||g[13]!==x||g[14]!==i?(c=()=>{w&&(null!=t?(x(t),N(t,!0)):i.length>0?(x(i[0]),N(i[0],!0)):(x(void 0),N(void 0,!0)))},d=[w,N,t,x,i],g[10]=w,g[11]=N,g[12]=t,g[13]=x,g[14]=i,g[15]=c,g[16]=d):(c=g[15],d=g[16]),(0,v.useEffect)(c,d),g[17]!==y||g[18]!==w||g[19]!==t||g[20]!==i?(u=()=>{b.current&&void 0!==j.current&&w&&(null!=t&&t===y||null==t&&i.length>0&&y===i[0]?b.current=!1:null==t&&i.length<=0&&void 0===y&&(b.current=!1))},g[17]=y,g[18]=w,g[19]=t,g[20]=i,g[21]=u):u=g[21],g[22]!==e.id||g[23]!==y||g[24]!==w||g[25]!==t||g[26]!==i?(m=[e.id,w,t,i,y],g[22]=e.id,g[23]=y,g[24]=w,g[25]=t,g[26]=i,g[27]=m):m=g[27],(0,v.useEffect)(u,m),g[28]!==y||g[29]!==N?(f=()=>{b.current||N(y,!1)},p=[y,N],g[28]=y,g[29]=N,g[30]=p,g[31]=f):(p=g[30],f=g[31]),(0,v.useEffect)(f,p)}(d,u,p,f),c[4]!==b||c[5]!==p||c[6]!==f?(n=()=>{p||null==b||null==f||f.find(e=>e.id===b.id)||y(b.id)},i=[b,p,f],c[4]=b,c[5]=p,c[6]=f,c[7]=n,c[8]=i):(n=c[7],i=c[8]),(0,v.useEffect)(n,i);let{ssoOrganizations:N}=(0,$.Pk)();c[9]!==N?(a=N?.map(sI)??[],c[9]=N,c[10]=a):a=c[10];let S=a,I=b??f?.[0],k=d.isStreaming||p;return c[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(sC.A,{className:(0,x.$)(sw.label,"sr-only"),required:!0,children:"Repository"}),c[11]=s):s=c[11],c[12]!==k?(r={hasIssuesEnabled:!0,readonly:k},c[12]=k,c[13]=r):r=c[13],c[14]!==S?(o=(0,G.G7)("global_sso_banner")?void 0:(0,m.jsx)(U.x,{className:sw.ssoBanner,forceWrap:!0,protectedOrgs:S,maxVisibleOrgNames:0,redirectURI:sS}),c[14]=S,c[15]=o):o=c[15],c[16]!==g||c[17]!==w||c[18]!==I||c[19]!==r||c[20]!==o||c[21]!==f?(l=(0,m.jsxs)("div",{className:sw.container,children:[s,(0,m.jsx)(ni.f0,{initialRepository:I,onSelect:w,options:r,topRepositories:f,enforceAtleastOneSelected:!0,subtitle:o},g)]}),c[16]=g,c[17]=w,c[18]=I,c[19]=r,c[20]=o,c[21]=f,c[22]=l):l=c[22],l}function sS(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function sI(e){return e.login}try{sN.displayName||(sN.displayName="RepositoryPicker")}catch{}let sk=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[n,i,a,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],r=[n,i,a,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:s,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:r,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:s,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();sk.hash="582a468668cd62a5a95ad0f91f7ea5e5";let sT={kind:"InlineDataFragment",name:"TemplatePickerForm"};sT.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let sL={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};sL.hash="fa6038bb9389af7bff23ba3491dd0507";var sE=n(86391);function sR(e,t){return e.filename.localeCompare(t.filename)}function sA(e){return(0,sv.readInlineData)(sT,e)}function sD(e){return(0,sv.readInlineData)(sL,e)}function sP(e){let t,n,i,a,s=(0,h.c)(10),{draftIssue:r}=e,{repository:o}=(0,tW.u)(),l=o?.owner.login,c=o?.name;s[0]!==l||s[1]!==c?(t={owner:l,repo:c},s[0]=l,s[1]=c,s[2]=t):t=s[2];let{data:d}=function(e){let t,n,i,a,s=(0,h.c)(13),{owner:r,repo:o}=e,l=(0,no.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-templates",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(i=async()=>{if(!r||!o)return[];let e=await (0,sv.fetchQuery)(l,sk,{owner:r,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(sD),...(e?.repository?.issueForms||[]).map(sA)].sort(sR)},s[6]=l,s[7]=r,s[8]=o,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,ns.I)(a)}(t);if(null==d||0===d.length)return null;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("span",{children:"/"}),s[3]=n):n=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(sC.A,{className:(0,x.$)(sw.label,"sr-only"),children:"Template"}),s[4]=i):i=s[4];let u=o?.nameWithOwner,p=o?.isBlankIssuesEnabled;return s[5]!==r||s[6]!==u||s[7]!==p||s[8]!==d?(a=(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsxs)("div",{className:sw.container,children:[i,(0,m.jsx)(sO,{templates:d,draftIssue:r,repositoryNwo:u,isBlankIssuesEnabled:p})]})]}),s[5]=r,s[6]=u,s[7]=p,s[8]=d,s[9]=a):a=s[9],a}function sO(e){let t,n,i,a,s,r,o,l,c=(0,h.c)(23),{templates:d,draftIssue:u,isBlankIssuesEnabled:p,repositoryNwo:f}=e,[g,y]=(0,v.useState)("");e:{let e;if(!g){t=d;break e}c[0]!==g||c[1]!==d?(e=d?.filter(e=>e.name?.toLowerCase().includes(g.toLowerCase())),c[0]=g,c[1]=d,c[2]=e):e=c[2],t=e}let x=t,[b,_]=(0,v.useState)(void 0);c[3]!==u.template||c[4]!==d?(n=()=>{if(!u.template)return void _(void 0);let e=u.template.split("/").findLast(Boolean);_(d?.find(t=>t.filename===e))},i=[d,u.template],c[3]=u.template,c[4]=d,c[5]=n,c[6]=i):(n=c[5],i=c[6]),(0,v.useEffect)(n,i);let j=function(){let e,t=(0,h.c)(4),n=(0,H.b)(),i=(0,$.Pk)(),{updateItem:a}=(0,eQ.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};a(t),r.push((0,t$.PO)(t))}await n.sendChatMessage({thread:(0,n$.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),C=(0,v.useRef)(null),w="new-issue"===u.type&&null!=p&&!p;return c[7]!==x?(a=x??[],c[7]=x,c[8]=a):a=c[8],c[9]!==b?(s=b?[b]:[],c[9]=b,c[10]=s):s=c[10],c[11]!==b||c[12]!==w?(r=e=>(0,m.jsxs)(tm.Q,{trailingVisual:ef.TriangleDownIcon,...e,ref:C,children:[b?(0,m.jsx)("span",{children:b.name}):"Select a template",w&&(0,m.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),c[11]=b,c[12]=w,c[13]=r):r=c[13],c[14]!==u||c[15]!==j||c[16]!==f?(o=async e=>{let[t]=e;_(t),await j(u,t,f)},c[14]=u,c[15]=j,c[16]=f,c[17]=o):o=c[17],c[18]!==a||c[19]!==s||c[20]!==r||c[21]!==o?(l=(0,m.jsx)(sE.O,{items:a,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:y,title:"Select a template",renderAnchor:r,getItemKey:sF,convertToItemProps:sM,onSelectionChange:o,selectPanelRef:C,height:"large",width:"medium"}),c[18]=a,c[19]=s,c[20]=r,c[21]=o,c[22]=l):l=c[22],l}function sM(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function sF(e){return e.filename}try{sP.displayName||(sP.displayName="TemplatePicker")}catch{}try{sO.displayName||(sO.displayName="TemplatePickerInternal")}catch{}var sB=n(10286);function s$(e,t){return(0,v.useCallback)((n,i,a)=>{let s=n||`${sB.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function sU(e){let t,n,i,a,s=(0,h.c)(13),{owner:r,repo:o}=e,l=(0,no.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(i=async()=>r&&o?await (0,ni.tZ)(l,r,o):null,s[6]=l,s[7]=r,s[8]=o,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,ns.I)(a)}function sV(e){var t;let n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N,S,I,k,T,L,E=(0,h.c)(88),{isPreviewOpening:R,issue:A,onClose:D}=e,{openItem:P}=(0,eQ.xx)(),O=nd();E[0]!==A.tag||E[1]!==O?(n=O.get(A.tag),E[0]=A.tag,E[1]=O,E[2]=n):n=E[2];let M=n,[F,B]=(0,v.useState)(R);E[3]!==F?(i=()=>{if(F){let e=setTimeout(()=>B(!1),400);return()=>clearTimeout(e)}},a=[F],E[3]=F,E[4]=i,E[5]=a):(i=E[4],a=E[5]),(0,v.useEffect)(i,a);let{selectedThreadID:U}=(0,$.Pk)(),{isLoading:V,data:H}=function(){let e,t,n,i,a=(0,h.c)(9),s=(0,no.useRelayEnvironment)();return a[0]!==s?(e=JSON.stringify(s),a[0]=s,a[1]=e):e=a[1],a[2]!==e?(t=["copilot-immersive-top-repos",e],a[2]=e,a[3]=t):t=a[3],a[4]!==s?(n=async()=>await (0,ni.St)(s,{first:10,hasIssuesEnabled:!0}),a[4]=s,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i={queryKey:t,queryFn:n},a[6]=t,a[7]=n,a[8]=i):i=a[8],(0,ns.I)(i)}();E[6]!==A.repository?(s=A.repository?.split("/")??[],E[6]=A.repository,E[7]=s):s=E[7];let[W,q]=s;E[8]!==W||E[9]!==q?(r={owner:W,repo:q},E[8]=W,E[9]=q,E[10]=r):r=E[10];let{isLoading:z,data:G}=sU(r),[Q,Y]=(0,v.useState)(G);E[11]!==G?(o=()=>{G&&Y(G)},l=[G],E[11]=G,E[12]=o,E[13]=l):(o=E[12],l=E[13]),(0,v.useEffect)(o,l);let J=null!=Q&&(!Q.hasIssuesEnabled||null!=Q.viewerInteractionLimitReasonHTML&&Q.viewerInteractionLimitReasonHTML?.length>0),X=nx(),Z=nV(),ee=function(e){let t,n=(0,h.c)(3),i=(0,no.useRelayEnvironment)();return n[0]!==i||n[1]!==e?(t=async t=>{if(!tx.W.draftIssuesWithDependencies)return Promise.resolve([]);let n=[];for(let a of e.blockedBy){let e=await s_(i,a.item);e&&n.push(new Promise(n=>{sb({environment:i,input:{blockedIssueId:t.id,blockingIssueId:e.id},onCompleted:e=>n(sj(a.item,e?.blockingIssue)),onError:e=>n({savedIssue:void 0,errors:[e?.message||"Unknown error"]})})}))}for(let a of e.isBlocking){let e=await s_(i,a.item);e&&n.push(new Promise(n=>{sb({environment:i,input:{blockedIssueId:e.id,blockingIssueId:t.id},onCompleted:e=>n(sj(a.item,e?.blockedIssue)),onError:e=>n({savedIssue:void 0,errors:[e?.message||"Unknown error"]})})}))}return await Promise.all(n)},n[0]=i,n[1]=e,n[2]=t):t=n[2],t}(M);E[14]!==A.assignees||E[15]!==A.blockedByTags||E[16]!==A.parentTag||E[17]!==A.tag||E[18]!==A.template||E[19]!==A.type||E[20]!==Z||E[21]!==ee?(c=async e=>{let t=await ee(e);await Z([{draftType:A.type,tag:A.tag,parentTag:A.parentTag,blockedByTags:A.blockedByTags,template:A.template,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url,assignees:A.assignees??[],dependencyErrors:t.flatMap(sq)},...t.map(sW).filter(sH)])},E[14]=A.assignees,E[15]=A.blockedByTags,E[16]=A.parentTag,E[17]=A.tag,E[18]=A.template,E[19]=A.type,E[20]=Z,E[21]=ee,E[22]=c):c=E[22];let et=c,en=a2(A),ei=s$(A,en),ea=(0,v.useRef)(null),es=function(e){let t,n=(0,h.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let i=t;return(0,v.useSyncExternalStore)(sz,i)}(ea),er=M?.parent!=null,eo=(0,v.useRef)(null),el=G?.id??"",ec=A.template||"";E[23]!==ec||E[24]!==el?(d={repoId:el,filename:ec},E[23]=ec,E[24]=el,E[25]=d):d=E[25];let{isLoading:ed,data:eu}=nD(d),em=G??void 0;E[26]!==em?(u={repository:em},E[26]=em,E[27]=u):u=E[27];let eh=u;if(F||V||ed){let e;return E[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),E[28]=e):e=E[28],e}let ep=`${A.id}@${U}`;return E[29]!==es||E[30]!==ep?(p=(0,tR.S)({storageKeyPrefix:ep,insidePortal:es}),E[29]=es,E[30]=ep,E[31]=p):p=E[31],E[32]===Symbol.for("react.memo_cache_sentinel")?(f=(0,tP.G)("create-issue-preview"),E[32]=f):f=E[32],E[33]!==A?(g=(0,m.jsx)("div",{children:(0,m.jsx)(tV,{item:A})}),E[33]=A,E[34]=g):g=E[34],E[35]!==M||E[36]!==P||E[37]!==er?(y=er&&(0,m.jsx)("div",{children:(0,m.jsx)(sy,{node:M,onItemSelected:e=>P(e.item.id,!0)})}),E[35]=M,E[36]=P,E[37]=er,E[38]=y):y=E[38],E[39]!==g||E[40]!==y?(x=(0,m.jsxs)("div",{className:sg.toolbarLeft,children:[g,y]}),E[39]=g,E[40]=y,E[41]=x):x=E[41],E[42]!==M||E[43]!==J||E[44]!==D||E[45]!==eu?(b=(0,m.jsx)("div",{className:sg.toolbarActions,children:(0,m.jsx)(n3,{issueTemplate:eu,issueNode:M,issueFormRef:eo,noRepoAccess:J,onClose:D})}),E[42]=M,E[43]=J,E[44]=D,E[45]=eu,E[46]=b):b=E[46],E[47]!==x||E[48]!==b?(_=(0,m.jsxs)("div",{className:sg.toolbar,children:[x,b]}),E[47]=x,E[48]=b,E[49]=_):_=E[49],E[50]!==H?(j=H||[],E[50]=H,E[51]=j):j=E[51],E[52]!==A||E[53]!==G||E[54]!==z||E[55]!==j?(C=(0,m.jsx)(sN,{draftIssue:A,resolvedDraftIssueRepo:G,loadingDraftIssueRepo:z,topRepos:j}),E[52]=A,E[53]=G,E[54]=z,E[55]=j,E[56]=C):C=E[56],E[57]!==A?(w=(0,m.jsx)(sP,{draftIssue:A}),E[57]=A,E[58]=w):w=E[58],E[59]!==C||E[60]!==w?(N=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[C,w]}),E[59]=C,E[60]=w,E[61]=N):N=E[61],E[62]!==G||E[63]!==J?(S=J&&((t=G)&&!t.hasIssuesEnabled?(0,m.jsx)(tF,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:ef.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,m.jsx)(tF,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:ef.IssueDraftIcon}):void 0),E[62]=G,E[63]=J,E[64]=S):S=E[64],E[65]!==M||E[66]!==A||E[67]!==G||E[68]!==z||E[69]!==J||E[70]!==en||E[71]!==D||E[72]!==et||E[73]!==ei||E[74]!==eu||E[75]!==X?(I=!J&&(0,m.jsx)(sf,{draftIssue:A,issueNode:M,template:eu??void 0,issueFormRef:eo,loadingDraftIssueRepo:z,onCreate:et,onChange:en,onClose:D,onBeforeCreate:e=>X(G,e),onFieldChange:ei}),E[65]=M,E[66]=A,E[67]=G,E[68]=z,E[69]=J,E[70]=en,E[71]=D,E[72]=et,E[73]=ei,E[74]=eu,E[75]=X,E[76]=I):I=E[76],E[77]!==N||E[78]!==S||E[79]!==I?(k=(0,m.jsxs)("div",{className:sg.form,children:[N,S,I]}),E[77]=N,E[78]=S,E[79]=I,E[80]=k):k=E[80],E[81]!==_||E[82]!==k?(T=(0,m.jsxs)("div",{className:sg.container,ref:ea,children:[_,k]}),E[81]=_,E[82]=k,E[83]=T):T=E[83],E[84]!==eh||E[85]!==p||E[86]!==T?(L=(0,m.jsx)(tA.S,{optionConfig:p,preselectedData:eh,...f,children:T}),E[84]=eh,E[85]=p,E[86]=T,E[87]=L):L=E[87],L}function sH(e){return null!=e}function sW(e){return e.savedIssue}function sq(e){return e.errors}function sz(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{sV.displayName||(sV.displayName="CreateIssuePreview")}catch{}var sG=n(35573),sK=n(76158);function sQ({isPreviewOpening:e,issue:t,onClose:n}){let[i,a]=(0,v.useState)(e),{openItem:s}=(0,eQ.xx)(),r=nd().get(t.tag);(0,v.useEffect)(()=>{if(i){let e=setTimeout(()=>a(!1),400);return()=>clearTimeout(e)}},[i]);let o=(0,v.useMemo)(()=>(0,m.jsx)(tt.K,{icon:ef.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),l=(0,v.useMemo)(()=>({navigate:n5.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,onIssueDelete:n,additionalHeaderActions:o,showRepositoryPill:!0}),[n,o]),c=(0,v.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!c?(0,m.jsx)(tD.Q,{optionConfig:l}):(0,m.jsxs)("div",{className:sg.container,children:[(0,m.jsxs)("div",{className:sg.toolbar,children:[(0,m.jsx)("div",{className:sg.toolbarLeft,children:r.parent&&(0,m.jsx)(sy,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,m.jsx)("div",{className:sg.toolbarActions,children:(0,m.jsx)(n2,{issueNode:r,onSuccess:n})})]}),(0,m.jsx)("div",{className:sg.viewerContainer,children:(0,m.jsx)(sK.e,{children:(0,m.jsx)(sG.cI,{itemIdentifier:c,optionConfig:l})})})]})}try{sQ.displayName||(sQ.displayName="ExistingIssuePreview")}catch{}let sY=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:t},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}}}();sY.hash="470cf4272c31ec8565dec1240c55030a";let sJ=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:t},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}}}();sJ.hash="f03ef95aad392077538992e2c84a9752";var sX=n(61491),sZ=n(75908),s0=n(1667),s1=n(5547),s2=n(21052),s3=n(25779),s4=n(99892);async function s5({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],o=i.labels?.map(e=>e.name)||[],l=void 0!==i.labels&&!(0,iN.A)(r.sort(),o.sort()),c=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),d=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,u=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],m=i.projects?.map(e=>e.id)||[],h=void 0!==i.projects&&!(0,iN.A)(u.sort(),m.sort()),p=n.name!==t.title,f=void 0!==i.body&&i.body!==(t.body||""),g=[];if(l){let a=new Promise((a,s)=>{(0,s2.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"labels",promise:a})}let y=t.assignees?.nodes?.filter(e=>null!=e),x=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,nB.v)(e.login))??[],o=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(o,t??[]))return new Promise((t,n)=>{(0,s0.j)({environment:a,input:{issueId:e.id,assignedActors:o,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:y,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(x&&g.push({operation:"assignees",promise:x}),c){let a=new Promise((a,s)=>{(0,s3.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"milestone",promise:a})}if(d){let a=new Promise((a,s)=>{(0,s1._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"issueType",promise:a})}if(h){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await s7(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});g.push({operation:"projects",promise:a})}if(p||f){let a=new Promise((a,s)=>{(0,no.commitMutation)(e,{mutation:sY,variables:{input:{id:t.id,clientMutationId:n.messageId,...p&&{title:n.name},...f&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"content",promise:a})}let v=[],b=[];if(g.length>0)for(let[e,t]of(await Promise.allSettled(g.map(e=>e.promise))).entries()){let n=g[e]?.operation;n&&("fulfilled"===t.status?v.push(n):b.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let _="assignCopilot";try{await s6({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:b.length>0,onCompleted:()=>v.push(_)})}catch(e){b.push({operation:_,error:e instanceof Error?e:Error("Unknown error")})}if(0===v.length&&0===b.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let j=(e=>{let a=e.includes("content")?n.name:t.title,s=e.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[];return{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,title:a,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:s}})(v);s&&s({result:{successful:v,failed:b,issue:j}})}async function s6({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,nB.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,sX.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,sZ.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function s7(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),o=t.filter(e=>!r.some(t=>t?.project.id===e.id)),l=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===o.length&&0===l.length)return;let c=[],d=[];for(let t of o){let n=new Promise(n=>{(0,s4.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{c.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});d.push(n)}for(let e of l){let t=new Promise(t=>{(0,no.commitMutation)(i,{mutation:sJ,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{c.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});d.push(t)}if(await Promise.all(d),c.length>0){let e=`Failed to update ${c.length} project(s): ${c.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=c,t.detailedMessage=e,t}}function s8({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:a,onUpdateError:s,onClose:r}){let o=(0,no.useRelayEnvironment)(),[l,c]=(0,v.useState)(!1),{clearSessionData:d,assignees:u,labels:h,milestone:p,issueType:f,projects:g}=(0,tW.u)(),y=(0,v.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?u:void 0,labels:n?.labelable?h:void 0,milestone:n?.milestoneable?p:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?g:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[u,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,h,p,g]),x=(0,v.useCallback)(()=>{d(),i.current?.clearSessionStorage()},[d,i]),b=(0,v.useCallback)(()=>{x(),r?.()},[x,r]),_=nx(),j=(0,v.useCallback)(async l=>{l.preventDefault(),c(!0);try{let[l,d]=t.repository?.split("/")??[];if(!l||!d||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",s?.(e),c(!1);return}let u=await nE(o,l,d,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",s?.(e),c(!1);return}let m=(0,nC.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",s?.(e);return}let h=t.body??"";if(n&&(0,nw.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",s?.(t),e[0]?.focus();return}h=i.current.markdown()??""}h=await _(e,h);let p=(0,G.G7)("issues_copilot_cross_repo_assign"),f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,nB.v)(e.login)),g=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&p&&!f,x=y(),v={body:h,assignees:x.assignees,labels:x.labels,milestone:x.milestone,issueType:x.issueType,projects:x.projects,hasInaccessibleProject:x.hasInaccessibleProject};await s5({environment:o,currentIssue:u,draftIssue:t,proposedChanges:v,canUseCopilotAssignment:g,onCompleted:e=>{e.result.failed.length>0?s?.(e):e.result.successful.length>0&&e.result.issue?(b(),r(),a?.(e.result.issue)):(b(),r())}})}catch{let e=Error("Update failed");e.name="OTHER",s?.(e)}finally{c(!1)}},[b,t,o,y,i,e,r,a,s,n,_]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(tm.Q,{variant:"primary","data-testid":"update-issue-button",onClick:j,disabled:l||!t.bodyVersion,children:l?"Updating...":"Update"})})}try{s8.displayName||(s8.displayName="UpdateIssueButton")}catch{}function s9(e){var t,n;let i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N,S,I,k,T=(0,h.c)(72),{isPreviewOpening:L,issue:E,onClose:R}=e,[A,D]=(0,v.useState)(L),[P,O]=(0,v.useState)(null),[M,F]=(0,v.useState)(E.id);T[0]!==A?(i=()=>{if(A){let e=setTimeout(()=>D(!1),400);return()=>clearTimeout(e)}},a=[A],T[0]=A,T[1]=i,T[2]=a):(i=T[1],a=T[2]),(0,v.useEffect)(i,a),M!==E.id&&(F(E.id),O(null));let{selectedThreadID:B}=(0,$.Pk)(),U=null!=E.repository||!E.isStreaming,V=(null!=E.bodyVersion||!E.isStreaming)&&!E.bodyVersion;T[3]!==E.repository?(s=E.repository?.split("/")??[],T[3]=E.repository,T[4]=s):s=T[4];let[H,W]=s;T[5]!==H||T[6]!==W?(r={owner:H,repo:W},T[5]=H,T[6]=W,T[7]=r):r=T[7];let{isLoading:q,data:z}=sU(r),G=z?.id??"",Q=E.template||"";T[8]!==G||T[9]!==Q?(o={repoId:G,filename:Q},T[8]=G,T[9]=Q,T[10]=o):o=T[10];let{isLoading:Y,data:J}=nD(o),X=null!=z&&(!z.hasIssuesEnabled||null!=z.viewerInteractionLimitReasonHTML&&z.viewerInteractionLimitReasonHTML?.length>0),Z=nx(),ee=nV();T[11]!==ee?(l=async e=>{await ee([e])},T[11]=ee,T[12]=l):l=T[12];let et=l;T[13]!==ee||T[14]!==E.id||T[15]!==E.repository?(c=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",O([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(rl))}),O(t.failed.map(ro));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(rr).join(", "),i=t.successful.join(", ");(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(rs)),successfulOperations:JSON.stringify(t.successful)});try{await ee([t.issue],`Inform the user that some updates failed (${e}), but other changes were saved successfully. Ask them to please review the issue.`)}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",O([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:E.id,errorType:"OTHER"}),O([t])}},T[13]=ee,T[14]=E.id,T[15]=E.repository,T[16]=c):c=T[16];let en=c,ei=a2(E),ea=s$(E,ei),es=(0,v.useRef)(null),er=function(e){let t,n=(0,h.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let i=t;return(0,v.useSyncExternalStore)(rc,i)}(es),eo=(0,v.useRef)(null);e:{let e;if(!P||0===P.length){d=null;break e}T[17]!==P?(e=P.map(re),T[17]=P,T[18]=e):e=T[18],d=e}let el=d,ec=z??void 0;T[19]!==ec?(u={repository:ec},T[19]=ec,T[20]=u):u=T[20];let ed=u;if(A||!U||q||Y){let e;return T[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.Q,{optionConfig:{useViewportQueries:!1}}),T[21]=e):e=T[21],e}if(!z){let e;return T[22]!==E.repository?(e=(t=E.repository)?(0,m.jsx)(tF,{title:`${t} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:ef.IssueDraftIcon}):(0,m.jsx)(tF,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:ef.IssueDraftIcon}),T[22]=E.repository,T[23]=e):e=T[23],e}if(X){let e;return T[24]!==z?(e=(n=z).hasIssuesEnabled?n.viewerInteractionLimitReasonHTML?(0,m.jsx)(tF,{title:"You cannot update issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:ef.IssueDraftIcon}):void 0:(0,m.jsx)(tF,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:ef.IssueDraftIcon}),T[24]=z,T[25]=e):e=T[25],e}if(V){let e;return T[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tF,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:ef.IssueDraftIcon}),T[26]=e):e=T[26],e}let eu=`${E.id}@${B}`;T[27]!==er||T[28]!==eu?(p=(0,tR.S)({storageKeyPrefix:eu,insidePortal:er}),T[27]=er,T[28]=eu,T[29]=p):p=T[29],T[30]===Symbol.for("react.memo_cache_sentinel")?(f=(0,tP.G)("update-issue-preview"),T[30]=f):f=T[30],T[31]!==E?(g=(0,m.jsx)("div",{className:sg.toolbarLeft,children:(0,m.jsx)(tV,{item:E})}),T[31]=E,T[32]=g):g=T[32];let em=J??void 0;T[33]!==z||T[34]!==R||T[35]!==et||T[36]!==en||T[37]!==em||T[38]!==E?(y=(0,m.jsx)("div",{className:sg.toolbarActions,children:(0,m.jsx)(s8,{issueRepo:z,draftIssue:E,template:em,issueFormRef:eo,onUpdate:et,onUpdateError:en,onClose:R})}),T[33]=z,T[34]=R,T[35]=et,T[36]=en,T[37]=em,T[38]=E,T[39]=y):y=T[39],T[40]!==g||T[41]!==y?(x=(0,m.jsxs)("div",{className:sg.toolbar,children:[g,y]}),T[40]=g,T[41]=y,T[42]=x):x=T[42];let eh=P&&el;T[43]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsx)(ef.RepoIcon,{}),T[43]=b):b=T[43];let ep=`${z.owner.login}/${z.name}`;T[44]!==ep?(_=(0,m.jsx)("b",{children:ep}),T[44]=ep,T[45]=_):_=T[45],T[46]!==E?(j=(0,m.jsx)(sP,{draftIssue:E}),T[46]=E,T[47]=j):j=T[47],T[48]!==_||T[49]!==j?(C=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[b,_,j]}),T[48]=_,T[49]=j,T[50]=C):C=T[50];let eg=J??void 0;return T[51]!==z||T[52]!==Z?(w=e=>Z(z,e),T[51]=z,T[52]=Z,T[53]=w):w=T[53],T[54]!==ei||T[55]!==R||T[56]!==ea||T[57]!==eg||T[58]!==w||T[59]!==E?(N=(0,m.jsx)(sf,{draftIssue:E,template:eg,issueFormRef:eo,onChange:ei,onClose:R,onBeforeCreate:w,onFieldChange:ea}),T[54]=ei,T[55]=R,T[56]=ea,T[57]=eg,T[58]=w,T[59]=E,T[60]=N):N=T[60],T[61]!==eh||T[62]!==C||T[63]!==N?(S=(0,m.jsxs)("div",{className:sg.form,children:[eh,C,N]}),T[61]=eh,T[62]=C,T[63]=N,T[64]=S):S=T[64],T[65]!==x||T[66]!==S?(I=(0,m.jsxs)("div",{className:sg.container,ref:es,children:[x,S]}),T[65]=x,T[66]=S,T[67]=I):I=T[67],T[68]!==ed||T[69]!==p||T[70]!==I?(k=(0,m.jsx)(tA.S,{optionConfig:p,preselectedData:ed,...f,children:I}),T[68]=ed,T[69]=p,T[70]=I,T[71]=k):k=T[71],k}function re(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(ra),t=i.filter(ri),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(rn).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(rt).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,m.jsx)(q.l,{variant:i,title:t,description:n},`error-${e.name}`)}function rt(e){return`"${e.projectTitle}"`}function rn(e){return`"${e.projectTitle}"`}function ri(e){return"remove"===e.operation}function ra(e){return"add"===e.operation}function rs(e){return{operation:e.operation,error:e.error.message}}function rr(e){return e.operation}function ro(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function rl(e){return{operation:e.operation,error:e.error.message}}function rc(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{s9.displayName||(s9.displayName="UpdateIssuePreview")}catch{}var rd=n(98755);function ru(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,H.b)(),{isLoading:r,isError:o,data:l}=(0,ns.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,n6.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,v.useEffect)(()=>{l?.contents&&i.value!==l.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:l.contents,isStreaming:!1}})},[l?.contents,e,t,i,n]),{isLoading:r,isError:o,data:l}}function rm(e){let t,n,i,a,s=(0,h.c)(12);if(s[0]!==e.language||s[1]!==e.value){let a,r,o=new Blob([e.value]).size;s[5]===Symbol.for("react.memo_cache_sentinel")?(a=new Set(["markdown","html"]),s[5]=a):a=s[5];let l=a;s[6]!==e.value?(r=e.value.split(`
`),s[6]=e.value,s[7]=r):r=s[7],t=r.length,n=l.has(e.language),i=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),s[0]=e.language,s[1]=e.value,s[2]=t,s[3]=n,s[4]=i}else t=s[2],n=s[3],i=s[4];return s[8]!==t||s[9]!==n||s[10]!==i?(a={linesOfCode:t,isPreviewable:n,size:i},s[8]=t,s[9]=n,s[10]=i,s[11]=a):a=s[11],a}let rh={container:"DiffPreview-module__container--BN04s",toolbar:"DiffPreview-module__toolbar--RiBuK",toolbarLeft:"DiffPreview-module__toolbarLeft--o4LQ6",toolbarLoC:"DiffPreview-module__toolbarLoC--xR8Qi",toolbarActions:"DiffPreview-module__toolbarActions--EAoyT"};var rp=n(83510),rf=n(34522);let rg={container:"CodeMirrorDiff-module__container--RCtmx",newFile:"CodeMirrorDiff-module__newFile--vX9DQ",deletedFile:"CodeMirrorDiff-module__deletedFile--_w4wx"};var ry=n(53839),rx=n(63133),rv=n(98325),rb=n(71381),r_=n(74713),rj=n(11636),rC=n(18351),rw=n(24774),rN=n(41185);function rS(e){return e.left&&e.right?"split"===e.view?(0,m.jsx)(rI,{...e}):(0,m.jsx)(rk,{...e}):(0,m.jsx)(rT,{...e})}function rI(e){let t=(0,v.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:n,parentRef:i,right:a,rightLabelledBy:s,spacing:r}){let o=(0,v.useRef)(null),l=(0,v.useMemo)(()=>new ry.xx,[]),c=(0,v.useMemo)(()=>new ry.xx,[]),d=(0,v.useMemo)(()=>new ry.xx,[]),[u,m]=(0,v.useMemo)(()=>{let e=[...rv.o,...(0,rb.u)(r),(0,r_.h)(),c.of([]),l.of([]),d.of([(0,rj.O)()]),(0,rN.T)()],t=[(0,rC.I)(n),rw.Lz.contentAttributes.of({"aria-labelledby":n})],i=[(0,rC.I)(s),rw.Lz.contentAttributes.of({"aria-labelledby":s})];return[e.concat(t),e.concat(i)]},[r,c,l,d,n,s]);(0,v.useEffect)(()=>{let n=i.current;if(n)return o.current=new rp.SV({a:{doc:t,extensions:u},b:{doc:a,extensions:m},parent:n,gutter:!1}),(0,rx.r)({autoCompleteCompartment:l,fileName:e,languageCompartment:c,managedExtensions:[],themeCompartment:d,view:o.current?.a,viewB:o.current?.b}),()=>o.current?.destroy()},[])}({...e,parentRef:t}),(0,m.jsx)("div",{ref:t,className:rg.container})}function rk(e){let t=(0,v.useMemo)(()=>[(0,rp.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,m.jsx)(rf.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:rg.container,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:n5.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}function rT(e){let t=""===e.left?rg.newFile:rg.deletedFile,n=e.right||e.left;return(0,m.jsx)(rf.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:t,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:n,onChange:n5.l,placeholder:"Loading...",hideHelp:!0})}try{rS.displayName||(rS.displayName="CodeMirrorDiff")}catch{}try{rI.displayName||(rI.displayName="CodeMirrorDiffSplit")}catch{}try{rk.displayName||(rk.displayName="CodeMirrorDiffUnified")}catch{}try{rT.displayName||(rT.displayName="CodeMirrorDiffNewOrDeletedFile")}catch{}function rL(e){let t,n,i=(0,h.c)(7),{language:a,value:s}=e;i[0]!==a||i[1]!==s?(t=function({language:e,value:t}){var n;let i=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,i),indentWithTabs:"tab"===i,lineWrapping:function(e){let t=(0,il.vL)(e);return t?.wrap??!1}(e)}}({language:a,value:s}),i[0]=a,i[1]=s,i[2]=t):t=i[2];let r=t;return i[3]!==r.indentUnit||i[4]!==r.indentWithTabs||i[5]!==r.lineWrapping?(n={indentUnit:r.indentUnit,indentWithTabs:r.indentWithTabs,lineWrapping:r.lineWrapping},i[3]=r.indentUnit,i[4]=r.indentWithTabs,i[5]=r.lineWrapping,i[6]=n):n=i[6],n}function rE(e){let t,n,i,a,s,r=(0,h.c)(24),{left:o,right:l,view:c}=e,d=(0,v.useId)(),u=(0,v.useId)(),p=(0,v.useId)(),f=rL(o);return r[0]!==o.name||r[1]!==d?(t=(0,m.jsxs)("span",{id:d,className:"sr-only",children:[o.name," original file contents"]}),r[0]=o.name,r[1]=d,r[2]=t):t=r[2],r[3]!==l.name||r[4]!==u?(n=(0,m.jsxs)("span",{id:u,className:"sr-only",children:[l.name," modified file contents"]}),r[3]=l.name,r[4]=u,r[5]=n):n=r[5],r[6]!==o.name||r[7]!==l.name||r[8]!==p?(i=(0,m.jsxs)("span",{id:p,className:"sr-only",children:[o.name," and ",l.name," unified diff view"]}),r[6]=o.name,r[7]=l.name,r[8]=p,r[9]=i):i=r[9],r[10]!==f||r[11]!==o.name||r[12]!==o.value||r[13]!==d||r[14]!==l.value||r[15]!==u||r[16]!==p||r[17]!==c?(a=(0,m.jsx)(rS,{fileName:o.name,left:o.value,leftLabelledBy:d,right:l.value,rightLabelledBy:u,spacing:f,unifiedLabelledBy:p,view:c}),r[10]=f,r[11]=o.name,r[12]=o.value,r[13]=d,r[14]=l.value,r[15]=u,r[16]=p,r[17]=c,r[18]=a):a=r[18],r[19]!==t||r[20]!==n||r[21]!==i||r[22]!==a?(s=(0,m.jsxs)("div",{children:[t,n,i,a]}),r[19]=t,r[20]=n,r[21]=i,r[22]=a,r[23]=s):s=r[23],s}try{rE.displayName||(rE.displayName="DiffView")}catch{}function rR(e){let t,n,i,a,s,r,o,l=(0,h.c)(15),{isUnifiedDiff:c,setIsUnifiedDiff:d}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(eZ.l.GroupHeading,{children:"Layout"}),l[1]=n):n=l[1],l[2]!==d?(i=()=>d(!0),l[2]=d,l[3]=i):i=l[3],l[4]!==c||l[5]!==i?(a=(0,m.jsx)(eZ.l.Item,{selected:c,onSelect:i,children:"Unified"}),l[4]=c,l[5]=i,l[6]=a):a=l[6];let u=!c;return l[7]!==d?(s=()=>d(!1),l[7]=d,l[8]=s):s=l[8],l[9]!==u||l[10]!==s?(r=(0,m.jsx)(eZ.l.Item,{selected:u,onSelect:s,children:"Split"}),l[9]=u,l[10]=s,l[11]=r):r=l[11],l[12]!==a||l[13]!==r?(o=(0,m.jsxs)(eX.W,{children:[t,(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Group,{selectionVariant:"single",children:[n,a,r]})})})]}),l[12]=a,l[13]=r,l[14]=o):o=l[14],o}try{rR.displayName||(rR.displayName="DiffViewSettings")}catch{}let rA=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function rD(e){let t,n,i,a,s,r,o,l,c,d=(0,h.c)(29),{fileDiff:u}=e,{updateItem:p}=(0,eQ.xx)(),f=u.baseFile,g=u.headFile,[y,x]=(0,v.useState)(!0),b=f.value&&g.value,_=!f.value&&g.value,j=f.value&&!g.value,{linesOfCode:C,size:w}=rm(_||b?g:f),N=`${_?"Added: ":j?"Deleted: ":""} ${C} `;ru(u,p,"base"),ru(u,p,"head");let S=1===C?"line":"lines";d[0]!==N||d[1]!==w||d[2]!==S?(t=(0,m.jsx)("div",{className:rh.toolbarLeft,children:(0,m.jsxs)("p",{className:rh.toolbarLoC,children:[N," ",S," \xb7 ",w]})}),d[0]=N,d[1]=w,d[2]=S,d[3]=t):t=d[3],d[4]!==f.reference?(n=f.reference&&"url"in f.reference&&(0,m.jsx)(tt.K,{as:"a","aria-label":"Go to the file",icon:ef.LinkExternalIcon,variant:"invisible",href:f.reference.url}),d[4]=f.reference,d[5]=n):n=d[5],d[6]!==g.value?(i=(0,m.jsx)(rd.T,{textToCopy:g.value,ariaLabel:"Copy code",onCopy:rP}),d[6]=g.value,d[7]=i):i=d[7],d[8]!==g.name||d[9]!==g.value?(a=(0,m.jsx)(tt.K,{"aria-label":"Download code",icon:ef.DownloadIcon,variant:"invisible",onClick:()=>{let e=g.name;rA(new File([g.value],e)),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),d[8]=g.name,d[9]=g.value,d[10]=a):a=d[10],d[11]!==b||d[12]!==y?(s=b&&(0,m.jsx)(rR,{setIsUnifiedDiff:x,isUnifiedDiff:y}),d[11]=b,d[12]=y,d[13]=s):s=d[13],d[14]!==n||d[15]!==i||d[16]!==a||d[17]!==s?(r=(0,m.jsxs)("div",{className:rh.toolbarActions,children:[n,i,a,s]}),d[14]=n,d[15]=i,d[16]=a,d[17]=s,d[18]=r):r=d[18],d[19]!==t||d[20]!==r?(o=(0,m.jsxs)("div",{className:rh.toolbar,children:[t,r]}),d[19]=t,d[20]=r,d[21]=o):o=d[21];let I=y?"unified":"split";return d[22]!==f||d[23]!==g||d[24]!==I?(l=(0,m.jsx)(rE,{left:f,right:g,view:I}),d[22]=f,d[23]=g,d[24]=I,d[25]=l):l=d[25],d[26]!==l||d[27]!==o?(c=(0,m.jsxs)("div",{className:rh.container,children:[o,l]}),d[26]=l,d[27]=o,d[28]=c):c=d[28],c}function rP(){return(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{rD.displayName||(rD.displayName="DiffPreview")}catch{}var rO=n(72439),rM=n(59121),rF=n(23125),rB=n(41649);let r$={container:"FilePreview-module__container--P2h3J",previewContainer:"FilePreview-module__previewContainer--KRQup",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--lxGn_",toolbar:"FilePreview-module__toolbar--ZZWN1",toolbarLeft:"FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"FilePreview-module__toolbarActions--h04aW",content:"FilePreview-module__content--HoIot",footer:"FilePreview-module__footer--o2xcM"};var rU=n(74807);let rV={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function rH(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let rW={container:"SandboxView-module__container--PAb4m",iframe:"SandboxView-module__iframe--r6S4N"},rq={error:"ErrorMessage-module__error--xol56",errorIcon:"ErrorMessage-module__errorIcon--ODD8l",errorHeader:"ErrorMessage-module__errorHeader--hmJF7"};function rz(e){let t,n=(0,h.c)(4),{error:i}=e;if(n[0]!==i){let e,a,s=i?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:rq.errorIcon,children:(0,m.jsx)(ef.StopIcon,{size:24})}),a=(0,m.jsx)("h2",{className:rq.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,m.jsxs)("div",{className:rq.error,children:[e,a,s.length>0?(0,m.jsx)("p",{children:s.map(rG)}):(0,m.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=i,n[1]=t}else t=n[1];return t}function rG(e){return(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("br",{})]},`error-line-${e}}`)}try{rz.displayName||(rz.displayName="ErrorMessage")}catch{}function rK(e){let t,n,i,a,s=(0,h.c)(14),{content:r,inlineScripts:o,inlineStyles:l,headScripts:c,bodyScripts:d,styles:u,viewscreenUrl:p}=e,f=(0,G.G7)("viewscreen_sandbox");s[0]!==p?(n=new URL("view/sandbox?url=client://sandbox",p).toString(),t=new URL(n,to.fV.origin),s[0]=p,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let g=t.origin,y=(0,v.useRef)(null),x=(0,v.useRef)(null);s[3]!==d||s[4]!==r||s[5]!==c||s[6]!==o||s[7]!==l||s[8]!==u?(i={content:r,headScripts:c,bodyScripts:d,inlineScripts:o,inlineStyles:l,styles:u},s[3]=d,s[4]=r,s[5]=c,s[6]=o,s[7]=l,s[8]=u,s[9]=i):i=s[9];let{renderState:b,errorMessage:_}=function(e,t,n,i){let a,s,r,o,l,c,d=(0,h.c)(16),[u,m]=(0,v.useState)(rV.LOADING),[p,f]=(0,v.useState)();d[0]!==t||d[1]!==e||d[2]!==i?(a=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let o=r.body,l=n.current?.contentWindow;switch(o){case"hello":rH(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),rH(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(rV.ERROR),r.payload?.error&&a(r.payload.error);break;case"loading":s(rV.LOADING);break;case"loaded":if(!n.current||!i.current)return;s(rV.LOADED);break;case"ready":if(!n.current||!i.current)return;s(rV.READY)}})(n,0,e,t,f,m),d[0]=t,d[1]=e,d[2]=i,d[3]=a):a=d[3];let g=a;return d[4]!==g?(s=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),r=[g],d[4]=g,d[5]=s,d[6]=r):(s=d[5],r=d[6]),(0,v.useEffect)(s,r),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(o=()=>{u===rV.READY&&e.current&&t.current&&function(e,t,n){let i={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};rH(e.contentWindow,i)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=o,d[12]=l):(o=d[11],l=d[12]),(0,v.useEffect)(o,l),d[13]!==p||d[14]!==u?(c={renderState:u,errorMessage:p},d[13]=p,d[14]=u,d[15]=c):c=d[15],c}(y,x,i,g);if(!f)return null;for(let e of((0,tv.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...c||[],...d||[],...u||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,tv.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==_||s[11]!==b||s[12]!==n?(a=(0,m.jsx)("div",{ref:x,className:rW.container,children:b===rV.ERROR?(0,m.jsx)(rz,{error:_}):(0,m.jsx)("iframe",{ref:y,className:rW.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=_,s[11]=b,s[12]=n,s[13]=a):a=s[13],a}try{rK.displayName||(rK.displayName="SandboxView")}catch{}let rQ={loadingContainer:"HtmlPreview-module__loadingContainer--t3YC7",loadingHead:"HtmlPreview-module__loadingHead--XAabR",loadingText:"HtmlPreview-module__loadingText--WYn1B"};function rY(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function rJ(e){let t,n,i=(0,h.c)(15),{file:a}=e,{previewUrl:s}=(0,F.X)(),{items:r,versionedItems:o}=(0,eQ.xx)(),{scripts:l,styles:c,files:d}=function(e,t,n){let i=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>rY(e,t,n)),a=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>rY(e,t,n)),s=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...i.map(e=>e?.value??""),...s,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:a.map(e=>e?.value??"").join(`
`),files:i.concat(a)}}(a.value,r,o),[u,p]=(0,v.useState)(!1),f=(a.isStreaming||d.some(rX))&&!u;i[0]!==f||i[1]!==p?(t=()=>{if(f){let e=setTimeout(()=>{p(!0)},3e3);return()=>clearTimeout(e)}},i[0]=f,i[1]=p,i[2]=t):t=i[2],(0,v.useEffect)(t),i[3]!==a.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(a.value),i[3]=a.value,i[4]=n):n=i[4];let{headScripts:g,bodyScripts:y,styles:x}=n;if(f){let e;return i[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:rQ.loadingContainer,children:[(0,m.jsx)("div",{className:rQ.loadingHead,children:(0,m.jsx)(rU.N,{animationType:"thinking",loopAnimation:!0})}),(0,m.jsx)("p",{className:rQ.loadingText,children:"Preparing your preview\u2026"})]}),i[5]=e):e=i[5],e}{let e;return i[6]!==y||i[7]!==x||i[8]!==a.id||i[9]!==a.value||i[10]!==g||i[11]!==s||i[12]!==l||i[13]!==c?(e=(0,m.jsx)(rK,{inlineScripts:l,inlineStyles:c,headScripts:g,bodyScripts:y,styles:x,content:a.value,viewscreenUrl:s},a.id),i[6]=y,i[7]=x,i[8]=a.id,i[9]=a.value,i[10]=g,i[11]=s,i[12]=l,i[13]=c,i[14]=e):e=i[14],e}}function rX(e){return!e||e.isStreaming}try{rJ.displayName||(rJ.displayName="HtmlPreview")}catch{}var rZ=n(24880),r0=n(73017),r1=n(74022);let r2={markdownPreview:"MarkdownPreview-module__markdownPreview--KrJBX",spinner:"MarkdownPreview-module__spinner--rHtSt",error:"MarkdownPreview-module__error--Kjmwv",errorIcon:"MarkdownPreview-module__errorIcon--msbkW",errorHeader:"MarkdownPreview-module__errorHeader--yOGh9",hideHeadingAnchors:"MarkdownPreview-module__hideHeadingAnchors--wU3US"};function r3(e){let t,n,i,a,s=(0,h.c)(14),{content:r,className:o,fallbackToRaw:l,hideHeadingAnchors:c}=e,d=void 0!==l&&l,u=function(e,t,n){let i,a,s,r=(0,h.c)(8),[o,l]=(0,v.useState)(e),[c,d]=(0,v.useState)(t);2e3!==r[0]?(i=(0,r1.A)(l,n),r[0]=n,r[1]=i):i=r[1];let u=i;return r[2]!==c||r[3]!==t||r[4]!==u||r[5]!==e?(a=()=>{t!==c?(u.cancel(),l(e),d(t)):u(e)},s=[u,e,t,c],r[2]=c,r[3]=t,r[4]=u,r[5]=e,r[6]=a,r[7]=s):(a=r[6],s=r[7]),(0,v.useEffect)(a,s),o}(r.value,r.name,2e3);s[0]!==r.name||s[1]!==u?(t={queryKey:["copilot-immersive","MarkdownPreview",u,r.name],queryFn:async()=>{let e=await (0,nr.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:u,filename:r.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:rZ.rX,staleTime:1/0},s[0]=r.name,s[1]=u,s[2]=t):t=s[2];let{status:p,data:f}=(0,ns.I)(t),g=void 0!==c&&c&&r2.hideHeadingAnchors;return s[3]!==o||s[4]!==g?(n=(0,x.$)("readme html-blob blob",r2.markdownPreview,g,o),s[3]=o,s[4]=g,s[5]=n):n=s[5],s[6]!==r||s[7]!==f||s[8]!==d||s[9]!==p?(i="pending"===p?(0,m.jsx)("div",{className:r2.spinner,children:(0,m.jsx)(tG.A,{srText:"Loading Markdown preview\u2026"})}):"error"===p?d?(0,m.jsx)(r4,{content:r}):(0,m.jsxs)("div",{className:r2.error,children:[(0,m.jsx)("span",{className:r2.errorIcon,children:(0,m.jsx)(ef.StopIcon,{size:24})}),(0,m.jsx)("h2",{className:r2.errorHeader,children:"Markdown rendering failed"}),(0,m.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,m.jsx)(r0.$6,{className:"markdown-body",html:f.html}),s[6]=r,s[7]=f,s[8]=d,s[9]=p,s[10]=i):i=s[10],s[11]!==n||s[12]!==i?(a=(0,m.jsx)("div",{className:n,children:i}),s[11]=n,s[12]=i,s[13]=a):a=s[13],a}function r4(e){let t,n,i,a,s=(0,h.c)(13),{content:r}=e,o=(0,v.useId)();s[0]!==r.value?(t={value:r.value,language:"markdown"},s[0]=r.value,s[1]=t):t=s[1];let l=rL(t);return s[2]!==r.name||s[3]!==o?(n=(0,m.jsxs)("span",{id:o,className:"sr-only",children:[r.name," raw markdown contents"]}),s[2]=r.name,s[3]=o,s[4]=n):n=s[4],s[5]!==l||s[6]!==r.name||s[7]!==r.value||s[8]!==o?(i=(0,m.jsx)(rf.default,{ariaLabelledBy:o,fileName:r.name,isReadOnly:!0,spacing:l,value:r.value,onChange:n5.l,hideHelp:!0}),s[5]=l,s[6]=r.name,s[7]=r.value,s[8]=o,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a=(0,m.jsxs)(m.Fragment,{children:[n,i]}),s[10]=n,s[11]=i,s[12]=a):a=s[12],a}try{r3.displayName||(r3.displayName="MarkdownPreview")}catch{}try{r4.displayName||(r4.displayName="RawMarkdownPreview")}catch{}function r5(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N=(0,h.c)(67),{isPreviewOpening:S,file:I,onClose:k}=e,{updateItem:T,items:L,versionedItems:E}=(0,eQ.xx)(),R=(0,$.Pk)();N[0]!==I.isStreaming||N[1]!==I.messageId||N[2]!==R.messages?(t=I.isStreaming?R.messages[R.messages.length-1]:R.messages.find(e=>e.id===I.messageId),N[0]=I.isStreaming,N[1]=I.messageId,N[2]=R.messages,N[3]=t):t=N[3];let A=t,{linesOfCode:D,isPreviewable:P,size:O}=rm(I);!function(e,t){let n,i,a,s,r,o,l,c=(0,h.c)(25),{reference:d}=e,u=(0,H.b)(),m=d?.type;c[0]!==d?(n=d?(0,n6.Vb)(d):void 0,c[0]=d,c[1]=n):n=c[1],c[2]!==m||c[3]!==n?(i=["copilot-reference-preview","copilot","references",m,n],c[2]=m,c[3]=n,c[4]=i):i=c[4],c[5]!==e||c[6]!==u||c[7]!==d||c[8]!==t?(a=async()=>{if(!d||"file"!==d.type||e.value)return null;let n=await u.service.hydrateReference(d);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},c[5]=e,c[6]=u,c[7]=d,c[8]=t,c[9]=a):a=c[9],c[10]!==i||c[11]!==a?(s={queryKey:i,queryFn:a,staleTime:1/0},c[10]=i,c[11]=a,c[12]=s):s=c[12];let{isLoading:p,isError:f,data:g}=(0,ns.I)(s);c[13]!==g||c[14]!==e||c[15]!==t?(r=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},c[13]=g,c[14]=e,c[15]=t,c[16]=r):r=c[16];let y=g?.contents;c[17]!==e||c[18]!==y||c[19]!==t?(o=[y,e,t],c[17]=e,c[18]=y,c[19]=t,c[20]=o):o=c[20],(0,v.useEffect)(r,o),c[21]!==g||c[22]!==f||c[23]!==p?(l={isLoading:p,isError:f,data:g},c[21]=g,c[22]=f,c[23]=p,c[24]=l):l=c[24]}(I,T);let[M,F]=(0,v.useState)("code"),[B,U]=(0,v.useState)(!0),[V,W]=(0,v.useState)(void 0);N[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{W(e)},N[4]=n):n=N[4];let q=n;N[5]!==I||N[6]!==L||N[7]!==E?(i=(0,t$.SX)(I,L,E),N[5]=I,N[6]=L,N[7]=E,N[8]=i):i=N[8];let z=i,G=!!z;N[9]!==A?.error?.type||N[10]!==k?(a=()=>{(A?.error?.type==="publicCode"||A?.error?.type==="filtered")&&k()},N[9]=A?.error?.type,N[10]=k,N[11]=a):a=N[11];let K=A?.error;if(N[12]!==k||N[13]!==K?(s=[K,k],N[12]=k,N[13]=K,N[14]=s):s=N[14],(0,v.useEffect)(a,s),N[15]!==G||N[16]!==P||N[17]!==M){if(r=[["code","Code"]],o="code",P&&(r.unshift(["preview","Preview"]),o="preview"===M?"preview":"code"),G){let e;N[20]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],N[20]=e):e=N[20],r.push(e),o="diff"===M?"diff":o}N[15]=G,N[16]=P,N[17]=M,N[18]=r,N[19]=o}else r=N[18],o=N[19];e:{var Q;if("object"==typeof(Q=I.reference)&&null!==Q&&"repoOwner"in Q&&"repoName"in Q&&"string"==typeof Q.repoOwner&&"string"==typeof Q.repoName){l=`${I.reference.repoOwner}/${I.reference.repoName}/${I.name}`;break e}l=I.name}let Y=l;N[21]!==r||N[22]!==G||N[23]!==P||N[24]!==M?(c=(P||G)&&(0,m.jsx)(rM.I,{"aria-label":"File view",onChange:e=>{let t=r[e]?.[0]||"code";F(t),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:r.map(e=>{let[t,n]=e;return(0,m.jsx)(rM.I.Button,{selected:M===t,children:n},t)})}),N[21]=r,N[22]=G,N[23]=P,N[24]=M,N[25]=c):c=N[25],N[26]!==I?(d=(0,m.jsx)(tV,{item:I,onVersionSelect:q}),N[26]=I,N[27]=d):d=N[27];let J=1===D?"line":"lines";return N[28]!==D||N[29]!==O||N[30]!==J?(u=(0,m.jsxs)("p",{className:r$.toolbarLoC,children:[D," ",J," \xb7 ",O]}),N[28]=D,N[29]=O,N[30]=J,N[31]=u):u=N[31],N[32]!==u||N[33]!==c||N[34]!==d?(p=(0,m.jsxs)("div",{className:r$.toolbarLeft,children:[c,d,u]}),N[32]=u,N[33]=c,N[34]=d,N[35]=p):p=N[35],N[36]!==I.reference?(f=I.reference&&"url"in I.reference&&(0,m.jsx)(tt.K,{as:"a","aria-label":"Go to the file",icon:ef.LinkExternalIcon,variant:"invisible",href:I?.reference?.url}),N[36]=I.reference,N[37]=f):f=N[37],N[38]!==I.value?(g=(0,m.jsx)(rd.T,{textToCopy:I.value,ariaLabel:"Copy code",onCopy:r6}),N[38]=I.value,N[39]=g):g=N[39],N[40]!==I.name||N[41]!==I.value||N[42]!==V?(y=(0,m.jsx)(tt.K,{"aria-label":"Download code",icon:ef.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=I.name.lastIndexOf(".");if(e>0){let t=I.name.substring(0,e),n=I.name.substring(e);return void 0!==V?`${t}_${V}${n}`:I.name}return void 0!==V?`${I.name}_${V}`:I.name})();rA(new File([I.value],e)),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),N[40]=I.name,N[41]=I.value,N[42]=V,N[43]=y):y=N[43],N[44]!==o||N[45]!==B?(x="diff"===o&&(0,m.jsx)(rR,{isUnifiedDiff:B,setIsUnifiedDiff:U}),N[44]=o,N[45]=B,N[46]=x):x=N[46],N[47]!==f||N[48]!==g||N[49]!==y||N[50]!==x?(b=(0,m.jsxs)("div",{className:r$.toolbarActions,children:[f,g,y,x]}),N[47]=f,N[48]=g,N[49]=y,N[50]=x,N[51]=b):b=N[51],N[52]!==p||N[53]!==b?(_=(0,m.jsxs)("div",{className:r$.toolbar,children:[p,b]}),N[52]=p,N[53]=b,N[54]=_):_=N[54],N[55]!==o||N[56]!==I||N[57]!==S||N[58]!==B||N[59]!==z?(j=(0,m.jsx)("div",{className:r$.content,children:"preview"===o?(0,m.jsx)(r9,{file:I}):"diff"===o?(0,m.jsx)(rE,{left:z,right:I,view:B?"unified":"split"}):(0,m.jsx)(r8,{file:I,isPreviewOpening:S})}),N[55]=o,N[56]=I,N[57]=S,N[58]=B,N[59]=z,N[60]=j):j=N[60],N[61]!==Y?(C=(0,m.jsx)("footer",{className:r$.footer,children:(0,m.jsx)("span",{"aria-live":"polite",children:Y})}),N[61]=Y,N[62]=C):C=N[62],N[63]!==_||N[64]!==j||N[65]!==C?(w=(0,m.jsxs)("div",{className:r$.container,children:[_,j,C]}),N[63]=_,N[64]=j,N[65]=C,N[66]=w):w=N[66],w}function r6(){return(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let r7=(0,rF.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function r8({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:i,versionedItems:a}=(0,eQ.xx)(),s=(0,H.b)(),r=(0,v.useRef)(!1),o=function(e,t){let n=e.get((0,t$.oy)(t.id))??[];return n[n.length-1]===t.id}(a,e),l=!e.reference||"thread-scoped-file"===e.reference.type,c=l&&!e.isStreaming&&o,d=(0,v.useId)(),u=rL(e),[h,p]=(0,v.useState)(),f=h?.id===e.id?h.value:e.value,[g,y]=(0,v.useState)(!0),{messages:x,currentReferences:b}=(0,$.Pk)(),_=(0,v.useRef)(""),j=(0,v.useRef)(null),[C,w]=(0,v.useState)(void 0);(0,v.useEffect)(()=>{b&&(b.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||w(null))},[b,e.name]);let N=(0,v.useMemo)(()=>{if(!tx.W.selectionAttachments)return;let t=rO.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:r})=>{if(!i||""===i.trim()||!s)return;let o=n.state.doc.line(a),l=n.state.doc.line(r),c=o.from,d=l.to,u=n.state.doc.sliceString(c,d),m=`${e.id}:${c}-${d}:${e.value.length}`;if(_.current===m||new Blob([u]).size>t)return;let h={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:r}};j.current?s.replaceReference(j.current,h):s.addReference(h,"immersive-selection"),j.current=h,w({from:c,to:d}),_.current=m},onClear:()=>{_.current&&(s&&j.current&&s.removeReference(j.current),_.current="",j.current=null,w(null))}}},[e.id,e.name,e.value,e.language,s]);(0,v.useEffect)(()=>{s&&j.current&&s.removeReference(j.current),j.current=null,_.current="",w(null)},[e.id,s]),(0,v.useEffect)(()=>()=>{s&&j.current&&s.removeReference(j.current),j.current=null,_.current=""},[s]),(0,v.useEffect)(()=>{y(!1)},[]),(0,v.useEffect)(()=>{t&&(r.current=!0)},[t]);let S=(0,rB.K)((0,v.useCallback)(t=>{if(c&&t!==e.value)if(e.isUserEdited)p({value:t,id:e.id}),r7(e,t,i);else{let a={...e,messageId:tg.Wp,id:`file:${e.name}#${x.length}`,timestamp:new Date,isUserEdited:!0,value:t};i(a),n(a.id),p({value:t,id:a.id})}},[e,c,x.length,n,i]));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{id:d,className:"sr-only",children:[e.name," file contents"]}),(0,m.jsx)(rf.default,{ariaLabelledBy:d,containerClassName:r$.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!c,spacing:u,value:g?"":f,onChange:S,focusNextRenderRef:r,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:N,selectionAttachmentRange:C}),l&&!o&&(0,m.jsx)("div",{className:r$.footer,children:"Switch to the latest version to edit this file."})]})}function r9(e){let t=(0,h.c)(4),{file:n}=e;if("markdown"===n.language){let e;return t[0]!==n?(e=(0,m.jsx)("div",{className:r$.previewContainer,children:(0,m.jsx)(r3,{content:n})}),t[0]=n,t[1]=e):e=t[1],e}if("html"!==n.language)return null;{let e;return t[2]!==n?(e=(0,m.jsx)("div",{className:r$.previewContainer,children:(0,m.jsx)(rJ,{file:n})}),t[2]=n,t[3]=e):e=t[3],e}}try{r5.displayName||(r5.displayName="FilePreview")}catch{}try{r8.displayName||(r8.displayName="CodeMirrorView")}catch{}try{r9.displayName||(r9.displayName="PreviewComponent")}catch{}let oe={container:"ImagePreview-module__container--lxQZb",imageElement:"ImagePreview-module__imageElement--WTRgY"};function ot(e){let t,n=(0,h.c)(3),{image:i}=e;return n[0]!==i.altText||n[1]!==i.url?(t=(0,m.jsx)("div",{className:oe.container,children:(0,m.jsx)("img",{className:oe.imageElement,src:i.url,alt:i.altText})}),n[0]=i.altText,n[1]=i.url,n[2]=t):t=n[2],t}try{ot.displayName||(ot.displayName="ImagePreview")}catch{}let on={container:"IssuePreview-module__container--O4xBI"},oi=(0,v.memo)(function(e){let t,n,i,a,s,r,o=(0,h.c)(17),{isPreviewOpening:l,issue:c,onClose:d}=e,[u,p]=(0,v.useState)(l);o[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>p(!1),400);return()=>clearTimeout(e)}},n=[u],o[0]=u,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,v.useEffect)(t,n),o[3]!==c.href?(i=(0,m.jsx)(tt.K,{icon:ef.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(c.href,"_blank")}}),o[3]=c.href,o[4]=i):i=o[4];let f=i;o[5]!==d||o[6]!==f?(a={navigate:n5.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,onIssueDelete:d,additionalHeaderActions:f,showRepositoryPill:!0},o[5]=d,o[6]=f,o[7]=a):a=o[7];let g=a;o[8]!==c.number||o[9]!==c.owner||o[10]!==c.repo?(s={owner:c.owner,repo:c.repo,number:c.number,type:"Issue"},o[8]=c.number,o[9]=c.owner,o[10]=c.repo,o[11]=s):s=o[11];let y=s;if(u){let e;return o[12]!==g?(e=(0,m.jsx)(tD.Q,{optionConfig:g}),o[12]=g,o[13]=e):e=o[13],e}return o[14]!==y||o[15]!==g?(r=(0,m.jsx)("div",{className:on.container,children:(0,m.jsx)(sK.e,{children:(0,m.jsx)(sG.cI,{itemIdentifier:y,optionConfig:g})})}),o[14]=y,o[15]=g,o[16]=r):r=o[16],r});try{oi.displayName||(oi.displayName="IssuePreview")}catch{}var oa=n(73783);let os={button:"TaskActions-module__button--mfKv1",buttonGroup:"TaskActions-module__buttonGroup--HfUFm",divider:"TaskActions-module__divider--mfTun",menuButton:"TaskActions-module__menuButton--KexmI"},or=(0,v.forwardRef)((e,t)=>{let n,i,a,s,r,o,l,c=(0,h.c)(22),{children:d,isLoading:u,isMenuOpen:p,loadingAnnouncement:f,menuItems:g,onMenuOpenChange:y,onStartClick:x,selectedRepo:v}=e,b=void 0===f?"Starting task\u2026":f,_=!v;return c[0]!==u||c[1]!==b||c[2]!==x||c[3]!==t||c[4]!==_?(n=(0,m.jsx)(tm.Q,{className:os.button,inactive:_,leadingVisual:ef.AgentIcon,loading:u,loadingAnnouncement:b,onClick:x,ref:t,variant:"primary",children:"Start agent task"}),c[0]=u,c[1]=b,c[2]=x,c[3]=t,c[4]=_,c[5]=n):n=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("div",{className:os.divider}),c[6]=i):i=c[6],c[7]!==u?(a=(0,m.jsx)(eX.W.Anchor,{"aria-label":"Task options",children:(0,m.jsx)(tt.K,{"aria-label":"Task options\u2026",className:os.menuButton,disabled:u,icon:ef.TriangleDownIcon,variant:"primary"})}),c[7]=u,c[8]=a):a=c[8],c[9]!==g?(s=g.map(oo),c[9]=g,c[10]=s):s=c[10],c[11]!==s?(r=(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:s})}),c[11]=s,c[12]=r):r=c[12],c[13]!==p||c[14]!==y||c[15]!==a||c[16]!==r?(o=(0,m.jsxs)(eX.W,{open:p,onOpenChange:y,children:[a,r]}),c[13]=p,c[14]=y,c[15]=a,c[16]=r,c[17]=o):o=c[17],c[18]!==d||c[19]!==n||c[20]!==o?(l=(0,m.jsxs)(oa.A,{className:os.buttonGroup,children:[n,d,i,o]}),c[18]=d,c[19]=n,c[20]=o,c[21]=l):l=c[21],l});function oo(e){return(0,m.jsx)(eZ.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}function ol(e){let t,n,i=(0,h.c)(6),{selectedRepo:a,topRepos:s,isLoading:r,onSelect:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={includeForks:!0},i[0]=t):t=i[0],i[1]!==r||i[2]!==o||i[3]!==a||i[4]!==s?(n=(0,m.jsx)(ni.f0,{enforceAtleastOneSelected:!0,hideContainer:r,initialRepository:a,onSelect:o,options:t,preventDefault:!0,responsiveOnNarrow:!0,topRepositories:s}),i[1]=r,i[2]=o,i[3]=a,i[4]=s,i[5]=n):n=i[5],n}or.displayName="TaskActions";try{ol.displayName||(ol.displayName="TaskRepositoryPicker")}catch{}function oc(e){let t,n,i,a,s,r,o,l,c,d,u,m,p,f,g=(0,h.c)(42),{externalLoading:y,task:x}=e;g[0]!==x.repository?(t=x.repository?.split("/")??[],g[0]=x.repository,g[1]=t):t=g[1];let[b,_]=t,[j,C]=(0,v.useState)(void 0),{updateItem:w}=(0,eQ.xx)(),N=(0,no.useRelayEnvironment)();g[2]!==N?(n=JSON.stringify(N),g[2]=N,g[3]=n):n=g[3],g[4]!==n?(i=["copilot-immersive-top-repos",n],g[4]=n,g[5]=i):i=g[5],g[6]!==N?(a=async()=>await (0,ni.St)(N,{first:10}),g[6]=N,g[7]=a):a=g[7],g[8]!==i||g[9]!==a?(s={queryKey:i,queryFn:a},g[8]=i,g[9]=a,g[10]=s):s=g[10];let{data:S,isLoading:I}=(0,ns.I)(s);g[11]!==S?(r=void 0===S?[]:S,g[11]=S,g[12]=r):r=g[12];let k=r;g[13]!==N?(o=JSON.stringify(N),g[13]=N,g[14]=o):o=g[14],g[15]!==b||g[16]!==_||g[17]!==o?(l=["copilot-immersive-current-repo",o,b,_],g[15]=b,g[16]=_,g[17]=o,g[18]=l):l=g[18],g[19]!==N||g[20]!==b||g[21]!==_?(c=async()=>b&&_?await (0,ni.tZ)(N,b,_):null,g[19]=N,g[20]=b,g[21]=_,g[22]=c):c=g[22],g[23]!==l||g[24]!==c?(d={queryKey:l,queryFn:c},g[23]=l,g[24]=c,g[25]=d):d=g[25];let{data:T,isLoading:L}=(0,ns.I)(d),E=void 0!==y&&y||I||L;g[26]!==x||g[27]!==w?(u=e=>{C(e),e&&w({...x,isUserEdited:!0,repository:e.nameWithOwner})},g[26]=x,g[27]=w,g[28]=u):u=g[28];let R=u;return g[29]!==T||g[30]!==R||g[31]!==E||g[32]!==j||g[33]!==x.repository||g[34]!==k?(m=()=>{if(!E){if(x.repository){T&&T.nameWithOwner!==j?.nameWithOwner&&C(T);return}!j&&k&&k.length>0&&R(k[0])}},p=[T,R,E,j,x.repository,k],g[29]=T,g[30]=R,g[31]=E,g[32]=j,g[33]=x.repository,g[34]=k,g[35]=m,g[36]=p):(m=g[35],p=g[36]),(0,v.useEffect)(m,p),g[37]!==R||g[38]!==E||g[39]!==j||g[40]!==k?(f={handleRepoSelect:R,isLoading:E,selectedRepo:j,topRepos:k},g[37]=R,g[38]=E,g[39]=j,g[40]=k,g[41]=f):f=g[41],f}let od={toolbarActions:"AggregateTaskToolbar-module__toolbarActions--XvHiT FilePreview-module__toolbarActions--h04aW"};function ou(e){let t,n,i,a,s,r,o,l,c=(0,h.c)(27),{loading:d,task:u}=e,[p,f]=(0,v.useState)(!1),{start:g}=af(u);c[0]!==u.subtaskTags?(t=u.subtaskTags||[],c[0]=u.subtaskTags,c[1]=t):t=c[1];let{convertAllToDraftIssues:y}=al(t),x=(0,v.useRef)(null);c[2]!==d||c[3]!==u?(n={externalLoading:d,task:u},c[2]=d,c[3]=u,c[4]=n):n=c[4];let{selectedRepo:b,topRepos:_,isLoading:j,handleRepoSelect:C}=oc(n);c[5]!==b||c[6]!==g?(i=()=>{if(!b)return(0,n5.l)();g()},c[5]=b,c[6]=g,c[7]=i):i=c[7];let w=i;c[8]!==y?(a=()=>{y()},c[8]=y,c[9]=a):a=c[9];let N=a;c[10]!==C||c[11]!==j||c[12]!==b||c[13]!==_?(s=(0,m.jsx)(ol,{isLoading:j,onSelect:C,selectedRepo:b,topRepos:_}),c[10]=C,c[11]=j,c[12]=b,c[13]=_,c[14]=s):s=c[14];let S=b?.hasIssuesEnabled===!1;return c[15]!==N||c[16]!==S?(r=[{disabled:S,label:"Draft all as issues",onSelect:N}],c[15]=N,c[16]=S,c[17]=r):r=c[17],c[18]!==w||c[19]!==p||c[20]!==d||c[21]!==b||c[22]!==r?(o=(0,m.jsx)(or,{isLoading:d,isMenuOpen:p,menuItems:r,onMenuOpenChange:f,onStartClick:w,ref:x,selectedRepo:b}),c[18]=w,c[19]=p,c[20]=d,c[21]=b,c[22]=r,c[23]=o):o=c[23],c[24]!==s||c[25]!==o?(l=(0,m.jsxs)("div",{className:od.toolbarActions,children:[s,o]}),c[24]=s,c[25]=o,c[26]=l):l=c[26],l}try{ou.displayName||(ou.displayName="AggregateTaskToolbar")}catch{}function om(e){let t,n,i,a,s=(0,h.c)(13),{title:r,description:o,onClose:l,onSubmit:c,buttonRef:d}=e;return s[0]!==l?(t={buttonType:"default",content:"Cancel",onClick:l},s[0]=l,s[1]=t):t=s[1],s[2]!==c?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:c},s[2]=c,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(i=[t,n],s[4]=t,s[5]=n,s[6]=i):i=s[6],s[7]!==d||s[8]!==o||s[9]!==l||s[10]!==i||s[11]!==r?(a=(0,m.jsx)(tz.l,{title:r,onClose:l,returnFocusRef:d,footerButtons:i,children:o}),s[7]=d,s[8]=o,s[9]=l,s[10]=i,s[11]=r,s[12]=a):a=s[12],a}try{om.displayName||(om.displayName="StartTaskWarningDialog")}catch{}function oh(e){let t,n=(0,h.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,m.jsx)(om,{buttonRef:i,description:"An existing batch pull request was created for this project. Please double check that this task should be started.",onClose:a,onSubmit:s,title:"Existing batch pull request"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{oh.displayName||(oh.displayName="AggregateTaskWarningDialog")}catch{}function op(e){let t,n=(0,h.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,m.jsx)(om,{buttonRef:i,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:a,onSubmit:s,title:"Unmerged dependencies"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{op.displayName||(op.displayName="UnmergedDependenciesWarningDialog")}catch{}function of(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function og(e){return null!=e}let oy={toolbarActions:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW"};function ox(e){let t,n,i,a,s,r,o,l,c=(0,h.c)(34),[d,u]=(0,v.useState)(!1),{start:p}=af(e.task),{convertToDraftIssue:f}=function(e){let t,n,i=(0,h.c)(6),a=(0,H.b)(),s=(0,$.Pk)();i[0]!==a||i[1]!==e||i[2]!==s?(t=async()=>{let t=e.name||e.tag;(0,tv.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,n$.W)(s)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",r=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await a.sendChatMessage({thread:(0,n$.W)(s),content:r,references:[n],topic:s.currentTopic,context:s.context,customInstructions:s.customInstructions,model:s.model,intent:tg.wh.planningAgent})},i[0]=a,i[1]=e,i[2]=s,i[3]=t):t=i[3];let r=t;return i[4]!==r?(n={convertToDraftIssue:r},i[4]=r,i[5]=n):n=i[5],n}(e.task),g=(0,v.useRef)(null),[y,x]=(0,v.useState)(!1),b=function(e){let t,n=(0,h.c)(5),{items:i,versionedItems:a}=(0,eQ.xx)();e:{let s;if(!tx.W.planningAgentAggregateTask||!e.aggregateTag){t=null;break e}if(n[0]!==i||n[1]!==e.aggregateTag||n[2]!==a){let r=a.get(`planning-task:${e.aggregateTag}`);if(null==r||0===r.length){t=null;break e}s=i.get(r.at(-1)),n[0]=i,n[1]=e.aggregateTag,n[2]=a,n[3]=s,n[4]=t}else s=n[3],t=n[4];t=s}let s=ay(t);return s.isLoading||null!=s.pullRequest&&"closed"!==s.pullRequest.state}(e.task),_=function(e){let t,n,i=(0,h.c)(6),{items:a,versionedItems:s}=(0,eQ.xx)();i[0]!==a||i[1]!==e.dependencyTags||i[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return null==t||0===t.length?null:a.get(t.at(-1))}).filter(og)??[],i[0]=a,i[1]=e.dependencyTags,i[2]=s,i[3]=t):t=i[3];let r=ag(t);return i[4]!==r?(n=r.some(of),i[4]=r,i[5]=n):n=i[5],n}(e.task);c[0]!==e.loading||c[1]!==e.task?(t={externalLoading:e.loading,task:e.task},c[0]=e.loading,c[1]=e.task,c[2]=t):t=c[2];let{selectedRepo:j,topRepos:C,isLoading:w,handleRepoSelect:N}=oc(t);c[3]!==b||c[4]!==_||c[5]!==j||c[6]!==p?(n=()=>j?_||b?void x(!0):void p():(0,n5.l)(),c[3]=b,c[4]=_,c[5]=j,c[6]=p,c[7]=n):n=c[7];let S=n;c[8]!==f?(i=()=>{f()},c[8]=f,c[9]=i):i=c[9];let I=i;c[10]!==N||c[11]!==w||c[12]!==j||c[13]!==C?(a=(0,m.jsx)(ol,{isLoading:w,onSelect:N,selectedRepo:j,topRepos:C}),c[10]=N,c[11]=w,c[12]=j,c[13]=C,c[14]=a):a=c[14];let k=w?"Loading\u2026":"Starting task\u2026",T=j?.hasIssuesEnabled===!1;return c[15]!==I||c[16]!==T?(s=[{disabled:T,label:"Draft issue",onSelect:I}],c[15]=I,c[16]=T,c[17]=s):s=c[17],c[18]!==b||c[19]!==j||c[20]!==y||c[21]!==p?(r=y&&(b?(0,m.jsx)(oh,{buttonRef:g,onClose:()=>x(!1),onSubmit:()=>j?p():(0,n5.l)()}):(0,m.jsx)(op,{buttonRef:g,onClose:()=>x(!1),onSubmit:()=>j?p():(0,n5.l)()})),c[18]=b,c[19]=j,c[20]=y,c[21]=p,c[22]=r):r=c[22],c[23]!==S||c[24]!==w||c[25]!==d||c[26]!==j||c[27]!==k||c[28]!==s||c[29]!==r?(o=(0,m.jsx)(or,{isLoading:w,isMenuOpen:d,loadingAnnouncement:k,menuItems:s,onMenuOpenChange:u,onStartClick:S,ref:g,selectedRepo:j,children:r}),c[23]=S,c[24]=w,c[25]=d,c[26]=j,c[27]=k,c[28]=s,c[29]=r,c[30]=o):o=c[30],c[31]!==a||c[32]!==o?(l=(0,m.jsxs)("div",{className:oy.toolbarActions,children:[a,o]}),c[31]=a,c[32]=o,c[33]=l):l=c[33],l}try{ox.displayName||(ox.displayName="NoPullRequestTaskToolbar")}catch{}let ov={toolbarLeft:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",toolbarRepo:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp"};function ob(e){let t,n,i,a,s=(0,h.c)(11),{pullRequest:r}=e,o=tx.W.copilotMissionControl;s[0]!==r.global_relay_id||s[1]!==r.number||s[2]!==r.repository_nwo?(t=o?(0,eI.U)(r.global_relay_id):`/${r.repository_nwo}/pull/${r.number}`,s[0]=r.global_relay_id,s[1]=r.number,s[2]=r.repository_nwo,s[3]=t):t=s[3];let l=t;return s[4]!==r.repository_nwo?(n=(0,m.jsx)("div",{className:ov.toolbarLeft,children:(0,m.jsx)(eG.A,{variant:"accent",size:"large",className:ov.toolbarRepo,children:r.repository_nwo})}),s[4]=r.repository_nwo,s[5]=n):n=s[5],s[6]!==l?(i=(0,m.jsx)("div",{className:ov.toolbarActions,children:(0,m.jsx)(tm.Q,{as:"a",href:l,variant:"primary",size:"small",children:o?"View task":"View pull request"})}),s[6]=l,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(a=(0,m.jsxs)(m.Fragment,{children:[n,i]}),s[8]=n,s[9]=i,s[10]=a):a=s[10],a}try{ob.displayName||(ob.displayName="PullRequestTaskToolbar")}catch{}let o_={toolbar:"TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1"};function oj(e){let t,n,i,a=(0,h.c)(9),{className:s,task:r}=e,{pullRequest:o,isLoading:l}=ay(r);return a[0]!==s?(t=(0,x.$)(o_.toolbar,s),a[0]=s,a[1]=t):t=a[1],a[2]!==l||a[3]!==o||a[4]!==r?(n=o?(0,m.jsx)(ob,{pullRequest:o}):r.isAggregate?(0,m.jsx)(ou,{loading:l,task:r}):(0,m.jsx)(ox,{loading:l,task:r}),a[2]=l,a[3]=o,a[4]=r,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,m.jsx)("div",{className:t,children:n}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i}try{oj.displayName||(oj.displayName="TaskToolbar")}catch{}let oC={contentContainer:"TaskCard-module__contentContainer--FqpjY",expanded:"TaskCard-module__expanded--wG3Sp",collapsed:"TaskCard-module__collapsed--sVk82",fadeOverlay:"TaskCard-module__fadeOverlay--TLYFq",visible:"TaskCard-module__visible--xncIg",hidden:"TaskCard-module__hidden--rcn6g",expandToggleButton:"TaskCard-module__expandToggleButton--zwFkC",taskCard:"TaskCard-module__taskCard--UxvS9",toolbar:"TaskCard-module__toolbar--I1ScJ"},ow=e=>{let t,n=(0,h.c)(3),{task:i,content:a}=e,s=`# ${i.name}

${a}`,r=`${i.tag}.md`;return n[0]!==s||n[1]!==r?(t=(0,m.jsx)(r3,{content:{value:s,name:r},fallbackToRaw:!0,hideHeadingAnchors:!0}),n[0]=s,n[1]=r,n[2]=t):t=n[2],t};try{ow.displayName||(ow.displayName="TaskCardMarkdown")}catch{}function oN(e){let t,n,i=(0,h.c)(6),{task:a}=e,[s,r]=(0,v.useState)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{r(oS)},i[0]=t):t=i[0];let o=t;if(i[1]!==s||i[2]!==a){let e,t=a.description?.trim()||"",r=!!t;i[4]!==a?(e=(0,m.jsx)(oj,{className:oC.toolbar,task:a}),i[4]=a,i[5]=e):e=i[5],n=(0,m.jsxs)("div",{className:oC.taskCard,children:[e,r&&(0,m.jsx)(m.Fragment,{children:function(e){return e.split(`
`).length>10||e.length>150}(t)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,x.$)(oC.contentContainer,s?oC.expanded:oC.collapsed),children:[(0,m.jsx)(ow,{task:a,content:t}),(0,m.jsx)("div",{className:(0,x.$)(oC.fadeOverlay,s?oC.hidden:oC.visible)})]}),(0,m.jsx)(tm.Q,{"aria-expanded":s,"aria-label":`${s?"Collapse":"Expand"} task description for ${a.name}`,block:!0,className:oC.expandToggleButton,onClick:o,size:"small",variant:"invisible",children:(0,m.jsxs)("div",{children:[s?(0,m.jsx)(ef.FoldUpIcon,{className:"mr-2"}):(0,m.jsx)(ef.FoldDownIcon,{className:"mr-2"}),s?"Show less":"Show more"]})})]}):(0,m.jsx)(ow,{task:a,content:t})})]}),i[1]=s,i[2]=a,i[3]=n}else n=i[3];return n}function oS(e){return!e}try{oN.displayName||(oN.displayName="TaskCard")}catch{}function oI(e){let t,n,i,a=(0,h.c)(7),{aggregateTask:s}=e,{items:r,versionedItems:o}=(0,eQ.xx)();if(!s.isAggregate||!s.subtaskTags?.length)return null;if(a[0]!==s||a[1]!==r||a[2]!==o){n=Symbol.for("react.early_return_sentinel");e:{let e=function(e,t,n){let i=new Map;for(let[e,a]of n){if(!e.startsWith("planning-task:")||0===a.length)continue;let n=a.at(-1),s=t.get(n);s&&"planning-task"===s.type&&(s.isAggregate||i.set(s.tag,s))}return e.subtaskTags?.map(e=>i.get(e)).filter(e=>null!=e).filter(t=>t.aggregateTag===e.tag)??[]}(s,r,o);if(!e.length){n=null;break e}t=e.map(ok)}a[0]=s,a[1]=r,a[2]=o,a[3]=t,a[4]=n}else t=a[3],n=a[4];return n!==Symbol.for("react.early_return_sentinel")?n:(a[5]!==t?(i=(0,m.jsx)("div",{children:t}),a[5]=t,a[6]=i):i=a[6],i)}function ok(e){return(0,m.jsx)(oN,{task:e},e.tag)}try{oI.displayName||(oI.displayName="TaskCardList")}catch{}let oT={container:"TaskPreview-module__container--RZnMV",noPaddingBottom:"TaskPreview-module__noPaddingBottom--DvW2h"};function oL(e){let t,n,i,a,s,r=(0,h.c)(15),{task:o}=e,l=o.isAggregate&&o.subtaskTags&&o.subtaskTags.length>0,c=o.description;o.name&&(c=`# ${o.name}

${c}`),l&&(c=`${c}

## Individual Tasks`);let d=c;r[0]!==o?(t=(0,m.jsx)(oj,{task:o}),r[0]=o,r[1]=t):t=r[1];let u=`${o.tag}.md`;r[2]!==d||r[3]!==u?(n={value:d,name:u},r[2]=d,r[3]=u,r[4]=n):n=r[4];let p=l?oT.noPaddingBottom:void 0;return r[5]!==n||r[6]!==p?(i=(0,m.jsx)(r3,{content:n,fallbackToRaw:!0,hideHeadingAnchors:!0,className:p}),r[5]=n,r[6]=p,r[7]=i):i=r[7],r[8]!==l||r[9]!==o?(a=l&&(0,m.jsx)(oI,{aggregateTask:o}),r[8]=l,r[9]=o,r[10]=a):a=r[10],r[11]!==t||r[12]!==i||r[13]!==a?(s=(0,m.jsx)(B.Fn,{children:(0,m.jsxs)("div",{className:oT.container,children:[t,i,a]})}),r[11]=t,r[12]=i,r[13]=a,r[14]=s):s=r[14],s}try{oL.displayName||(oL.displayName="TaskPreview")}catch{}var oE=n(2087),oR=n(59523),oA=n(98091),oD=n(25407);let oP={container:"TaskDiffPreview-module__container--xEvS1",emptyState:"TaskDiffPreview-module__emptyState--qe0Z0",emptyStateContent:"TaskDiffPreview-module__emptyStateContent--oruLe",emptyStateTitle:"TaskDiffPreview-module__emptyStateTitle--Hkzg5",emptyStateText:"TaskDiffPreview-module__emptyStateText--YItv4",diffFiles:"TaskDiffPreview-module__diffFiles--VwqKO",diffTable:"TaskDiffPreview-module__diffTable--zqN13",diffFileSection:"TaskDiffPreview-module__diffFileSection--RORXL",taskDiffHeader:"TaskDiffPreview-module__taskDiffHeader--oeHQ4",plainTextStatus:"TaskDiffPreview-module__plainTextStatus--cUJ9x"};function oO(e){let t,n=(0,h.c)(2),{children:i}=e;return n[0]!==i?(t=(0,m.jsx)("div",{className:oP.plainTextStatus,children:i}),n[0]=i,n[1]=t):t=n[1],t}function oM(e){let t,n,i,a=(0,h.c)(9),{diffEntry:s,tabSize:r}=e;a[0]!==s.diffLines?(t=s.diffLines.map(e=>({__id:e.__id||`${e.type}-${e.left}-${e.right}`,left:e.left,right:e.right,type:e.type,html:e.html.substring(1),text:e.text.substring(1)})),a[0]=s.diffLines,a[1]=t):t=a[1];let o=t;if(a[2]!==s){let e;s.isBinary?e="Binary file not shown.":(0,oR.dK)(s)?e="File renamed without changes.":(0,oR.Jc)(s)?e="File copied without changes.":(0,oR.Sn)(s,s.status,s.oldTreeEntry?.mode,s.newTreeEntry?.mode)?e="File mode changed.":(0,oR.HI)(s)?e=(0,oR.l_)(s.truncatedReason):(0,oR.s8)(s)?e="Whitespace-only changes.":(0,oR.lO)(s)?e="This file was deleted.":(0,oR.xW)(s)?e="Some generated files are not rendered by default.":s.isTooBig&&(e="File is too large to render."),n=e,a[2]=s,a[3]=n}else n=a[3];let l=n;if(l){let e;return a[4]!==l?(e=(0,m.jsx)(oO,{children:l}),a[4]=l,a[5]=e):e=a[5],e}return a[6]!==o||a[7]!==r?(i=(0,m.jsx)(oA.i,{diffLines:o,tabSize:r,className:oP.diffFiles,diffTableClassName:oP.diffTable}),a[6]=o,a[7]=r,a[8]=i):i=a[8],i}function oF(e){let t,n,i,a,s=(0,h.c)(9),{repoName:r,repoOwner:o,path:l,commitish:c}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),s[0]=t):t=s[0],s[1]!==c||s[2]!==l||s[3]!==r||s[4]!==o?(n=(0,oD.nD_)({repo:r,owner:o,filePath:l,commitish:c}),s[1]=c,s[2]=l,s[3]=r,s[4]=o,s[5]=n):n=s[5],s[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.EyeIcon,{})}),s[6]=i):i=s[6],s[7]!==n?(a=(0,m.jsxs)(eX.W,{children:[t,(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.LinkItem,{href:n,children:[i,"View file"]})})})]}),s[7]=n,s[8]=a):a=s[8],a}function oB(e){let t,n,i,a,s,r,o,l,c=(0,h.c)(31),{diffEntry:d,tabSize:u,repositoryNwo:p,commitish:f}=e,[g,y]=(0,v.useState)(!1);c[0]!==d.diffLines?(t=d.diffLines.filter(oU),c[0]=d.diffLines,c[1]=t):t=c[1];let x=t.length;c[2]!==d.diffLines?(n=d.diffLines.filter(o$),c[2]=d.diffLines,c[3]=n):n=c[3];let b=n.length,_=d.diffLines.length;c[4]!==p?(i=p?.split("/")??[void 0,void 0],c[4]=p,c[5]=i):i=c[5];let[j,C]=i,w=d.newTreeEntry?.path,N=d.oldTreeEntry?.path;return c[6]!==g?(a=()=>y(!g),c[6]=g,c[7]=a):a=c[7],c[8]!==f||c[9]!==d.path||c[10]!==C||c[11]!==j?(s=j&&C&&f?(0,m.jsx)(oF,{repoOwner:j,repoName:C,path:d.path,commitish:f}):void 0,c[8]=f,c[9]=d.path,c[10]=C,c[11]=j,c[12]=s):s=c[12],c[13]!==d.path||c[14]!==d.status||c[15]!==g||c[16]!==x||c[17]!==_||c[18]!==b||c[19]!==w||c[20]!==N||c[21]!==a||c[22]!==s?(r=(0,m.jsx)(oE.B,{className:oP.taskDiffHeader,isCollapsed:g,linesAdded:x,linesChanged:_,linesDeleted:b,newPath:w,oldPath:N,onToggleFileCollapsed:a,patchStatus:d.status,path:d.path,rightSideContent:s}),c[13]=d.path,c[14]=d.status,c[15]=g,c[16]=x,c[17]=_,c[18]=b,c[19]=w,c[20]=N,c[21]=a,c[22]=s,c[23]=r):r=c[23],c[24]!==d||c[25]!==g||c[26]!==u?(o=!g&&(0,m.jsx)(oM,{diffEntry:d,tabSize:u}),c[24]=d,c[25]=g,c[26]=u,c[27]=o):o=c[27],c[28]!==r||c[29]!==o?(l=(0,m.jsxs)("div",{className:oP.diffFileSection,children:[r,o]}),c[28]=r,c[29]=o,c[30]=l):l=c[30],l}function o$(e){return"DELETION"===e.type}function oU(e){return"ADDITION"===e.type}function oV(e){let t,n=(0,h.c)(6),{taskDiff:i}=e,{diffEntries:a,tabSize:s,repositoryNwo:r,commitish:o}=i,l=a&&a.length>0;return n[0]!==o||n[1]!==a||n[2]!==l||n[3]!==r||n[4]!==s?(t=(0,m.jsx)("div",{className:oP.container,children:l?(0,m.jsx)("div",{className:oP.diffFiles,children:a.map(e=>(0,m.jsx)(oB,{diffEntry:e,tabSize:s,repositoryNwo:r,commitish:o},e.path))}):(0,m.jsx)("div",{className:oP.emptyState,children:(0,m.jsxs)("div",{className:oP.emptyStateContent,children:[(0,m.jsx)(ef.FileIcon,{size:48}),(0,m.jsx)("h3",{className:oP.emptyStateTitle,children:"No code changes"}),(0,m.jsx)("p",{className:oP.emptyStateText,children:"There are no file changes to display."})]})})}),n[0]=o,n[1]=a,n[2]=l,n[3]=r,n[4]=s,n[5]=t):t=n[5],t}try{oO.displayName||(oO.displayName="PlainTextStatus")}catch{}try{oM.displayName||(oM.displayName="DiffContent")}catch{}try{oF.displayName||(oF.displayName="FileActionsMenu")}catch{}try{oB.displayName||(oB.displayName="DiffFileSection")}catch{}try{oV.displayName||(oV.displayName="TaskDiffPreview")}catch{}function oH(e){let t,n=(0,h.c)(33),{isOpening:i,onClose:a,previewItem:s}=e,r=(0,tE.qw)(),o=null;switch(s.type){case"file":{let e;n[0]!==i||n[1]!==a||n[2]!==s?(e=(0,m.jsx)(r5,{isPreviewOpening:i,file:s,onClose:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=e):e=n[3],o=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,m.jsx)(rD,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],o=e;break}case"issue":{let e;n[6]!==i||n[7]!==a||n[8]!==s?(e=(0,m.jsx)(oi,{isPreviewOpening:i,issue:s,onClose:a}),n[6]=i,n[7]=a,n[8]=s,n[9]=e):e=n[9],o=e;break}case"new-issue":{let e;n[10]!==i||n[11]!==a||n[12]!==s?(e=(0,m.jsx)(sV,{isPreviewOpening:i,issue:s,onClose:a}),n[10]=i,n[11]=a,n[12]=s,n[13]=e):e=n[13],o=e;break}case"update-issue":{let e;n[14]!==i||n[15]!==a||n[16]!==s?(e=(0,m.jsx)(s9,{isPreviewOpening:i,issue:s,onClose:a}),n[14]=i,n[15]=a,n[16]=s,n[17]=e):e=n[17],o=e;break}case"existing-issue":{let e;n[18]!==i||n[19]!==a||n[20]!==s?(e=(0,m.jsx)(sQ,{isPreviewOpening:i,issue:s,onClose:a}),n[18]=i,n[19]=a,n[20]=s,n[21]=e):e=n[21],o=e;break}case"image":{let e;n[22]!==s?(e=(0,m.jsx)(ot,{image:s}),n[22]=s,n[23]=e):e=n[23],o=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,m.jsx)(oL,{task:s}),n[24]=s,n[25]=e):e=n[25],o=e;break}case"task-diff":{let e;n[26]!==s?(e=(0,m.jsx)(oV,{taskDiff:s}),n[26]=s,n[27]=e):e=n[27],o=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){o=(0,m.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=o}else o=n[30]}return n[31]!==o?(t=o?(0,m.jsx)(tj.t,{fallback:(0,m.jsx)(tT,{regionName:"This workbench item"}),children:o}):null,n[31]=o,n[32]=t):t=n[32],t}try{oH.displayName||(oH.displayName="ContentPreviewItem")}catch{}let oW={tabContainer:"ContentPreviewTab-module__tabContainer--ApaB_",tabContent:"ContentPreviewTab-module__tabContent--xe28k",isActive:"ContentPreviewTab-module__isActive--Pi2gz",mainButton:"ContentPreviewTab-module__mainButton--vLx58",icon:"ContentPreviewTab-module__icon--lefqk",title:"ContentPreviewTab-module__title--l571P",closeButton:"ContentPreviewTab-module__closeButton--SByWv",trailingComponent:"ContentPreviewTab-module__trailingComponent--lAh8u"};function oq(e){let t=(0,h.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tG.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.CodeIcon,{}),t[2]=e):e=t[2],e}}function oz(e){let t=(0,h.c)(11),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,m.jsx)(oq,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":case"task-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.TasklistIcon,{}),t[8]=e):e=t[8],e}case"plugin-content":{let e;return t[9]!==n.icon?(e=n.icon?(0,m.jsx)(n.icon,{}):null,t[9]=n.icon,t[10]=e):e=t[10],e}default:return null}}let oG=(0,v.forwardRef)(function(e,t){let n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_,j,C,w,N,S=(0,h.c)(52);S[0]!==e?({onClick:s,onClose:r,isActive:i,item:a,controlHintId:n,tabPanelId:l,...o}=e,S[0]=e,S[1]=n,S[2]=i,S[3]=a,S[4]=s,S[5]=r,S[6]=o,S[7]=l):(n=S[1],i=S[2],a=S[3],s=S[4],r=S[5],o=S[6],l=S[7]);let[I,k]=(0,v.useState)(!1),T=(0,v.useRef)(null),L=!a.disableCloseButton;S[8]!==r?(c=()=>{r&&r(),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},S[8]=r,S[9]=c):c=S[9];let E=c,R=(0,v.useRef)(null),A=a.name;S[10]!==I?(d=()=>{let e=T.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==I&&k(t)},S[10]=I,S[11]=d):d=S[11];let D=d,P=`content-preview-tab-${a.id}`;S[12]!==D||S[13]!==P||S[14]!==A?(u=(0,m.jsx)("span",{className:oW.title,"data-title":A,"data-testid":P,ref:T,onMouseEnter:D,children:A}),S[12]=D,S[13]=P,S[14]=A,S[15]=u):u=S[15];let O=u;S[16]!==i?(p=(0,x.$)(oW.tabContent,{[oW.isActive]:i}),S[16]=i,S[17]=p):p=S[17];let M=i?"true":void 0;return S[18]!==s?(f=e=>{s&&s(e),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},S[18]=s,S[19]=f):f=S[19],S[20]!==E||S[21]!==L?(g=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":L&&E();break;case"tab":if(e.shiftKey)break;L&&(e.preventDefault(),R.current?.focus())}},y=e=>{1===e.button&&L&&E()},S[20]=E,S[21]=L,S[22]=g,S[23]=y):(g=S[22],y=S[23]),S[24]!==a?(b=(0,m.jsx)("span",{className:oW.icon,children:(0,m.jsx)(oz,{item:a})}),S[24]=a,S[25]=b):b=S[25],S[26]!==I||S[27]!==A||S[28]!==O?(_=I?(0,m.jsx)(t_.m,{text:A,position:"bottom",children:O}):O,S[26]=I,S[27]=A,S[28]=O,S[29]=_):_=S[29],S[30]!==a.trailingComponent?(j=a.trailingComponent?(0,m.jsx)("div",{className:oW.trailingComponent,children:a.trailingComponent}):null,S[30]=a.trailingComponent,S[31]=j):j=S[31],S[32]!==n||S[33]!==t||S[34]!==o||S[35]!==b||S[36]!==_||S[37]!==j||S[38]!==M||S[39]!==f||S[40]!==g||S[41]!==y||S[42]!==l?(C=(0,m.jsxs)("button",{className:oW.mainButton,type:"button",role:"tab","aria-selected":M,"aria-describedby":n,"aria-controls":l,onClick:f,onKeyDown:g,onAuxClick:y,ref:t,...o,children:[b,_,j]}),S[32]=n,S[33]=t,S[34]=o,S[35]=b,S[36]=_,S[37]=j,S[38]=M,S[39]=f,S[40]=g,S[41]=y,S[42]=l,S[43]=C):C=S[43],S[44]!==E||S[45]!==L||S[46]!==A?(w=L&&(0,m.jsx)("div",{className:oW.closeButton,children:(0,m.jsx)(tt.K,{icon:ef.XIcon,size:"small",variant:"invisible","aria-label":`Close ${A}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:E,ref:R})}),S[44]=E,S[45]=L,S[46]=A,S[47]=w):w=S[47],S[48]!==C||S[49]!==w||S[50]!==p?(N=(0,m.jsx)("div",{className:oW.tabContainer,children:(0,m.jsxs)("div",{className:p,children:[C,w]})}),S[48]=C,S[49]=w,S[50]=p,S[51]=N):N=S[51],N});try{oq.displayName||(oq.displayName="CodeTabIcon")}catch{}try{oz.displayName||(oz.displayName="TabIcon")}catch{}try{oG.displayName||(oG.displayName="ContentPreviewTab")}catch{}function oK(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{oK.displayName||(oK.displayName="DiceIcon")}catch{}let oQ={container:"EmptyState-module__container--LAYqE",icon:"EmptyState-module__icon--Ur91O",heading:"EmptyState-module__heading--fStvv",subtitle:"EmptyState-module__subtitle--tjaBc"};function oY(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(23),{isOpening:g}=e,y=(0,H.b)(),x=(0,$.Pk)(),b=(0,Z.zy)(),_=(0,v.useRef)(null);f[0]!==x?(t=(0,n$.W)(x),f[0]=x,f[1]=t):t=f[1];let j=t,C=(0,F.X)();f[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],f[2]=n):n=f[2];let[w,N]=(0,v.useState)(n);f[3]!==C.icebreakers?(i=()=>{var e;if(Array.isArray(e=C.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=C.icebreakers.find(oJ);e&&e.data.length>0&&N(e.data)}},f[3]=C.icebreakers,f[4]=i):i=f[4],f[5]!==b||f[6]!==C.icebreakers?(a=[C.icebreakers,b],f[5]=b,f[6]=C.icebreakers,f[7]=a):a=f[7],(0,v.useEffect)(i,a),f[8]!==g?(s=()=>{g&&_.current&&window.requestAnimationFrame(()=>{_.current?.focus({preventScroll:!0})})},r=[g],f[8]=g,f[9]=s,f[10]=r):(s=f[9],r=f[10]),(0,v.useEffect)(s,r),f[11]!==j||f[12]!==w||f[13]!==y||f[14]!==x?(o=()=>{if(0===w.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(w),t=0===x.messages.length?j:(0,n$.W)(x),n=x.currentUserLogin,i=e.message;y.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:x.currentReferences,topic:x.currentTopic,context:x.context,customInstructions:x.customInstructions,model:x.model}),(0,tv.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:x.currentTopic?.name,mode:"immersive",suggestionId:e.id})},f[11]=j,f[12]=w,f[13]=y,f[14]=x,f[15]=o):o=f[15];let S=o;return f[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(ef.BrowserIcon,{size:24,className:oQ.icon}),u=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,m.jsx)("h2",{className:oQ.heading,children:"View files directly within Copilot"}),c=(0,m.jsx)("p",{className:oQ.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),f[16]=l,f[17]=c,f[18]=d,f[19]=u):(l=f[16],c=f[17],d=f[18],u=f[19]),f[20]!==S||f[21]!==x.isWaitingOnCopilot?(p=(0,m.jsxs)("div",{className:oQ.container,children:[d,u,l,c,(0,m.jsx)(tm.Q,{ref:_,leadingVisual:oK,onClick:S,disabled:x.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),f[20]=S,f[21]=x.isWaitingOnCopilot,f[22]=p):p=f[22],p}function oJ(e){return"interactional"===e.type}try{oY.displayName||(oY.displayName="EmptyState")}catch{}let oX={container:"LoadingState-module__container--dKvYJ"};function oZ(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:oX.container,children:(0,m.jsx)(tG.A,{size:"large"})}),t[0]=e):e=t[0],e}try{oZ.displayName||(oZ.displayName="LoadingState")}catch{}function o0(e,t,n={}){(0,tv.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function o1(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_,j,C,w,N,S,I,k,T,L,E,R,A,D,P,O,M,F,B,U,V=(0,h.c)(112),{returnFocusRef:H,disableResourcePanel:W}=e,q=(0,eQ.tZ)(),z=(0,eQ.wI)(),{selectedThreadID:G}=(0,$.bP)("selectedThreadID"),K=(0,tC.S)(G),{items:Q,allOpenItems:Y,selectedItem:J,openItem:X,closeItem:Z,closeItems:ee,closePreviewPane:et,showLoadingState:en,openResourcePanel:ei}=(0,eQ.xx)(),ea=(0,tC.S)(q),es=q&&!ea,er=ea&&!q;if(V[0]!==Q||V[1]!==Y){let e;V[3]!==Q?(e=e=>Q.get(e),V[3]=Q,V[4]=e):e=V[4],t=Y.map(e).filter(o6),V[0]=Q,V[1]=Y,V[2]=t}else t=V[2];let eo=t,el=(0,v.useId)(),ec=(0,v.useId)(),ed=(0,v.useId)();if(V[5]!==Q||V[6]!==Y||V[7]!==J){let e;V[10]!==Q?(e=e=>Q.get(e),V[10]=Q,V[11]=e):e=V[11],i=(n=Y.map(e).filter(o5)).find(e=>e.id===J)??n[0],V[5]=Q,V[6]=Y,V[7]=J,V[8]=n,V[9]=i}else n=V[8],i=V[9];let eu=i,em=tx.W.copilotResourcePanel&&!(void 0!==W&&W),eh=(0,v.useRef)(!0);V[12]!==er||V[13]!==es||V[14]!==H||V[15]!==eu?(a=()=>{(er||tx.W.focusTextAreaInsteadOfWorkbench&&eh.current&&eu&&"file"===eu.type&&!es)&&(eh.current=!1,H.current?.focus())},s=[er,es,H,eu],V[12]=er,V[13]=es,V[14]=H,V[15]=eu,V[16]=a,V[17]=s):(a=V[16],s=V[17]),(0,v.useEffect)(a,s),V[18]!==et||V[19]!==K||V[20]!==G?(r=()=>{void 0!==K&&K!==G&&et()},o=[et,K,G],V[18]=et,V[19]=K,V[20]=G,V[21]=r,V[22]=o):(r=V[21],o=V[22]),(0,v.useEffect)(r,o),V[23]!==n||V[24]!==J?(l=()=>{if(!J)return;let e=n.findIndex(e=>e.id===J),t=ey.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},c=[J,n],V[23]=n,V[24]=J,V[25]=l,V[26]=c):(l=V[25],c=V[26]),(0,v.useEffect)(l,c),V[27]!==eo?(d=async()=>{let e=eo.map(o4);rA(new File([await (0,tS._6)(e).blob()],"files.zip"))},V[27]=eo,V[28]=d):d=V[28];let ep=d;V[29]!==Z||V[30]!==et||V[31]!==n.length||V[32]!==eu?(u=e=>{if(eu){let t=void 0!==e&&e&&1===n.length;Z(eu.id),t&&(et(),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},V[29]=Z,V[30]=et,V[31]=n.length,V[32]=eu,V[33]=u):u=V[33];let eg=u;V[34]===Symbol.for("react.memo_cache_sentinel")?(p=[],V[34]=p):p=V[34];let ey=(0,v.useRef)(p),ex=(0,v.useRef)(null);V[35]===Symbol.for("react.memo_cache_sentinel")?(f={containerRef:ex,focusableElementFilter:o3,bindKeys:tw.z0.ArrowHorizontal|tw.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},V[35]=f):f=V[35],V[36]!==n?(g=[n],V[36]=n,V[37]=g):g=V[37],(0,tN.G)(f,g);let ev=!(0,ty.g)(ex);if(V[38]!==el||V[39]!==Z||V[40]!==ee||V[41]!==et||V[42]!==ed||V[43]!==z||V[44]!==X||V[45]!==n||V[46]!==ei||V[47]!==em||V[48]!==J||V[49]!==ec){let e;V[61]!==ee||V[62]!==et?(e=()=>{ee(),et(),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},V[61]=ee,V[62]=et,V[63]=e):e=V[63],y=e,k=tL.toolbar,V[64]!==z||V[65]!==ei||V[66]!==em?(T=(!em||!z)&&(0,m.jsx)("div",{className:(0,x.$)(tL.actions,tL.rightDivider),children:em?z?null:(0,m.jsx)(tt.K,{icon:ef.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:ei,variant:"invisible"}):(0,m.jsx)(o7,{})}),V[64]=z,V[65]=ei,V[66]=em,V[67]=T):T=V[67],I=tL.tabsContainer,b=tL.tabs,_="tablist",j="Workbench items",C=ex,w=-1,N=o2,S=n.map((e,t)=>(0,m.jsx)(oG,{id:e.id===J?el:void 0,tabPanelId:e.id===J?ec:void 0,controlHintId:ed,isActive:e.id===J,onClick:()=>{X(e.id),o0("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=ey.current[e+1]??ey.current[e-1]??ex.current;i?.focus();let a=1===n.length;Z(t.id),a&&et(),o0("filePreviewTab.close",t)})(t),item:e,ref:e=>{ey.current[t]=e}},e.id)),V[38]=el,V[39]=Z,V[40]=ee,V[41]=et,V[42]=ed,V[43]=z,V[44]=X,V[45]=n,V[46]=ei,V[47]=em,V[48]=J,V[49]=ec,V[50]=y,V[51]=b,V[52]=_,V[53]=j,V[54]=C,V[55]=w,V[56]=N,V[57]=S,V[58]=I,V[59]=k,V[60]=T}else y=V[50],b=V[51],_=V[52],j=V[53],C=V[54],w=V[55],N=V[56],S=V[57],I=V[58],k=V[59],T=V[60];return V[68]!==ed?(L=(0,m.jsx)("span",{id:ed,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),V[68]=ed,V[69]=L):L=V[69],V[70]===Symbol.for("react.memo_cache_sentinel")?(E=(0,m.jsx)("span",{}),V[70]=E):E=V[70],V[71]!==b||V[72]!==_||V[73]!==j||V[74]!==C||V[75]!==w||V[76]!==N||V[77]!==S||V[78]!==L?(R=(0,m.jsxs)("div",{className:b,role:_,"aria-label":j,ref:C,tabIndex:w,onWheel:N,children:[S,L,E]}),V[71]=b,V[72]=_,V[73]=j,V[74]=C,V[75]=w,V[76]=N,V[77]=S,V[78]=L,V[79]=R):R=V[79],V[80]!==I||V[81]!==R?(A=(0,m.jsx)("div",{className:I,children:R}),V[80]=I,V[81]=R,V[82]=A):A=V[82],V[83]!==y||V[84]!==ep||V[85]!==eo.length||V[86]!==Y.length||V[87]!==ev?(D=Y.length>0&&(0,m.jsx)("div",{className:(0,x.$)(tL.actions,ev&&tL.leftDivider),children:(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsxs)(eZ.l,{children:[eo.length>0&&(0,m.jsxs)(eZ.l.Item,{onSelect:ep,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(eZ.l.Item,{onSelect:y,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.XIcon,{})}),"Close all tabs"]})]})})]})}),V[83]=y,V[84]=ep,V[85]=eo.length,V[86]=Y.length,V[87]=ev,V[88]=D):D=V[88],V[89]!==et||V[90]!==em?(P=em?(0,m.jsx)(tt.K,{variant:"invisible",icon:ef.XIcon,"aria-label":"Close workbench",onClick:et}):null,V[89]=et,V[90]=em,V[91]=P):P=V[91],V[92]!==D||V[93]!==P?(O=(0,m.jsxs)("div",{className:tL.rightActions,children:[D,P]}),V[92]=D,V[93]=P,V[94]=O):O=V[94],V[95]!==k||V[96]!==T||V[97]!==A||V[98]!==O?(M=(0,m.jsxs)("div",{className:k,children:[T,A,O]}),V[95]=k,V[96]=T,V[97]=A,V[98]=O,V[99]=M):M=V[99],V[100]!==eg||V[101]!==es||V[102]!==eu||V[103]!==en?(F=en?(0,m.jsx)(oZ,{}):eu?(0,m.jsx)(oH,{isOpening:es,previewItem:eu,onClose:eg}):(0,m.jsx)(oY,{isOpening:es}),V[100]=eg,V[101]=es,V[102]=eu,V[103]=en,V[104]=F):F=V[104],V[105]!==el||V[106]!==ec||V[107]!==F?(B=(0,m.jsx)("div",{className:tL.content,role:"tabpanel",id:ec,"aria-labelledby":el,children:F}),V[105]=el,V[106]=ec,V[107]=F,V[108]=B):B=V[108],V[109]!==M||V[110]!==B?(U=(0,m.jsxs)(m.Fragment,{children:[M,B]}),V[109]=M,V[110]=B,V[111]=U):U=V[111],U}function o2(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function o3(e){return"tab"===e.role}function o4(e){return new File([e.value],e.name)}function o5(e){return!!e}function o6(e){return e?.type==="file"}function o7(){let e,t,n=(0,h.c)(3),{closePreviewPane:i}=(0,eQ.xx)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.SidebarCollapseIcon,{}),n[0]=e):e=n[0],n[1]!==i?(t=(0,m.jsx)(t_.m,{text:"Close workbench",position:"bottom",relationship:"label",children:(0,m.jsx)(tb.$,{variant:"invisible",iconOnly:!0,icon:e,onClick:()=>{i(),(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}),n[1]=i,n[2]=t):t=n[2],t}function o8(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:tL.toolbar,children:(0,m.jsx)("div",{className:(0,x.$)(tL.actions,tL.rightDivider),children:(0,m.jsx)(o7,{})})}),(0,m.jsx)("div",{className:(0,x.$)(tL.content),children:(0,m.jsx)(tT,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function o9(e){let t,n,i,a,s,r=(0,h.c)(14),{returnFocusRef:o,disableResourcePanel:l}=e,c=void 0!==l&&l,d=(0,v.useId)(),{contentPreviewRef:u}=(0,eQ.xx)(),p=(0,eQ.tZ)(),f=(0,eQ.wI)()&&tL.resourcePanelOpen;r[0]!==f?(t=(0,x.$)(tL.container,f),r[0]=f,r[1]=t):t=r[1];let g=p?u:void 0;return r[2]!==d?(n=(0,m.jsx)("h2",{id:d,className:"sr-only",children:"Workbench"}),r[2]=d,r[3]=n):n=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(o8,{}),r[4]=i):i=r[4],r[5]!==c||r[6]!==o?(a=(0,m.jsx)(tj.t,{fallback:i,children:(0,m.jsx)(o1,{returnFocusRef:o,disableResourcePanel:c})}),r[5]=c,r[6]=o,r[7]=a):a=r[7],r[8]!==d||r[9]!==t||r[10]!==g||r[11]!==n||r[12]!==a?(s=(0,m.jsxs)("div",{"aria-labelledby":d,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:g,children:[n,a]}),r[8]=d,r[9]=t,r[10]=g,r[11]=n,r[12]=a,r[13]=s):s=r[13],s}try{o1.displayName||(o1.displayName="ContentPreviewInner")}catch{}try{o7.displayName||(o7.displayName="CloseContentPreviewButton")}catch{}try{o8.displayName||(o8.displayName="ContentPreviewFallback")}catch{}try{o9.displayName||(o9.displayName="ContentPreview")}catch{}var le=n(76648);async function lt(e){if(!e)throw Error("No globalID provided");let t=new URL(`/copilot/tasks/pull/${e}`,window.location.origin),n=await fetch(t.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw Error(`Failed to fetch task payload for ${e}`);return await n.json()}let ln=["pull","sessions","currentUser","currentUserCanPush","agentTasksEnabled","logsPollingInterval","sessionsPollingInterval"];function li(){let e,t,n,i=(0,h.c)(8),a=(0,le.B)(),{globalID:s}=(0,Z.g)(),r=a&&"object"==typeof a&&null!==a&&ln.every(e=>e in a)&&s&&a.pull&&a.pull.global_relay_id===s?a:void 0;i[0]!==s?(e=["agent-task-payload",s],t=()=>lt(s),i[0]=s,i[1]=e,i[2]=t):(e=i[1],t=i[2]);let o=!!s&&!r;return i[3]!==e||i[4]!==t||i[5]!==o||i[6]!==r?(n={queryKey:e,queryFn:t,initialData:r,enabled:o,staleTime:1/0},i[3]=e,i[4]=t,i[5]=o,i[6]=r,i[7]=n):n=i[7],(0,ns.I)(n)}var la=n(40235);let ls=async(e,t={})=>{let{includeDiff:n=!1,includeBody:i=!1}=t,a=new URL("/copilot/agent-sessions/pull-requests",window.location.origin);a.searchParams.set("pull_request_ids",String(e)),n&&a.searchParams.set("include_diffs","true"),i&&a.searchParams.set("include_body","true");let s=await fetch(a.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw Error(`Failed to fetch pull request ${e}`);let r=(await s.json()).pull_requests[e];if(!r)throw Error(`Pull request ${e} not found`);return r};var lr=n(7104),lo=n(44296),ll=n(34001);let lc={container:"CopilotInitialMessage-module__container--e58G3",message:"CopilotInitialMessage-module__message--w_WDE"},ld=()=>{let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:lc.container,children:[(0,m.jsx)(rU.N,{size:32,animationType:"activate",loopAnimation:!1}),(0,m.jsx)("p",{className:lc.message,children:"Copilot started work"})]}),t[0]=e):e=t[0],e};try{ld.displayName||(ld.displayName="CopilotInitialMessage")}catch{}let lu={container:"UserInitialMessage-module__container--j2mCV",message:"UserInitialMessage-module__message--WKLo0"},lm=e=>{let t,n,i=(0,h.c)(3),{owner:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(ef.CheckIcon,{}),i[0]=t):t=i[0];let s=a?.login??"User";return i[1]!==s?(n=(0,m.jsxs)("div",{className:lu.container,children:[t,(0,m.jsxs)("p",{className:lu.message,children:[(0,m.jsx)("span",{children:s})," started a task"]})]}),i[1]=s,i[2]=n):n=i[2],n};try{lm.displayName||(lm.displayName="UserInitialMessage")}catch{}var lh=n(4908),lp=n(23398),lf=n(58706),lg=n(27566);let ly={container:"SessionHeader-module__container--BCSgM",containerActive:"SessionHeader-module__containerActive--NpCan",containerStickyToTop:"SessionHeader-module__containerStickyToTop--HfwWn",containerStickyToChatInput:"SessionHeader-module__containerStickyToChatInput--JE6Gj",icon:"SessionHeader-module__icon--fUMu9",mainContent:"SessionHeader-module__mainContent--jyuqu",rightContent:"SessionHeader-module__rightContent--Fvqqt"};var lx=n(12385);function lv(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_=(0,h.c)(47),{nwo:j,currentUserCanPush:C,isCollapsed:w,onModifierClick:N,scrollContainerRef:S,hideStopButton:I}=e,k=void 0!==I&&I,{session:T}=(0,lo.Lg)(),L=j??null;_[0]!==T.workflow_run_id||_[1]!==L?(t=(0,lg.A)(L,T.workflow_run_id),_[0]=T.workflow_run_id,_[1]=L,_[2]=t):t=_[2];let E=t,R=(0,v.useRef)(null);_[3]!==T?(n=(0,ex.v5)(T),_[3]=T,_[4]=n):n=_[4];let A=n,D=(0,ex.mk)(T);_[5]!==A||_[6]!==S?(i={scrollContainerRef:S,elementRef:R,enabled:A},_[5]=A,_[6]=S,_[7]=i):i=_[7];let{isIntersecting:P}=function(e){let t,n,i,a=(0,h.c)(7),{scrollContainerRef:s,elementRef:r,enabled:o}=e,l=void 0!==o&&o,[c,d]=(0,v.useState)(!1);return a[0]!==r||a[1]!==l||a[2]!==s?(t=()=>{let e=s.current,t=r.current;if(!l||!e||!t)return;let n=new IntersectionObserver(e=>{for(let t of e){let e=t.boundingClientRect,n=t.rootBounds;if(!n)return;d(e.bottom>n.bottom)}},{root:e,threshold:[0,1],rootMargin:"0px 0px -8px 0px"});n.observe(t);let i=new ResizeObserver(()=>{n.disconnect(),n.observe(t)});return i.observe(t),()=>{n.disconnect(),i.disconnect()}},n=[l,s,r],a[0]=r,a[1]=l,a[2]=s,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,v.useEffect)(t,n),a[5]!==c?(i={isIntersecting:c},a[5]=c,a[6]=i):i=a[6],i}(i);_[8]!==w||_[9]!==N?(a=e=>{if((e.altKey||e.metaKey)&&N)return e.preventDefault(),e.stopPropagation(),N(!!w),!1},_[8]=w,_[9]=N,_[10]=a):a=_[10];let O=a;e:{if(D){s="New session";break e}s=T.name}let M=s;t:{if(D){let e;_[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eG.A,{variant:"accent",size:"small",children:"Pending"}),_[11]=e):e=_[11],r=e;break t}if(A){let e;_[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eG.A,{variant:"accent",size:"small",children:"In progress"}),_[12]=e):e=_[12],r=e;break t}r=null}let F=r;_[13]!==A||_[14]!==w?(o=A?(0,m.jsx)(tG.A,{size:"small"}):(0,m.jsx)(ef.ChevronRightIcon,{className:ly.icon,"data-expanded":!w}),_[13]=A,_[14]=w,_[15]=o):o=_[15],_[16]!==M?(l=(0,m.jsx)("span",{className:"overflow-hidden text-truncate",children:M}),_[16]=M,_[17]=l):l=_[17],_[18]!==l||_[19]!==o?(c=(0,m.jsxs)("div",{className:ly.mainContent,children:[o,l]}),_[18]=l,_[19]=o,_[20]=c):c=_[20],_[21]!==C||_[22]!==k||_[23]!==A||_[24]!==j?(d=A&&!k&&(0,m.jsx)(lx.l,{variant:"icon-button",nwo:j,currentUserCanPush:C}),_[21]=C,_[22]=k,_[23]=A,_[24]=j,_[25]=d):d=_[25],_[26]!==E?(u=E&&(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.KebabHorizontalIcon,"aria-label":"More actions",variant:"invisible"})}),(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(eZ.l.LinkItem,{href:E,children:"View verbose logs"})})})]}),_[26]=E,_[27]=u):u=_[27],_[28]!==F||_[29]!==d||_[30]!==u?(p=(0,m.jsxs)("div",{className:ly.rightContent,children:[F,d,u]}),_[28]=F,_[29]=d,_[30]=u,_[31]=p):p=_[31],_[32]!==c||_[33]!==p?(f=(0,m.jsxs)(m.Fragment,{children:[c,p]}),_[32]=c,_[33]=p,_[34]=f):f=_[34];let B=f,$=!w,U=!P;return _[35]!==A||_[36]!==U?(g=(0,x.$)(ly.container,{[ly.containerActive]:A,[ly.containerStickyToTop]:U}),_[35]=A,_[36]=U,_[37]=g):g=_[37],_[38]!==B||_[39]!==P?(y=P&&(0,m.jsx)("div",{className:(0,x.$)(ly.container,ly.containerActive,ly.containerStickyToChatInput),children:B}),_[38]=B,_[39]=P,_[40]=y):y=_[40],_[41]!==B||_[42]!==O||_[43]!==$||_[44]!==g||_[45]!==y?(b=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("summary",{ref:R,"aria-expanded":$,"aria-labelledby":"session-header-title",onClick:O,className:g,children:[y,B]})}),_[41]=B,_[42]=O,_[43]=$,_[44]=g,_[45]=y,_[46]=b):b=_[46],b}try{lv.displayName||(lv.displayName="SessionHeader")}catch{}var lb=n(16425);let l_={detailsContainer:"Session-module__detailsContainer--qmZLt",detailsContainerActive:"Session-module__detailsContainerActive--u3wkM",contentContainer:"Session-module__contentContainer--IM2G9",contentContainerActive:"Session-module__contentContainerActive--JM41K"},lj="session-global-toggle";function lC(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_,j,C,w=(0,h.c)(52),{defaultOpen:N,onToggle:S,scrollContainerRef:I,hideStopButton:k}=e,T=void 0!==N&&N,L=void 0!==k&&k,{session:E}=(0,lo.Lg)();w[0]!==T?(t={defaultOpen:T},w[0]=T,w[1]=t):t=w[1];let{getDetailsProps:R,setOpen:A}=(0,lh.A)(t),{data:D}=li();w[2]!==D?(n=void 0===D?{}:D,w[2]=D,w[3]=n):n=w[3];let{currentUserCanPush:P,pull:O,logsPollingInterval:M}=n,F=(0,v.useRef)(null);w[4]===Symbol.for("react.memo_cache_sentinel")?(i={},w[4]=i):i=w[4];let B=(0,v.useRef)(i);w[5]!==R?(a=R(),w[5]=R,w[6]=a):a=w[6];let $=a.open;w[7]!==$||w[8]!==S?(s=()=>{S?.(!$)},r=[$,S],w[7]=$,w[8]=S,w[9]=s,w[10]=r):(s=w[9],r=w[10]),(0,v.useEffect)(s,r),w[11]!==A?(o=e=>{e.detail.excludeInstance!==B.current&&A(e.detail.expand)},w[11]=A,w[12]=o):o=w[12];let U=(0,v.useRef)(o);w[13]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{let e=e=>{U.current?.(e)};document.addEventListener(lj,e);let t=F.current,n=null;return t&&(n=e=>{e.target!==t&&e.stopPropagation()},t.addEventListener("toggle",n,!0)),()=>{document.removeEventListener(lj,e),t&&n&&t.removeEventListener("toggle",n,!0)}},c=[],w[13]=l,w[14]=c):(l=w[13],c=w[14]),(0,v.useEffect)(l,c),w[15]!==A?(d=e=>{A(e);let t=new CustomEvent(lj,{detail:{expand:e,excludeInstance:B.current}});document.dispatchEvent(t)},w[15]=A,w[16]=d):d=w[16];let V=d;if(w[17]!==P||w[18]!==R||w[19]!==V||w[20]!==L||w[21]!==$||w[22]!==O?.repository_nwo||w[23]!==I||w[24]!==E){let e=(0,ex.v5)(E);u=lp.A,w[31]!==R?(f=R(),w[31]=R,w[32]=f):f=w[32],g=F,y=(0,x.$)(l_.detailsContainer,{[l_.detailsContainerActive]:e});let t=O?.repository_nwo,n=!!P,i=!$;w[33]!==V||w[34]!==L||w[35]!==I||w[36]!==t||w[37]!==n||w[38]!==i?(b=(0,m.jsx)(lv,{nwo:t,currentUserCanPush:n,isCollapsed:i,onModifierClick:V,scrollContainerRef:I,hideStopButton:L}),w[33]=V,w[34]=L,w[35]=I,w[36]=t,w[37]=n,w[38]=i,w[39]=b):b=w[39],p=(0,x.$)(l_.contentContainer,{[l_.contentContainerActive]:e}),w[17]=P,w[18]=R,w[19]=V,w[20]=L,w[21]=$,w[22]=O?.repository_nwo,w[23]=I,w[24]=E,w[25]=u,w[26]=p,w[27]=f,w[28]=g,w[29]=y,w[30]=b}else u=w[25],p=w[26],f=w[27],g=w[28],y=w[29],b=w[30];let H=M??3e3;return w[40]!==H?(_=(0,m.jsx)(lb.$X,{variant:"mission-control",children:(0,m.jsx)(lf.U,{logsPollingInterval:H})}),w[40]=H,w[41]=_):_=w[41],w[42]!==p||w[43]!==_?(j=(0,m.jsx)("div",{className:p,children:_}),w[42]=p,w[43]=_,w[44]=j):j=w[44],w[45]!==u||w[46]!==f||w[47]!==g||w[48]!==y||w[49]!==b||w[50]!==j?(C=(0,m.jsxs)(u,{...f,ref:g,className:y,children:[b,j]}),w[45]=u,w[46]=f,w[47]=g,w[48]=y,w[49]=b,w[50]=j,w[51]=C):C=w[51],C}try{lC.displayName||(lC.displayName="Session")}catch{}let lw={root:"TaskChat-module__root--i8enD",container:"TaskChat-module__container--n3jVO",stickableContainer:"TaskChat-module__stickableContainer--fhutl",scrollContainer:"TaskChat-module__scrollContainer--ENR5a",content:"TaskChat-module__content--X5M4z",chatInputContainer:"TaskChat-module__chatInputContainer--Z0U1_",suspenseSpinner:"TaskChat-module__suspenseSpinner--V6afj"};var lN=n(84215),lS=n(36284);function lI(e){let t,n,i,a,s,r,o,l=(0,h.c)(18),{pull:c,sessions:d}=e;l[0]!==d?(t=void 0===d?[]:d,l[0]=d,l[1]=t):t=l[1];let u=t;l[2]!==c.id||l[3]!==u?(n=["agent-mentions",c.id,u],i=async()=>{let e=await fetch(`/copilot/agent-sessions/pull-requests/${c.id}/agent-mentions?${function(e){let t=e.filter(e=>"pull_request_comment"===e.event_type||"pull_request_comment_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat(),n=e.filter(e=>"pull_request_review"===e.event_type||"pull_request_review_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat(),i=new URLSearchParams;for(let e of t)null!=e&&i.append("pull_request_comment_ids[]",e.toString());for(let e of n)null!=e&&i.append("pull_request_review_ids[]",e.toString());return i}(u)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch pull request comments");return(await e.json()).agent_mentions},l[2]=c.id,l[3]=u,l[4]=n,l[5]=i):(n=l[4],i=l[5]);let m=u.length>0;l[6]!==n||l[7]!==i||l[8]!==m?(a={queryKey:n,queryFn:i,enabled:m,placeholderData:lk},l[6]=n,l[7]=i,l[8]=m,l[9]=a):a=l[9];let p=(0,ns.I)(a);l[10]!==c.number||l[11]!==c.repository_nwo?(s={mutationFn:async e=>{/(?:^|[^a-zA-Z0-9_])@copilot(?:[^a-zA-Z0-9_]|$)/i.test(e)||(e=`@copilot ${e.trim()}`);let t=await (0,nr.Sr)(`/${c.repository_nwo}/pull/${c.number}/page_data/create_timeline_comment`,{method:"POST",headers:{Accept:"application/json"},body:{text:e}}),n=await t.json();if(!t.ok)throw Error("Failed to submit comment");return n}},l[10]=c.number,l[11]=c.repository_nwo,l[12]=s):s=l[12];let f=(0,na.n)(s);l[13]!==f?(r=(e,t)=>f.mutate(e,{onSuccess:t?.onSuccess,onError:t?.onError}),l[13]=f,l[14]=r):r=l[14];let g=r;return l[15]!==g||l[16]!==p?(o={...p,createMention:g},l[15]=g,l[16]=p,l[17]=o):o=l[17],o}function lk(e){return e}var lT=n(51120);let lL={formControl:"TaskChatInput-module__formControl--zRdu3",extraToolbarText:"TaskChatInput-module__extraToolbarText--MRY2J"};function lE(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(31),{activeSession:g,onAddPendingSession:y,onClearPendingSession:x,pull:b}=e,_=(0,v.useRef)(null),[j,C]=(0,v.useState)(!1),w=!!g,N=g?.isPending===!0;f[0]!==b?(t={pull:b},f[0]=b,f[1]=t):t=f[1];let{createMention:S}=lI(t);f[2]!==g||f[3]!==w?(n=async e=>{if(w)try{if(C(!1),!(await (0,lT.I)({path:`/agents/sessions/${g.id}/commands`,method:"POST",body:{content:e}})).ok)return void C(!0)}catch{C(!0)}},f[2]=g,f[3]=w,f[4]=n):n=f[4];let I=n;f[5]!==j?(i=()=>{let e,t=_.current;if(!t)return;let n=()=>{j&&t.value&&(e=setTimeout(()=>{C(!1)},0))};return t.addEventListener("input",n),()=>{t.removeEventListener("input",n),clearTimeout(e)}},a=[j],f[5]=j,f[6]=i,f[7]=a):(i=f[6],a=f[7]),(0,v.useEffect)(i,a),f[8]!==S||f[9]!==I||f[10]!==y||f[11]!==x||f[12]!==w?(s=async e=>{if(w)return void await I(e);y(e),S(e,{onError:()=>{x(),C(!0)}})},f[8]=S,f[9]=I,f[10]=y,f[11]=x,f[12]=w,f[13]=s):s=f[13];let k=s;f[14]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(lS.A.Label,{visuallyHidden:!0,children:"New prompt"}),f[14]=r):r=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(ef.AgentIcon,{}),f[15]=o):o=f[15];let T=N?"Waiting for Copilot to start session...":w?"Steer active session while Copilot is working":"What would you like to change?";return f[16]!==T?(l=[{name:"Agent",supportsMCP:!1,supportsAttachments:!1,supportsModelSwitching:!1,supportsAutocompletion:!1,supportsSpaces:!1,icon:o,placeholder:T}],f[16]=T,f[17]=l):l=f[17],f[18]!==N||f[19]!==w?(c=!w&&!N&&(0,m.jsx)("p",{className:lL.extraToolbarText,children:"Submitting will post a pull request comment"}),f[18]=N,f[19]=w,f[20]=c):c=f[20],f[21]!==k||f[22]!==N||f[23]!==c||f[24]!==l?(d=(0,m.jsx)(lN.V,{onSubmit:k,textAreaRef:_,modes:l,size:"large",isStreaming:!1,disabled:N,submitDisabled:N,extraToolbar:c}),f[21]=k,f[22]=N,f[23]=c,f[24]=l,f[25]=d):d=f[25],f[26]!==j?(u=j&&(0,m.jsx)(lS.A.Validation,{variant:"error",className:"pt-2",children:"Failed to submit latest message"}),f[26]=j,f[27]=u):u=f[27],f[28]!==d||f[29]!==u?(p=(0,m.jsxs)(lS.A,{className:lL.formControl,children:[r,d,u]}),f[28]=d,f[29]=u,f[30]=p):p=f[30],p}try{lE.displayName||(lE.displayName="TaskChatInput")}catch{}var lR=n(7892),lA=n(81945);let lD={container:"UserMessage-module__container--n_nga",messageContainer:"UserMessage-module__messageContainer--l7UxI",messageMeta:"UserMessage-module__messageMeta--zsApi",messageText:"UserMessage-module__messageText--Q3g30",avatarContainer:"UserMessage-module__avatarContainer--ALfST"},lP=e=>{let t,n,i,a,s,r,o,l=(0,h.c)(22),{mention:c,isLoading:d}=e;if(!c)if(void 0!==d&&d){let e,t,n;return l[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:lD.messageMeta,children:(0,m.jsx)(lA.O,{variant:"rounded",height:"sm",width:"80px"})}),l[1]=e):e=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:lD.messageContainer,children:[e,(0,m.jsx)("div",{className:lD.messageText,children:(0,m.jsx)(lA.O,{variant:"rounded",height:"sm",width:"random"})})]}),l[2]=t):t=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)("div",{className:lD.container,children:[t,(0,m.jsx)("div",{className:lD.avatarContainer,children:(0,m.jsx)(lA.O,{variant:"elliptical",height:"24px",width:"24px"})})]}),l[3]=n):n=l[3],n}else{let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:lD.container,children:(0,m.jsx)("div",{className:lD.messageContainer,children:(0,m.jsx)("p",{className:lD.messageText,children:"Failed to fetch triggering comment"})})}),l[0]=e):e=l[0],e}return l[4]!==c.author.display_login?(t=(0,m.jsx)("span",{children:c.author.display_login}),l[4]=c.author.display_login,l[5]=t):t=l[5],l[6]!==c.isPending||l[7]!==c.url?(n=!c.isPending&&c.url?(0,m.jsxs)(m.Fragment,{children:[" ",(0,m.jsx)(Q.A,{muted:!0,inline:!0,href:c.url,children:"commented"})]}):(0,m.jsx)("span",{className:"color-fg-muted",children:" commented"}),l[6]=c.isPending,l[7]=c.url,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,m.jsxs)("span",{className:lD.messageMeta,children:[t,n]}),l[9]=t,l[10]=n,l[11]=i):i=l[11],l[12]!==c.body?(a=(0,m.jsx)("p",{className:lD.messageText,children:c.body}),l[12]=c.body,l[13]=a):a=l[13],l[14]!==i||l[15]!==a?(s=(0,m.jsxs)("div",{className:lD.messageContainer,children:[i,a]}),l[14]=i,l[15]=a,l[16]=s):s=l[16],l[17]!==c.author.avatar_url?(r=(0,m.jsx)("div",{className:lD.avatarContainer,children:(0,m.jsx)(i6.r,{src:c.author.avatar_url,size:24})}),l[17]=c.author.avatar_url,l[18]=r):r=l[18],l[19]!==s||l[20]!==r?(o=(0,m.jsxs)("div",{className:lD.container,children:[s,r]}),l[19]=s,l[20]=r,l[21]=o):o=l[21],o};try{lP.displayName||(lP.displayName="UserMessage")}catch{}function lO(){let e,t=(0,h.c)(3),{data:n,isLoading:i}=li();if(i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:lw.suspenseSpinner,children:(0,m.jsx)(tG.A,{size:"medium"})}),t[0]=e):e=t[0],e}return t[1]!==n?(e=n&&(0,m.jsx)(lM,{payload:n}),t[1]=n,t[2]=e):e=t[2],e}function lM(e){let t,n,i,a,s,r,o,l=(0,h.c)(34),{payload:c}=e,{pull:d,sessions:u,currentUser:p,sessionsPollingInterval:f,sessionOwners:g}=c,[y]=(0,Z.ok)();l[0]!==y?(t=y.get("session_id"),l[0]=y,l[1]=t):t=l[1];let x=t,b=(0,v.useRef)(null);l[2]!==d.id||l[3]!==u||l[4]!==f?(n={pullId:d.id,initialData:u,sessionsPollingInterval:f},l[2]=d.id,l[3]=u,l[4]=f,l[5]=n):n=l[5];let{data:_,isError:j,timedOut:C}=(0,ll.t)(n);l[6]!==g||l[7]!==_?(i={sessions:_,initialData:g},l[6]=g,l[7]=_,l[8]=i):i=l[8];let{data:w}=(0,lR.i)(i);l[9]!==d||l[10]!==_?(a={pull:d,sessions:_},l[9]=d,l[10]=_,l[11]=a):a=l[11];let{data:N,isFetching:S}=lI(a);l[12]!==p||l[13]!==N||l[14]!==d.id||l[15]!==_?(s={pullId:d.id,sessions:_,mentions:N,currentUser:p},l[12]=p,l[13]=N,l[14]=d.id,l[15]=_,l[16]=s):s=l[16];let{allSessions:I,allMentions:k,addPendingSession:T,clearPendingSession:L}=function(e){let t,n,i,a,s,r,o,l,c,d,u,m,p,f=(0,h.c)(32),{pullId:g,sessions:y,mentions:x,currentUser:b}=e;f[0]!==y?(t=void 0===y?[]:y,f[0]=y,f[1]=t):t=f[1];let _=t;f[2]!==x?(n=void 0===x?[]:x,f[2]=x,f[3]=n):n=f[3];let j=n,[C,w]=(0,v.useState)(null),[N,S]=(0,v.useState)(null),[I,k]=(0,v.useState)(_.length),[T,L]=(0,v.useState)(j.length),E=_.length>I,R=j.length>T;f[4]!==I||f[5]!==_.length?(i=()=>{if(_.length!==I){let e=setTimeout(()=>{k(_.length)},0);return()=>clearTimeout(e)}},a=[_.length,I],f[4]=I,f[5]=_.length,f[6]=i,f[7]=a):(i=f[6],a=f[7]),(0,v.useEffect)(i,a),f[8]!==j.length||f[9]!==T?(s=()=>{if(j.length!==T){let e=setTimeout(()=>{L(j.length)},0);return()=>clearTimeout(e)}},r=[j.length,T],f[8]=j.length,f[9]=T,f[10]=s,f[11]=r):(s=f[10],r=f[11]),(0,v.useEffect)(s,r);let A=E?null:C,D=R?null:N;f[12]!==R||f[13]!==E||f[14]!==N||f[15]!==C?(l=()=>{if(E&&null!==C||R&&null!==N){let e=setTimeout(()=>{E&&w(null),R&&S(null)},0);return()=>clearTimeout(e)}},o=[E,R,C,N],f[12]=R,f[13]=E,f[14]=N,f[15]=C,f[16]=o,f[17]=l):(o=f[16],l=f[17]),(0,v.useEffect)(l,o),f[18]!==b||f[19]!==g?(c=e=>{let t=function(e,t){let n=t?.login??"You";return{type:"timeline_comment",id:-1,global_relay_id:"",pull_request_id:0,body:e,url:"",created_at:"",updated_at:"",author:{avatar_url:t?.primaryAvatarUrl??`https://avatars.githubusercontent.com/${t?.login??"ghost"}`,display_login:n,global_relay_id:"",id:0,url:""},path:null,subject_type:null,child_comments:null,isPending:!0}}(e,b);S(t),w((0,ex.s1)(g,t.id.toString()))},f[18]=b,f[19]=g,f[20]=c):c=f[20];let P=c;f[21]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{w(null),S(null)},f[21]=d):d=f[21];let O=d;f[22]!==A||f[23]!==_?(u=A?[..._,A]:_,f[22]=A,f[23]=_,f[24]=u):u=f[24];let M=u;f[25]!==D||f[26]!==j?(m=D?[...j,D]:j,f[25]=D,f[26]=j,f[27]=m):m=f[27];let F=m;return f[28]!==P||f[29]!==F||f[30]!==M?(p={allSessions:M,allMentions:F,addPendingSession:P,clearPendingSession:O},f[28]=P,f[29]=F,f[30]=M,f[31]=p):p=f[31],p}(s);l[17]!==_?(r=_?.every(lU)??!1,l[17]=_,l[18]=r):r=l[18];let E=r;if(l[19]!==T||l[20]!==k||l[21]!==I||l[22]!==L||l[23]!==S||l[24]!==E||l[25]!==d||l[26]!==w||l[27]!==_||l[28]!==j||l[29]!==C||l[30]!==x){let e,t=I.sort(l$);l[32]!==k?(e=e=>{if(k&&e.event_identifiers)return k.find(t=>e.event_identifiers?.includes(t.id.toString()))},l[32]=k,l[33]=e):e=l[33];let n=e;o=_&&w?j&&C?(0,m.jsx)("p",{children:"Error"}):_.length?(0,m.jsx)("div",{className:lw.root,children:(0,m.jsxs)("div",{className:lw.container,children:[(0,m.jsx)("div",{className:lw.stickableContainer,children:(0,m.jsx)(lr.$,{containerRef:b,disabled:!1,className:lw.scrollContainer,children:(0,m.jsxs)("div",{className:lw.content,children:[(0,m.jsx)(lm,{owner:w.find(e=>e.id===I[0]?.user_id)}),(0,m.jsx)(ld,{}),t.map((e,i)=>{var a;let s=n(e),r=(0,ex.mk)(e);return(0,m.jsxs)("div",{className:"d-flex flex-column",children:[i>0&&(0,m.jsx)(lP,{mention:s,isLoading:!s&&S},s?.id),(0,m.jsx)(lo.PS,{session:e,sessionOwner:w.find(t=>t.id===e.user_id),children:(0,m.jsx)(lC,{defaultOpen:(a=e.id,!r&&(x?a===x:_&&_.some(lB)?a===_.find(lF)?.id:i===t.length-1)),scrollContainerRef:b,hideStopButton:r})})]},e.id)})]})})}),!E&&(0,m.jsx)("div",{className:lw.chatInputContainer,children:(0,m.jsx)(lE,{activeSession:I?.find(ex.v5)??null,onAddPendingSession:T,onClearPendingSession:L,pull:d})})]})}):(0,m.jsx)("p",{children:"Empty"}):(0,m.jsx)("p",{children:"Loading..."}),l[19]=T,l[20]=k,l[21]=I,l[22]=L,l[23]=S,l[24]=E,l[25]=d,l[26]=w,l[27]=_,l[28]=j,l[29]=C,l[30]=x,l[31]=o}else o=l[31];return o}function lF(e){return(0,ex.v5)(e)}function lB(e){return(0,ex.v5)(e)}function l$(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}function lU(e){return(0,ex.SS)(e)}try{lO.displayName||(lO.displayName="TaskChatSuspended")}catch{}try{lM.displayName||(lM.displayName="TaskChat")}catch{}function lV(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(B.Fn,{children:(0,m.jsx)(eQ.BH,{children:(0,m.jsx)(lH,{})})}),t[0]=e):e=t[0],e}function lH(){let e,t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N=(0,h.c)(58),{data:S}=li();N[0]!==S?(e=void 0===S?{}:S,N[0]=S,N[1]=e):e=N[1];let{pull:I,sessions:k}=e,T=(0,eQ.tZ)(),{openPreviewPane:L,closePreviewPane:E,openItem:R,updateItem:A,allOpenItems:D}=(0,eQ.xx)(),[P]=(0,Z.ok)(),O=D?.length??0;N[2]!==P?(t=P.get("session_id"),N[2]=P,N[3]=t):t=N[3];let M=!!t;N[4]!==k?(n=k?.some(lz)??!1,N[4]=k,N[5]=n):n=N[5];let F=n;N[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,G.G7)("copilot_task_pr_files_changed"),N[6]=i):i=N[6];let B=i,U=I?.id||0,V=!!I?.id;N[7]!==I||N[8]!==U||N[9]!==V?(a={pullRequestId:U,includeDiff:!B,includeBody:!1,initialData:I,enabled:V},N[7]=I,N[8]=U,N[9]=V,N[10]=a):a=N[10];let{data:q,refetchDiffs:z,refetchBody:K,refetchPullRequest:Q}=function(e){let t,n,i,a,s,r,o,l=(0,h.c)(33),{pullRequestId:c,includeDiff:d,includeBody:u,initialData:m,enabled:p}=e,f=void 0!==d&&d,g=void 0!==u&&u,y=void 0===p||p,x=(0,sn.jE)();l[0]!==g||l[1]!==f||l[2]!==c?(t=["pull-request",c,f,g],l[0]=g,l[1]=f,l[2]=c,l[3]=t):t=l[3];let v=t;l[4]!==g||l[5]!==f||l[6]!==c?(n=()=>ls(c,{includeDiff:f,includeBody:g}),l[4]=g,l[5]=f,l[6]=c,l[7]=n):n=l[7];let b=n,_=f?0:3e5*!!m;l[8]!==y||l[9]!==m||l[10]!==b||l[11]!==v||l[12]!==_?(i={queryKey:v,queryFn:b,initialData:m,staleTime:_,enabled:y},l[8]=y,l[9]=m,l[10]=b,l[11]=v,l[12]=_,l[13]=i):i=l[13];let{data:j,refetch:C}=(0,ns.I)(i);l[14]!==f||l[15]!==c||l[16]!==x||l[17]!==v?(a=async()=>{if(!f)return;let e=await ls(c,{includeDiff:!0,includeBody:!1});x.setQueryData(v,t=>t?{...t,diffs:e.diffs,changed_files:e.changed_files}:e)},l[14]=f,l[15]=c,l[16]=x,l[17]=v,l[18]=a):a=l[18];let w=a;l[19]!==c||l[20]!==x||l[21]!==v?(s=async()=>{let e=await ls(c,{includeDiff:!1,includeBody:!0});x.setQueryData(v,t=>t?{...t,body:e.body}:e)},l[19]=c,l[20]=x,l[21]=v,l[22]=s):s=l[22];let N=s;l[23]!==c||l[24]!==x||l[25]!==v?(r=async()=>{let e=await ls(c,{includeDiff:!1,includeBody:!1});x.setQueryData(v,t=>t?{...t,title:e.title,head_sha:e.head_sha,changed_files:e.changed_files}:e)},l[23]=c,l[24]=x,l[25]=v,l[26]=r):r=l[26];let S=r;return l[27]!==j||l[28]!==C||l[29]!==N||l[30]!==w||l[31]!==S?(o={data:j,refetch:C,refetchDiffs:w,refetchBody:N,refetchPullRequest:S},l[27]=j,l[28]=C,l[29]=N,l[30]=w,l[31]=S,l[32]=o):o=l[32],o}(a);!function(e,t,n,i){let a,s,r,o,l=(0,h.c)(10);l[0]!==t?(a=(0,r1.A)(t,2e3,{leading:!1,trailing:!0}),l[0]=t,l[1]=a):a=l[1];let c=a;l[2]!==n?(s=(0,r1.A)(n,2e3,{leading:!1,trailing:!0}),l[2]=n,l[3]=s):s=l[3];let d=s;l[4]!==i?(r=(0,r1.A)(i,2e3,{leading:!1,trailing:!0}),l[4]=i,l[5]=r):r=l[5];let u=r;l[6]!==d||l[7]!==c||l[8]!==u?(o=e=>{e.event_updates?.git_updated&&c(),e.event_updates?.body_updated&&d(),e.event_updates?.title_updated&&u()},l[6]=d,l[7]=c,l[8]=u,l[9]=o):o=l[9];let m=o;(0,la.x)(e,m)}(q?.aliveChannel,B?Q:z,K,Q);let Y=(0,v.useRef)(!1);N[11]!==O?(s=()=>{0===O&&(Y.current=!1)},r=[O],N[11]=O,N[12]=s,N[13]=r):(s=N[12],r=N[13]),(0,v.useEffect)(s,r),N[14]!==M||N[15]!==F||N[16]!==R||N[17]!==L||N[18]!==I||N[19]!==q||N[20]!==A?(o=()=>{if(!q)return;let e=!!q.body,t=q.diffs??[],n=q.head_sha,i=q.repository_nwo,a=B||t.length>0,s=null,r=null,o={body:q?.body??"",title:q.title,type:"pr-overview"};if(A(s={...(0,t$.Bx)(o,tg.Wp),disableCloseButton:!0,icon:ef.NoteIcon}),a&&I&&A(r=B?{...(0,t$.Bx)({type:"pr-files-changed",headSha:n,basePath:`/${q.repository_nwo}/pull/${q.number}`,filesChanged:q.changed_files??0,isSessionRunning:F},tg.Wp),disableCloseButton:!0,trailingComponent:(0,m.jsx)(tJ.A,{children:q.changed_files??0})}:{...(0,t$.GJ)(t,String(q.id),i,n),disableCloseButton:!0,trailingComponent:(0,m.jsx)(tJ.A,{children:t.length})}),!Y.current){let t=setTimeout(()=>{let t=!M;if(R(s.id,t),t&&L(),r){let t=M||!e;R(r.id,t),t&&L()}Y.current=!0},100);return()=>clearTimeout(t)}},N[14]=M,N[15]=F,N[16]=R,N[17]=L,N[18]=I,N[19]=q,N[20]=A,N[21]=o):o=N[21],N[22]!==M||N[23]!==F||N[24]!==R||N[25]!==O||N[26]!==L||N[27]!==I||N[28]!==q||N[29]!==A?(l=[q,A,R,L,M,B,I,F,O],N[22]=M,N[23]=F,N[24]=R,N[25]=O,N[26]=L,N[27]=I,N[28]=q,N[29]=A,N[30]=l):l=N[30],(0,v.useEffect)(o,l);let ee=(0,H.b)(),et=(0,eY.U)();N[31]!==E||N[32]!==L?(c=e=>{e?L():E()},N[31]=E,N[32]=L,N[33]=c):c=N[33];let en=c;N[34]===Symbol.for("react.memo_cache_sentinel")?(d=[],N[34]=d):d=N[34],(0,v.useEffect)(lq,d),N[35]!==ee?(u=()=>{ee.selectThread(null,{includeThreads:!1,clearTopic:!0})},p=[ee],N[35]=ee,N[36]=u,N[37]=p):(u=N[36],p=N[37]),(0,v.useEffect)(u,p);let{ssoOrganizations:ei}=(0,$.Pk)();N[38]!==ei?(f=ei.map(lW),N[38]=ei,N[39]=f):f=N[39];let ea=f;return N[40]!==ea?(g=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(ea)!==e&&(new W.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(ea)))},y=[ea],N[40]=ea,N[41]=g,N[42]=y):(g=N[41],y=N[42]),(0,v.useEffect)(g,y),N[43]!==T||N[44]!==en?(x=[T,en],N[43]=T,N[44]=en,N[45]=x):x=N[45],N[46]!==T||N[47]!==L||N[48]!==I?(b=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(tf,{pull:I,isContentPreviewOpen:T,openPreviewPane:L})}),N[46]=T,N[47]=L,N[48]=I,N[49]=b):b=N[49],N[50]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),N[50]=_):_=N[50],N[51]===Symbol.for("react.memo_cache_sentinel")?(j=(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(lO,{})}),N[51]=j):j=N[51],N[52]!==et?(C=(0,m.jsx)(J.P.ColumnRight,{children:(0,m.jsx)(o9,{returnFocusRef:et,disableResourcePanel:!0})}),N[52]=et,N[53]=C):C=N[53],N[54]!==x||N[55]!==b||N[56]!==C?(w=(0,m.jsxs)(J.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:x,children:[b,_,j,C]}),N[54]=x,N[55]=b,N[56]=C,N[57]=w):w=N[57],w}function lW(e){return e.login}function lq(){(0,g.D)("Task \xb7 GitHub Copilot")}function lz(e){return"in_progress"===e.state}try{lV.displayName||(lV.displayName="TaskViewWrapper")}catch{}try{lH.displayName||(lH.displayName="TaskView")}catch{}var lG=n(56833);let lK={title:"PullRequestOverviewPreview-module__title--Csd4m"};function lQ(e){let t,n,i,a=(0,h.c)(8),{title:s,body:r,className:o}=e;return a[0]!==s?(t=(0,m.jsx)(lG.z,{children:(0,m.jsx)(lG.z.TitleArea,{children:(0,m.jsx)(lG.z.Title,{as:"h1",className:lK.title,children:s})})}),a[0]=s,a[1]=t):t=a[1],a[2]!==r?(n=r&&(0,m.jsx)(r3,{content:{value:r,name:"pull-request-body.md"},hideHeadingAnchors:!0,fallbackToRaw:!0}),a[2]=r,a[3]=n):n=a[3],a[4]!==o||a[5]!==t||a[6]!==n?(i=(0,m.jsxs)("div",{className:o,children:[t,n]}),a[4]=o,a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{lQ.displayName||(lQ.displayName="PullRequestOverviewPreview")}catch{}function lY(e){let t,n=(0,h.c)(3),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i.body||n[1]!==i.title?(t=(0,m.jsx)(lQ,{title:i.title,body:i.body}),n[0]=i.body,n[1]=i.title,n[2]=t):t=n[2],t)}try{lY.displayName||(lY.displayName="PullRequestOverviewPluginPreview")}catch{}var lJ=n(79658);let lX={container:"PullRequestFilesChangedPreview-module__container--mKeOB",emptyState:"PullRequestFilesChangedPreview-module__emptyState--gZobE"};function lZ(e){let t,n=(0,h.c)(13),{headSha:i,basePath:a,filesChanged:s,isSessionRunning:r}=e,o=void 0!==r&&r;if(0===(void 0===s?0:s)){let e,t,i,a;n[0]!==o?(e=(0,m.jsx)(tI.E.Visual,{children:(0,m.jsx)(rU.N,{animationType:rU.L.Thinking,loopAnimation:o,size:48})}),n[0]=o,n[1]=e):e=n[1];let s=o?"No changes yet\u2026":"No files to display";n[2]!==s?(t=(0,m.jsx)(tI.E.Heading,{children:s}),n[2]=s,n[3]=t):t=n[3];let r=o?"Once files are committed they will appear here":"Copilot did not generate any files";return n[4]!==r?(i=(0,m.jsx)(tI.E.Description,{children:r}),n[4]=r,n[5]=i):i=n[5],n[6]!==e||n[7]!==t||n[8]!==i?(a=(0,m.jsx)("div",{className:lX.container,children:(0,m.jsxs)(tI.E,{border:!1,spacious:!0,className:lX.emptyState,children:[e,t,i]})}),n[6]=e,n[7]=t,n[8]=i,n[9]=a):a=n[9],a}return n[10]!==a||n[11]!==i?(t=(0,m.jsx)("div",{className:lX.container,children:(0,m.jsx)(lJ.b,{headSha:i,basePath:a,forceUnifiedView:!0},a)}),n[10]=a,n[11]=i,n[12]=t):t=n[12],t}try{lZ.displayName||(lZ.displayName="PullRequestFilesChangedPreview")}catch{}function l0(e){let t,n=(0,h.c)(5),{reference:i}=e,{headSha:a,basePath:s,filesChanged:r,isSessionRunning:o}=i;return n[0]!==s||n[1]!==r||n[2]!==a||n[3]!==o?(t=(0,m.jsx)(lZ,{headSha:a,basePath:s,filesChanged:r,isSessionRunning:o}),n[0]=s,n[1]=r,n[2]=a,n[3]=o,n[4]=t):t=n[4],t}try{l0.displayName||(l0.displayName="PullRequestFilesChangedPluginPreview")}catch{}let l1=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":lY,"pr-files-changed":l0}}constructor(){(0,f._)(this,"id",eq.v),(0,f._)(this,"displayName",eq.Ns),(0,f._)(this,"activityItems",[{displayName:"Tasks",Component:e3}]),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:eq.kF,Component:lV,routes:[l1]}])}};var l2=n(37294),l3=n(60460),l4=n(65411),l5=n(82590),l6=n(46857);let l7={container:"LoopBlock-module__container--F3X80",streaming:"LoopBlock-module__streaming--kzTU_",header:"LoopBlock-module__header--Bmyfz",headerCollapsed:"LoopBlock-module__headerCollapsed--Yoo66",expandButton:"LoopBlock-module__expandButton--kYkwN",buttonText:"LoopBlock-module__buttonText--pH2DI",content:"LoopBlock-module__content--SQW7_",node:"LoopBlock-module__node--GZLd9",iconContainer:"LoopBlock-module__iconContainer--QF1t5",checkIcon:"LoopBlock-module__checkIcon--_Toxw",nodeTitle:"LoopBlock-module__nodeTitle--upYDV"};function l8(e){let t,n,i,a,s,r,o,l,c,d=(0,h.c)(26),{loop:u,headerButton:p,isStreaming:f}=e,[g,y]=(0,v.useState)(!0);if(!u)return null;d[0]!==g?(t=()=>y(!g),d[0]=g,d[1]=t):t=d[1];let b=t,_=f&&l7.streaming;d[2]!==_?(n=(0,x.$)(l7.container,_),d[2]=_,d[3]=n):n=d[3];let j=!g&&l7.headerCollapsed;return d[4]!==j?(i=(0,x.$)(l7.header,j),d[4]=j,d[5]=i):i=d[5],d[6]!==g?(a=g?(0,m.jsx)(ef.ChevronDownIcon,{size:16}):(0,m.jsx)(ef.ChevronRightIcon,{size:16}),d[6]=g,d[7]=a):a=d[7],d[8]!==u.title?(s=(0,m.jsx)("span",{className:l7.buttonText,children:u.title}),d[8]=u.title,d[9]=s):s=d[9],d[10]!==a||d[11]!==s||d[12]!==b?(r=(0,m.jsx)(tm.Q,{variant:"invisible",onClick:b,className:l7.expandButton,leadingVisual:a,children:s}),d[10]=a,d[11]=s,d[12]=b,d[13]=r):r=d[13],d[14]!==p||d[15]!==i||d[16]!==r?(o=(0,m.jsxs)("div",{className:i,children:[r,p]}),d[14]=p,d[15]=i,d[16]=r,d[17]=o):o=d[17],d[18]!==g||d[19]!==f||d[20]!==u.nodes?(l=g&&(0,m.jsx)("div",{className:l7.content,children:u.nodes.map((e,t)=>{let n=f&&t===u.nodes.length-1;return(0,m.jsxs)("div",{className:l7.node,children:[(0,m.jsx)("div",{className:l7.iconContainer,children:(0,m.jsx)(ef.CheckCircleFillIcon,{size:16,className:l7.checkIcon})}),n&&!e.title?null:(0,m.jsx)("span",{className:l7.nodeTitle,children:e.title})]},e.id)})}),d[18]=g,d[19]=f,d[20]=u.nodes,d[21]=l):l=d[21],d[22]!==l||d[23]!==n||d[24]!==o?(c=(0,m.jsxs)("div",{className:n,children:[o,l]}),d[22]=l,d[23]=n,d[24]=o,d[25]=c):c=d[25],c}try{l8.displayName||(l8.displayName="LoopBlockContent")}catch{}var l9=n(91348),ce=n(12465),ct=n(37510),cn=n(99993);function ci(e){let t,n,i,a,s=(0,h.c)(15),{isStreaming:r}=e,o=function(){let{message:e}=(0,ir.V)(),t=(0,l6.O)(e);return t?.pipeline??null}(),{mutate:l}=(0,ce.P)(),{data:c}=(0,cn._N)();s[0]!==c||s[1]!==o||s[2]!==l?(t=()=>{if(!c||!o)return;let e=(0,l9.kX)({...o,id:c.id},[]);l({loopID:c.id,updateFn:()=>e})},s[0]=c,s[1]=o,s[2]=l,s[3]=t):t=s[3];let d=t;s[4]!==r||s[5]!==c||s[6]!==o?(n=c&&!r&&!(0,ct.S)(c,o),s[4]=r,s[5]=c,s[6]=o,s[7]=n):n=s[7];let u=n;s[8]!==d||s[9]!==u?(i=u?(0,m.jsx)(tm.Q,{variant:"invisible",onClick:d,children:"Restore"}):null,s[8]=d,s[9]=u,s[10]=i):i=s[10];let p=i;return s[11]!==r||s[12]!==o||s[13]!==p?(a=(0,m.jsx)(l8,{loop:o,headerButton:p,isStreaming:r}),s[11]=r,s[12]=o,s[13]=p,s[14]=a):a=s[14],a}try{ci.displayName||(ci.displayName="LoopBlock")}catch{}let ca="data-loop-block",cs=(0,ia.F)(ca),cr={div:(e,t)=>{let n=(0,ia.k)(e,ca);return n?(0,m.jsx)(ci,{...n}):t}};function co(){return{transformMarkdown:e=>(0,is.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[cs]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,is.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&cs in i.properties&&n.children.splice(t,1,i)}),reactComponents:cr}}var cl=n(54908),cc=n(35750),cd=n(18150),cu=n(85242),cm=n(88243),ch=n(16213),cp=n(46062),cf=new WeakMap,cg=new WeakMap,cy=new WeakMap,cx=new WeakSet,cv=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,cp.wv)(),a=t??i.id,s=await (0,cc._)(this,cf).getAuthToken(),r=await (0,n6.p)({basePath:(0,cc._)(this,cg),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,cc._)(this,cv).integrationID,realIp:(0,cc._)(this,cy),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,tv.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,cm._)(this,cx,cb).call(this,r.body,n))}constructor(e,t,n=""){(0,ch._)(this,cx),(0,cd._)(this,cv,{get:c_,set:void 0}),(0,cd._)(this,cf,{writable:!0,value:void 0}),(0,cd._)(this,cg,{writable:!0,value:void 0}),(0,cd._)(this,cy,{writable:!0,value:void 0}),(0,cu._)(this,cg,e),(0,cu._)(this,cf,t),(0,cu._)(this,cy,n)}};async function*cb(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function c_(){return{integrationID:"copilot-chat"}}var cj=n(21046);let cC=["SAML"],cw={FORBIDDEN:["SAML error"]};var cN=new WeakMap,cS=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){let n={"X-Copilot-Api-Token":(await (0,cc._)(this,cS).getAuthToken()).value},i={query:e};t?.nodeExecution&&(i.loopId=t.nodeExecution.loopId,i.version=t.nodeExecution.version,i.executionId=t.nodeExecution.executionId,i.nodeId=t.nodeExecution.nodeId);let a=await (0,nr.Sr)((0,cc._)(this,cN),{method:"POST",body:i,headers:n,signal:t?.signal});if(a.ok){let e=await a.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!cC.includes(e.type)&&!cw[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,tv.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,cj.vV)(n),(0,tv.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,a.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t){(0,cd._)(this,cN,{writable:!0,value:void 0}),(0,cd._)(this,cS,{writable:!0,value:void 0}),(0,cu._)(this,cN,e),(0,cu._)(this,cS,t)}};let cI={header:"LoopsView-module__header--ZnQDC",input:"LoopsView-module__input--HBzte",noResultsMessage:"LoopsView-module__noResultsMessage--OkrMA",searchContainer:"LoopsView-module__searchContainer--ypqMb"};var ck=n(80770),cT=n(46747),cL=n(99511);let cE={searchContainer:"SearchInput-module__searchContainer--r7MLn",searchInputWrapper:"SearchInput-module__searchInputWrapper--fhRw6",searchInput:"SearchInput-module__searchInput--PKKMu"};function cR(e){let t,n,i,a,s,r,o=(0,h.c)(20),{onSearch:l,placeholder:c,"aria-label":d,disabled:u,debounceDelay:p}=e,f=void 0===c?"Search...":c,g=void 0===d?"Search":d,y=void 0!==u&&u,[x,b]=(0,v.useState)(""),_=(0,cT.d)(l,void 0===p?200:p);o[0]!==_||o[1]!==l?(t=e=>{let t=e.currentTarget.value;b(t),""===t.trim()?l(""):_(t)},o[0]=_,o[1]=l,o[2]=t):t=o[2];let j=t;o[3]!==l?(n=()=>{b(""),l("")},o[3]=l,o[4]=n):n=o[4];let C=n;return o[5]!==g?(i=(0,m.jsx)(lS.A.Label,{visuallyHidden:!0,children:g}),o[5]=g,o[6]=i):i=o[6],o[7]!==C||o[8]!==y||o[9]!==x?(a=""!==x?(0,m.jsx)(tt.K,{icon:ef.XCircleFillIcon,onClick:C,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:y}):void 0,o[7]=C,o[8]=y,o[9]=x,o[10]=a):a=o[10],o[11]!==j||o[12]!==f||o[13]!==x||o[14]!==a?(s=(0,m.jsx)(cL.A,{className:cE.searchInput,placeholder:f,value:x,onChange:j,leadingVisual:ef.SearchIcon,trailingAction:a}),o[11]=j,o[12]=f,o[13]=x,o[14]=a,o[15]=s):s=o[15],o[16]!==y||o[17]!==i||o[18]!==s?(r=(0,m.jsx)("div",{className:cE.searchContainer,children:(0,m.jsxs)(lS.A,{className:cE.searchInputWrapper,disabled:y,children:[i,s]})}),o[16]=y,o[17]=i,o[18]=s,o[19]=r):r=o[19],r}try{cR.displayName||(cR.displayName="SearchInput")}catch{}var cA=n(58615),cD=n(49912),cP=n(17005);let cO={header:"LoopsViewHeader-module__header--miwmH",rightControls:"LoopsViewHeader-module__rightControls--tpwkz"};function cM(){let e,t,n,i,a=(0,h.c)(4),s=(0,v.useRef)(null),r=(0,v.useRef)(null);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.KebabHorizontalIcon,"aria-label":"Menu",onClick:cB})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{s.current?.openDialog(),(0,tv.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)(eZ.l.Item,{onSelect:t,children:["Give feedback",(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CommentIcon,{})})]}),a[2]=n):n=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("div",{className:cO.header,children:(0,m.jsxs)("div",{className:cO.rightControls,children:[(0,m.jsxs)(eX.W,{anchorRef:r,children:[e,(0,m.jsx)(eX.W.Overlay,{width:"small",children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Group,{children:[n,(0,m.jsxs)(eZ.l.LinkItem,{href:"/settings/copilot",onClick:cF,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.GearIcon,{})}),"Settings"]})]})})})]}),(0,m.jsx)(cP.l,{ref:s,mode:"immersive",returnFocusRef:r})]})}),a[3]=i):i=a[3],i}function cF(){return(0,tv.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function cB(){return(0,tv.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{cM.displayName||(cM.displayName="LoopsViewHeader")}catch{}let c$=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}];var cU=n(99519),cV=n(43134);let cH=(0,v.lazy)(async()=>({default:(await Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js-node_module-3b0c88"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,49522))).Loop}));try{cH.displayName||(cH.displayName="LazyLoop")}catch{}function cW(e){let t,n,i,a,s=(0,h.c)(10),{value:r,onChange:o}=e;s[0]!==o?(t=e=>{o(0===e?"list":"output")},s[0]=o,s[1]=t):t=s[1];let l=t,c="list"===r;s[2]!==c?(n=(0,m.jsx)(rM.I.IconButton,{"aria-label":"List view",selected:c,icon:ef.ThreeBarsIcon}),s[2]=c,s[3]=n):n=s[3];let d="output"===r;return s[4]!==d?(i=(0,m.jsx)(rM.I.IconButton,{"aria-label":"Output view",selected:d,icon:ef.RowsIcon}),s[4]=d,s[5]=i):i=s[5],s[6]!==l||s[7]!==n||s[8]!==i?(a=(0,m.jsxs)(rM.I,{"aria-label":"Loops overview view mode",onChange:l,children:[n,i]}),s[6]=l,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}try{cW.displayName||(cW.displayName="ListModeToggle")}catch{}var cq=n(70324),cz=n(14303);function cG(e){let t,n,i,a=(0,h.c)(14),{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:l,onEdit:c,onCopyOutput:d,loopId:u,variant:p,hasOutput:f}=e,g=void 0===p?"invisible":p,y=(0,v.useRef)(null);return u?(a[0]!==g?(t=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{icon:ef.KebabHorizontalIcon,"aria-label":"Manage loop",variant:g})}),a[0]=g,a[1]=t):t=a[1],a[2]!==f||a[3]!==u||a[4]!==r||a[5]!==d||a[6]!==s||a[7]!==o||a[8]!==c||a[9]!==l?(n=(0,m.jsx)(cz.r,{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:l,onEdit:c,onCopyOutput:d,hasOutput:f,loopId:u,returnFocusRef:y}),a[2]=f,a[3]=u,a[4]=r,a[5]=d,a[6]=s,a[7]=o,a[8]=c,a[9]=l,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,m.jsxs)(eX.W,{anchorRef:y,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{cG.displayName||(cG.displayName="LoopsContextMenu")}catch{}var cK=n(33026),cQ=n(5533);function cY(e,t){return["loop-execution",e,t]}var cJ=n(93364),cX=n(48057),cZ=n(90122);let c0={panel:"LoopOutput-module__panel--MrOXo",header:"LoopOutput-module__header--fcRKQ",title:"LoopOutput-module__title--pNloU",actions:"LoopOutput-module__actions--S7bni",body:"LoopOutput-module__body--fhlUk"};var c1=n(19336);function c2(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(41),{loop:g}=e,{runLoop:y,stopLoop:x,isPreparing:b}=function(){let e=(0,cU.EY)(),t=(0,sn.jE)(),[n,i]=(0,v.useState)(!1);return{runLoop:(0,v.useCallback)(async n=>{i(!0);try{let a=await e.createExecution(n.id,n.version||cK.kj);if(!a.success)throw Error(`Failed to create execution: ${a.error}`);let s=a.data,r=(0,cX.wu)(n.id,n.version||cK.kj),o=cY(n.id,n.version||cK.kj);t.setQueryData(r,s),t.setQueryData(o,s),i(!1),await e.runPipeline(n,s.id,e=>{let i=(0,cX.wu)(n.id,n.version||cK.kj),a=cY(n.id,n.version||cK.kj);switch(e.type){case"UPDATE_NODE_VALUE":case"UPDATE_NODE_VALUE_PARTIAL":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],value:e.value,completedAt:"UPDATE_NODE_VALUE"===e.type?Date.now():void 0}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}break;case"UPDATE_NODE_ERROR":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],error:e.error,completedAt:Date.now()}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}break;case"SET_RUNNING":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],completedAt:void 0,startedAt:Date.now()}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}}},(e,n,i)=>{let a=(0,cX.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,cJ.$j)(s):(0,cJ.YD)("execution not found"))})}catch(e){throw i(!1),(0,cj.vV)("Error running loop:",e),e}},[e,t]),stopLoop:(0,v.useCallback)(n=>{let i=(0,cX.wu)(n.id,n.version||cK.kj),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i}),t.invalidateQueries({queryKey:cY(n.id,n.version||cK.kj)})})},[e,t]),isPreparing:n}}(),_=(0,l9.FT)(g)[0],{data:j}=function(e,t){let n,i,a,s,r=(0,h.c)(13),o=(0,cU.EY)(),l=e.id,c=e.version??"";return r[0]!==l||r[1]!==c?(n=cY(l,c),r[0]=l,r[1]=c,r[2]=n):n=r[2],r[3]!==l||r[4]!==c||r[5]!==o?(i=async()=>{let e=await o.getExecution(l,c,cK.qD);if(!e.success)return null;let t=e.data;return o.isExecutionRunning(t.id)!==(0,cQ.y)(t)?null:t},r[3]=l,r[4]=c,r[5]=o,r[6]=i):i=r[6],void 0!==r[7]?(a=void 0,r[7]=t,r[8]=a):a=r[8],r[9]!==n||r[10]!==i||r[11]!==a?(s={queryKey:n,queryFn:i,enabled:!0,...a,staleTime:3e5},r[9]=n,r[10]=i,r[11]=a,r[12]=s):s=r[12],(0,ns.I)(s)}(g),C=_?j?.nodes[_.id]:void 0,w=C?.value??null,N=C?.error||null;f[0]!==j?(t=(0,cQ.y)(j),f[0]=j,f[1]=t):t=f[1];let S=t,I=b||S;f[2]!==w?(n=(0,cZ.DO)(w),f[2]=w,f[3]=n):n=f[3];let k=n;f[4]!==g||f[5]!==y?(i=async()=>{await y(g),(0,tv.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},f[4]=g,f[5]=y,f[6]=i):i=f[6];let T=i;f[7]!==g||f[8]!==x?(a=()=>{x(g),(0,tv.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},f[7]=g,f[8]=x,f[9]=a):a=f[9];let L=a;f[10]!==w||f[11]!==k?(s=async()=>{if(w)try{await navigator.clipboard.writeText(k),(0,tv.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},f[10]=w,f[11]=k,f[12]=s):s=f[12];let E=s,R=`${n6.Jz}/l/${g.id}`;f[13]!==g.title||f[14]!==R?(r=(0,m.jsx)("h3",{className:c0.title,children:(0,m.jsx)(tb.$,{variant:"invisible",condensed:!0,to:R,onClick:c3,children:g.title})}),f[13]=g.title,f[14]=R,f[15]=r):r=f[15],f[16]!==T||f[17]!==L||f[18]!==I||f[19]!==w?(o=(0,m.jsx)(cq.c,{isLoading:I,onClick:T,onStop:L,value:w,variant:"invisible",iconOnly:!0}),f[16]=T,f[17]=L,f[18]=I,f[19]=w,f[20]=o):o=f[20];let A=!!w;f[21]!==E||f[22]!==g.id||f[23]!==A?(l=(0,m.jsx)(cG,{loopId:g.id,onEdit:c3,onCopyOutput:E,hasOutput:A}),f[21]=E,f[22]=g.id,f[23]=A,f[24]=l):l=f[24],f[25]!==l||f[26]!==o?(c=(0,m.jsxs)("div",{className:c0.actions,children:[o,l]}),f[25]=l,f[26]=o,f[27]=c):c=f[27],f[28]!==c||f[29]!==r?(d=(0,m.jsxs)("div",{className:c0.header,children:[r,c]}),f[28]=c,f[29]=r,f[30]=d):d=f[30];let D=!!_;return f[31]!==T||f[32]!==L||f[33]!==I||f[34]!==N||f[35]!==w||f[36]!==D?(u=(0,m.jsx)("div",{className:c0.body,children:(0,m.jsx)(c1.G,{outputNodeExists:D,isRunning:I,nodeValue:w,nodeError:N,onRun:T,onStop:L})}),f[31]=T,f[32]=L,f[33]=I,f[34]=N,f[35]=w,f[36]=D,f[37]=u):u=f[37],f[38]!==d||f[39]!==u?(p=(0,m.jsxs)("div",{className:c0.panel,children:[d,u]}),f[38]=d,f[39]=u,f[40]=p):p=f[40],p}function c3(){(0,tv.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{c2.displayName||(c2.displayName="LoopOutput")}catch{}let c4={list:"LoopsOutputList-module__list--DoC1u"};var c5=n(76219);function c6(e){let t,n,i,a,s,r,o=(0,h.c)(11),{chatState:l,plugin:c}=e;if(!c||!(0,cD.j)(c))throw Error("LoopsView can only be used with a LoopsPlugin");return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(cM,{})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),o[1]=n):n=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(i=[],o[2]=i):i=o[2],o[3]!==l?(a=(0,m.jsx)(c8,{chatState:l}),o[3]=l,o[4]=a):a=o[4],o[5]!==c.service||o[6]!==a?(s=(0,m.jsx)(cU.qT,{value:c.service,children:a}),o[5]=c.service,o[6]=a,o[7]=s):s=o[7],o[8]!==c.previewUrl||o[9]!==s?(r=(0,m.jsxs)(J.P,{"data-testid":"loops-layout",children:[t,n,(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(c5.Q,{previewUrl:c.previewUrl,availableModels:i,sendChatMessage:c7,children:s})})]}),o[8]=c.previewUrl,o[9]=s,o[10]=r):r=o[10],r}function c7(){}function c8(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y=(0,h.c)(37),{chatState:x}=e,{data:b,isLoading:_}=(0,ck.C)(),j=(0,H.b)(),C=(0,Z.Zp)(),w=(0,cU.EY)(),N=(0,cp.GF)(x.availableModels),[S,I]=(0,cA.M)("loopsOverviewViewMode","output"),[k,T]=(0,v.useState)("");e:{let e;if(!b||!k.trim()){t=b;break e}if(y[0]!==b||y[1]!==k){let t=k.toLowerCase().trim();e=b.filter(e=>e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)),y[0]=b,y[1]=k,y[2]=e}else e=y[2];t=e}let L=t;y[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],y[3]=n):n=y[3],(0,v.useEffect)(dn,n),y[4]!==j?(i=()=>{j.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[j],y[4]=j,y[5]=i,y[6]=a):(i=y[5],a=y[6]),(0,v.useEffect)(i,a),y[7]!==N||y[8]!==w||y[9]!==j||y[10]!==C?(s=async e=>{let t=e.trim();if(""===t)return;(0,tv.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:l5.S$},a=await j.createThread(i);await w.createLoop(n),(0,cV.aq)(n,a.id);let s={content:t,model:N,references:[],thread:a,mode:l5.lh};j.sendChatMessage(s),C(`${n6.Jz}/l/${n}`)},y[7]=N,y[8]=w,y[9]=j,y[10]=C,y[11]=s):s=y[11];let E=s;y[12]!==w||y[13]!==C?(r=async e=>{await w.createLoop(e),C(`${n6.Jz}/l/${e.id}`)},y[12]=w,y[13]=C,y[14]=r):r=y[14];let R=r;y[15]!==I?(o=e=>{I(e)},y[15]=I,y[16]=o):o=y[16];let A=o;y[17]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{T(e),(0,tv.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},y[17]=l):l=y[17];let P=l;return y[18]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Loops"}),(0,m.jsx)(D.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),y[18]=c):c=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(d=[{name:"Loop",icon:(0,m.jsx)(ef.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],y[19]=d):d=y[19],y[20]!==E?(u=(0,m.jsxs)("div",{className:cI.header,children:[c,(0,m.jsx)("div",{className:cI.input,children:(0,m.jsx)(lN.V,{modes:d,size:"large",onSubmit:E})})]}),y[20]=E,y[21]=u):u=y[21],y[22]!==L||y[23]!==A||y[24]!==_||y[25]!==b||y[26]!==k||y[27]!==S?(p=_||b&&b.length>0?(0,m.jsxs)(D.Section,{children:[(0,m.jsxs)("div",{className:cI.searchContainer,children:[(0,m.jsx)(cR,{onSearch:P,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,m.jsx)(cW,{value:S,onChange:A})]}),k&&L&&0===L.length?(0,m.jsxs)("div",{className:cI.noResultsMessage,children:["No loops found matching \u201C",k,"\u201D"]}):"list"===S?(0,m.jsx)(en,{children:(0,m.jsx)(en.List,{loading:_,children:L?.map(de)})}):(0,m.jsx)("div",{className:c4.list,children:(L||[]).map(c9)})]}):null,y[22]=L,y[23]=A,y[24]=_,y[25]=b,y[26]=k,y[27]=S,y[28]=p):p=y[28],y[29]!==R||y[30]!==_||y[31]!==b?(f=!_&&(!b||0===b.length)&&(0,m.jsxs)(D.Section,{children:[(0,m.jsx)(D.Section.Title,{children:"Examples"}),(0,m.jsx)(en,{children:(0,m.jsx)(en.List,{loading:_,children:c$.map(e=>{let{loop:t}=e;return(0,m.jsxs)(en.Item,{onClick:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),R({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,m.jsx)(en.Item.Title,{children:t.title}),(0,m.jsx)(en.Item.Description,{children:t.description})]},t.title)})})})]}),y[29]=R,y[30]=_,y[31]=b,y[32]=f):f=y[32],y[33]!==u||y[34]!==p||y[35]!==f?(g=(0,m.jsxs)(D.Container,{width:"small",children:[u,p,f]}),y[33]=u,y[34]=p,y[35]=f,y[36]=g):g=y[36],g}function c9(e){return(0,m.jsx)(c2,{loop:e},e.id)}function de(e){return(0,m.jsxs)(en.Item,{href:`${n6.Jz}/l/${e.id}`,onClick:dt,children:[(0,m.jsx)(en.Item.Title,{children:e.title}),(0,m.jsx)(en.Item.Description,{children:e.description}),(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(cG,{loopId:e.id})})]},e.id)}function dt(){return(0,tv.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function dn(){(0,g.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js-node_module-3b0c88"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,49522))}try{c6.displayName||(c6.displayName="LoopsView")}catch{}try{c8.displayName||(c8.displayName="LoopsViewInner")}catch{}var di=n(49851),da=new WeakMap,ds=new WeakMap,dr=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,cm._)(this,dr,dl).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,cm._)(this,dr,dl).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,cm._)(this,dr,dl).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,cm._)(this,dr,dl).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,cm._)(this,dr,dl).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,cm._)(this,dr,dl).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,cm._)(this,dr,dl).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,cm._)(this,dr,dl).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,cm._)(this,dr,dl).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,cm._)(this,dr,dl).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,cm._)(this,dr,dl).call(this,{operation:"unshare-loop",loopID:e})}constructor(e,t){(0,ch._)(this,dr),(0,cd._)(this,da,{writable:!0,value:void 0}),(0,cd._)(this,ds,{writable:!0,value:void 0}),(0,cu._)(this,da,e),(0,cu._)(this,ds,t)}};async function dl(e){let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,cc._)(this,ds)){let e=await (0,cc._)(this,ds).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,nr.DI)((0,cc._)(this,da),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,cJ.YD)(JSON.parse(e),n)}catch(e){return(0,cJ.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,cJ.$j)(i)}var dc=n(18096);let dd={itemDescription:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi"};var du=n(42518);function dm(e){let t,n,i=(0,h.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(di.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,m.jsxs)(eZ.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function dh(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b=(0,h.c)(48),{onSubmit:_,onDismiss:j,client:C}=e,w=(0,H.b)(),{data:N,isError:S,isLoading:I}=function(e){let t,n,i=(0,h.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=["loop-execution-references"],i[0]=t):t=i[0],i[1]!==e?(n={queryKey:t,queryFn:()=>dg(e)},i[1]=e,i[2]=n):n=i[2],(0,ns.I)(n)}(C),[k,T]=(0,v.useState)("");b[0]!==w||b[1]!==_||b[2]!==N?(t=e=>{if(!N)return;let t=N.find(t=>t.executionID===e);t&&w.addReference(t,"loop-executions-select-panel"),_()},b[0]=w,b[1]=_,b[2]=N,b[3]=t):t=b[3];let L=t;if(b[4]!==k||b[5]!==S||b[6]!==I||b[7]!==j||b[8]!==L||b[9]!==_||b[10]!==N){let e,t,h=N?N.map(dp).filter(e=>e.text.toLowerCase().includes(k.toLowerCase())):[];i=dc.X,d=!0,u="modal",p="large",f="instant",g="Select Loop output",a=j,s=_,b[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>T(e.currentTarget.value),b[24]=e):e=b[24],b[25]!==I?(r=(0,m.jsx)(dc.X.Header,{children:(0,m.jsx)(dc.X.SearchInput,{loading:I,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),b[25]=I,b[26]=r):r=b[26],n=eZ.l,b[27]!==S||b[28]!==I?(o=!I&&S&&(0,m.jsx)(dc.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),b[27]=S,b[28]=I,b[29]=o):o=b[29],l=!I&&0===h.length&&(0,m.jsx)(dc.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),b[30]!==L?(t=e=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>L(e.key),children:[e.text,(0,m.jsx)(eZ.l.Description,{variant:"block",className:dd.itemDescription,children:e.description})]},e.key),b[30]=L,b[31]=t):t=b[31],c=h.map(t),b[4]=k,b[5]=S,b[6]=I,b[7]=j,b[8]=L,b[9]=_,b[10]=N,b[11]=n,b[12]=i,b[13]=a,b[14]=s,b[15]=r,b[16]=o,b[17]=l,b[18]=c,b[19]=d,b[20]=u,b[21]=p,b[22]=f,b[23]=g}else n=b[11],i=b[12],a=b[13],s=b[14],r=b[15],o=b[16],l=b[17],c=b[18],d=b[19],u=b[20],p=b[21],f=b[22],g=b[23];return b[32]!==n||b[33]!==o||b[34]!==l||b[35]!==c?(y=(0,m.jsxs)(n,{children:[o,l,c]}),b[32]=n,b[33]=o,b[34]=l,b[35]=c,b[36]=y):y=b[36],b[37]!==i||b[38]!==a||b[39]!==s||b[40]!==r||b[41]!==y||b[42]!==d||b[43]!==u||b[44]!==p||b[45]!==f||b[46]!==g?(x=(0,m.jsxs)(i,{open:d,variant:u,width:p,selectionVariant:f,title:g,onCancel:a,onSubmit:s,children:[r,y]}),b[37]=i,b[38]=a,b[39]=s,b[40]=r,b[41]=y,b[42]=d,b[43]=u,b[44]=p,b[45]=f,b[46]=g,b[47]=x):x=b[47],x}function dp(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let df=[404,403];async function dg(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(df.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,du.C)(n,e):null}).filter(e=>!!e)}try{dm.displayName||(dm.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(a=LoopExecutionsSelectPanel).displayName||(a.displayName="LoopExecutionsSelectPanel")}catch{}try{dh.displayName||(dh.displayName="LoopExecutionsSelectPanelInner")}catch{}var dy=n(12357),dx=n(73077),dv=n(96459);let db={previewContainer:"LoopExecutionPreview-module__previewContainer--RqSzv",buttonContainer:"LoopExecutionPreview-module__buttonContainer--i4KdB",contentContainer:"LoopExecutionPreview-module__contentContainer--k2ZO7"};try{(s=LoopExecutionPreview).displayName||(s.displayName="LoopExecutionPreview")}catch{}let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(tx.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:dm,PanelComponent:(e=this.client,function(t){return(0,m.jsx)(dh,{...t,client:e})})}}}get previewComponents(){if(tx.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,dv.Z)(),i=(0,H.b)();if("loop-execution"!==t.type)return null;let a=(0,n6.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,m.jsx)(c5.Q,{previewUrl:e,availableModels:[],sendChatMessage:()=>{},children:(0,m.jsxs)("div",{className:db.previewContainer,children:[(0,m.jsx)("div",{className:db.buttonContainer,children:(0,m.jsx)(dx.z,{href:a,leadingVisual:ef.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,m.jsx)("div",{className:db.contentContainer,children:(0,m.jsx)(dy.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:l5.lh}}constructor(e,t,n,i,a,s){(0,f._)(this,"id",l5.S$),(0,f._)(this,"displayName",l5.Os),(0,f._)(this,"service",void 0),(0,f._)(this,"client",void 0),(0,f._)(this,"previewUrl",void 0),(0,f._)(this,"markdownExtensions",[co]),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:"loops-list",Component:c6,routes:[l5.qe]},{id:"loop-detail",Component:cH,routes:[l5.bW]}]),(0,f._)(this,"navigationItems",[{id:l5.S$,displayName:"Loops",href:l5.QK,icon:di.LP}]);let r=new l4.J(i);this.client=new LoopsClient(n,r),this.service=new cl.J(this.client,new GraphQLClient(t,r),new ChatCompletionsClient(e,r,s)),this.previewUrl=a}};var d_=n(94195),dj=n(51625);let SparkPlugin=class SparkPlugin{constructor(){(0,f._)(this,"id",dj.eu),(0,f._)(this,"displayName",dj._x),(0,f._)(this,"navigationItems",[{id:dj.eu,displayName:"Spark",href:dj.cP,icon:ef.SparkleIcon,label:(0,v.createElement)(eG.A,{variant:"success"},"Preview"),external:!0}])}};var dC=n(78328);let dw={container:"ImmersiveDisabled-module__container--MY4uP",content:"ImmersiveDisabled-module__content--ZhI_r",footer:"ImmersiveDisabled-module__footer--PVto2",bannerContainer:"ImmersiveDisabled-module__bannerContainer--QHoXa"};function dN(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:dw.content,children:(0,m.jsx)(dC.A,{})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:dw.container,children:[e,(0,m.jsx)("div",{className:dw.footer,children:(0,m.jsx)("div",{className:dw.bannerContainer,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,m.jsx)(dx.z,{as:"a",href:"https://github.com/settings/copilot",onClick:dS,children:"Settings"})})})})]}),n[1]=t):t=n[1],t}function dS(){return(0,tv.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{dN.displayName||(dN.displayName="ImmersiveDisabled")}catch{}var dI=n(27359),dk=n(38627),dT=n(23657),dL=n(84646),dE=n(79184),dR=n(8939),dA=n(14521),dD=n(79064),dP=n(17485);function dO(){let e,t=(0,h.c)(2),n=(0,Z.zy)().pathname;return t[0]!==n?(e=n.includes("/share/"),t[0]=n,t[1]=e):e=t[1],e}function dM(){let{threadID:e}=(0,Z.g)();return e??null}function dF(e,t){let n,i,a=(0,h.c)(17),s=(0,$.Pk)(),{currentReferences:r,context:o}=s,l=(0,H.b)(),{reloadQuota:c}=(0,dE.xR)();a[0]!==s?(n=(0,n$.W)(s),a[0]=s,a[1]=n):n=a[1];let d=n,{updateItem:u}=(0,eQ.xx)(),m=dO(),p=dM(),{activeCopilotSpaceId:f}=(0,dP.C)();return a[2]!==o||a[3]!==r||a[4]!==e||a[5]!==f||a[6]!==m||a[7]!==l||a[8]!==t||a[9]!==c||a[10]!==s.customInstructions||a[11]!==s.model||a[12]!==s.skillOptions||a[13]!==d||a[14]!==p||a[15]!==u?(i=async(n,i)=>{if(c("handle_message_submit"),""===n.trim())return;for(let e of r){let n=(0,t$.oR)({ref:e,messageIndex:t});null!=n&&u({...n,isUserEdited:!1})}let a={thread:d,content:n,references:[...r,...i||[]],topic:e.current,context:o,customInstructions:s.customInstructions,model:s.model,customCopilotId:f,skillOptions:s.skillOptions};if(m){let e=await l.continueSharedThread(p);if(e){let{thread:t,messages:n}=e,i=n.at(-1)?.id;await l.sendChatMessage({...a,thread:t,parentMessageId:i})}}else await l.sendChatMessage(a)},a[2]=o,a[3]=r,a[4]=e,a[5]=f,a[6]=m,a[7]=l,a[8]=t,a[9]=c,a[10]=s.customInstructions,a[11]=s.model,a[12]=s.skillOptions,a[13]=d,a[14]=p,a[15]=u,a[16]=i):i=a[16],i}var dB=n(84802);function d$(){let e=(0,$.A3)("messagesLoading")?.missingOrgIds,t=(0,$.A3)("ssoOrganizations"),n=e?.map(e=>{let n=t?.find(t=>t.id===String(e));return n?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:n||[]}}let dU={chatInputContainer:"Layout-module__chatInputContainer--ty1RG"};var dV=n(97315);let dH={notificationsSection:"NotificationsSection-module__notificationsSection--K0_2c",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--G0_MH",banner:"NotificationsSection-module__banner--a4C8F"},dW={container:"FreeChatExceededBanner-module__container--iiSMU"};function dq(){let e,t,n=(0,h.c)(3),{resetDate:i}=(0,dE.xR)(),a=`You have reached your free plan limit. Limit resets on ${i}.`;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(dx.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:dz,children:"Upgrade"}),n[0]=e):e=n[0];let s=e;return n[1]!==a?(t=(0,m.jsx)("div",{className:dW.container,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Limit reached",description:a,hideTitle:!0,primaryAction:s})}),n[1]=a,n[2]=t):t=n[2],t}function dz(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{dq.displayName||(dq.displayName="FreeChatExceededBanner")}catch{}let dG={container:"QuotaExceededBanner-module__container--ETlPC"};function dK(){return dD.Jt.getQuotaExceededBannerFlag()??!1}function dQ(e){let t,n,i=(0,h.c)(9),{onDismiss:a}=e,{plan:s,canUpgradePlan:r,resetDate:o}=(0,dE.xR)(),l=null,c=null;if(s===tg.UH.IndividualFree){let e;l=`You have used all requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(dx.z,{as:"a",href:n6.Zs,onClick:dX,children:"Upgrade"}),i[0]=e):e=i[0],c=e}else if(s===tg.UH.IndividualPro||s===tg.UH.IndividualProPlus)if(r){let e;l=`You have used all premium requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(dx.z,{as:"a",href:n6.Zs,onClick:dJ,children:"Upgrade"}),i[1]=e):e=i[1],c=e}else{let e;l=`You have used all premium requests available this month. Enable additional requests to get more. Limit resets on ${o}.`,i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(dx.z,{as:"a",href:n6.pF,onClick:dY,children:"Enable additional requests"}),i[2]=e):e=i[2],c=e}else(s===tg.UH.Business||s===tg.UH.Enterprise)&&(l=`You have reached your monthly limit for premium requests. Ask your admin to increase your limit. Limit resets on ${o}.`);return i[3]!==a?(t=()=>{a(),(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},i[3]=a,i[4]=t):t=i[4],i[5]!==l||i[6]!==c||i[7]!==t?(n=(0,m.jsx)("div",{className:dG.container,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Limit reached",description:l,hideTitle:!0,primaryAction:c,onDismiss:t})}),i[5]=l,i[6]=c,i[7]=t,i[8]=n):n=i[8],n}function dY(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function dJ(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function dX(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{dQ.displayName||(dQ.displayName="QuotaExceededBanner")}catch{}let dZ=tx.W.premiumRequestQuotasEnabled?n6.mF:10;function d0(){return dD.Jt.getMeterBannerFlag()??!1}function d1(e){let t,n,i,a,s,r=(0,h.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:c,canUpgradePlan:d,canPurchaseAdditionalQuota:u,premiumInteractionsQuotaExceeded:p,resetDate:f}=(0,dE.xR)(),g=c?`You have used ${100-dZ}% of your free requests this month.`:p?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-dZ}% of your premium responses this month. ${d?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;r[0]!==u||r[1]!==d||r[2]!==p?(t=d&&!p?(0,m.jsx)(dx.z,{as:"a",href:n6.Zs,onClick:d5,children:"Upgrade"}):u&&!p?(0,m.jsx)(dx.z,{as:"a",href:n6.pF,onClick:d4,children:"Enable additional requests"}):u&&(0,m.jsx)(dx.z,{as:"a",href:n6.MB,onClick:d3,children:"Manage billing"}),r[0]=u,r[1]=d,r[2]=p,r[3]=t):t=r[3];let y=t;r[4]!==u||r[5]!==d||r[6]!==p?(n=d&&u&&!p?(0,m.jsx)(Q.A,{as:"a",href:n6.Zs,onClick:d2,children:"Enable additional requests"}):null,r[4]=u,r[5]=d,r[6]=p,r[7]=n):n=r[7];let x=n;return r[8]!==o?(i=()=>{o(),(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},r[8]=o,r[9]=i):i=r[9],r[10]!==g||r[11]!==y||r[12]!==x||r[13]!==i?(a=(0,m.jsx)(q.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:x,onDismiss:i}),r[10]=g,r[11]=y,r[12]=x,r[13]=i,r[14]=a):a=r[14],r[15]!==l||r[16]!==a?(s=(0,m.jsx)("div",{className:l,children:a}),r[15]=l,r[16]=a,r[17]=s):s=r[17],s}function d2(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function d3(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function d4(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function d5(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{d1.displayName||(d1.displayName="QuotaMeterBanner")}catch{}function d6(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function d7(e){let t,n=(0,h.c)(3),{customCopilot:i}=e,a=(0,Z.Zp)();return n[0]!==i||n[1]!==a?(t=i&&(0,m.jsx)(q.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,m.jsx)(dx.z,{as:"a",href:(0,dT.Cb)(i),onClick:e=>{e.preventDefault(),a((0,dT.Cb)(i))},children:"Edit"})}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function d8(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function d9(e){let t,n,i=(0,h.c)(6),{errorMessages:a,onDismiss:s,className:r}=e,o=void 0===r?"":r;if(0===a.length)return null;if(i[0]!==a){let e=Array.from(new Set(a));t=1===e.length?e[0]:(0,m.jsxs)(m.Fragment,{children:["Errors during attachment upload:",(0,m.jsx)("ul",{style:{paddingLeft:"1.2em"},children:e.map(ue)})]}),i[0]=a,i[1]=t}else t=i[1];let l=t;return i[2]!==o||i[3]!==l||i[4]!==s?(n=(0,m.jsx)(q.l,{variant:"critical",description:l,title:"Error during attachment upload",hideTitle:!0,className:o,onDismiss:s}),i[2]=o,i[3]=l,i[4]=s,i[5]=n):n=i[5],n}function ue(e){return(0,m.jsx)("li",{children:e},e)}try{d6.displayName||(d6.displayName="SpaceDeletedBanner")}catch{}try{d7.displayName||(d7.displayName="SpaceSizeExceededBanner")}catch{}try{d8.displayName||(d8.displayName="ReferenceSizeExceededBanner")}catch{}try{(r=function(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(r.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{d9.displayName||(d9.displayName="UploadErrorBanner")}catch{}let ut={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function un(e,t){let n,i,a=(0,h.c)(9),{isPending:s,data:r,error:o}=(0,dL.Ao)(e),l=o instanceof dL.i9,c=o instanceof dL.OW;if(o&&!l&&!c)throw o;let d=s||l||c||!r?void 0:r;a[0]!==d||a[1]!==e||a[2]!==s||a[3]!==t?(n=function(e,t,n,i){if(e&&!i)return ut.spaceHomepage;if(n)return null;let a=!!t;return e&&!a?ut.customCopilotDisabled:(0,dT.Hh)(t)?ut.customCopilotSizeExceeded:null}(e,d,s,t),a[0]=d,a[1]=e,a[2]=s,a[3]=t,a[4]=n):n=a[4];let u=n;return a[5]!==d||a[6]!==s||a[7]!==u?(i={variant:u,customCopilot:d,isLoading:s},a[5]=d,a[6]=s,a[7]=u,a[8]=i):i=a[8],i}try{(o=function(e){let t=(0,h.c)(4),{variant:n,customCopilot:i}=e;switch(n){case ut.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(d6,{}),t[0]=e):e=t[0],e}case ut.customCopilotSizeExceeded:{let e;return t[1]!==i?(e=(0,m.jsx)(d7,{customCopilot:i}),t[1]=i,t[2]=e):e=t[2],e}case ut.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}).displayName||(o.displayName="SpaceConversationBanner")}catch{}function ui(){let e,t,n=(0,h.c)(16),{ambientError:i,customCopilots:a,selectedThreadID:s}=(0,$.Pk)(),r=(0,dA.G)();n[0]!==r||n[1]!==a?(e=(0,dT.JB)(a,r),n[0]=r,n[1]=a,n[2]=e):e=n[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:c}=(0,dE.xR)(),{variant:d,customCopilot:u}=un(r,s),p=(!d||o)&&!(c&&l),f=function(){let e,t,n,i,a=(0,h.c)(10),{isLicensedLimited:s,chatQuotaRemaining:r,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,dE.xR)(),[d,u]=(0,v.useState)(d0);a[0]!==r||a[1]!==s||a[2]!==c||a[3]!==o||a[4]!==l?(e=()=>{if((s||tx.W.premiumRequestQuotasEnabled)&&void 0!==r){let e=dD.Jt.getMeterBannerFlag();r>0&&r<=dZ||!s&&o>0&&o<=dZ||!s&&l&&c?null===e?(dD.Jt.setMeterBannerFlag(!0),u(!0)):u(e):(dD.Jt.removeMeterBannerFlag(),u(!1))}},t=[s,r,o,c,l],a[0]=r,a[1]=s,a[2]=c,a[3]=o,a[4]=l,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,v.useEffect)(e,t),a[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{dD.Jt.setMeterBannerFlag(!1),u(!1)},a[7]=n):n=a[7];let m=n,p=d&&void 0!==r&&(s||tx.W.premiumRequestQuotasEnabled);return a[8]!==p?(i={visible:p,onDismiss:m},a[8]=p,a[9]=i):i=a[9],i}(),g=function(){let e,t,n,i,a=(0,h.c)(12),{isLicensedLimited:s,chatQuotaRemaining:r,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,dE.xR)(),[d,u]=(0,v.useState)(dK);a[0]!==r||a[1]!==c||a[2]!==l?(e=()=>{if(tx.W.premiumRequestQuotasEnabled&&void 0!==r){let e=dD.Jt.getQuotaExceededBannerFlag();tx.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(dD.Jt.setQuotaExceededBannerFlag(!0),u(!0)):u(e):(dD.Jt.removeQuotaExceededBannerFlag(),u(!1))}},a[0]=r,a[1]=c,a[2]=l,a[3]=e):e=a[3],a[4]!==r||a[5]!==c||a[6]!==o||a[7]!==l?(t=[r,o,c,l],a[4]=r,a[5]=c,a[6]=o,a[7]=l,a[8]=t):t=a[8],(0,v.useEffect)(e,t),a[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{dD.Jt.setQuotaExceededBannerFlag(!1),u(!1)},a[9]=n):n=a[9];let m=n,p=d&&!s&&void 0!==r&&tx.W.premiumRequestQuotasEnabled;return a[10]!==p?(i={visible:p,onDismiss:m},a[10]=p,a[11]=i):i=a[11],i}(),y=d===ut.customCopilotDisabled,x=d===ut.customCopilotSizeExceeded,b=p&&i,_=p&&g.visible,j=p&&f.visible,C=!p,w=y||x,N=y||x||b||_||j||C;return n[3]!==i||n[4]!==u||n[5]!==g||n[6]!==f||n[7]!==b||n[8]!==C||n[9]!==_||n[10]!==j||n[11]!==N||n[12]!==y||n[13]!==w||n[14]!==x?(t=N&&(0,m.jsxs)("section",{"aria-label":"Notifications",className:dH.notificationsSection,children:[w&&(0,m.jsxs)("div",{className:dH.spaceBannerContainer,children:[y&&(0,m.jsx)(d6,{}),x&&(0,m.jsx)(d7,{customCopilot:u})]}),b&&(0,m.jsx)(dV.P,{ambientError:i,useLargerBorderRadius:!0}),!w&&(0,m.jsxs)(m.Fragment,{children:[_&&(0,m.jsx)(dQ,{onDismiss:g.onDismiss}),j&&(0,m.jsx)(d1,{className:dH.banner,onDismiss:f.onDismiss}),C&&(0,m.jsx)(dq,{})]})]}),n[3]=i,n[4]=u,n[5]=g,n[6]=f,n[7]=b,n[8]=C,n[9]=_,n[10]=j,n[11]=N,n[12]=y,n[13]=w,n[14]=x,n[15]=t):t=n[15],t}try{ui.displayName||(ui.displayName="NotificationsSection")}catch{}function ua(e){let t,n,i,a,s,r=(0,h.c)(20),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:c}=e,d=(0,$.Pk)(),{chatQuotaExceeded:u,isLicensedLimited:p}=(0,dE.xR)(),{needsSsoAuthentication:f}=d$(),g=(0,dA.G)(),y=f&&g,x=(0,dB.G)(),v=function(){let e,t=(0,h.c)(2),{figmaAuthUrl:n}=(0,F.X)();if(n){if(t[0]!==n){let i=new URL(n,location.origin);i.searchParams.set("return_url",location.pathname+location.search),e=i.toString(),t[0]=n,t[1]=e}else e=t[1];return e}}();r[0]!==c?(t={messageIndex:c},r[0]=c,r[1]=t):t=r[1];let b=n8(t),{versionedItems:_,items:j}=(0,eQ.xx)();if(r[2]!==j){for(let[,e]of(n=new Set,j))"file"===e.type&&n.add(e.name);r[2]=j,r[3]=n}else n=r[3];let C=n,w=!(p&&u)&&!y,N=!g&&!d.selectedThreadID;return r[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(ui,{}),r[4]=i):i=r[4],r[5]!==w||r[6]!==C||r[7]!==v||r[8]!==l||r[9]!==x||r[10]!==c||r[11]!==b||r[12]!==g||r[13]!==N||r[14]!==d||r[15]!==o||r[16]!==_?(a=w&&(0,m.jsx)(lN.V,{modes:[{name:"Chat",supportsMCP:!g,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,m.jsx)(ef.CommentIcon,{}),placeholder:d.usePlanningIntent&&!d.selectedThreadID?"What would you like to create?":"How can I help you?"}],onNewThreadSelected:x,textAreaRef:o,onSubmit:l,isStreaming:!!d.streamingMessage,size:"large",showPlanningToggle:N,onSelectReference:b,getReferenceVersion:e=>(0,t$.wt)(e,c,_),existingFileNames:C,figmaAuthUrl:v}),r[5]=w,r[6]=C,r[7]=v,r[8]=l,r[9]=x,r[10]=c,r[11]=b,r[12]=g,r[13]=N,r[14]=d,r[15]=o,r[16]=_,r[17]=a):a=r[17],r[18]!==a?(s=(0,m.jsxs)("div",{className:dU.chatInputContainer,children:[i,a]}),r[18]=a,r[19]=s):s=r[19],s}try{ua.displayName||(ua.displayName="ChatInputContainer")}catch{}let us={root:"ConversationView-module__root--k4AIo",container:"ConversationView-module__container--XaY36",footer:"ConversationView-module__footer--xr6HB"};var ur=n(63262),uo=n(87419),ul=n(88392),uc=n(88431),ud=n(59524),uu=n(32744),um=n(82178),uh=n(94517),up=n(34363),uf=n(11633),ug=n(31958),uy=n(42983),ux=n(95896),uv=n(82151),ub=n(45244),u_=n(52940),uj=n(16946),uC=n(72206),uw=n(31223),uN=n(55009);let uS={imageAttachment:"ChatImageAttachment-module__imageAttachment--Kt80m"},uI=e=>{let t,n,i,a,s=(0,h.c)(18),{messageId:r,src:o,alt:l,name:c,mode:d,squareView:u}=e,{openPreviewPane:p,openItem:f,updateItem:g}=(0,eQ.xx)(),y=`image:${o}`;s[0]!==y||s[1]!==f||s[2]!==p?(t=e=>{e.metaKey||e.ctrlKey||((0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),p(),e.preventDefault())},s[0]=y,s[1]=f,s[2]=p,s[3]=t):t=s[3];let x=t;return s[4]!==l||s[5]!==y||s[6]!==r||s[7]!==c||s[8]!==o||s[9]!==g?(n=()=>{g({altText:l,id:y,messageId:r,name:c,type:"image",url:o})},i=[y,l,r,c,o,g],s[4]=l,s[5]=y,s[6]=r,s[7]=c,s[8]=o,s[9]=g,s[10]=n,s[11]=i):(n=s[10],i=s[11]),(0,v.useEffect)(n,i),s[12]!==l||s[13]!==d||s[14]!==x||s[15]!==u||s[16]!==o?(a=(0,m.jsx)("div",{className:uS.imageAttachment,children:(0,m.jsx)(uN.o,{src:o,alt:l,onClick:x,mode:d,useOverlay:!0,squareView:u})}),s[12]=l,s[13]=d,s[14]=x,s[15]=u,s[16]=o,s[17]=a):a=s[17],a},uk=(0,v.memo)(uI);try{uI.displayName||(uI.displayName="ChatImageAttachmentUnmemoized")}catch{}try{uk.displayName||(uk.displayName="ChatImageAttachment")}catch{}let uT={chatMessage:"ChatMessage-module__chatMessage--mrG0f",user:"ChatMessage-module__user--D7H_T",editing:"ChatMessage-module__editing--yOYer",content:"ChatMessage-module__content--sWQll",imageGrid:"ChatMessage-module__imageGrid--yEdjI",imageRow:"ChatMessage-module__imageRow--NNiyM",references:"ChatMessage-module__references--Pi5OH",messageArea:"ChatMessage-module__messageArea--gxJTG",userMessage:"ChatMessage-module__userMessage--K0oH6",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--fjOXe",actions:"ChatMessage-module__actions--CS2_w",ai:"ChatMessage-module__ai--l6YpD",latest:"ChatMessage-module__latest--AGxtS",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--gN7Zq",avatar:"ChatMessage-module__avatar--hKTWx",sharedThreadActions:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w",skillExecutionText:"ChatMessage-module__skillExecutionText--Jbpi1",errorFallback:"ChatMessage-module__errorFallback--h1kRS"},uL={container:"ChatPagingComponent-module__container--HQpDa",disabledButton:"ChatPagingComponent-module__disabledButton--qwjg3",pageIndicator:"ChatPagingComponent-module__pageIndicator--hEqlR"};function uE(e){let t,n,i,a,s,r,o=(0,h.c)(23),{currentPage:l,totalPages:c,onPrev:d,onNext:u,isUserMessage:p}=e,f=(0,$.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(c<1)throw Error("totalPages must be greater than or equal to 1");if(l>c)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===c||f,x=g?uL.disabledButton:"",v=y?uL.disabledButton:"";o[0]!==l||o[1]!==p||o[2]!==d||o[3]!==g?(t=()=>{if(g)return;let e=p?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,tv.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),d(l-1)},o[0]=l,o[1]=p,o[2]=d,o[3]=g,o[4]=t):t=o[4];let b=t;o[5]!==l||o[6]!==p||o[7]!==y||o[8]!==u?(n=()=>{if(y)return;let e=p?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,tv.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),u(l+1)},o[5]=l,o[6]=p,o[7]=y,o[8]=u,o[9]=n):n=o[9];let _=n;return o[10]!==b||o[11]!==x?(i=(0,m.jsx)(tt.K,{variant:"invisible","aria-label":"Previous response",onClick:b,icon:ef.ChevronLeftIcon,className:x}),o[10]=b,o[11]=x,o[12]=i):i=o[12],o[13]!==l||o[14]!==c?(a=(0,m.jsxs)("span",{className:uL.pageIndicator,children:[l,"/",c]}),o[13]=l,o[14]=c,o[15]=a):a=o[15],o[16]!==_||o[17]!==v?(s=(0,m.jsx)(tt.K,{variant:"invisible","aria-label":"Next response",onClick:_,icon:ef.ChevronRightIcon,className:v}),o[16]=_,o[17]=v,o[18]=s):s=o[18],o[19]!==i||o[20]!==a||o[21]!==s?(r=(0,m.jsxs)("div",{className:uL.container,"data-testid":"chat-paging-component",children:[i,a,s]}),o[19]=i,o[20]=a,o[21]=s,o[22]=r):r=o[22],r}try{uE.displayName||(uE.displayName="ChatPagingComponent")}catch{}let uR={container:"ClientConfirmations-module__container--rZT37",text:"ClientConfirmations-module__text--KBSlX"};function uA(e){let t,n,i,a=(0,h.c)(5),{authorName:s,clientConfirmations:r}=e,o=r?.[0],l=o?.state;return s=o?.userLogin||s,a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)("my-1",uR.container),a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(ef.CheckIcon,{}),a[1]=n):n=a[1],a[2]!==s||a[3]!==l?(i=(0,m.jsx)("div",{className:t,children:(0,m.jsxs)("span",{className:uR.text,children:[n," ",s," ",l," the action"]})}),a[2]=s,a[3]=l,a[4]=i):i=a[4],i}try{uA.displayName||(uA.displayName="ClientConfirmations")}catch{}let uD={container:"UserMessageEdit-module__container--wVL0b",input:"UserMessageEdit-module__input--cgkv0",inputContainer:"UserMessageEdit-module__inputContainer--iXdUm",actions:"UserMessageEdit-module__actions--GxMb3"},uP=e=>{let t,n,i,a,s,r,o,l,c,d,u,p,f,g=(0,h.c)(25),{messageContent:y,onSubmit:x,onCancel:b}=e,_=(0,$.A3)("isWaitingOnCopilot"),[j,C]=(0,v.useState)(y),w=(0,v.useRef)(null),N=(0,v.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{w.current&&(w.current.style.height="auto",w.current.style.height=`${w.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==j?(n=[j],g[1]=j,g[2]=n):n=g[2],(0,v.useEffect)(t,n),g[3]!==j||g[4]!==y||g[5]!==b||g[6]!==x?(a=()=>{if(document.activeElement===N.current)return void i();(0,tv.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),x(j)},i=()=>{b(),C(y),(0,tv.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[3]=j,g[4]=y,g[5]=b,g[6]=x,g[7]=i,g[8]=a):(i=g[7],a=g[8]);let S=_?void 0:a;return g[9]!==i||g[10]!==S?(s={"copilot-chat:send-message":S,"github:cancel":i},g[9]=i,g[10]=S,g[11]=s):s=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,tP.G)("user-message-edit-box"),g[12]=r):r=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>C(e.target.value),g[13]=o):o=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{w.current&&(w.current.style.height="auto",w.current.style.height=`${w.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==j?(c=(0,m.jsx)("div",{className:uD.inputContainer,children:(0,m.jsx)("textarea",{ref:w,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:j,onChange:o,className:uD.input,autoFocus:!0,onInput:l,onFocus:uO})}),g[15]=j,g[16]=c):c=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tq.cQ,{commandId:"github:cancel",ref:N,children:"Cancel"}),g[17]=d):d=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,tP.G)("user-message-edit-submit"),g[18]=u):u=g[18],g[19]!==_?(p=(0,m.jsxs)("div",{className:uD.actions,children:[d,(0,m.jsx)(tq.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...u,disabled:_,children:"Send"})]}),g[19]=_,g[20]=p):p=g[20],g[21]!==p||g[22]!==s||g[23]!==c?(f=(0,m.jsxs)(tq.tL,{commands:s,className:uD.container,...r,children:[c,p]}),g[21]=p,g[22]=s,g[23]=c,g[24]=f):f=g[24],f};try{uP.displayName||(uP.displayName="UserMessageEdit")}catch{}function uO(e){return e.target.setSelectionRange(0,e.target.value.length)}let uM=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLatestUserMessage:i,isFirstReply:a,isStreaming:s,parentMessage:r,messageIndex:o,autoOpenPreviewPane:l,...c})=>{let{message:d}=(0,ir.V)(),u=(0,v.useMemo)(()=>(0,n6.H2)(d.references??[]),[d.references]),h=(0,H.b)(),p=(0,$.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),f=(0,uC.tD)(),{items:g,versionedItems:y,openItem:b,removeItems:_,getOpenItems:j,openItemsBeforeSubthreadChange:C,setOpenItemsBeforeSubthreadChange:w,enableLoadingState:N,disableLoadingState:S}=(0,eQ.xx)(),I=n8({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),k=(0,v.useCallback)(()=>{let e=f(),t=[],n=d;for(;null!=n;)t.push(n.id),n=void 0!==n.selectedChildIndex?e.messages[n.selectedChildIndex]:void 0;let i=new Map;for(let[e,t]of g){let n=i.get(t.messageId)||[];n.push(e),i.set(t.messageId,n)}let a=[];for(let e of t){let t=i.get(e);if(t)for(let e of t)a.push(e)}for(let[e,t]of g)t.messageId===tg.Wp&&a.push(e);let s=j();w([...s]),a.some(e=>s.includes(e))&&N(),_(a)},[g,N,f,d,j,_,w]),{author:T,handleConfirmationAction:L,handleRetryErrorMessage:E,handleRetryCopilotResponse:R,handleEditUserMessage:A,hasClientConfirmations:D,isAgentError:P,isAI:O,isCopilot:M,isError:F,isInterrupted:B,isUser:U,myRef:V,rendererConfig:W,renderFeedback:q,shouldShowMessageActions:z,skillExecutionToUseForRespondingText:G,showRetryButton:K}=(0,u_.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:s,removeOutdatedContentPreviewItems:k}),Q=dO(),Y=p.editingMessage===d.id,J=s&&!F&&!d.confirmations&&!z&&n&&(!e||O),X=(r?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,Z=r?.childMessageIndexes?.length||1,ee=Z>=uj.L9,et=h.maxMessagesReached(),en=Z>1,ei=(0,v.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),ea=(0,v.useMemo)(()=>!!ei?.length,[ei]),es=z&&Q&&(M||en),er=(0,v.useRef)(null),eo=(0,uw.M)(e=>{let t=y.get((0,t$.oy)(e))?.at(-1);t&&b(t,!1)});(0,v.useEffect)(()=>{if(d.error?.type!=="publicCode")return;let e=[];for(let[t,n]of g)(n.messageId===d.id||n.messageId===er.current)&&e.push(t);e.length>0&&_(e)},[d.error?.type,d.id,g,_]),(0,v.useEffect)(()=>{if(er.current!==d.id&&n&&C.length>0){let e=setTimeout(()=>{for(let e of C)eo.current(e);S(),w([])});return()=>clearTimeout(e)}er.current=d.id},[S,d.id,C,n,w,eo]);let el=(0,v.useCallback)(()=>{let{messages:e}=f(),t=X-1;h.setSelectedMessage(e[r.childMessageIndexes[t-1]]),k()},[X,h,r,k,f]),ec=(0,v.useCallback)(()=>{let{messages:e}=f(),t=X-1;h.setSelectedMessage(e[r.childMessageIndexes[t+1]]),k()},[X,h,r,k,f]),ed=(0,dB.G)(),{model:eu,availableModels:em}=(0,$.bP)("model","availableModels"),eh=eu;d.model&&(eh=(em??[eh]).find(e=>e.id===d.model)||eh);let ep=()=>h.startEditingMessage(d.id),eg=(0,dA.G)(),ey=!!(0,dT.JB)(p.customCopilots,eg),{selectedThreadID:ex}=(0,$.bP)("selectedThreadID"),{variant:ev}=un(eg,ex),eb=ev===ut.customCopilotSizeExceeded,e_=ee||et||!!eg&&!ey||eb,ej=M&&s&&n&&!d.content,eC=(0,v.useCallback)(e=>{h.setWrapCodeLines(e)},[h]),ew=s?aS:aI;return(0,m.jsxs)("div",{className:(0,x.$)("message-container",uT.chatMessage,U&&uT.user,O&&uT.ai,Y?uT.editing:"",n&&uT.latest),ref:V,...(0,tP.G)(`message-${F?"error":s?"streaming":d.id}`),children:[O?(0,m.jsx)(um.W,{isLoading:s&&n,isLoadingSkills:(d.skillExecutions??[]).length>0&&s&&""===d.content&&n,isError:F&&d.error?.type!=="agentUnauthorized",className:uT.avatar,mode:p.mode,isFirstMessage:a,message:d.content||"",createdAt:d.createdAt}):null,U&&ea&&(0,m.jsx)("div",{className:ei?.length===4?uT.imageGrid:uT.imageRow,children:ei?.map(e=>(0,m.jsx)(uk,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:p.mode,squareView:ei?.length>=2},e?.url||""))}),U&&d.references&&d.references.length>0&&(0,m.jsx)(n9,{className:uT.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!Y&&(0,m.jsx)("div",{className:uT.content,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,x.$)("js-snippet-clipboard-copy-unpositioned",uT.messageArea),children:[D?(0,m.jsx)(uA,{authorName:T.name,clientConfirmations:d.clientConfirmations??[]}):U?(0,m.jsx)(uv.R,{accessibleHeader:(0,n6.hV)("You",d.content??""),className:uT.userMessage}):(0,m.jsxs)(m.Fragment,{children:[ej&&(0,m.jsx)(ub.b,{className:(0,x.$)(uT.skillExecutionText,"mb-2"),children:`${(0,uf.WA)(G)}...`}),d.references&&d.references.length>0&&d.content&&(0,m.jsx)(n7.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{("draft-issue"===e.type||"draft-update-issue"===e.type)&&I(e,t)}}),"assistant"===d.role&&(u.length?(0,m.jsx)(ud.Q,{mcpToolResults:u}):null),!D&&d.content&&(0,m.jsx)(uF,{children:(0,m.jsx)(ew,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,n6.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:p.wrapCodeLines,onWrapCodeLinesChange:eC,...W})}),F?(0,m.jsx)(uh.K,{manager:h}):null,P&&d.agentErrors&&(0,m.jsx)(uh.h,{errors:d.agentErrors}),B?(0,m.jsx)(ug.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,O&&!ej&&(0,n6.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,m.jsx)(uu.m,{confirmation:e,handleConfirmation:L,isLatestMessage:n},t))]}),en&&!n&&(0,m.jsxs)("div",{className:uT.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[X,"/",Z]})]}),J&&(0,m.jsx)("div",{className:uT.actionsPlaceholder}),!z&&K&&(0,m.jsx)(uy.$,{handleRetryMessage:E,disabled:e_}),z&&!Q&&(0,m.jsxs)(ux.M,{"aria-label":"Message tools",className:uT.actions,"data-testid":"nonshared-toolbar",children:[U&&(i?(0,m.jsx)(tq.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ep,icon:ef.PencilIcon,disabled:e_,...(0,tP.G)("edit-message-button")}):(0,m.jsx)(tt.K,{variant:"invisible","aria-label":"Edit message",onClick:ep,icon:ef.PencilIcon,disabled:e_,...(0,tP.G)("edit-message-button")})),M&&(0,m.jsxs)(m.Fragment,{children:[q&&(0,m.jsx)(up.G,{iconSize:"medium"}),!!d.content&&!s&&(0,m.jsx)(rd.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,tv.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),K&&F?(0,m.jsx)(uy.$,{handleRetryMessage:E,disabled:e_}):O&&!F&&!d.clientSide&&(0,m.jsx)(uy.$,{handleRetryMessage:R,disabled:e_,showModelPicker:!!em&&em.length>1,model:eh,navigateToNewThread:ed}),en&&(0,m.jsx)(uE,{currentPage:X,totalPages:Z,onPrev:el,onNext:ec,isUserMessage:U})]}),es&&(0,m.jsxs)(ux.M,{"aria-label":"Message tools",className:uT.sharedThreadActions,"data-testid":"shared-toolbar",children:[M&&(0,m.jsx)(m.Fragment,{children:!!d.content&&!s&&(0,m.jsx)(rd.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,tv.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),en&&(0,m.jsx)(uE,{currentPage:X,totalPages:Z,onPrev:el,onNext:ec,isUserMessage:U})]})]})}),Y&&(0,m.jsx)(uP,{messageContent:d.content||"",onSubmit:A,onCancel:()=>h.cancelEditingMessage()})]})},uF=e=>{let t,n,i=(0,h.c)(3),{children:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(q.l,{className:uT.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),i[0]=t):t=i[0],i[1]!==a?(n=(0,m.jsx)(tj.t,{fallback:t,children:a}),i[1]=a,i[2]=n):n=i[2],n},uB=e=>{let t,n,i,a,s,r,o,l,c=(0,h.c)(23);c[0]!==e?({message:i,messageIndex:a,isSharedMessage:n,isLatestMessage:t,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=a,c[5]=s):(t=c[1],n=c[2],i=c[3],a=c[4],s=c[5]);let d=dO();return c[6]!==t||c[7]!==n||c[8]!==d||c[9]!==i||c[10]!==a||c[11]!==s?(r=!aL(i)&&(0,m.jsx)(uM,{...s,messageIndex:a,isSharedMessage:n,isLatestMessage:t,isViewingSharedThread:d}),c[6]=t,c[7]=n,c[8]=d,c[9]=i,c[10]=a,c[11]=s,c[12]=r):r=c[12],c[13]!==t||c[14]!==n||c[15]!==d||c[16]!==i||c[17]!==a?(o=(0,m.jsx)(aE,{message:i,messageIndex:a,isViewingSharedThread:d,isSharedMessage:n,isLatestMessage:t}),c[13]=t,c[14]=n,c[15]=d,c[16]=i,c[17]=a,c[18]=o):o=c[18],c[19]!==i||c[20]!==r||c[21]!==o?(l=(0,m.jsxs)(ir.$,{message:i,children:[r,o]}),c[19]=i,c[20]=r,c[21]=o,c[22]=l):l=c[22],l},u$=(0,v.memo)(uB),uU=e=>{let t,n,i=(0,h.c)(7),{message:a}=e,s=(0,$.Pk)();i[0]!==a||i[1]!==s.messages?(t=(0,ny.CX)(s.messages,a),i[0]=a,i[1]=s.messages,i[2]=t):t=i[2];let r=t,o="user"===a.role&&s.messages.findLast(uH)?.id===a.id;return i[3]!==o||i[4]!==r||i[5]!==e?(n=(0,m.jsx)(u$,{...e,parentMessage:r,isLatestUserMessage:o}),i[3]=o,i[4]=r,i[5]=e,i[6]=n):n=i[6],n},uV=e=>{let t,n=(0,h.c)(2);return n[0]!==e?(t=(0,m.jsx)(uF,{children:(0,m.jsx)(uU,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{uM.displayName||(uM.displayName="InnerChatMessage")}catch{}try{uF.displayName||(uF.displayName="MessageErrorBoundary")}catch{}try{uB.displayName||(uB.displayName="ChatMessageUnmemoized")}catch{}try{u$.displayName||(u$.displayName="ChatMessageMemoized")}catch{}try{uU.displayName||(uU.displayName="ChatMessageWrapped")}catch{}try{uV.displayName||(uV.displayName="ChatMessage")}catch{}function uH(e){return"user"===e.role}let uW={ConversationLoader:"ConversationLoader-module__ConversationLoader--kdZTM",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA",assistantAvatarSkeleton:"ConversationLoader-module__assistantAvatarSkeleton--f2f7n"};function uq(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:uW.ConversationLoader__userGroup,children:(0,m.jsx)(lA.O,{variant:"rounded",height:"20px",width:"random"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:uW.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,m.jsxs)("div",{className:uW.ConversationLoader__assistantGroup,children:[(0,m.jsx)(lA.O,{className:(0,x.$)(uW.ConversationLoader__assistantAvatar,uW.assistantAvatarSkeleton),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(uz)]})]}),n[1]=t):t=n[1],t}function uz(e,t){return(0,m.jsx)(lA.O,{variant:"rounded",height:"20px",width:"random"},t)}try{uq.displayName||(uq.displayName="ConversationLoader")}catch{}let uG={container:"ErrorState-module__container--FoMc5",icon:"ErrorState-module__icon--ykhTC",description:"ErrorState-module__description--zsnez",sso:"ErrorState-module__sso--Q4Ig1"};function uK(e){let t,n,i,a,s,r=(0,h.c)(11),{title:o,description:l,ssoOrgs:c}=e,d=c&&c.length>0&&!(0,G.G7)("global_sso_banner");return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(tI.E.Visual,{children:(0,m.jsx)(ef.AlertIcon,{size:"medium",className:uG.icon})}),r[1]=n):n=r[1],r[2]!==o?(i=(0,m.jsx)(tI.E.Heading,{as:"h2",children:o}),r[2]=o,r[3]=i):i=r[3],r[4]!==l||r[5]!==d||r[6]!==c?(a=(void 0!==l||d)&&(0,m.jsxs)("div",{className:uG.description,children:[(0,m.jsx)(tI.E.Description,{children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("div",{className:uG.sso,children:d&&(0,m.jsx)(U.x,{protectedOrgs:c})})]}),r[4]=l,r[5]=d,r[6]=c,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,m.jsxs)("div",{className:uG.container,children:[t,(0,m.jsxs)(tI.E,{border:!1,children:[n,i,a]})]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s}function uQ(e){let t,n,i,a,s,r,o,l=(0,h.c)(9),{mode:c}=e,{helpUrl:d}=(0,F.X)();l[0]!==c?(t=()=>{c&&(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:c,message:"Shared thread no access"})},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,v.useEffect)(t,n),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(tI.E.Visual,{children:(0,m.jsx)(ef.LockIcon,{size:"medium",className:uG.icon})}),s=(0,m.jsx)(tI.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),l[4]=a,l[5]=s):(a=l[4],s=l[5]),l[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(tI.E.Description,{children:(0,m.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),l[6]=r):r=l[6];let u=`${d}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return l[7]!==u?(o=(0,m.jsxs)("div",{className:uG.container,children:[i,(0,m.jsxs)(tI.E,{border:!1,children:[a,s,(0,m.jsxs)("div",{className:uG.description,children:[r,(0,m.jsx)(Q.A,{inline:!0,href:u,children:"Learn more"})]})]})]}),l[7]=u,l[8]=o):o=l[8],o}try{uK.displayName||(uK.displayName="ErrorState")}catch{}try{uQ.displayName||(uQ.displayName="SharedThreadForbidden")}catch{}let uY={container:"ImmersiveChat-module__container--h_Pmt",emptyContent:"ImmersiveChat-module__emptyContent--a_vXm",messageContent:"ImmersiveChat-module__messageContent--JE3f_",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--FbWSF",hidden:"ImmersiveChat-module__hidden--b_DNj"},uJ=e=>{let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(42),{inputRef:f,isMobile:g}=e,{scrollToBottom:y}=(0,lr.b)(),x=(0,$.Pk)(),{isWaitingOnCopilot:b,messagesLoading:_,streamingMessage:j,messages:C}=x,{reloadQuota:w,premiumChatQuotaRemaining:N,isLicensedLimited:S}=(0,dE.xR)();p[0]!==x?(n=(0,n$.W)(x),t=(0,n6.CB)(n),p[0]=x,p[1]=t,p[2]=n):(t=p[1],n=p[2]);let I=t,k=n?.sharedMessageID,{messages:T,groupedMessages:L}=(0,ul.a)(x);p[3]!==T?(i=T.find(u3)?.id,p[3]=T,p[4]=i):i=p[4];let E=i;p[5]!==y?(a=()=>y("instant"),s=[y],p[5]=y,p[6]=a,p[7]=s):(a=p[6],s=p[7]),(0,uc.N)(a,s);let R=(0,tC.S)(x.streamingMessage);if(p[8]!==S||p[9]!==b||p[10]!==T.length||p[11]!==_.state||p[12]!==N||p[13]!==R||p[14]!==w||p[15]!==j?(r=()=>{T.length>0&&!S&&tx.W.premiumRequestQuotasEnabled&&N<=n6.aX&&!b&&"loaded"===_.state&&R&&!j&&w("quota_low_trigger")},o=[S,b,T.length,_.state,N,R,w,j],p[8]=S,p[9]=b,p[10]=T.length,p[11]=_.state,p[12]=N,p[13]=R,p[14]=w,p[15]=j,p[16]=r,p[17]=o):(r=p[16],o=p[17]),(0,v.useEffect)(r,o),p[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("h1",{children:"Copilot Chat"}),p[18]=l):l=p[18],p[19]!==I?(c=(0,m.jsxs)("div",{className:"sr-only",children:[l,(0,m.jsx)("h2",{children:I})]}),p[19]=I,p[20]=c):c=p[20],p[21]!==C||p[22]!==E||p[23]!==L||p[24]!==f||p[25]!==g||p[26]!==b||p[27]!==k||p[28]!==j?.id){let e;p[30]!==C||p[31]!==E||p[32]!==L.length||p[33]!==f||p[34]!==g||p[35]!==b||p[36]!==k||p[37]!==j?.id?(e=(e,t)=>(0,m.jsx)(ur.i,{isLastGroup:t===L.length-1,children:e.map((n,i)=>{let a=-1===n.messageIndex?C.length:n.messageIndex,s=t===L.length-1&&i===e.length-1;return(0,m.jsx)(uV,{isLatestMessage:s,isSharedMessage:n.id===k,isFirstReply:n.id===E,message:n,messageIndex:a,inputRef:f,isStreaming:n.id===j?.id||s&&b,autoOpenPreviewPane:!g},i)})},t),p[30]=C,p[31]=E,p[32]=L.length,p[33]=f,p[34]=g,p[35]=b,p[36]=k,p[37]=j?.id,p[38]=e):e=p[38],d=L.map(e),p[21]=C,p[22]=E,p[23]=L,p[24]=f,p[25]=g,p[26]=b,p[27]=k,p[28]=j?.id,p[29]=d}else d=p[29];return p[39]!==c||p[40]!==d?(u=(0,m.jsxs)("div",{children:[c,d]}),p[39]=c,p[40]=d,p[41]=u):u=p[41],u},uX=()=>{let e,t,n,i=(0,h.c)(4),{mode:a}=(0,$.Pk)();return i[0]!==a?(e=()=>{(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:a,message:"Conversation failed to load"})},t=[a],i[0]=a,i[1]=e,i[2]=t):(e=i[1],t=i[2]),(0,v.useEffect)(e,t),i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(uK,{title:"Conversation failed to load",description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.A,{href:"",onClick:u4,inline:!0,children:"Reload the page"})," ","to try again."]})}),i[3]=n):n=i[3],n},uZ=()=>{let e,t,n,i=(0,h.c)(4),{mode:a}=(0,$.Pk)();return i[0]!==a?(e=()=>{(0,tv.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:a,message:"Access denied"})},t=[a],i[0]=a,i[1]=e,i[2]=t):(e=i[1],t=i[2]),(0,v.useEffect)(e,t),i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(uK,{title:"Access denied",description:"You do not have permission to view this."}),i[3]=n):n=i[3],n},u0=e=>{let t,n,i,a=(0,h.c)(9),{isSharedThread:s}=e,{mode:r}=(0,$.Pk)(),{needsSsoAuthentication:o,ssoOrgNames:l}=d$(),c=(0,dA.G)(),d=s?"Shared conversation not found":"Conversation not found",u=o?`This URL may be incorrect, you may be signed out of your organization or the ${c?"space":"conversation"} may have been deleted.`:"This URL may be incorrect or the conversation may have been deleted.";return a[0]!==s||a[1]!==r||a[2]!==d?(t=()=>{(0,tv.BI)("dotcom_chat.activate.error",{target:s?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:r,message:d})},n=[r,s,d],a[0]=s,a[1]=r,a[2]=d,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,v.useEffect)(t,n),a[5]!==u||a[6]!==l||a[7]!==d?(i=(0,m.jsx)(uK,{title:d,description:u,ssoOrgs:l}),a[5]=u,a[6]=l,a[7]=d,a[8]=i):i=a[8],i},u1=e=>{let t,n,i,a,s,r=(0,h.c)(20),{inputRef:o,isMobile:l}=e,c=(0,$.Pk)(),{messagesLoading:d,threadsLoading:u,messages:p,showTopicPicker:f,pendingFirstMessage:g}=c,y=(0,n$.W)(c),{textAreaRef:x}=(0,uo.Y)(o),v=dO(),b=null,_=null;if((0,ny.B)(p,g).length&&"loaded"===d.state){let e;r[0]!==l||r[1]!==x?(e=(0,m.jsx)(uJ,{inputRef:x,isMobile:l}),r[0]=l,r[1]=x,r[2]=e):e=r[2],b=e}else if(("loading"===d.state||"pending"===d.state)&&c.selectedThreadID&&!f){let e;r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(uq,{}),r[3]=e):e=r[3],b=e}else if("error"===d.state&&c.selectedThreadID&&(null===y&&"error"!==u.state||d.notFound))if(v&&c.fetchSharedThreads?.ok===!1&&(403===c.fetchSharedThreads.status||401===c.fetchSharedThreads.status)){let e;r[4]!==c.mode?(e=(0,m.jsx)(uQ,{mode:c.mode}),r[4]=c.mode,r[5]=e):e=r[5],_=e}else{let e;r[6]!==v?(e=(0,m.jsx)(u0,{isSharedThread:v}),r[6]=v,r[7]=e):e=r[7],_=e}else if("error"===d.state||"error"===u.state){let e;r[8]!==u.status?(e=403===u.status?(0,m.jsx)(uZ,{}):(0,m.jsx)(uX,{}),r[8]=u.status,r[9]=e):e=r[9],_=e}let j=(0,eY.U)();return r[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(u2,{}),r[10]=t):t=r[10],r[11]!==_?(n=_&&(0,m.jsx)("div",{className:uY.emptyContent,children:_}),r[11]=_,r[12]=n):n=r[12],r[13]!==b?(i=b&&(0,m.jsxs)("div",{className:uY.messageContent,children:[b,(0,m.jsx)(au.Cb,{})]}),r[13]=b,r[14]=i):i=r[14],r[15]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(au.zc,{}),r[15]=a):a=r[15],r[16]!==j||r[17]!==n||r[18]!==i?(s=(0,m.jsxs)(lr.$,{className:uY.container,containerRef:j,children:[t,n,i,a]}),r[16]=j,r[17]=n,r[18]=i,r[19]=s):s=r[19],s},u2=()=>{let e,t,n,i=(0,h.c)(7),{isScrolledUp:a,scrollToBottom:s}=(0,lr.b)(),r=!a&&uY.hidden;return i[0]!==r?(e=(0,x.$)(uY.scrollToBottomButton,r),i[0]=r,i[1]=e):e=i[1],i[2]!==s?(t=()=>s("smooth"),i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n=(0,m.jsx)(tt.K,{"aria-label":"Scroll to bottom",className:e,onClick:t,icon:ef.ArrowDownIcon,tooltipDirection:"n"}),i[4]=e,i[5]=t,i[6]=n):n=i[6],n};try{uJ.displayName||(uJ.displayName="Messages")}catch{}try{uX.displayName||(uX.displayName="FailedToLoadThreadError")}catch{}try{uZ.displayName||(uZ.displayName="AccessDeniedError")}catch{}try{u0.displayName||(u0.displayName="NotFoundError")}catch{}try{u1.displayName||(u1.displayName="ImmersiveChat")}catch{}try{u2.displayName||(u2.displayName="ScrollToBottomButton")}catch{}function u3(e){return"assistant"===e.role}function u4(e){e.preventDefault(),window.location.reload()}var u5=n(93412),u6=n(91747),u7=n(52870);function u8(e){let t,n,i,a,s,r=(0,h.c)(12),{className:o}=e,[l,c]=(0,v.useState)(rU.L.Static),[d,u]=(0,v.useState)(!0),{safeSetTimeout:p}=(0,u7.A)();return r[0]!==p?(t=()=>{let e=p(()=>{dD.Jt.getProPlusAnimationFlag()?(c(rU.L.Activate),u(!1)):(c(rU.L.Idle),u(!0))},1e3);return()=>clearTimeout(e)},n=[p],r[0]=p,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,v.useEffect)(t,n),r[3]!==l?(i=()=>{l===rU.L.Activate&&(c(rU.L.Idle),u(!0),dD.Jt.removeProPlusAnimationFlag())},r[3]=l,r[4]=i):i=r[4],r[5]!==l||r[6]!==d||r[7]!==i?(a=(0,m.jsx)(rU.N,{animationType:l,onAnimationEnd:i,loopAnimation:d,size:48}),r[5]=l,r[6]=d,r[7]=i,r[8]=a):a=r[8],r[9]!==o||r[10]!==a?(s=(0,m.jsx)("div",{className:o,children:a}),r[9]=o,r[10]=a,r[11]=s):s=r[11],s}try{u8.displayName||(u8.displayName="CopilotEmptyStateAnimation")}catch{}let u9={scrollContainer:"NewConversation-module__scrollContainer--pS_a1",container:"NewConversation-module__container--fMmET",banner:"NewConversation-module__banner--binRv",main:"NewConversation-module__main--P10kO",content:"NewConversation-module__content--cXGzS",alignTop:"NewConversation-module__alignTop--iiUdY",innerContainer:"NewConversation-module__innerContainer--u29kY",footer:"NewConversation-module__footer--HIKDz",starters:"NewConversation-module__starters--zi_Nb"},me={banner:"ChatInputBanners-module__banner--itq1j"};var mt=n(95280),mn=n(56487),mi=n(60429);let ma={container:"EditorUpsellBanner-module__container--uh3A5",banner:"EditorUpsellBanner-module__banner--_Z7mQ",title:"EditorUpsellBanner-module__title--CWcJI",description:"EditorUpsellBanner-module__description--LaCyW",actions:"EditorUpsellBanner-module__actions--BLcz6",editorButton:"EditorUpsellBanner-module__editorButton--_UqZv",closeButton:"EditorUpsellBanner-module__closeButton--MQTXP"};function ms(){let e,t,n,i,a,s=(0,h.c)(10),r=(0,$.A3)("isEditorUpsellBannerDismissed"),o=(0,H.b)(),{isLicensedLimited:l}=(0,dE.xR)(),c=(0,v.useId)(),d=mr;return r||!l?null:(s[0]!==c?(e=(0,m.jsx)("h2",{className:ma.title,id:c,children:"Install Copilot in your favorite code editor"}),s[0]=c,s[1]=e):e=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("p",{className:ma.description,children:"Copilot is available for a multitude of editors to fit your needs"}),n=tx.W.freeToPaidSettingsUpgrade?(0,m.jsx)(mt.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,m.jsxs)(oa.A,{className:ma.actions,children:[(0,m.jsx)(dx.z,{className:ma.editorButton,href:mi.A.vscode.url,leadingVisual:(0,m.jsx)("img",{src:mi.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{d("vscode","ide_menu_primary_button_click")},children:mi.A.vscode.name}),(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{"aria-label":"More editors",icon:ef.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{d("menu","ide_menu_open")}})}),(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(mn.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),s[2]=t,s[3]=n):(t=s[2],n=s[3]),s[4]!==o?(i=(0,m.jsx)(tt.K,{variant:"invisible",className:ma.closeButton,icon:ef.XIcon,"aria-label":"Dismiss banner",onClick:()=>{o.dismissEditorUpsellBanner(),(0,tv.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),s[4]=o,s[5]=i):i=s[5],s[6]!==e||s[7]!==i||s[8]!==c?(a=(0,m.jsx)("div",{className:ma.container,children:(0,m.jsxs)("section",{className:ma.banner,"aria-labelledby":c,children:[e,t,n,i]})}),s[6]=e,s[7]=i,s[8]=c,s[9]=a):a=s[9],a)}function mr(e,t){tx.W.freeToPaidTelemetry?(0,mn.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,tv.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{ms.displayName||(ms.displayName="EditorUpsellBanner")}catch{}function mo(){return dD.Jt.getProPlusSuccessBannerFlag()??!1}function ml(e){let t,n,i=(0,h.c)(5),{onDismiss:a,className:s}=e;return i[0]!==a?(t=(0,m.jsx)(q.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{a(),(0,tv.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),i[0]=a,i[1]=t):t=i[1],i[2]!==s||i[3]!==t?(n=(0,m.jsx)("div",{className:s,children:t}),i[2]=s,i[3]=t,i[4]=n):n=i[4],n}try{ml.displayName||(ml.displayName="ProPlusSuccessBanner")}catch{}function mc(){return(dD.Jt.getTrialSuccessBannerFlag()&&!dD.Jt.getProPlusSuccessBannerFlag())??!1}function md(e){let t,n,i=(0,h.c)(5),{onDismiss:a,className:s}=e;return i[0]!==a?(t=(0,m.jsx)(q.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{a(),(0,tv.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),i[0]=a,i[1]=t):t=i[1],i[2]!==s||i[3]!==t?(n=(0,m.jsx)("div",{className:s,children:t}),i[2]=s,i[3]=t,i[4]=n):n=i[4],n}try{md.displayName||(md.displayName="TrialSuccessBanner")}catch{}function mu(){let e,t,n,i,a=(0,h.c)(12),s=(0,dE.xR)().licenseType,r=function(){let e,t,n=(0,h.c)(3),[i,a]=(0,v.useState)(mc);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{dD.Jt.removeTrialSuccessBannerFlag(),a(!1)},n[0]=e):e=n[0];let s=e;return n[1]!==i?(t={visible:i,onDismiss:s},n[1]=i,n[2]=t):t=n[2],t}(),o=function(){let e,t,n=(0,h.c)(3),[i,a]=(0,v.useState)(mo);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{dD.Jt.removeProPlusSuccessBannerFlag(),dD.Jt.removeTrialSuccessBannerFlag(),a(!1)},n[0]=e):e=n[0];let s=e;return n[1]!==i?(t={visible:i,onDismiss:s},n[1]=i,n[2]=t):t=n[2],t}(),l=o.visible,c=!l&&r.visible&&s===tg.mF.LicensedFull,d=!l&&!c;return a[0]!==d?(e=d&&(0,m.jsx)(ms,{}),a[0]=d,a[1]=e):e=a[1],a[2]!==c||a[3]!==r?(t=c&&(0,m.jsx)(md,{className:me.banner,onDismiss:r.onDismiss}),a[2]=c,a[3]=r,a[4]=t):t=a[4],a[5]!==o.onDismiss||a[6]!==l?(n=l&&(0,m.jsx)(ml,{className:me.banner,onDismiss:o.onDismiss}),a[5]=o.onDismiss,a[6]=l,a[7]=n):n=a[7],a[8]!==e||a[9]!==t||a[10]!==n?(i=(0,m.jsxs)(m.Fragment,{children:[e,t,n]}),a[8]=e,a[9]=t,a[10]=n,a[11]=i):i=a[11],i}try{mu.displayName||(mu.displayName="NewConversationBanners")}catch{}var mm=n(50393),mh=n(2691),mp=n(15440);function mf(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,v=(0,h.c)(46),{textAreaRef:b,handleUserSubmit:_,nextMessageIndex:j}=e,C=(0,H.b)(),w=(0,$.Pk)();v[0]!==w?(t=(0,n$.W)(w),v[0]=w,v[1]=t):t=v[1];let N=t,S=(0,G.G7)("copilot_chat_cca_request_cta")&&w.hasCEorCBAccess&&!w.agentsEnabled;v[2]!==N||v[3]!==C||v[4]!==w?(n=e=>{let t=0===w.messages.length?N:(0,n$.W)(w),n=w.currentUserLogin||"",i=e.message.replaceAll("$$USERNAME$$",n);C.sendChatMessage({thread:t,content:i,references:w.currentReferences,topic:w.currentTopic,context:w.context,customInstructions:w.customInstructions,model:w.model}),(0,tv.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:w.currentTopic?.name,mode:"immersive",starterId:e.id})},v[2]=N,v[3]=C,v[4]=w,v[5]=n):n=v[5];let I=n,k=(0,Z.Zp)();v[6]!==k||v[7]!==w.currentTopic?.name?(i=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:w.currentTopic?.name,mode:"immersive",starterId:"task-starter"}),k("/copilot/agents")},v[6]=k,v[7]=w.currentTopic?.name,v[8]=i):i=v[8];let T=i;v[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("div",{className:u9.banner,children:(0,m.jsx)(mu,{})}),v[9]=a):a=v[9];let L=(0,u6.u)("copilot_pro_plus_animation")?(0,m.jsx)(u8,{}):(0,m.jsx)(dC.A,{hidden:!0});v[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),v[10]=s):s=v[10],v[11]!==_||v[12]!==j||v[13]!==b?(r=(0,m.jsx)(ua,{textAreaRef:b,handleUserSubmit:_,nextMessageIndex:j}),v[11]=_,v[12]=j,v[13]=b,v[14]=r):r=v[14],v[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),v[15]=o):o=v[15];let E=S&&(0,m.jsx)("li",{children:(0,m.jsx)(mp.Z,{testId:"task",name:"Task",icon:"agent",color:"var(--display-gray-fgColor)",onClick:T},"task-starter")});v[16]!==I?(l=e=>(0,m.jsx)(mh.I,{group:e,onEntrySelect:I},e.id),v[16]=I,v[17]=l):l=v[17];let R=(0,mm.M)(S).map(l);return v[18]!==u9.starters||v[19]!==E||v[20]!==R?(c=(0,m.jsxs)("ul",{className:u9.starters,children:[E,R]}),v[18]=u9.starters,v[19]=E,v[20]=R,v[21]=c):c=v[21],v[22]!==u9.innerContainer||v[23]!==s||v[24]!==r||v[25]!==o||v[26]!==c?(d=(0,m.jsxs)("div",{className:u9.innerContainer,children:[s,r,o,c]}),v[22]=u9.innerContainer,v[23]=s,v[24]=r,v[25]=o,v[26]=c,v[27]=d):d=v[27],v[28]!==L||v[29]!==d||v[30]!==u9.alignTop?(u=(0,m.jsxs)("div",{className:u9.alignTop,children:[L,d]}),v[28]=L,v[29]=d,v[30]=u9.alignTop,v[31]=u):u=v[31],v[32]!==u||v[33]!==u9.content?(p=(0,m.jsx)("div",{className:u9.content,children:u}),v[32]=u,v[33]=u9.content,v[34]=p):p=v[34],v[35]!==p||v[36]!==u9.main?(f=(0,m.jsx)("div",{className:u9.main,children:p}),v[35]=p,v[36]=u9.main,v[37]=f):f=v[37],v[38]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)("div",{className:u9.footer,children:(0,m.jsx)(u5.h,{})}),v[38]=g):g=v[38],v[39]!==f||v[40]!==u9.container||v[41]!==a?(y=(0,m.jsxs)("div",{className:u9.container,children:[a,f,g]}),v[39]=f,v[40]=u9.container,v[41]=a,v[42]=y):y=v[42],v[43]!==y||v[44]!==u9.scrollContainer?(x=(0,m.jsx)("div",{className:u9.scrollContainer,children:y}),v[43]=y,v[44]=u9.scrollContainer,v[45]=x):x=v[45],x}try{mf.displayName||(mf.displayName="NewConversation")}catch{}let mg={container:"QuotaExceededEmptyState-module__container--WOGM3",main:"QuotaExceededEmptyState-module__main--kc9CL",copy:"QuotaExceededEmptyState-module__copy--S4GE7",heading:"QuotaExceededEmptyState-module__heading--mfW4i",description:"QuotaExceededEmptyState-module__description--JR0Bv",footer:"QuotaExceededEmptyState-module__footer--ckJFW"};function my(){let e,t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(21),{resetDate:f,eligibleForTrial:g}=(0,dE.xR)(),[y,x]=(0,v.useState)(!1),[b,_]=(0,v.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{x(!0),_(!0)},p[0]=e):e=p[0];let j=e;p[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{x(!1)},p[1]=t):t=p[1];let C=t;p[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{_(!1)},p[2]=n):n=p[2];let w=n,N=y||b;p[3]!==y||p[4]!==N?(i=N?(0,m.jsx)(rU.N,{animationType:"jumpWiggle",loopAnimation:y,size:96,onAnimationEnd:w}):(0,m.jsx)(rU.N,{animationType:"static",loopAnimation:!1,size:96}),p[3]=y,p[4]=N,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("h2",{className:mg.heading,children:"You\u2019ve reached your free plan limit"}),p[6]=a):a=p[6],p[7]!==f?(s=(0,m.jsxs)("p",{className:mg.description,children:["Your limits will reset on ",f,"."]}),p[7]=f,p[8]=s):s=p[8];let S=g?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return p[9]!==S?(r=(0,m.jsx)(dx.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onMouseEnter:j,onMouseLeave:C,onClick:mx,children:S}),p[9]=S,p[10]=r):r=p[10],p[11]!==s||p[12]!==r?(o=(0,m.jsxs)("div",{className:mg.copy,children:[a,s,r]}),p[11]=s,p[12]=r,p[13]=o):o=p[13],p[14]!==i||p[15]!==o?(l=(0,m.jsxs)("div",{className:mg.main,children:[i,o]}),p[14]=i,p[15]=o,p[16]=l):l=p[16],p[17]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("strong",{children:"Part of an organization?"}),p[17]=c):c=p[17],p[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)("div",{className:mg.footer,children:[c,(0,m.jsxs)("span",{children:["Upgrade to"," ",(0,m.jsx)(Q.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),p[18]=d):d=p[18],p[19]!==l?(u=(0,m.jsxs)("div",{className:mg.container,children:[l,d]}),p[19]=l,p[20]=u):u=p[20],u}function mx(){(0,tv.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{my.displayName||(my.displayName="QuotaExceededEmptyState")}catch{}function mv(e){let t,n,i,a,s,r,o,l=(0,h.c)(23),{isMobile:c,textAreaRef:d}=e,u=(0,$.Pk)(),p=(0,l2.Kf)(),{messages:f,messagesLoading:g,threadsLoading:y}=u,{chatQuotaExceeded:x}=(0,dE.xR)(),b=(0,dA.G)();l[0]!==b||l[1]!==u.customCopilots?(t=(0,dT.JB)(u.customCopilots,b),l[0]=b,l[1]=u.customCopilots,l[2]=t):t=l[2];let _=!!t,{variant:j}=un(b,u.selectedThreadID),C=j===ut.customCopilotSizeExceeded,w=(!j||_)&&!C,N=(0,v.useRef)(u.currentTopic),S=dO(),I=!u.selectedThreadID&&dD.Jt.getEntrypointMessage();e:{if(u.selectedThreadID||u.pendingFirstMessage||I||b||x||"error"===g.state||"error"===y.state){n=!1;break e}n=!0}let k=n,T=f.length,L=dF(N,T);return l[3]!==u.currentTopic?(i=()=>{N.current=u.currentTopic},a=[u.currentTopic],l[3]=u.currentTopic,l[4]=i,l[5]=a):(i=l[4],a=l[5]),(0,v.useEffect)(i,a),l[6]!==x||l[7]!==L||l[8]!==u.currentReferences?(s=()=>{let e=dD.Jt.getEntrypointMessage();if(e&&!x){if(dD.Jt.setEntrypointMessage(null),(0,G.G7)("copilot_chat_action_logs_redirect")){let e=u.currentReferences.findIndex(mb);-1!==e&&u.currentReferences.splice(e,1)}setTimeout(()=>{L(e.message,e.references)},100)}},r=[L,x,u.currentReferences],l[6]=x,l[7]=L,l[8]=u.currentReferences,l[9]=s,l[10]=r):(s=l[9],r=l[10]),(0,v.useEffect)(s,r),l[11]!==x||l[12]!==L||l[13]!==c||l[14]!==S||l[15]!==T||l[16]!==k||l[17]!==w||l[18]!==u.selectedThreadID||l[19]!==u.sharedThreadChannel||l[20]!==d||l[21]!==p?(o=(0,m.jsx)("div",{className:us.root,children:!u.selectedThreadID&&x?(0,m.jsx)(my,{}):p.traceInfo?.visible?(0,m.jsx)(dR.k,{sharedThreadChannel:u.sharedThreadChannel,threadId:u.selectedThreadID}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:us.container,children:k?(0,m.jsx)(mf,{textAreaRef:d,handleUserSubmit:L,nextMessageIndex:T}):(0,m.jsx)(u1,{inputRef:d,isMobile:c})}),(!S||tx.W.copilotDuplicateThread)&&!k&&(0,m.jsxs)("div",{className:us.footer,children:[!w&&(0,m.jsx)(ui,{}),w&&(0,m.jsx)(ua,{textAreaRef:d,handleUserSubmit:L,nextMessageIndex:T})]})]})}),l[11]=x,l[12]=L,l[13]=c,l[14]=S,l[15]=T,l[16]=k,l[17]=w,l[18]=u.selectedThreadID,l[19]=u.sharedThreadChannel,l[20]=d,l[21]=p,l[22]=o):o=l[22],o}function mb(e){return"job"===e.type}function m_(e){let t,n=(0,h.c)(2);return n[0]!==e?(t=(0,m.jsx)(mj,{children:(0,m.jsx)(mv,{...e})}),n[0]=e,n[1]=t):t=n[1],t}function mj(e){let t,n,i,a,s,r=(0,h.c)(8),{selectedThreadID:o}=(0,$.bP)("selectedThreadID"),[l,c]=(0,v.useState)(0),d=(0,v.useRef)(!1);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{d.current=!0},r[0]=t):t=r[0];let u=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{tx.W.stableConversationView&&d.current&&(c(mC),d.current=!1)},r[1]=n):n=r[1],r[2]!==o?(i=[o],r[2]=o,r[3]=i):i=r[3],(0,v.useEffect)(n,i),r[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(tT,{regionName:"This conversation"}),r[4]=a):a=r[4],r[5]!==l||r[6]!==e.children?(s=(0,m.jsx)(tj.t,{fallback:a,onError:u,children:e.children},l),r[5]=l,r[6]=e.children,r[7]=s):s=r[7],s}function mC(e){return e+1}try{mv.displayName||(mv.displayName="ConversationViewInner")}catch{}try{m_.displayName||(m_.displayName="ConversationView")}catch{}try{mj.displayName||(mj.displayName="ConversationViewErrorBoundary")}catch{}var mw=n(40683),mN=n(93380);let mS={container:"Header-module__container--x6PHc",leftControls:"Header-module__leftControls--LaO7p",rightControls:"Header-module__rightControls--yQ1vI",hideOnMobile:"Header-module__hideOnMobile--OHZqN"},mI={newChatButtonContainer:"NewChatButton-module__newChatButtonContainer--JlmNy"};function mk(){let e,t,n,i=(0,h.c)(5),a=(0,dB.G)();i[0]!==a?(e=async()=>{await a({clearTopic:!0,includeThreads:!1})},i[0]=a,i[1]=e):e=i[1];let s=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(di.KJ,{}),i[2]=t):t=i[2],i[3]!==s?(n=(0,m.jsx)("div",{className:mI.newChatButtonContainer,children:(0,m.jsx)(tb.$,{icon:t,iconOnly:!0,onClick:s,"aria-label":"New chat"})}),i[3]=s,i[4]=n):n=i[4],n}try{mk.displayName||(mk.displayName="NewChatButton")}catch{}var mT=n(61767);let mL=()=>{let e=(0,$.Pk)(),t=(0,dA.G)(),n=(0,dT.JB)(e.customCopilots,t),i=(0,dT.mM)(),a=(0,dT.FQ)(),s=i||n,r=!a&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];s&&e.push({label:"Spaces",href:n6.VR}),r&&n&&e.push({label:n.name,href:(0,dT.Cb)(n)}),(0,mT.FC)(e)}}};var mE=n(79575),mR=n(11083);let mA={container:"TraceButtons-module__container--QKBPy"};function mD(){let e,t,n,i,a,s,r,o,l,c,d,u=(0,h.c)(31),p=(0,l3.y)(),{traceInfo:f}=(0,l2.Kf)(),g=function(){let e,t=(0,h.c)(2),n=(0,$.bP)("selectedThreadID","threads");return t[0]!==n?(e=(0,n$.W)(n),t[0]=n,t[1]=e):e=t[1],e}(),y=dO(),[x,b]=(0,v.useState)(!1),[_,j]=(0,dD.iI)("getTracingRequestedFlag","setTracingRequestedFlag"),C=tx.W.requestTracing&&(0,mR.X)();f?.traces,g?.id;let w=(0,mE.$1)(f?.traces,g?.id,y),N=!!f?.visible;u[0]!==N||u[1]!==p?(e=()=>{p.showTraceDisplay(!N)},u[0]=N,u[1]=p,u[2]=e):e=u[2];let S=e;u[3]!==j||u[4]!==_?(t=()=>{_?j(!1):b(!0)},u[3]=j,u[4]=_,u[5]=t):t=u[5];let I=t;if(!C)return null;let k=_?"danger":void 0;u[6]!==k?(n=(0,m.jsx)(eX.W.Button,{"aria-label":"Tracing",icon:ef.ToolsIcon,variant:k}),u[6]=k,u[7]=n):n=u[7];let T=_?"danger":void 0;u[8]!==_?(i=(0,m.jsx)(eZ.l.LeadingVisual,{children:_?(0,m.jsx)(ef.SquareCircleIcon,{}):(0,m.jsx)(ef.ToolsIcon,{})}),u[8]=_,u[9]=i):i=u[9];let L=_?"Stop tracing":"Start tracing";u[10]!==I||u[11]!==T||u[12]!==i||u[13]!==L?(a=(0,m.jsxs)(eZ.l.Item,{onSelect:I,variant:T,children:[i,L]}),u[10]=I,u[11]=T,u[12]=i,u[13]=L,u[14]=a):a=u[14];let E=!w;return u[15]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.LogIcon,{})}),u[15]=s):s=u[15],u[16]!==S||u[17]!==E?(r=(0,m.jsxs)(eZ.l.Item,{onSelect:S,disabled:E,children:[s,"View trace"]}),u[16]=S,u[17]=E,u[18]=r):r=u[18],u[19]!==r||u[20]!==a?(o=(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsxs)(eZ.l,{children:[a,r]})}),u[19]=r,u[20]=a,u[21]=o):o=u[21],u[22]!==o||u[23]!==n?(l=(0,m.jsxs)(eX.W,{children:[n,o]}),u[22]=o,u[23]=n,u[24]=l):l=u[24],u[25]!==j||u[26]!==x?(c=x&&(0,m.jsx)(tz.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>b(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{j(!0),b(!1)}}],onClose:()=>b(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),u[25]=j,u[26]=x,u[27]=c):c=u[27],u[28]!==l||u[29]!==c?(d=(0,m.jsxs)("div",{className:mA.container,children:[l,c]}),u[28]=l,u[29]=c,u[30]=d):d=u[30],d}try{mD.displayName||(mD.displayName="TraceButtons")}catch{}function mP(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,y,x,b,_=(0,h.c)(52),{showPreviewPaneButton:j,conversationSpecificItems:C,customButtons:w,defaultName:N}=e,S=void 0===j||j,I=void 0===N?"":N,k=(0,$.Pk)(),{selectedThreadID:T,threads:L,messagesLoading:E,messages:R,usePlanningIntent:A}=k,D=(0,$.pn)(mO);_[0]!==D?(t=(0,n6.CB)(D),_[0]=D,_[1]=t):t=_[1];let P=t,O=dO(),M=dM(),B=(0,dA.G)(),U=(0,dT.JB)(k.customCopilots,B),V=(0,dL.BV)(),H=(0,dT.mM)(),W=(0,dI.v)(),[,q,z]=(0,mN.B)(!1);_[2]!==T||_[3]!==L?(n=L.get(T),_[2]=T,_[3]=L,_[4]=n):n=_[4];let G=n,K=T&&A,Q=!!(O?M:G?.sharedID),{updateGlobalNavigationBreadcrumbs:Y}=mL();_[5]!==Y?(i=()=>{Y()},_[5]=Y,_[6]=i):i=_[6],_[7]!==B||_[8]!==Y?(a=[Y,B],_[7]=B,_[8]=Y,_[9]=a):a=_[9],(0,v.useEffect)(i,a),_[10]!==O||_[11]!==M||_[12]!==T?(s=()=>T?O&&M?`/copilot/share/${M}`:`/copilot/c/${T}`:n6.Jz,_[10]=O,_[11]=M,_[12]=T,_[13]=s):s=_[13];let J=s;W?.id;let X=H&&!B||!T&&!W?.id&&!H,Z=(0,v.useRef)(null),[ee,et]=(0,v.useState)(null),{canShareThread:en}=(0,F.X)(),ei="loaded"===E.state,ea=en&&!O&&T&&!B&&ei,es=(0,n6.Q7)(R).length>0;_[14]!==R?(r=(0,n6.UM)(R),_[14]=R,_[15]=r):r=_[15];let er=r,eo=es||er;_[16]!==eo||_[17]!==et?(o=()=>{eo||et("share")},_[16]=eo,_[17]=et,_[18]=o):o=_[18];let el=o;U?D?(0,g.D)(`${P} \xb7 ${U.name} \xb7 GitHub Copilot Spaces`):(0,g.D)(`${U.name} \xb7 GitHub Copilot Spaces`):H?(0,g.D)("Spaces \xb7 GitHub Copilot"):O?(0,g.D)("Shared conversation \xb7 GitHub Copilot"):(0,g.D)(`${P} \xb7 GitHub Copilot`),_[19]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(mk,{}),_[19]=l):l=_[19];let ec=!X&&(0,m.jsx)(eJ.B,{children:V&&(U||I)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eJ.B.Item,{href:n6.VR,children:"Spaces"}),T||!C?(0,m.jsx)(eJ.B.Item,{href:U?(0,dT.Cb)(U):n6.VR,children:U?.name||I}):(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:C})}),children:U?.name||I}),T&&(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(mw.V,{onOpenDialog:et,isShared:Q,showShare:!B,hideShareOnDesktop:!0})})}),children:P})]}):W?(0,m.jsx)(eJ.B.Item,{href:`/copilot/${W.id}`,children:W.displayName||"Plugin"}):T&&!O?(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(mw.V,{onOpenDialog:et,isShared:Q,showShare:!B,hideShareOnDesktop:!0})})}),children:P}):O?(0,m.jsx)(eJ.B.Item,{href:J(),children:P}):null});return _[20]!==K?(c=K&&(0,m.jsx)(eG.A,{variant:"accent",children:"Plan"}),_[20]=K,_[21]=c):c=_[21],_[22]!==mS.leftControls||_[23]!==l||_[24]!==ec||_[25]!==c?(d=(0,m.jsxs)("div",{className:mS.leftControls,children:[l,ec,c]}),_[22]=mS.leftControls,_[23]=l,_[24]=ec,_[25]=c,_[26]=d):d=_[26],_[27]!==Q||_[28]!==eo||_[29]!==el||_[30]!==ea?(u=ea&&(0,m.jsx)("div",{className:mS.hideOnMobile,children:(0,m.jsx)(tb.$,{icon:Q?(0,m.jsx)(ef.UnlockIcon,{}):(0,m.jsx)(ef.LockIcon,{}),disabled:eo,onClick:el,children:"Share"})}),_[27]=Q,_[28]=eo,_[29]=el,_[30]=ea,_[31]=u):u=_[31],_[32]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(mD,{}),_[32]=p):p=_[32],_[33]!==T||_[34]!==S?(f=S&&T&&(0,m.jsx)(mM,{}),_[33]=T,_[34]=S,_[35]=f):f=_[35],_[36]!==w||_[37]!==u||_[38]!==f?(y=(0,m.jsxs)("div",{className:mS.rightControls,children:[u,p,w,f]}),_[36]=w,_[37]=u,_[38]=f,_[39]=y):y=_[39],_[40]!==ee||_[41]!==T||_[42]!==et||_[43]!==q||_[44]!==z||_[45]!==P?(x=T&&(0,m.jsx)(mw.p,{visibleDialog:ee,onClose:()=>{(0,nI.flushSync)(()=>et(null)),Z.current?.focus()},threadName:P,threadId:T,selectedThreadId:T,onStartLoading:q,onFinishLoading:z,returnFocusRef:Z}),_[40]=ee,_[41]=T,_[42]=et,_[43]=q,_[44]=z,_[45]=P,_[46]=x):x=_[46],_[47]!==mS.container||_[48]!==d||_[49]!==y||_[50]!==x?(b=(0,m.jsxs)("div",{className:mS.container,children:[d,y,x]}),_[47]=mS.container,_[48]=d,_[49]=y,_[50]=x,_[51]=b):b=_[51],b}function mO(e){return(0,n$.W)(e)}function mM(){let e,t=(0,h.c)(4),n=(0,eQ.tZ)(),{openPreviewPane:i}=(0,eQ.xx)(),a=(0,eY.U)();return t[0]!==a||t[1]!==i||t[2]!==n?(e=!n&&(0,m.jsx)(tb.$,{iconOnly:!0,icon:(0,m.jsx)(ef.SidebarExpandIcon,{}),"aria-label":"Open workbench",onClick:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),i()},ref:a}),t[0]=a,t[1]=i,t[2]=n,t[3]=e):e=t[3],e}try{mP.displayName||(mP.displayName="Header")}catch{}try{mM.displayName||(mM.displayName="PreviewPaneButton")}catch{}var mF=n(31078),mB=n(53552),m$=n(54030),mU=n(87086),mV=n(54114),mH=n(39176),mW=n(78314),mq=n(89179);let mz={resourcePanel:"ResourcePanel-module__resourcePanel--QFUYz",resourcePanelHeader:"ResourcePanel-module__resourcePanelHeader--xpYIo",resourcePanelHeaderRow:"ResourcePanel-module__resourcePanelHeaderRow--U3piY",resourcePanelContent:"ResourcePanel-module__resourcePanelContent--zjIvl",resourcePanelPlaceholder:"ResourcePanel-module__resourcePanelPlaceholder--Tzewz",resourcePanelRepoButton:"ResourcePanel-module__resourcePanelRepoButton--W2AOy",resourcePanelNavItem:"ResourcePanel-module__resourcePanelNavItem--Q9A53"};function mG(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,b,_,j,C,w,N,S=(0,h.c)(46),{className:I}=e,{closeResourcePanel:k}=(0,eQ.xx)(),[T,L]=(0,v.useState)(!1),{repoName:E,currentRepo:R,setRepoName:A,setCurrentRepo:D}=function(){let e,t,n,i=(0,h.c)(5),[a,s]=(0,v.useState)("Select Repo"),[r,o]=(0,v.useState)(null);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=dD.Jt.getLastUsedRepository();e&&(s(`${e.ownerLogin}/${e.name}`),o(e))},t=[],i[0]=e,i[1]=t):(e=i[0],t=i[1]),(0,v.useEffect)(e,t),i[2]!==r||i[3]!==a?(n={repoName:a,currentRepo:r,setRepoName:s,setCurrentRepo:o},i[2]=r,i[3]=a,i[4]=n):n=i[4],n}(),[P,O]=(0,v.useState)("files"),[M,F]=(0,v.useState)(""),B=(0,H.b)(),$=(0,v.useRef)(null);S[0]!==I?(t=(0,x.$)(mz.resourcePanel,I),S[0]=I,S[1]=t):t=S[1],S[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>L(!0),S[2]=n):n=S[2],S[3]!==E?(i=(0,m.jsx)(tm.Q,{ref:$,onClick:n,variant:"invisible",trailingVisual:ef.ChevronDownIcon,className:mz.resourcePanelRepoButton,children:E}),S[3]=E,S[4]=i):i=S[4],S[5]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,S[5]=a):a=S[5],S[6]!==B||S[7]!==D||S[8]!==A?(s=async e=>{if(!e)return;let t=await B.service.fetchRepo(e);t.ok&&t.payload?(A(`${t.payload.ownerLogin}/${t.payload.name}`),D(t.payload),dD.Jt.setLastUsedRepository(t.payload)):t.error&&F(t.error)},S[6]=B,S[7]=D,S[8]=A,S[9]=s):s=S[9],S[10]!==T||S[11]!==s?(r=(0,m.jsx)(mU.X1,{selectionVariant:"instant",open:T,onOpenChange:L,selectedRepoIds:a,onSelectRepo:s,submitReturnFocusRef:$,cancelReturnFocusRef:$,anchorRef:$,includeForks:!0}),S[10]=T,S[11]=s,S[12]=r):r=S[12],S[13]!==k?(o=(0,m.jsx)("div",{className:"d-flex flex-justify-end",children:(0,m.jsx)(tt.K,{size:"small",icon:ef.SidebarCollapseIcon,"aria-label":"Close resource panel",onClick:k,variant:"invisible"})}),S[13]=k,S[14]=o):o=S[14],S[15]!==i||S[16]!==r||S[17]!==o?(l=(0,m.jsxs)("div",{className:mz.resourcePanelHeaderRow,children:[i,r,o]}),S[15]=i,S[16]=r,S[17]=o,S[18]=l):l=S[18];let U="files"===P?"location":void 0;S[19]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{O("files"),e.preventDefault()},S[19]=c):c=S[19],S[20]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(ef.CodeIcon,{}),S[20]=d):d=S[20],S[21]!==U?(u=(0,m.jsx)(mq.O.Item,{"aria-current":U,"aria-label":"Files",onSelect:c,className:mz.resourcePanelNavItem,children:d}),S[21]=U,S[22]=u):u=S[22];let V="pull-requests"===P?"location":void 0;S[23]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{O("pull-requests"),e.preventDefault()},S[23]=p):p=S[23],S[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(ef.GitPullRequestIcon,{}),S[24]=f):f=S[24],S[25]!==V?(g=(0,m.jsx)(mq.O.Item,{"aria-current":V,"aria-label":"Pull requests",onSelect:p,className:mz.resourcePanelNavItem,children:f}),S[25]=V,S[26]=g):g=S[26];let W="issues"===P?"location":void 0;return S[27]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{O("issues"),e.preventDefault()},S[27]=y):y=S[27],S[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsx)(ef.IssueOpenedIcon,{}),S[28]=b):b=S[28],S[29]!==W?(_=(0,m.jsx)(mq.O.Item,{"aria-current":W,"aria-label":"Issues",onSelect:y,className:mz.resourcePanelNavItem,children:b}),S[29]=W,S[30]=_):_=S[30],S[31]!==u||S[32]!==g||S[33]!==_?(j=(0,m.jsxs)(mq.O,{"aria-label":"Resource panel navigation",children:[u,g,_]}),S[31]=u,S[32]=g,S[33]=_,S[34]=j):j=S[34],S[35]!==j||S[36]!==l?(C=(0,m.jsxs)("div",{className:mz.resourcePanelHeader,children:[l,j]}),S[35]=j,S[36]=l,S[37]=C):C=S[37],S[38]!==R||S[39]!==M||S[40]!==P?(w=(0,m.jsx)("div",{className:mz.resourcePanelContent,children:"files"===P?R?(0,m.jsx)("div",{children:(0,m.jsx)(mW.d,{repository:R,children:(0,m.jsx)(mF.Ck,{children:(0,m.jsx)(mB.qV,{refInfo:{name:R.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:R.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)(mK,{currentRepo:R,fetchError:M})})})})}):(0,m.jsx)("div",{className:mz.resourcePanelPlaceholder,children:"Select a repository to view files"}):(0,m.jsx)("div",{className:mz.resourcePanelPlaceholder,children:"Coming soon..."})}),S[38]=R,S[39]=M,S[40]=P,S[41]=w):w=S[41],S[42]!==t||S[43]!==C||S[44]!==w?(N=(0,m.jsxs)("div",{className:t,"data-testid":"resource-panel",children:[C,w]}),S[42]=t,S[43]=C,S[44]=w,S[45]=N):N=S[45],N}function mK(e){let t,n,i,a,s,r=(0,h.c)(21),{currentRepo:o,fetchError:l}=e,{openPreviewPane:c,openItem:d,updateItem:u}=(0,eQ.xx)(),p=(0,H.b)(),{list:f,directories:g,loading:y}=(0,m$.o)(o.commitOID,!0);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],r[0]=t):t=r[0];let[x,b]=(0,v.useState)(t),[_,j]=(0,v.useState)(mJ);r[1]!==o.id||r[2]!==o.refInfo||r[3]!==p||r[4]!==d||r[5]!==c||r[6]!==u?(n=async e=>{if(0===e.size)return;let t=Array.from(e)[0],n=await p.service.fetchFileContents(o.id,o.refInfo.name,t);if(n.ok&&n.payload){let e={messageId:tg.Wp,id:`file:${t}#0`,timestamp:new Date,isUserEdited:!1,value:n.payload?.content,type:"file",name:t,isStreaming:!1,language:n.payload?.language??"plaintext"};u(e),d(e.id),c()}j(new Set([t]))},r[1]=o.id,r[2]=o.refInfo,r[3]=p,r[4]=d,r[5]=c,r[6]=u,r[7]=n):n=r[7];let C=n;r[8]!==g||r[9]!==f?(i=()=>{b((0,mH.k)({paths:f,directories:g}))},r[8]=g,r[9]=f,r[10]=i):i=r[10],r[11]!==o.commitOID||r[12]!==g||r[13]!==f?(a=[f,g,b,o.commitOID],r[11]=o.commitOID,r[12]=g,r[13]=f,r[14]=a):a=r[14],(0,v.useEffect)(i,a);let w=y||!1,N=!!l;return r[15]!==C||r[16]!==x||r[17]!==_||r[18]!==w||r[19]!==N?(s=(0,m.jsx)(mV.Rw,{rootItems:x,expandedPath:"",setRootItems:b,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:_,onSelectionChange:C,loading:w,fetchError:N,sortDirectoryItems:mQ,singleSelect:!0}),r[15]=C,r[16]=x,r[17]=_,r[18]=w,r[19]=N,r[20]=s):s=r[20],s}function mQ(e){return e.sort(mY)}function mY(e,t){return e.data.name.localeCompare(t.data.name)}function mJ(){return new Set}try{mG.displayName||(mG.displayName="ResourcePanel")}catch{}try{mK.displayName||(mK.displayName="ResourcePanelFileTree")}catch{}var mX=n(15033),mZ=n(72511),m0=n(72011),m1=n(40928),m2=n(51563),m3=n(40260);let m4=(e,t)=>{let n,i,a,s,r,o,l,c,d,u,m,p,f,g,y,x,v,b=(0,h.c)(48),_=(0,sn.jE)(),j=(0,dT.Cb)({id:t,owner:e}),C=`${j}/permissions`;b[0]!==C?(n={queryKey:["copilotSpaceCollaborators",C],queryFn:async()=>{let e=await (0,nr.lS)(C),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},b[0]=C,b[1]=n):n=b[1];let{data:w,isLoading:N}=(0,ns.I)(n);b[2]!==C?(i=async e=>{let t=await (0,nr.lS)(C,{method:"POST",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},b[2]=C,b[3]=i):i=b[3],b[4]!==C||b[5]!==_||b[6]!==t||b[7]!==e?(a=()=>(_.invalidateQueries({queryKey:(0,m0.dp)({id:t,owner:e})}),_.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]})),b[4]=C,b[5]=_,b[6]=t,b[7]=e,b[8]=a):a=b[8],b[9]!==i||b[10]!==a?(s={mutationFn:i,onSuccess:a},b[9]=i,b[10]=a,b[11]=s):s=b[11];let S=(0,na.n)(s);b[12]!==S?({mutateAsync:r,...o}=S,b[12]=S,b[13]=r,b[14]=o):(r=b[13],o=b[14]),b[15]!==C?(l=async e=>{let t=await (0,nr.lS)(C,{method:"PUT",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},b[15]=C,b[16]=l):l=b[16],b[17]!==C||b[18]!==_?(c=()=>_.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),b[17]=C,b[18]=_,b[19]=c):c=b[19],b[20]!==l||b[21]!==c?(d={mutationFn:l,onSuccess:c},b[20]=l,b[21]=c,b[22]=d):d=b[22];let I=(0,na.n)(d);b[23]!==I?({mutateAsync:u,...m}=I,b[23]=I,b[24]=u,b[25]=m):(u=b[24],m=b[25]),b[26]!==C?(p=async e=>{let t=await (0,nr.lS)(C,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},b[26]=C,b[27]=p):p=b[27],b[28]!==C||b[29]!==_||b[30]!==t||b[31]!==e?(f=()=>(_.invalidateQueries({queryKey:(0,m0.dp)({id:t,owner:e})}),_.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]})),b[28]=C,b[29]=_,b[30]=t,b[31]=e,b[32]=f):f=b[32],b[33]!==f||b[34]!==p?(g={mutationFn:p,onSuccess:f},b[33]=f,b[34]=p,b[35]=g):g=b[35];let k=(0,na.n)(g);return b[36]!==k?({mutateAsync:y,...x}=k,b[36]=k,b[37]=y,b[38]=x):(y=b[37],x=b[38]),b[39]!==r||b[40]!==o||b[41]!==w||b[42]!==N||b[43]!==y||b[44]!==x||b[45]!==u||b[46]!==m?(v={collaborators:w,isLoading:N,addCollaborator:r,updateCollaborator:u,removeCollaborator:y,isAddPending:o.isPending,isUpdatePending:m.isPending,isRemovePending:x.isPending,...o,...m,...x},b[39]=r,b[40]=o,b[41]=w,b[42]=N,b[43]=y,b[44]=x,b[45]=u,b[46]=m,b[47]=v):v=b[47],v};function m5(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let m6={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--G8YCd",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--oqwht"};function m7({copilotSpace:e,onError:t}){let n=(0,H.b)(),[i,a]=(0,v.useState)(""),[s,r]=(0,v.useState)(!1),o=(0,v.useRef)(null),l=tx.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:c,isLoading:d}=(e=>{let t,n,i,a,s,r,o=(0,h.c)(17),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.allUsers||o[3]!==l.query||o[4]!==l.spaceId||o[5]!==l.spaceOwner?(n=async()=>{let e=(0,dT.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=l.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,n=await (0,nr.lS)(t);if(!n.ok)throw Error("Failed to fetch suggested collaborators");return(await n.json()).suggestions.map(m5)},o[2]=l.allUsers,o[3]=l.query,o[4]=l.spaceId,o[5]=l.spaceOwner,o[6]=n):n=o[6];let c=!!l.query;o[7]!==t||o[8]!==n||o[9]!==c?(i={queryKey:t,queryFn:n,enabled:c},o[7]=t,o[8]=n,o[9]=c,o[10]=i):i=o[10];let d=(0,ns.I)(i);return o[11]!==d?({data:a,...s}=d,o[11]=d,o[12]=a,o[13]=s):(a=o[12],s=o[13]),o[14]!==a||o[15]!==s?(r={data:a,...s},o[14]=a,o[15]=s,o[16]=r):r=o[16],r})({input:{query:(0,v.useDeferredValue)(i.startsWith("@")?i.trim().slice(1):i.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:l&&!e.ownerIsOrg}}),{collaborators:u,addCollaborator:p,error:f,isLoading:g}=m4(e.owner,e.id);async function y(i){if(u?.some(e=>e.actor_id===i.id&&e.actor_type===i.actor_type)){a(""),r(!1);return}try{await p({actor_id:i.id,role_name:"custom_copilot_reader",actor_type:i.actor_type}),a(""),!e.ownerIsOrg&&u&&u?.length<=1&&n.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),r(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,v.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,v.useEffect)(()=>{r(!!(i&&!d&&c&&c.length>0))},[i,c,d]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,m.jsxs)("div",{className:m6.copyLinkSection,style:{position:"relative"},children:[(0,m.jsx)(cL.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:i,onChange:e=>a(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),s&&c&&(0,m.jsx)("div",{ref:o,children:(0,m.jsx)(hn,{items:c,onSelect:y})})]})]}),g?(0,m.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,m.jsx)(tG.A,{})}):f?(0,m.jsx)(q.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):u&&u.length>0?(0,m.jsx)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:u.map(n=>(0,m.jsx)(m8,{actor:n,copilotSpace:e,collaboratorsCount:u.length,onError:t},`${n.actor_type}-${n.actor_id}`))}):(0,m.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function m8(e){let t,n,i,a,s,r,o,l,c,d=(0,h.c)(27),{actor:u,copilotSpace:p,onError:f,collaboratorsCount:g}=e,y="user"===u.actor_type?u.display_login:u.slug,x="team"===u.actor_type;return d[0]!==u.avatar_url||d[1]!==x?(t=(0,m.jsx)(i6.r,{src:u.avatar_url,className:"mr-2",square:x,size:32}),d[0]=u.avatar_url,d[1]=x,d[2]=t):t=d[2],d[3]!==y?(n=(0,m.jsx)("b",{children:y}),d[3]=y,d[4]=n):n=d[4],d[5]!==y||d[6]!==n?(i=(0,m.jsx)("span",{className:"ml-1",children:(0,m.jsx)(i8.A,{maxWidth:"230px",title:y,inline:!0,children:n})}),d[5]=y,d[6]=n,d[7]=i):i=d[7],d[8]!==u.name?(a=(0,m.jsx)("p",{children:u.name}),d[8]=u.name,d[9]=a):a=d[9],d[10]!==u.name||d[11]!==a?(s=(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,m.jsx)(i8.A,{maxWidth:"230px",title:u.name,inline:!0,children:a})}),d[10]=u.name,d[11]=a,d[12]=s):s=d[12],d[13]!==i||d[14]!==s?(r=(0,m.jsxs)("div",{className:"d-flex flex-column mt-1",children:[i,s]}),d[13]=i,d[14]=s,d[15]=r):r=d[15],d[16]!==t||d[17]!==r?(o=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,r]}),d[16]=t,d[17]=r,d[18]=o):o=d[18],d[19]!==u||d[20]!==g||d[21]!==p||d[22]!==f?(l=(0,m.jsx)(ht,{actor:u,onError:f,copilotSpace:p,collaboratorsCount:g}),d[19]=u,d[20]=g,d[21]=p,d[22]=f,d[23]=l):l=d[23],d[24]!==o||d[25]!==l?(c=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),d[24]=o,d[25]=l,d[26]=c):c=d[26],c}let m9=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],he={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function ht({actor:e,onError:t,copilotSpace:n,collaboratorsCount:i}){let a=(0,H.b)(),[s,r]=(0,v.useState)(!1),o=(0,v.useRef)(null),l=m9.find(t=>t.value===e.role),{updateCollaborator:c,removeCollaborator:d,isUpdatePending:u,isRemovePending:h}=m4(n.owner,n.id);async function p(n){try{await c({actor_id:e.actor_id,role_name:n,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{r(!1)}}async function f(){try{await d({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!n.ownerIsOrg&&i<=2&&a.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...n,collaborative:!1}}),r(!1)}}return(0,m.jsxs)(eX.W,{onOpenChange:r,anchorRef:o,open:s,children:[(0,m.jsx)(eX.W.Button,{disabled:e.disabled,loading:u||h,variant:"invisible",className:"text-small",ref:o,onClick:()=>r(!0),"aria-label":`Change role for ${e.name}`,children:(0,m.jsx)(i8.A,{title:l?.text||"",inline:!0,children:l?.text})}),(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsxs)(eZ.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[m9.map(e=>(0,m.jsxs)(eZ.l.Item,{selected:e.value===l?.value,onSelect:()=>p(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:he[e.value]})})]},e.value)),(0,m.jsx)(eZ.l.Divider,{}),(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:()=>f(),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:"Remove"})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function hn(e){let t,n,i=(0,h.c)(7),{items:a,onSelect:s}=e;if(i[0]!==a||i[1]!==s){let e;i[3]!==s?(e=e=>{let t=`${e.actor_type}-${e.id}`,n="user"===e.actor_type?e.login:e.slug;return(0,m.jsxs)(eZ.l.Item,{onSelect:()=>s(e),role:"option",children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(i6.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,m.jsx)("span",{className:"text-bold",children:n}),e.name&&(0,m.jsx)(eZ.l.Description,{children:e.name})]},t)},i[3]=s,i[4]=e):e=i[4],t=a.map(e),i[0]=a,i[1]=s,i[2]=t}else t=i[2];return i[5]!==t?(n=(0,m.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:m6.spacesSuggestionsList,children:(0,m.jsx)(eZ.l,{children:t})}),i[5]=t,i[6]=n):n=i[6],n}try{m7.displayName||(m7.displayName="SpaceCollaborators")}catch{}try{m8.displayName||(m8.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{ht.displayName||(ht.displayName="ActorRoleSelect")}catch{}try{hn.displayName||(hn.displayName="SpacesSuggestionsList")}catch{}let hi={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",errorBanner:"SpaceSharingDialog-module__errorBanner--SkBp1",visibilityDropdown:"SpaceSharingDialog-module__visibilityDropdown--HMESi",visibilityChoice:"SpaceSharingDialog-module__visibilityChoice--Z75rm",visibilityIcon:"SpaceSharingDialog-module__visibilityIcon--KK57C",attentionIcon:"SpaceSharingDialog-module__attentionIcon--lZ9Sq",accentIcon:"SpaceSharingDialog-module__accentIcon--q8VZ5",footerText:"SpaceSharingDialog-module__footerText--TJavK"};function ha(e){let t,n,i,a,s,r,o,l,c,d,u=(0,h.c)(23),{closeDialog:p,customCopilotId:f,userOwned:g}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[y,x]=(0,v.useState)(t),[b,_]=(0,v.useState)(!1),j=(0,v.useRef)(null),C=tx.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==g&&g,w=()=>(0,m.jsx)(hc,{copySharedLink:S,copied:b,isSpaceLoading:T,copilotSpace:L});u[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{j.current&&(clearTimeout(j.current),j.current=null)},i=[],u[1]=n,u[2]=i):(n=u[1],i=u[2]),(0,v.useEffect)(n,i);let N=`${to.fV.origin}${(0,dT.Cb)(e.customCopilotId)}`,S=()=>{(0,m3.D)(N),_(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{_(!1),j.current=null},2e3)},{isPending:I,data:k}=(0,dL.Ao)(f),T=I,L=k;return u[3]===Symbol.for("react.memo_cache_sentinel")?(a={narrow:"fullscreen"},u[3]=a):a=u[3],u[4]!==y.base||u[5]!==y.visibility?(s=y.base||y.visibility?(0,m.jsx)(q.l,{hideTitle:!0,title:"Unable to update space",description:y.visibility||y.base,"aria-label":"Critical",variant:"critical",className:hi.errorBanner}):null,u[4]=y.base,u[5]=y.visibility,u[6]=s):s=u[6],u[7]!==L?(r=L&&(0,m.jsx)(m7,{copilotSpace:L,onError:x}),u[7]=L,u[8]=r):r=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(eZ.l.Divider,{}),u[9]=o):o=u[9],u[10]!==L||u[11]!==T||u[12]!==e||u[13]!==C?(l=C?(0,m.jsx)(hh,{copilotSpace:L,isSpaceLoading:T,onError:x}):(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,m.jsx)(hs,{onError:x,copilotSpace:L,isSpaceLoading:T,...e})]}),u[10]=L,u[11]=T,u[12]=e,u[13]=C,u[14]=l):l=u[14],u[15]!==r||u[16]!==l?(c=(0,m.jsxs)(K.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[r,o,l]}),u[15]=r,u[16]=l,u[17]=c):c=u[17],u[18]!==p||u[19]!==w||u[20]!==c||u[21]!==s?(d=(0,m.jsxs)(tz.l,{position:a,title:"Share this space",renderFooter:w,onClose:p,className:hi.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[s,c]}),u[18]=p,u[19]=w,u[20]=c,u[21]=s,u[22]=d):d=u[22],d}function hs(e){let t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:x}=e,{data:b,isLoading:_,error:j}=(0,dL.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==_||f[3]!==x||f[4]!==b?(t=()=>{y||_||g&&b||x({visibility:"Could not load your space's visibility settings"})},n=[y,_,g,b,x],f[0]=g,f[1]=y,f[2]=_,f[3]=x,f[4]=b,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,v.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,w=b?.memberCount;return f[9]!==g.ownerAvatar?(i=(0,m.jsx)(i6.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=i):i=f[10],f[11]!==g.ownerDisplayName?(a=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=a):a=f[12],f[13]!==g.ownerDisplayName||f[14]!==a?(s=(0,m.jsx)(i8.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:a}),f[13]=g.ownerDisplayName,f[14]=a,f[15]=s):s=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=r):r=f[16],f[17]!==s?(o=(0,m.jsxs)("span",{className:"ml-1",children:[s,r]}),f[17]=s,f[18]=o):o=f[18],f[19]!==j||f[20]!==_||f[21]!==w||f[22]!==C?(l=C&&(0,m.jsxs)(m.Fragment,{children:[!_&&null!==w&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[w," ",1===w?"person":"people"]}),(_||j||null===w)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=j,f[20]=_,f[21]=w,f[22]=C,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==i||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[i,c]}),f[27]=i,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==x?(u=(0,m.jsx)(hl,{onError:x,copilotSpace:g}),f[30]=g,f[31]=x,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(p=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=p):p=f[35],p}let hr=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],ho={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function hl({copilotSpace:e,onError:t}){let[n,i]=(0,v.useState)(!1),a=(0,v.useRef)(null),s=hr.find(t=>t.value===e.baseRole),{upsertCopilotSpace:r,isPending:o}=(0,m2.$)(e);async function l(e){if(!o)try{await r({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{i(!1)}}return e.adminable?(0,m.jsxs)(eX.W,{onOpenChange:i,anchorRef:a,open:n,children:[(0,m.jsx)(eX.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:a,onClick:()=>i(!0),children:(0,m.jsx)(i8.A,{title:s?.text||"",inline:!0,children:s?.text})}),(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsx)(eZ.l,{selectionVariant:"single",children:hr.map(e=>(0,m.jsxs)(eZ.l.Item,{selected:e.value===s?.value,onSelect:()=>l(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:ho[e.value]})})]},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:s?.text||"",className:"text-small text-light",children:s?.text})})}function hc(e){let t,n,i,a,s,r=(0,h.c)(12),{copySharedLink:o,copied:l,isSpaceLoading:c,copilotSpace:d}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},r[0]=t):t=r[0],r[1]!==d?.ownerIsOrg?(n=!d?.ownerIsOrg&&(0,m.jsxs)("div",{className:hi.footerText,children:[(0,m.jsx)(ef.InfoIcon,{}),(0,m.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),r[1]=d?.ownerIsOrg,r[2]=n):n=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:"90px"},r[3]=i):i=r[3],r[4]!==l||r[5]!==d||r[6]!==o||r[7]!==c?(a=(0,m.jsx)("div",{style:i,className:"d-flex flex-items-center gap-2",children:l?(0,m.jsx)(tm.Q,{className:"color-fg-success",disabled:c||!d,children:"Link copied"}):(0,m.jsx)(tm.Q,{onClick:o,leadingVisual:ef.LinkIcon,disabled:c||!d,children:"Copy link"})}),r[4]=l,r[5]=d,r[6]=o,r[7]=c,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s=(0,m.jsxs)(tz.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[n,a]}),r[9]=n,r[10]=a,r[11]=s):s=r[11],s}let hd={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:ef.LockIcon,color:"attention"},hu={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:ef.GlobeIcon,color:"accent"},hm=tx.W.copilotSpacesPublicAccessToUserOwnedSpaces?[hd,hu]:[hd];function hh({copilotSpace:e,isSpaceLoading:t,onError:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null),r=hm.find(t=>t.value===e?.baseRole)??hd,{upsertCopilotSpace:o,isPending:l}=(0,m2.$)(e);async function c(e){if(!l)try{await o({baseRole:e})}catch{n({base:"An error occurred while updating your space's visibility."})}finally{a(!1)}}let d=r.icon;return t?(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,m.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,m.jsxs)("div",{className:hi.visibilityChoice,children:[(0,m.jsx)("div",{className:(0,x.$)(hi.visibilityIcon,"accent"===r.color?hi.accentIcon:hi.attentionIcon),children:(0,m.jsx)(d,{size:16})}),(0,m.jsxs)("div",{className:"d-flex flex-column",children:[tx.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,m.jsxs)(eX.W,{onOpenChange:a,anchorRef:s,open:i,children:[(0,m.jsx)(eX.W.Button,{loading:l,variant:"invisible",className:hi.visibilityDropdown,ref:s,onClick:()=>a(!0),disabled:!e.adminable,children:r.text}),(0,m.jsx)(eX.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,m.jsx)(eZ.l,{selectionVariant:"single",children:hm.map(t=>{let n=t.icon;return(0,m.jsxs)(eZ.l.Item,{selected:t.value===e.baseRole,onSelect:()=>c(t.value),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(n,{})}),(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,m.jsx)("span",{className:hi.visibilityDropdown,children:r.text}),(0,m.jsx)("span",{className:"text-small color-fg-muted p-1",children:r.description})]})]})})]}):(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{ha.displayName||(ha.displayName="SpaceSharingDialog")}catch{}try{hs.displayName||(hs.displayName="VisibilitySettings")}catch{}try{hl.displayName||(hl.displayName="BaseRoleSelect")}catch{}try{hc.displayName||(hc.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{hh.displayName||(hh.displayName="UserOwnedVisibilitySettings")}catch{}function hp(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C=(0,h.c)(45),{onDelete:w,copilot:N}=e,[S,I]=(0,v.useState)(null),[k,T]=(0,v.useState)(!1),[L,E]=(0,v.useState)(!1),R=(0,v.useRef)(null),A=(0,Z.Zp)(),D=tx.W.copilotSpacesReadAccessToUserOwnedSpaces,P=N?.ownerIsOrg&&N?.adminable,O=D&&!N?.ownerIsOrg&&N?.adminable,M=P||O,F="duplicate"===S,{data:B,isLoading:$}=(0,dL.Ao)(F?N:null);"duplicate"===S&&L&&!$&&B&&E(!1),C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,nI.flushSync)(()=>I(null)),R.current?.focus()},C[0]=t):t=C[0];let U=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),U()},C[1]=n):n=C[1];let V=n;C[2]===Symbol.for("react.memo_cache_sentinel")?(i=async e=>{U(),T(!0),await e(),T(!1)},C[2]=i):i=C[2];let H=i;C[3]!==w?(a=async()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await H(w)},C[3]=w,C[4]=a):a=C[4];let W=a;C[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),I("share")},C[5]=s):s=C[5];let q=s;C[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),I("duplicate"),e.preventDefault()},C[6]=r):r=C[6];let z=r;C[7]!==k?(o=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{loading:k,icon:ef.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:hf})}),C[7]=k,C[8]=o):o=C[8],C[9]!==N||C[10]!==A?(l=N.editable&&(0,m.jsxs)(eZ.l.Item,{onSelect:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),A((0,dT.Cb)(N))},children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.PencilIcon,{})}),"Edit"]}),C[9]=N,C[10]=A,C[11]=l):l=C[11],C[12]!==M?(c=M&&(0,m.jsxs)(eZ.l.Item,{onSelect:q,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.ShareIcon,{})}),"Share"]}),C[12]=M,C[13]=c):c=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{z(e)},C[14]=d):d=C[14];let G=$&&"duplicate"===S;return C[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CopyIcon,{})}),C[15]=u):u=C[15],C[16]!==G?(p=(0,m.jsxs)(eZ.l.Item,{onSelect:d,loading:G,children:[u,"Duplicate"]}),C[16]=G,C[17]=p):p=C[17],C[18]!==N.adminable?(f=N.adminable&&(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),I("delete")},children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]}),C[18]=N.adminable,C[19]=f):f=C[19],C[20]!==p||C[21]!==f||C[22]!==l||C[23]!==c?(g=(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsxs)(eZ.l,{children:[l,c,p,f]})}),C[20]=p,C[21]=f,C[22]=l,C[23]=c,C[24]=g):g=C[24],C[25]!==L||C[26]!==g||C[27]!==o?(y=(0,m.jsxs)(eX.W,{anchorRef:R,open:L,onOpenChange:E,children:[o,g]}),C[25]=L,C[26]=g,C[27]=o,C[28]=y):y=C[28],C[29]!==W||C[30]!==S?(x="delete"===S?(0,m.jsx)(hg,{onCancel:U,onConfirm:W}):null,C[29]=W,C[30]=S,C[31]=x):x=C[31],C[32]!==N||C[33]!==P||C[34]!==O||C[35]!==S?(b="share"===S?(0,m.jsx)(ha,{closeDialog:V,customCopilotId:N,userOwned:!P&&O}):null,C[32]=N,C[33]=P,C[34]=O,C[35]=S,C[36]=b):b=C[36],C[37]!==B||C[38]!==S?(_="duplicate"===S&&B?(0,m.jsx)(mX.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),I(null)},initialSpace:B}):null,C[37]=B,C[38]=S,C[39]=_):_=C[39],C[40]!==y||C[41]!==x||C[42]!==b||C[43]!==_?(j=(0,m.jsxs)(m.Fragment,{children:[y,x,b,_]}),C[40]=y,C[41]=x,C[42]=b,C[43]=_,C[44]=j):j=C[44],j}function hf(){return(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let hg=({onConfirm:e,onCancel:t})=>{let[n,i]=(0,v.useState)(!1),a=async()=>{i(!0),(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{i(!1)}};return(0,m.jsx)(m1.K,{title:"Delete space",onClose:async e=>{n||("confirm"===e?await a():((0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()))},confirmButtonContent:n?(0,m.jsx)(tG.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{hp.displayName||(hp.displayName="CopilotSpacesMenu")}catch{}try{hg.displayName||(hg.displayName="DeleteDialog")}catch{}let hy={starButton:"SpacesHeader-module__starButton--RT51O"};var hx=n(44956),hv=n(4175);function hb({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:i,maxDescriptionLength:a}){let{upsertCopilotSpace:s,isPending:r}=(0,m2.$)(e),[o,l]=(0,v.useState)(e.description??""),[c,d]=(0,v.useState)(null);async function u(){try{let e=await s({description:o});n?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function h(){l(e.description??""),t()}return(0,m.jsx)(tz.l,{title:"Description",onClose:h,returnFocusRef:i,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:"p-3",children:[c&&(0,m.jsx)(q.l,{variant:"critical",title:c,className:"mb-2"}),(0,m.jsxs)(lS.A,{children:[(0,m.jsx)(lS.A.Label,{visuallyHidden:!0,children:"Description"}),(0,m.jsx)(hv.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,m.jsx)(h_,{text:o,promptCharLimit:a})]})]}),renderFooter:()=>(0,m.jsx)(hx.m,{onCancel:h,onSave:u,isLoading:r,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function h_(e){let t,n,i,a,s=(0,h.c)(10),{text:r,promptCharLimit:o}=e,l=r.length>o;s[0]!==r.length?(t=r.length.toLocaleString(),s[0]=r.length,s[1]=t):t=s[1],s[2]!==o?(n=o.toLocaleString(),s[2]=o,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(i=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),s[4]=t,s[5]=n,s[6]=i):i=s[6];let c=i;return s[7]!==c||s[8]!==l?(a=l?(0,m.jsx)(lS.A.Validation,{variant:"error",children:c}):(0,m.jsx)(lS.A.Caption,{children:c}),s[7]=c,s[8]=l,s[9]=a):a=s[9],a}try{hb.displayName||(hb.displayName="DescriptionDialog")}catch{}try{h_.displayName||(h_.displayName="CharacterCount")}catch{}function hj(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j,C,w,N,S,I,k,T,L,E,R,A,D=(0,h.c)(76),{copilotSpace:P}=e,O=(0,$.Pk)(),M=(0,H.b)(),B=(0,Z.zy)(),U=(0,dA.G)(),{updateGlobalNavigationBreadcrumbs:V}=mL(),W=(0,dv.Z)(),[q,z]=(0,v.useState)(!1),[G,K]=(0,v.useState)(!1),[Q,Y]=(0,v.useState)(!1),[J,X]=(0,v.useState)(!1),[ee,et]=(0,v.useState)(null),en=(0,v.useRef)(null),ei=(0,v.useRef)(null),ea=(0,v.useRef)(null),es=B.pathname,er=U&&es!==n6.VR,eo=tx.W.copilotSpacesReadAccessToUserOwnedSpaces,el=eo&&tx.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:ec}=(0,dL.Ao)(U),{mutateAsync:ed}=(0,dL.$7)(),{copilotSpacesConfig:eu}=(0,F.X)(),{maxDescriptionLength:em}=eu;e:if(el)t=P??ec??null;else{let e;if(!U){t=null;break e}D[0]!==U||D[1]!==O.customCopilots?(e=(0,dT.JB)(O.customCopilots,U),D[0]=U,D[1]=O.customCopilots,D[2]=e):e=D[2],t=e}let eh=t,ep=eh?.ownerIsOrg&&eh?.adminable,eg=eo&&!eh?.ownerIsOrg&&U&&eh?.adminable,ey=ep||eg,{starCopilotSpace:ex,isLoading:ev}=((e,t)=>{let n,i,a,s,r,o,l,c=(0,h.c)(20),d=tx.W.copilotSpacesReadAccessToUserOwnedSpaces&&tx.W.copilotSpacesPublicAccessToUserOwnedSpaces,u=(0,H.b)(),{customCopilots:m}=(0,$.Pk)(),p=(0,sn.jE)();c[0]!==e||c[1]!==p||c[2]!==t?(n=async()=>{if(!d&&e&&await p.invalidateQueries({queryKey:(0,m0.dp)(e)}),d&&t){let e={id:t.id,owner:t.owner};await p.invalidateQueries({queryKey:(0,m0.dp)(e)})}return p.invalidateQueries({queryKey:m0.O6})},c[0]=e,c[1]=p,c[2]=t,c[3]=n):n=c[3],c[4]!==m||c[5]!==e||c[6]!==u||c[7]!==t?(i=async n=>{let i=d?t:(0,dT.JB)(m,e);if(!i)return;let a=d?{id:i.id,owner:i.owner}:e,s=`${(0,dT.Cb)(a)}/stars`,r=n.starred?"POST":"DELETE";if((await (0,nr.lS)(s,{method:r})).ok)return i={...i,starred:n.starred},u.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:i}),i},c[4]=m,c[5]=e,c[6]=u,c[7]=t,c[8]=i):i=c[8],c[9]!==n||c[10]!==i?(a={onSuccess:n,mutationFn:i},c[9]=n,c[10]=i,c[11]=a):a=c[11];let f=(0,na.n)(a);return c[12]!==f?({mutateAsync:o,isPending:s,...r}=f,c[12]=f,c[13]=s,c[14]=r,c[15]=o):(s=c[13],r=c[14],o=c[15]),c[16]!==s||c[17]!==r||c[18]!==o?(l={starCopilotSpace:o,isLoading:s,...r},c[16]=s,c[17]=r,c[18]=o,c[19]=l):l=c[19],l})(U,eh);D[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{X(!1),z(!1),K(!1),Y(!1)},D[3]=n):n=D[3],D[4]!==U?(i=[U],D[4]=U,D[5]=i):i=D[5],(0,v.useEffect)(n,i),D[6]!==V?(a=()=>{V()},s=[V],D[6]=V,D[7]=a,D[8]=s):(a=D[7],s=D[8]),(0,v.useEffect)(a,s),D[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),X(!1)},D[9]=r):r=D[9];let eb=r;D[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),K(!1)},D[10]=o):o=D[10];let e_=o;D[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),z(!1)},D[11]=l):l=D[11];let ej=l;D[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),X(!0)},D[12]=c):c=D[12];let eC=c;D[13]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),K(!0)},D[13]=d):d=D[13];let ew=d;D[14]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),z(!0)},D[14]=u):u=D[14];let eN=u;D[15]!==ed||D[16]!==W||D[17]!==U?(p=async()=>{if(U)try{await ed(U),z(!1),W(n6.VR)}catch(e){et(e instanceof Error?e:Error(String(e))),ej()}},D[15]=ed,D[16]=W,D[17]=U,D[18]=p):p=D[18];let eS=p;D[19]!==eh||D[20]!==ex?(f=()=>{eh&&ex&&((0,tv.BI)("dotcom_chat.activate",{target:eh.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ex({starred:!eh.starred}))},D[19]=eh,D[20]=ex,D[21]=f):f=D[21];let eI=f,ek=eh?.adminable;D[22]!==ek?(g=ek&&(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:eN,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]}),D[22]=ek,D[23]=g):g=D[23];let eT=g;D[24]!==eh?(y=eh&&(0,m.jsxs)(eZ.l.Item,{onSelect:eC,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CopyIcon,{})}),"Duplicate"]}),D[24]=eh,D[25]=y):y=D[25];let eL=y;D[26]!==eT||D[27]!==eL||D[28]!==er||D[29]!==O?(x=er&&!O.selectedThreadID&&(eL||eT)?(0,m.jsxs)(m.Fragment,{children:[eL,eT]}):null,D[26]=eT,D[27]=eL,D[28]=er,D[29]=O,D[30]=x):x=D[30];let eE=x;D[31]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsx)(tm.Q,{variant:"link",onClick:()=>{ei.current?.openDialog(),(0,tv.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}),D[31]=b):b=D[31];let eR=b;D[32]!==ey?(_=ey&&(0,m.jsx)(tt.K,{icon:ef.ShareIcon,onClick:ew,variant:"invisible","aria-label":"Share space",...(0,tP.G)("share-space-button")}),D[32]=ey,D[33]=_):_=D[33];let eA=_;D[34]!==eh||D[35]!==eI||D[36]!==ev||D[37]!==U?(j=eh&&U&&(0,m.jsx)(tt.K,{ref:en,onClick:eI,disabled:ev,icon:eh.starred?ef.StarFillIcon:ef.StarIcon,className:eh.starred?hy.starButton:void 0,variant:"invisible","aria-label":eh.starred?"Unstar space":"Star space"}),D[34]=eh,D[35]=eI,D[36]=ev,D[37]=U,D[38]=j):j=D[38];let eD=j;D[39]===Symbol.for("react.memo_cache_sentinel")?(C=(0,m.jsx)(tt.K,{icon:ef.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:hC,...(0,tP.G)("spaces-doc-link")}),D[39]=C):C=D[39],D[40]!==eD||D[41]!==eA?(w=(0,m.jsxs)(m.Fragment,{children:[eR,C,eA,eD]}),D[40]=eD,D[41]=eA,D[42]=w):w=D[42];let eP=w;D[43]!==M?(N=e=>{M.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},D[43]=M,D[44]=N):N=D[44];let eO=N,eM=eh?.name||"";return D[45]!==eP||D[46]!==eE||D[47]!==eM?(S=(0,m.jsx)(mP,{showPreviewPaneButton:!1,conversationSpecificItems:eE,customButtons:eP,defaultName:eM}),D[45]=eP,D[46]=eE,D[47]=eM,D[48]=S):S=D[48],D[49]!==ee?(I=ee&&(0,m.jsxs)(mZ.A,{variant:"danger",children:[(0,m.jsx)(ef.AlertIcon,{}),"There was a problem deleting your space."]}),D[49]=ee,D[50]=I):I=D[50],D[51]!==ec||D[52]!==J?(k=J&&ec?(0,m.jsx)(mX.D,{dialogTitle:"Duplicate Space",closeDialog:eb,initialSpace:ec}):null,D[51]=ec,D[52]=J,D[53]=k):k=D[53],D[54]!==eS||D[55]!==U||D[56]!==q?(T=q&&U?(0,m.jsx)(hg,{onCancel:ej,onConfirm:eS}):null,D[54]=eS,D[55]=U,D[56]=q,D[57]=T):T=D[57],D[58]!==ep||D[59]!==U||D[60]!==G||D[61]!==eg?(L=G&&U?(0,m.jsx)(ha,{closeDialog:e_,customCopilotId:U,userOwned:!!(!ep&&eg)}):null,D[58]=ep,D[59]=U,D[60]=G,D[61]=eg,D[62]=L):L=D[62],D[63]!==eh||D[64]!==eO||D[65]!==em||D[66]!==Q?(E=Q&&eh?(0,m.jsx)(hb,{copilotSpace:eh,onClose:()=>Y(!1),returnFocusRef:en,maxDescriptionLength:em,onSaved:eO}):null,D[63]=eh,D[64]=eO,D[65]=em,D[66]=Q,D[67]=E):E=D[67],D[68]===Symbol.for("react.memo_cache_sentinel")?(R=(0,m.jsx)(cP.l,{ref:ei,mode:"immersive",returnFocusRef:ea}),D[68]=R):R=D[68],D[69]!==S||D[70]!==I||D[71]!==k||D[72]!==T||D[73]!==L||D[74]!==E?(A=(0,m.jsxs)(m.Fragment,{children:[S,I,k,T,L,E,R]}),D[69]=S,D[70]=I,D[71]=k,D[72]=T,D[73]=L,D[74]=E,D[75]=A):A=D[75],A}function hC(){return(0,tv.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{hj.displayName||(hj.displayName="SpacesHeader")}catch{}var hw=n(81829);let hN={container:"InlineEditableText-module__container--aZo_B",textarea:"InlineEditableText-module__textarea--5ls6_",placeholder:"InlineEditableText-module__placeholder--e7Xf4",readModeContainer:"InlineEditableText-module__readModeContainer--ysnii",editIcon:"InlineEditableText-module__editIcon--UTuha",readModeText:"InlineEditableText-module__readModeText--MyHNO"},hS={circleProgressBar:"CircleProgressBar-module__circleProgressBar--LGSpA",exceeded:"CircleProgressBar-module__exceeded--duTAI"};function hI({value:e}){let t=e>100;return(0,m.jsx)("div",{className:(0,x.$)(hS.circleProgressBar,t?hS.exceeded:""),style:{"--progress":`${e}%`},children:(0,m.jsxs)("progress",{value:e,max:"100",style:{visibility:"hidden",height:0,width:0},children:[e,"%"]})})}try{hI.displayName||(hI.displayName="CircleProgressBar")}catch{}let hk={actionButtons:"InlineEditActions-module__actionButtons--yWSpe",cancelButton:"InlineEditActions-module__cancelButton--a0gzS",saveButton:"InlineEditActions-module__saveButton--pMcIj",line:"InlineEditActions-module__line--vKo7v",characterCountStatus:"InlineEditActions-module__characterCountStatus--wRiqc",characterCountText:"InlineEditActions-module__characterCountText--QcUxR"};function hT({value:e,maxLength:t,onSave:n,onCancel:i}){let a=!!(t&&t>0),s=a&&e.length>(t||0);return(0,m.jsxs)("div",{className:hk.actionButtons,children:[a&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hE,{text:e,promptCharLimit:t||0}),(0,m.jsx)(hL,{})]}),(0,m.jsx)(tt.K,{className:hk.cancelButton,variant:"invisible",icon:ef.XIcon,"aria-label":"Cancel",size:"small",onClick:i}),(0,m.jsx)(tt.K,{className:hk.saveButton,variant:"invisible",icon:ef.CheckIcon,"aria-label":"Save",disabled:s,size:"small",onClick:n})]})}let hL=()=>(0,m.jsx)("div",{className:hk.line});function hE({text:e,promptCharLimit:t}){return(0,m.jsxs)("div",{className:hk.characterCountStatus,children:[(0,m.jsx)(hI,{value:e.length/t*100}),(0,m.jsx)("span",{className:hk.characterCountText,children:(t-e.length).toLocaleString()})]})}try{hT.displayName||(hT.displayName="InlineEditActions")}catch{}try{hL.displayName||(hL.displayName="Line")}catch{}try{hE.displayName||(hE.displayName="CharacterCountStatus")}catch{}function hR({value:e,onChange:t,maxLength:n=null,placeholder:i="",className:a="",defaultEditing:s=!1}){let[r,o]=(0,v.useState)(s),[l,c]=(0,v.useState)(e),[d,u]=(0,v.useState)(null),h=(0,v.useRef)(null),p=(0,v.useRef)(null),f=(0,v.useRef)(null);(0,v.useEffect)(()=>{let e=e=>{r&&f.current&&!f.current.contains(e.target)&&(o(!1),t(l.trim()))};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r,l,f,t]),(0,v.useEffect)(()=>{h.current&&u(h.current.offsetHeight)},[e]),(0,v.useEffect)(()=>{r&&p.current&&(p.current.focus(),p.current.style.height=`${d}px`)},[r,d]);let g=()=>{o(!1),t(l.trim())};return(0,m.jsxs)("div",{ref:f,className:(0,x.$)(hN.container,a),children:[r?(0,m.jsx)(hv.Ay,{ref:p,value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:i,className:hN.textarea,style:{height:d||"auto"},resize:"none"}):(0,m.jsxs)("button",{ref:h,onClick:()=>o(!0),className:hN.readModeContainer,children:[(0,m.jsx)("span",{className:(0,x.$)(hN.readModeText,a),children:e?.trim()||(0,m.jsx)("span",{className:hN.placeholder,children:i})}),(0,m.jsx)(ef.PencilIcon,{className:hN.editIcon,size:16})]}),r&&(0,m.jsx)(hT,{value:l,maxLength:n,onSave:g,onCancel:()=>{o(!1),c(e)}})]})}try{hR.displayName||(hR.displayName="InlineEditableText")}catch{}var hA=n(77141);function hD(e){if(tx.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}let hP={container:"SpaceNotFoundComponent-module__container--IrGEt",description:"SpaceNotFoundComponent-module__description--klDGL",banner:"SpaceNotFoundComponent-module__banner--uHb2q",icon:"SpaceNotFoundComponent-module__icon--dQYtq"},hO=e=>{let t,n,i,a,s,r=(0,h.c)(7),{protectedOrganizations:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(ef.AlertIcon,{className:hP.icon}),n=(0,m.jsx)("h3",{children:"Space not found"}),i=(0,m.jsx)("p",{className:hP.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),r[0]=t,r[1]=n,r[2]=i):(t=r[0],n=r[1],i=r[2]),r[3]!==o?(a=o&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)(U.x,{protectedOrgs:o,redirectURI:hM}),r[3]=o,r[4]=a):a=r[4],r[5]!==a?(s=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:hP.container,children:[t,n,i,(0,m.jsx)("div",{className:hP.banner,children:a})]})}),r[5]=a,r[6]=s):s=r[6],s};try{hO.displayName||(hO.displayName="SpaceNotFoundComponent")}catch{}function hM(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}var hF=n(6219),hB=n(60905),h$=n(30456),hU=n(81075),hV=n(75735);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,hU._)(this,UploadableFileExtensions,hH))return(0,hU._)(this,UploadableFileExtensions,hH);let e=[...rO.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,hV._)(this,UploadableFileExtensions,hH,new Set(e.map(e=>e.toLowerCase()))),(0,hU._)(this,UploadableFileExtensions,hH)}static images(e){return new Set(hB.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var hH={writable:!0,value:void 0},hW=n(31971);let hq=()=>{let e,t,n,i,a=(0,h.c)(7);a[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:hG},a[0]=e):e=a[0];let s=(0,na.n)(e);return a[1]!==s?({mutateAsync:t,...n}=s,a[1]=s,a[2]=t,a[3]=n):(t=a[2],n=a[3]),a[4]!==t||a[5]!==n?(i={getCopilotSpaceResourceSizes:t,...n},a[4]=t,a[5]=n,a[6]=i):i=a[6],i};function hz(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,hW.M)(e)}}async function hG(e){let t={resources:e.resources?.map(hz)},n=await (0,nr.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),i=await n.json();if(!n.ok)throw i.errorMessages;return i}function hK({onResourcesAdded:e,onError:t,onUploadingChange:n}){let{availableModels:i}=(0,$.Pk)(),{hydrateResourcesWithSizePercentages:a}=function(){let{getCopilotSpaceResourceSizes:e}=hq();return{hydrateResourcesWithSizePercentages:(0,v.useCallback)(async t=>{if(0===t.length)return;let n=await e({resources:t});for(let e of t)e.sizePercentage=n[e.id]??0},[e])}}();return{processFiles:(0,v.useCallback)(async(s,{source:r})=>{if(s&&0!==s.length){(function(e,{source:t}){for(let n of((0,tv.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=hQ(n.name);(0,tv.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:n.type,fileSize:n.size,source:t})}})(s,{source:r}),n?.(!0),t?.([]);try{let{imageFiles:n,nonImageFiles:o}=function(e,t){let n=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let n=hQ(e.name);return t.has(n)}(t,n)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(s,i),[l,c]=await Promise.all([hZ(o),hJ(n,i)]),d=[...l.resources,...c.resources];await a(d),d.length>0&&(e(d),(0,dT.Pg)(d,r));let u=[...l.errorMessages,...c.errorMessages];u.length>0&&t?.(u)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{n?.(!1)}}},[i,e,t,a,n])}}function hQ(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function hY(e){let t=[],n=[];for(let i of e)"fulfilled"===i.status?"resource"in i.value?t.push(i.value.resource):n.push(i.value.error):n.push("An unexpected error occurred while processing a file.");return{errorMessages:n,resources:t}}async function hJ(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!tx.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let n=e.map(e=>hX(e,hB.s.getMimeTypes(t)));return hY(await Promise.allSettled(n))}async function hX(e,t){try{if(e.size>hB.s.getAttachmentSizeLimit())return{error:h3(e.name)};if(!t.includes(e.type))return{error:h2(e.name)};let{id:n,attachment:i}=hB.s.makeImageReference(e,""),a=await i.prefetch();return{resource:{id:n,type:"media_content",mediaType:e.type,name:e.name||"Image",url:a.href||"",copilotChatAttachmentId:a.id||0,height:i.height||0,width:i.width||0,markedForDestroy:!1}}}catch(t){var n,i;return n=t,i=e,n instanceof Error&&"FileSizeError"===n.name?{error:h3(i.name)}:{error:h1(i.name)}}}async function hZ(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>h0(e));return hY(await Promise.allSettled(t))}async function h0(e){try{var t;if(!e.type.startsWith("text/")){let t=hQ(e.name);if(!UploadableFileExtensions.text.has(t))return{error:h2(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let n=crypto.randomUUID(),i=await new h$.N(n,e).prefetch();return{resource:{id:n,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:i.id,url:i.href,markedForDestroy:!1}}}catch(a){var n=a,i=e;if(!(n instanceof hF.ZK))return{error:h1(i.name)};let t=n.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||h1(i.name)}}}function h1(e){return`An error occurred uploading "${e}".`}function h2(e){return`File "${e}" is not a supported file type.`}function h3(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],n=e,i=0;for(;n>=1024&&i<t.length-1;)n/=1024,i++;let a=Math.round(100*n)/100;return`${a}${t[i]}`}(hB.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let h4=(0,v.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:n},i)=>{let{processFiles:a}=hK({onResourcesAdded:e,onError:t,onUploadingChange:n}),{availableModels:s}=(0,$.Pk)(),r=(0,v.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...tx.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(s)):[]].join(","),[s]),o=(0,v.useRef)(null);return(0,v.useImperativeHandle)(i,()=>({addResources:()=>o.current?.click()})),(0,m.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:r,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(a(e.target.files,{source:"file-upload"}),e.target.value="")}})});h4.displayName="FileUploadInput";let UrlDetails=class UrlDetails{constructor(e,t="",n="",i="",a=0,s="",r="",o="unknown"){(0,f._)(this,"url",void 0),(0,f._)(this,"owner",void 0),(0,f._)(this,"repo",void 0),(0,f._)(this,"number",void 0),(0,f._)(this,"type",void 0),(0,f._)(this,"id",void 0),(0,f._)(this,"file_path",void 0),(0,f._)(this,"errorMessage",void 0),(0,f._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=n,this.repo=i,this.number=a,this.type=o,this.file_path=r,this.sha=s}};function h5(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function h6(e){let{input:t,spaceOwner:n}=e,i={resources_attributes:t.map(h5),space_owner:n},a=await (0,nr.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:i}),s=await a.json();if(!a.ok)throw s;return s}function h7(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_=(0,h.c)(62),{onClose:j,onSave:C,resourcesToSave:w,owner:N,resourceCounts:S}=e,[I,k]=(0,v.useState)(!1),[T,L]=(0,v.useState)(h9),[E,R]=(0,v.useState)(!1),[A,D]=(0,v.useState)(!1),{validateUrlResources:P}=(()=>{let e,t,n,i,a=(0,h.c)(7);a[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:h6},a[0]=e):e=a[0];let s=(0,na.n)(e);return a[1]!==s?({mutateAsync:n,...t}=s,a[1]=s,a[2]=t,a[3]=n):(t=a[2],n=a[3]),a[4]!==t||a[5]!==n?(i={validateUrlResources:n,...t},a[4]=t,a[5]=n,a[6]=i):i=a[6],i})();if(_[0]!==I||_[1]!==j||_[2]!==C||_[3]!==N||_[4]!==w||_[5]!==T||_[6]!==P){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),I||(k(!0),i().finally(()=>{k(!1)}))},_[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.sha,i="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${n}/${i}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.number,i=e.type;return`${t}/${n}/${i}`}return""},_[8]=e):e=_[8];let n=e,i=async()=>{R(!1),D(!1);let e=(()=>{let e=new Set(w?.map(e=>n(e))??[]),t=new Set;return T.filter(i=>{let a=n(i);return!(t.has(a)||e.has(a))&&""!==i.url.trim()&&(t.add(a),!0)})})(),t=e.filter(e=>"unknown"===e.type||N&&e.owner!==N);if(t.length>0){L(T.map(e=>N&&e.owner&&e.owner!==N?{...e,errorMessage:`This doesn't belong to the ${N} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),R(!0);return}if(0===e.length)return void j();try{let t=await P({input:e,spaceOwner:N});C(t),(0,dT.Pg)(t,"url-dialog"),j()}catch(e){if(Array.isArray(e)){for(let t of e){let e=T.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}R(!0)}}};_[0]=I,_[1]=j,_[2]=C,_[3]=N,_[4]=w,_[5]=T,_[6]=P,_[7]=t}else t=_[7];let O=!!S&&S.currentResourceCount+T.length+1>S.maxResourceCount;_[9]!==T||_[10]!==O?(n=()=>{if(O)return void D(!0);L([...T,new UrlDetails(crypto.randomUUID())])},_[9]=T,_[10]=O,_[11]=n):n=_[11];let M=n,F=A&&S?`You can select a maximum of ${S.maxResourceCount} sources.`:null;_[12]!==A||_[13]!==S?(i=e=>{A&&S&&(S.currentResourceCount+e.length>S.maxResourceCount||D(!1))},_[12]=A,_[13]=S,_[14]=i):i=_[14];let B=i;_[15]!==B||_[16]!==T?(a=e=>{let t=[...T];t.splice(e,1),L(t),B(t)},_[15]=B,_[16]=T,_[17]=a):a=_[17];let $=a;if(_[18]!==B||_[19]!==T){s=(t,n)=>{let i=[...T],a=e(n,i[t]||new UrlDetails(crypto.randomUUID()));i[t]=a,L(i),B(i)};let e=h8;_[18]=B,_[19]=T,_[20]=s}else s=_[20];if(_[21]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen"},_[21]=r):r=_[21],_[22]!==t||_[23]!==I||_[24]!==j||_[25]!==F?(o=()=>(0,m.jsxs)(tz.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:F&&(0,m.jsx)(lS.A.Validation,{variant:"error",children:F})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(tm.Q,{onClick:j,children:"Cancel"}),(0,m.jsx)(tm.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),_[22]=t,_[23]=I,_[24]=j,_[25]=F,_[26]=o):o=_[26],_[27]!==E?(l=E&&(0,m.jsx)(q.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),_[27]=E,_[28]=l):l=_[28],_[29]!==N?(c=N&&(0,m.jsx)(r0.JR,{html:`from the <b>${N}</b> organization`}),_[29]=N,_[30]=c):c=_[30],_[31]!==c?(d=(0,m.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",c," you want to add. You can include issues and pull requests."]}),_[31]=c,_[32]=d):d=_[32],_[33]!==t?(u={"github:submit-form":()=>t()},_[33]=t,_[34]=u):u=_[34],_[35]!==E||_[36]!==s||_[37]!==$||_[38]!==T){let e;_[40]!==E||_[41]!==s||_[42]!==$||_[43]!==T.length?(e=(e,t)=>(0,m.jsxs)("div",{style:{width:"100%"},children:[(0,m.jsx)(pe,{index:t,removeUrlTextInputRow:$,inputCount:T.length,updateUrls:s,setIsUpdating:k,urlValue:e.url}),E&&void 0!==e.errorMessage&&(0,m.jsx)(lS.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),_[40]=E,_[41]=s,_[42]=$,_[43]=T.length,_[44]=e):e=_[44],p=T.map(e),_[35]=E,_[36]=s,_[37]=$,_[38]=T,_[39]=p}else p=_[39];return _[45]!==p?(f=(0,m.jsx)(K.B,{direction:"vertical",align:"center",children:p}),_[45]=p,_[46]=f):f=_[46],_[47]!==t||_[48]!==f?(g=(0,m.jsx)("form",{onSubmit:t,children:f}),_[47]=t,_[48]=f,_[49]=g):g=_[49],_[50]!==g||_[51]!==u?(y=(0,m.jsx)(tq.tL,{commands:u,children:g}),_[50]=g,_[51]=u,_[52]=y):y=_[52],_[53]!==M?(x=(0,m.jsx)(tm.Q,{leadingVisual:ef.PlusIcon,className:"mt-3",onClick:M,children:"Add another"}),_[53]=M,_[54]=x):x=_[54],_[55]!==j||_[56]!==y||_[57]!==x||_[58]!==o||_[59]!==l||_[60]!==d?(b=(0,m.jsxs)(tz.l,{position:r,width:"large",title:"Add via GitHub URL",onClose:j,renderFooter:o,children:[l,d,y,x]}),_[55]=j,_[56]=y,_[57]=x,_[58]=o,_[59]=l,_[60]=d,_[61]=b):b=_[61],b}function h8(e,t){let n=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),i=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),a=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_issue"):i?(t.owner=i[1]??"",t.repo=i[2]??"",t.number=parseInt(i[3]??"0",10),t.type="github_pull_request"):a&&(t.owner=a[1]??"",t.repo=a[2]??"",t.sha=a[3]??"",t.file_path=a[4]??"",t.type="github_file"),t}function h9(){return[new UrlDetails(crypto.randomUUID())]}function pe(e){let t,n,i,a,s,r,o,l=(0,h.c)(18),{index:c,removeUrlTextInputRow:d,inputCount:u,updateUrls:p,setIsUpdating:f,urlValue:g}=e,[y,x]=(0,v.useState)(g),[b,_]=(0,v.useState)(!1);l[0]!==g?(t=()=>{x(g)},n=[g],l[0]=g,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,v.useEffect)(t,n);let j=e=>{let t=e.target.value;x(t),b||(_(!0),f(!0)),C(t)};l[3]!==c||l[4]!==f||l[5]!==p?(i=e=>{p(c,e),_(!1),f(!1)},l[3]=c,l[4]=f,l[5]=p,l[6]=i):i=l[6];let C=(0,cT.d)(i,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(lS.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=a):a=l[7],l[8]!==j||l[9]!==y?(s=(0,m.jsx)(cL.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:j,className:"width-full"}),l[8]=j,l[9]=y,l[10]=s):s=l[10],l[11]!==c||l[12]!==u||l[13]!==d?(r=u>1&&(0,m.jsx)(tt.K,{icon:ef.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>d(c)}),l[11]=c,l[12]=u,l[13]=d,l[14]=r):r=l[14],l[15]!==s||l[16]!==r?(o=(0,m.jsxs)(lS.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[a,s,r]}),l[15]=s,l[16]=r,l[17]=o):o=l[17],o}try{h7.displayName||(h7.displayName="GitHubUrlDialog")}catch{}try{(l=AddUrlTextInputRow).displayName||(l.displayName="AddUrlTextInputRow")}catch{}try{pe.displayName||(pe.displayName="UrlTextInputRow")}catch{}var pt=n(77809);function pn(e){let t,n,i,a,s=(0,h.c)(18),{isOpen:r,onClose:o,onResourcesAdded:l,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:p,hideBackButton:f}=e,g=(0,v.useRef)(null),{getCopilotSpaceResourceSizes:y}=hq();s[0]!==o||s[1]!==l?(t=e=>{let t=[e];l(t),(0,dT.Pg)(t,"file-picker"),o()},s[0]=o,s[1]=l,s[2]=t):t=s[2];let x=t,{searchWorkerFilePath:b}=(0,F.X)();s[3]!==o||s[4]!==l||s[5]!==y?(n=async e=>{let t=e.filter(pi);if(0===t.length)return void o();let n=await y({resources:t}),i=t.map(e=>{let t=n[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});l(i),(0,dT.Pg)(i,"file-picker"),o()},s[3]=o,s[4]=l,s[5]=y,s[6]=n):n=s[6];let _=n;return r?(s[7]===Symbol.for("react.memo_cache_sentinel")?(i=[],s[7]=i):i=s[7],s[8]!==f||s[9]!==u||s[10]!==o||s[11]!==p||s[12]!==c||s[13]!==d||s[14]!==_||s[15]!==x||s[16]!==b?(a=(0,m.jsx)(pt.Q,{formData:i,onCancel:o,onSaveFiles:_,onSaveRepository:x,findFileWorkerPath:b,attachmentButtonRef:g,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:p,hideBackButton:f,maxFileCount:50}),s[8]=f,s[9]=u,s[10]=o,s[11]=p,s[12]=c,s[13]=d,s[14]=_,s[15]=x,s[16]=b,s[17]=a):a=s[17],a):null}function pi(e){return"github_file"===e.type}try{pn.displayName||(pn.displayName="SpacesFilePicker")}catch{}let pa={dialogBody:"TextFileDialog-module__dialogBody--e27Cv",grow:"TextFileDialog-module__grow--TUgOh",form:"TextFileDialog-module__form--BVMha",footerContainer:"TextFileDialog-module__footerContainer--A_bOn"};function ps({sizePercentage:e,onClose:t,onSave:n,resource:i,readOnly:a=!1}){let{copilotSpacesConfig:{maxContentSize:s}}=(0,F.X)(),[r,o]=(0,v.useState)(i?.name||""),[l,c]=(0,v.useState)(i?.text||""),[d,u]=(0,v.useState)(!1),[h,p]=(0,v.useState)(""),[f,g]=(0,v.useState)(!1),y=i?.text??"",[x,b]=(0,v.useState)({}),{getCopilotSpaceResourceSizes:_}=hq(),j=async e=>{e?.preventDefault(),e?.stopPropagation();let a=!r.trim(),s=!l.trim();if(a||s)return void b(e=>({...e,"resources.name":a?"Name is required":"","resources.text":s?"Content is required":""}));u(!0),p("");try{let e={id:i?.id||Date.now().toString(),databaseId:i?.databaseId,type:"free_text",name:r,text:l,markedForDestroy:!1},a=await _({resources:[e]}),s={...e,sizePercentage:a[e.id]};n(s),(0,dT.Pg)([s],"text-file-dialog"),t()}catch{p("An unexpected error occurred while validating the text file")}finally{u(!1)}};return(0,m.jsx)(tz.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,m.jsxs)("div",{className:pa.dialogBody,children:[h&&(0,m.jsx)(q.l,{variant:"critical",className:"mb-2",title:h}),(0,m.jsx)(tq.tL,{className:pa.grow,commands:{"github:submit-form":()=>void j()},children:(0,m.jsxs)("form",{onSubmit:j,className:pa.form,children:[(0,m.jsxs)(lS.A,{required:!0,children:[(0,m.jsx)(lS.A.Label,{children:"Name"}),(0,m.jsx)(cL.A,{block:!0,placeholder:"Give the file a title",value:r,onChange:e=>{o(e.target.value),b(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:x["resources.name"]?"error":void 0,...(0,tP.G)("text-file-name-input"),readOnly:a}),x["resources.name"]&&(0,m.jsx)(lS.A.Validation,{variant:"error",children:x["resources.name"]})]}),(0,m.jsxs)(lS.A,{required:!0,className:pa.grow,children:[(0,m.jsx)(lS.A.Label,{children:"Content"}),(0,m.jsx)(hv.Ay,{block:!0,name:"content",value:l,placeholder:"Enter content here",resize:"none",className:pa.grow,onChange:e=>{c(e.target.value),b(e=>({...e,"resources.text":""}))},...(0,tP.G)("text-file-content-input"),readOnly:a}),x["resources.text"]?(0,m.jsx)(lS.A.Validation,{variant:"error",children:x["resources.text"]}):void 0!==e&&(0,m.jsx)(pr,{text:l,percentage:e,resourceContent:y,setOverSpaceLimit:g,maxContentSize:s})]})]})})]}),renderFooter:()=>(0,m.jsxs)("div",{className:pa.footerContainer,children:[(0,m.jsx)(tm.Q,{onClick:t,children:"Cancel"}),(0,m.jsx)(tm.Q,{variant:"primary",onClickCapture:f?void 0:j,loadingAnnouncement:"Validating resource",inactive:f,loading:d,...(0,tP.G)("save-text-file-button"),disabled:a,children:"Add"})]})})}function pr(e){let t,n,i,a=(0,h.c)(8),{text:s,percentage:r,resourceContent:o,setOverSpaceLimit:l,maxContentSize:c}=e,d=r/100*c+(s.length>o.length?Math.abs(s.length-o.length):-Math.abs(s.length-o.length)),u=Math.floor(d/c*100),p=d>c;if(a[0]!==l||a[1]!==p?(t=()=>{l(p)},n=[p,l],a[0]=l,a[1]=p,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,v.useEffect)(t,n),p){let e,t=`Total percent used: ${u}%`;return a[4]!==t?(e=(0,m.jsx)(lS.A.Validation,{variant:"error",children:t}),a[4]=t,a[5]=e):e=a[5],e}let f=`Total percent used: ${u}%`;return a[6]!==f?(i=(0,m.jsx)(lS.A.Caption,{children:f}),a[6]=f,a[7]=i):i=a[7],i}try{ps.displayName||(ps.displayName="TextFileDialog")}catch{}try{pr.displayName||(pr.displayName="CharacterCount")}catch{}let po=e=>{let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x,b,_,j=(0,h.c)(42),{children:C,onResourcesAdded:w,onError:N,owner:S,sizePercentage:I,resourcesToSave:k,resourceCounts:T,onUploadingChange:L,initialRepo:E,onRepoSelect:R}=e,[A,D]=(0,v.useState)(!1),[P,O]=(0,v.useState)(!1),[M,F]=(0,v.useState)(!1),B=(0,v.useRef)(null),$=(0,v.useRef)(null);j[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,tv.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),O(!0)},j[0]=t):t=j[0];let U=t;j[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tv.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),F(!0)},j[1]=n):n=j[1];let V=n;j[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,tv.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),D(!0)},j[2]=i):i=j[2];let H=i;return j[3]!==N||j[4]!==w||j[5]!==L?(a=(0,m.jsx)(h4,{ref:B,onResourcesAdded:w,onError:N,onUploadingChange:L}),j[3]=N,j[4]=w,j[5]=L,j[6]=a):a=j[6],j[7]!==C?(s=(0,m.jsx)(eX.W.Anchor,{children:C}),j[7]=C,j[8]=s):s=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(eZ.l.GroupHeading,{children:"Repository"}),j[9]=r):r=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(eZ.l.Item,{onSelect:U,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.FileCodeIcon,{...(0,tP.G)("add-github-files-menu-item-icon")})}),"Add files and repositories"]}),j[10]=o):o=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsxs)(eZ.l.Group,{children:[r,o,(0,m.jsxs)(eZ.l.Item,{onSelect:V,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),c=(0,m.jsx)(eZ.l.Divider,{}),j[11]=l,j[12]=c):(l=j[11],c=j[12]),j[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(eZ.l.GroupHeading,{children:"Local"}),j[13]=d):d=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,tv.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),B.current?.addResources()},j[14]=u):u=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsxs)(eZ.l.Item,{onSelect:u,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.UploadIcon,{})}),"Upload a file"]}),j[15]=p):p=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(eX.W.Overlay,{align:"end",width:"small",children:(0,m.jsxs)(eZ.l,{children:[l,c,(0,m.jsxs)(eZ.l.Group,{children:[d,p,(0,m.jsxs)(eZ.l.Item,{onSelect:H,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.PasteIcon,{...(0,tP.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),j[16]=f):f=j[16],j[17]!==s?(g=(0,m.jsxs)(eX.W,{anchorRef:$,children:[s,f]}),j[17]=s,j[18]=g):g=j[18],j[19]!==w||j[20]!==A||j[21]!==I?(y=A&&(0,m.jsx)(ps,{sizePercentage:I,onClose:()=>D(!1),onSave:e=>w([e])}),j[19]=w,j[20]=A,j[21]=I,j[22]=y):y=j[22],j[23]!==E||j[24]!==R||j[25]!==w||j[26]!==S||j[27]!==T||j[28]!==P?(x=P&&(0,m.jsx)(pn,{isOpen:P,onClose:()=>O(!1),onResourcesAdded:w,owner:S,resourceCounts:T,initialRepo:E,onRepoSelect:R}),j[23]=E,j[24]=R,j[25]=w,j[26]=S,j[27]=T,j[28]=P,j[29]=x):x=j[29],j[30]!==w||j[31]!==S||j[32]!==T||j[33]!==k||j[34]!==M?(b=M&&(0,m.jsx)(h7,{onClose:()=>F(!1),onSave:e=>w(e),resourcesToSave:k,resourceCounts:T,owner:S}),j[30]=w,j[31]=S,j[32]=T,j[33]=k,j[34]=M,j[35]=b):b=j[35],j[36]!==g||j[37]!==y||j[38]!==x||j[39]!==b||j[40]!==a?(_=(0,m.jsxs)(m.Fragment,{children:[a,g,y,x,b]}),j[36]=g,j[37]=y,j[38]=x,j[39]=b,j[40]=a,j[41]=_):_=j[41],_};try{po.displayName||(po.displayName="AddAttachmentMenu")}catch{}function pl(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,hW.M)(e)}}var pc=n(97564),pd=n(88432),pu=n(74753),pm=n(10006),ph=n(3803);function pp(e){let t=(0,h.c)(14),{attachment:n,className:i}=e;switch(n.type){case"github_file":{let e;return t[0]!==i?(e=(0,m.jsx)(ef.FileIcon,{className:i}),t[0]=i,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==i?(e=(0,m.jsx)(ef.PasteIcon,{className:i}),t[2]=i,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==i?(e=(0,m.jsx)(ef.FileIcon,{className:i}),t[4]=i,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==i?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:i}),t[6]=i,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==i?(e=(0,m.jsx)(ef.GitPullRequestIcon,{className:i}),t[8]=i,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==i?(e=(0,m.jsx)(ef.ImageIcon,{className:i}),t[10]=i,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==i?(e=(0,m.jsx)(ef.RepoIcon,{className:i}),t[12]=i,t[13]=e):e=t[13],e}default:return null}}try{pp.displayName||(pp.displayName="AttachmentIcon")}catch{}let pf={attachmentText:"AttachmentPreview-module__attachmentText--ELczx",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--hqleR"};function pg(e){let t=(0,h.c)(13),{attachment:n}=e;if(!n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{className:pf.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(n.type){case"free_text":{let e;return t[1]!==n.text?(e=(0,m.jsx)("p",{className:pf.attachmentText,children:n.text}),t[1]=n.text,t[2]=e):e=t[2],e}case"media_content":{let e,i,a,s=`image: ${n.name}`;return t[3]!==n.url||t[4]!==s?(e=(0,m.jsx)("img",{alt:s,src:n.url}),t[3]=n.url,t[4]=s,t[5]=e):e=t[5],t[6]!==n.name||t[7]!==n.url?(i=(0,m.jsx)(tm.Q,{onClick:()=>(function(e,t,n="image"){let i=document.createElement("a");i.href=e,i.setAttribute("download",t||n),document.body.appendChild(i),i.click(),document.body.removeChild(i)})(n.url,n.name),children:"Download"}),t[6]=n.name,t[7]=n.url,t[8]=i):i=t[8],t[9]!==e||t[10]!==i?(a=(0,m.jsxs)("div",{className:pf.attachmentPreviewImage,children:[e,i]}),t[9]=e,t[10]=i,t[11]=a):a=t[11],a}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{pg.displayName||(pg.displayName="AttachmentPreview")}catch{}let py={warningIcon:"ReferencesTable-module__warningIcon--ZQ8GD",referenceTitle:"ReferencesTable-module__referenceTitle--X4GB2",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--cUDlc",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--rezaS",headerText:"ReferencesTable-module__headerText--HR4t9"};function px({resources:e,onDeleteResources:t,onUpdateResource:n,sizePercentage:i,onResourcesAdded:a,owner:s,readOnly:r=!1}){let o=(0,v.useMemo)(()=>Object.values(e.reduce((e,t)=>{let n=p_(t);return{...e,[n]:t}},{})),[e]),[l,c]=(0,v.useState)(!1),[d,u]=(0,v.useState)(null),h=(0,v.useRef)(null),[p,f]=(0,v.useState)([]),g=(0,v.useCallback)(()=>{p.length>0&&(t(p),f([]))},[t,p]),y=(0,v.useCallback)(()=>{p.length>0?f([]):f(o)},[p,o]),b=(0,v.useMemo)(()=>{let e={id:"id",header:()=>(0,m.jsx)("span",{className:py.headerText,children:p.length>0?`${p.length} selected`:`${o.length} ${1===o.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:n,fileUrl:i,sha:a}=(0,dT.q5)(e);return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(pp,{attachment:e,className:"fgColor-muted"}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:e.fileExists?(0,m.jsxs)(K.B,{direction:"horizontal",wrap:"wrap",children:[(0,m.jsx)(i8.A,{title:n,className:py.referenceTitle,children:(0,m.jsx)(Q.A,{rel:"noopener",target:"_blank",href:i,className:py.referenceTitleLink,children:n})}),a&&(0,m.jsx)(eG.A,{className:"ml-1",children:a.substring(0,7)})]}):(0,m.jsx)(i8.A,{title:n,className:py.referenceTitle,children:n})}),(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:t,className:(0,x.$)(py.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(pp,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:e.name,maxWidth:300,className:py.referenceTitle,children:e.name})})]});case"repository":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(i6.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:e.nwo,maxWidth:300,className:py.referenceTitle,children:(0,m.jsx)(Q.A,{className:py.referenceTitleLink,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),(0,m.jsx)("div",{className:(0,x.$)(py.referenceSubtitle,"fgColor-attention"),children:"Attaching a large number of files may reduce response quality."})]})]});case"uploaded_text_file":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(pp,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:e.name,maxWidth:300,className:py.referenceTitle,children:(0,m.jsx)(Q.A,{className:py.referenceTitleLink,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{children:(0,m.jsx)(pp,{attachment:e,className:"fgColor-success"})}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:e.title||"",className:py.referenceTitle,children:(0,m.jsxs)(Q.A,{rel:"noopener",target:"_blank",href:e.url,className:py.referenceTitleLink,children:[e.title," ",(0,m.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,m.jsx)("div",{children:(0,m.jsx)(i8.A,{title:e.nwo||"",className:(0,x.$)(py.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{className:"fgColor-muted",children:(0,m.jsx)(pp,{attachment:e,className:"fgColor-muted"})}),(0,m.jsx)(Q.A,{as:"button",className:py.referenceTitleLink,ref:h,onClick:t=>{t.preventDefault(),u(e),c(!0)},"aria-haspopup":"dialog","aria-expanded":l,children:(0,m.jsx)(i8.A,{title:e.name,maxWidth:300,className:(0,x.$)(py.referenceTitle),children:e.name})})]});default:return null}}},d={id:"size",header:()=>(0,m.jsx)(pu.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,m.jsx)(pv,{row:e,onResourcesAdded:a,owner:s})},v={id:"actions",header:()=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(pu.s,{children:"Actions"}),(0,m.jsx)(tm.Q,{style:{visibility:p.length>0&&!r?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:g,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let a="github_file"===e.type&&!e.fileExists;return(0,m.jsxs)(m.Fragment,{children:[a&&(0,m.jsx)(tt.K,{className:py.warningIcon,icon:ef.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,m.jsx)(pb,{row:e,onEdit:n,onDelete:e=>t([e]),sizePercentage:i,readOnly:r})]})}};return r?[e,d,v]:[{id:"select",header:()=>(0,m.jsx)(pd.A,{checked:p.length===o.length,indeterminate:p.length>0&&p.length<o.length,"aria-label":"Select all sources",value:"default",onChange:y}),width:"auto",renderCell:e=>(0,m.jsx)(pd.A,{checked:p.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{f(n=>t.target.checked?[...n,e]:n.filter(t=>t.id!==e.id))}})},e,d,v]},[p,o.length,y,l,g,n,i,a,s,t,r]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(pm.X.Container,{children:(0,m.jsx)(ph.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:o,columns:b})}),l&&d&&"media_content"===d.type&&(0,m.jsx)(tz.l,{onClose:()=>{u(null),c(!1)},position:{narrow:"fullscreen"},returnFocusRef:h,title:d.name,children:(0,m.jsx)(pg,{attachment:d})})]})}let pv=({row:e,onResourcesAdded:t,owner:n})=>{let[i,a]=(0,v.useState)(!1),[s,r]=(0,v.useState)(null),[o,l]=(0,v.useState)(!1),c=(0,v.useRef)(null),d=async e=>{l(!0);try{let t=await (0,pc.V)(e);r(t),a(!0)}finally{l(!1)}};return"repository"===e.type?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tt.K,{variant:"invisible",className:(0,x.$)(py.warningIcon,"float-left"),ref:c,loading:o,"aria-label":"Copilot works best when working with fewer files. Click to choose specific files",onClick:async()=>{await d(e.repositoryId)},icon:ef.AlertIcon}),i&&s&&(0,m.jsx)(pn,{isOpen:i,onClose:()=>a(!1),onResourcesAdded:t,owner:n,initialRepo:s,hideBackButton:!0})]}):"sizePercentage"in e?(0,m.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},pb=e=>{let t,n,i,a,s,r,o,l=(0,h.c)(26),{row:c,onDelete:d,onEdit:u,sizePercentage:p,readOnly:f}=e,g=void 0!==f&&f,[y,x]=(0,v.useState)(null),b="";switch(c.type){case"github_pull_request":case"github_issue":b=c.title;break;case"github_file":b=c.filePath;break;case"repository":b=c.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":b=c.name}return l[0]!==b||l[1]!==d||l[2]!==g||l[3]!==c?(t=(!g||g&&"free_text"===c.type)&&(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{"aria-label":`Attachment actions: ${b}`,title:"Attachment actions",icon:ef.KebabHorizontalIcon,variant:"invisible"})}),(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsxs)(eZ.l,{children:["free_text"===c.type&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eZ.l.Item,{"aria-label":`${g?"View":"Edit"} attachment: ${c.id}`,onSelect:()=>x(c),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:g?(0,m.jsx)(ef.EyeIcon,{}):(0,m.jsx)(ef.PencilIcon,{})}),g?"View":"Edit"]})}),!g&&(0,m.jsxs)(eZ.l.Item,{"aria-label":`Delete attachment: ${c.id}`,variant:"danger",onSelect:()=>d(c),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]})]})})]}),l[0]=b,l[1]=d,l[2]=g,l[3]=c,l[4]=t):t=l[4],l[5]!==t?(n=(0,m.jsx)("div",{className:"d-md-none",children:t}),l[5]=t,l[6]=n):n=l[6],l[7]!==g||l[8]!==c?(i="free_text"===c.type&&(0,m.jsx)(tt.K,{onClick:()=>x(c),variant:"invisible","aria-label":g?"View":"Edit",icon:g?ef.EyeIcon:ef.PencilIcon}),l[7]=g,l[8]=c,l[9]=i):i=l[9],l[10]!==d||l[11]!==g||l[12]!==c?(a=!g&&(0,m.jsx)(tt.K,{onClick:()=>d(c),variant:"invisible","aria-label":"Delete",icon:ef.TrashIcon}),l[10]=d,l[11]=g,l[12]=c,l[13]=a):a=l[13],l[14]!==i||l[15]!==a?(s=(0,m.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:[i,a]}),l[14]=i,l[15]=a,l[16]=s):s=l[16],l[17]!==u||l[18]!==g||l[19]!==y||l[20]!==p?(r=y&&(0,m.jsx)(ps,{sizePercentage:p,resource:y,onSave:u,onClose:()=>x(null),readOnly:g}),l[17]=u,l[18]=g,l[19]=y,l[20]=p,l[21]=r):r=l[21],l[22]!==n||l[23]!==s||l[24]!==r?(o=(0,m.jsxs)(m.Fragment,{children:[n,s,r]}),l[22]=n,l[23]=s,l[24]=r,l[25]=o):o=l[25],o},p_=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{px.displayName||(px.displayName="ReferencesTable")}catch{}try{pv.displayName||(pv.displayName="RowSize")}catch{}try{pb.displayName||(pb.displayName="RowActions")}catch{}let pj={instructionsContainer:"InstructionsDialog-module__instructionsContainer--tvd1E",grow:"InstructionsDialog-module__grow--mfJpQ"};function pC({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:i}){let{upsertCopilotSpace:a,isPending:s}=(0,m2.$)(e),[r,o]=(0,v.useState)(e.generalInstructions??""),[l,c]=(0,v.useState)(null);async function d(){try{let e=await a({generalInstructions:r});n?.(e),t()}catch(e){e instanceof Error?c(e.message):c("Failed to save instructions")}}function u(){o(e.generalInstructions??""),t()}return(0,m.jsx)(tz.l,{width:"xlarge",height:"large",title:"Instructions",onClose:u,returnFocusRef:i,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:pj.instructionsContainer,children:[l&&(0,m.jsx)(q.l,{variant:"critical",title:l,className:"mb-2"}),(0,m.jsxs)(lS.A,{className:pj.grow,disabled:!e.editable,children:[(0,m.jsx)(lS.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,m.jsx)(hv.Ay,{block:!0,value:r,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:pj.grow}),(0,m.jsx)(pw,{text:r,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,m.jsx)(hx.m,{onCancel:u,onSave:d,isLoading:s,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function pw(e){let t,n,i,a,s=(0,h.c)(10),{text:r,promptCharLimit:o}=e,l=r.length>o;s[0]!==r.length?(t=r.length.toLocaleString(),s[0]=r.length,s[1]=t):t=s[1],s[2]!==o?(n=o.toLocaleString(),s[2]=o,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(i=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),s[4]=t,s[5]=n,s[6]=i):i=s[6];let c=i;return s[7]!==c||s[8]!==l?(a=l?(0,m.jsx)(lS.A.Validation,{variant:"error",children:c}):(0,m.jsx)(lS.A.Caption,{children:c}),s[7]=c,s[8]=l,s[9]=a):a=s[9],a}try{pC.displayName||(pC.displayName="InstructionsDialog")}catch{}try{pw.displayName||(pw.displayName="CharacterCount")}catch{}let pN={header:"SpacesConversation-module__header--GkfTQ",spaceDescription:"SpacesConversation-module__spaceDescription--nRmSr",chatInput:"SpacesConversation-module__chatInput--Nrvmc",instructions:"SpacesConversation-module__instructions--t36Ks",instructionsHeader:"SpacesConversation-module__instructionsHeader--ynDM7",instructionsIcon:"SpacesConversation-module__instructionsIcon--KKXjS",instructionsTitle:"SpacesConversation-module__instructionsTitle--xAAKT",instructionsContent:"SpacesConversation-module__instructionsContent--DYqhz",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--wlbTe",content:"SpacesConversation-module__content--FPhr6",tabContainer:"SpacesConversation-module__tabContainer--rTZgf",underlineNav:"SpacesConversation-module__underlineNav--qjoAn",attachButton:"SpacesConversation-module__attachButton--Hr8sv",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--dnmPR",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--Pw6Ln",tabEmptyText:"SpacesConversation-module__tabEmptyText--SxP9A",tabContent:"SpacesConversation-module__tabContent--zCP1V",conversationsList:"SpacesConversation-module__conversationsList--KLG2n",conversationItem:"SpacesConversation-module__conversationItem--kxjxw",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--Z1mQR",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",conversationName:"SpacesConversation-module__conversationName--wbn54",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--tcI92",text:"SpacesConversation-module__text--v551F",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--pRjZw",referencesSizeText:"SpacesConversation-module__referencesSizeText--buwhH",descriptionText:"SpacesConversation-module__descriptionText--hYXsZ",titleText:"SpacesConversation-module__titleText--czjJm"};function pS({customCopilotId:e,selectedThreadID:t,textAreaRef:n}){let{currentTopic:i,messages:a,streamingMessage:s,ambientError:r,threads:o}=(0,$.Pk)(),l=(0,H.b)(),[c,d]=(0,Z.ok)(),u=(0,dB.G)(),p=c.get("tab")||"attachments",[f,y]=(0,v.useState)(!1),[x,b]=(0,v.useState)(null),_=(0,v.useRef)(null),[j,C]=(0,v.useState)(null),[w,N]=(0,v.useState)([]),[S,I]=(0,v.useState)(null),[k,T]=(0,v.useState)(null),[L,E]=(0,v.useState)(!1),[R,A]=(0,v.useState)([]),[P,O]=(0,v.useState)(null),M=dF((0,v.useRef)(i),a.length),{isPending:B,data:U,error:V}=(0,dL.Ao)(e),{upsertCopilotSpace:W,error:z}=(0,m2.$)(j||void 0),{deleteCopilotSpaceResources:G,error:Q}=(e=>{let t,n,i,a,s,r,o,l=(0,h.c)(15),c=(0,sn.jE)(),[d,u]=(0,v.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;u(!0);let n=(0,dT.fn)(e),i={custom_copilot:{resources_attributes:t.map(pl)}},a=await (0,nr.lS)(n,{method:"PUT",body:i}),s=await a.json();if(!a.ok&&404!==a.status)throw Error("Unable to delete resources.");return s}},l[0]=e,l[1]=t):t=l[1];let m=(0,na.n)(t);return l[2]!==m?({mutateAsync:n,isPending:i,...a}=m,l[2]=m,l[3]=n,l[4]=i,l[5]=a):(n=l[3],i=l[4],a=l[5]),l[6]!==e||l[7]!==i||l[8]!==c||l[9]!==d?(s=()=>{e&&d&&!i&&(u(!1),c.invalidateQueries({queryKey:(0,m0.dp)(e)}))},r=[d,i,e,c],l[6]=e,l[7]=i,l[8]=c,l[9]=d,l[10]=s,l[11]=r):(s=l[10],r=l[11]),(0,v.useEffect)(s,r),l[12]!==n||l[13]!==a?(o={deleteCopilotSpaceResources:n,...a},l[12]=n,l[13]=a,l[14]=o):o=l[14],o})(j||void 0);(0,v.useEffect)(()=>{(0,g.D)(j?.name?`${j.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[j?.name]);let{processFiles:Y}=hK({onResourcesAdded:e=>void ed(e),onError:A,onUploadingChange:E}),{copilotSpacesConfig:{maxResourceCount:J,maxDescriptionLength:X}}=(0,F.X)(),ee=z||V||k||Q,et=(0,v.useRef)(!1),en=w.filter(e=>!e.markedForDestroy).length,ei=(0,v.useMemo)(()=>j?l.sortAndFilterThreads(o,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[o,e,l,j]),ea=(0,v.useMemo)(()=>j?j.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[j]);(0,v.useEffect)(()=>{U&&(C(U),N(e=>U.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:U})),l.clearCurrentReferences(["image"])},[U,l]),(0,v.useEffect)(()=>()=>{et.current||(l.clearCurrentReferences(),et.current=!1)},[l,e]);let es=(0,v.useCallback)(async e=>{et.current=!0,await M(e)},[M]),er=(0,v.useCallback)(e=>{d({tab:e},{replace:!0})},[d]),eo=(0,v.useCallback)(e=>{l.deleteThread(e)},[l]);async function el(e){let t=[];if(N(n=>{for(let i of(t=[...n],e))t=i.databaseId?t.map(e=>i.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==i.id);return t}),j)try{await G(e),T(null)}catch{N(t=>[...t,...e])}}async function ec(e){let t=[];if(N(n=>t=n.map(t=>t.id===e.id?e:t)),j)try{await W({...j,resources:t}),T(null)}catch{N(j.resources)}}let ed=(0,v.useCallback)(async e=>{let t=function(e,t){let n=new Map(e.map(e=>[e.id,e]));for(let i of t){if("repository"===i.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===i.repositoryId);if(t){n.set(t.id,{...t,markedForDestroy:!1});continue}}n.set(i.id,i)}return Array.from(n.values())}(w,e);N(t);try{await W({...j,resources:t}),T(null)}catch{j&&N(j.resources)}},[j,W,w]),eu=(0,v.useCallback)(()=>{T(`You can select a maximum of ${J} sources`)},[J]),em=(0,v.useCallback)(e=>{Y(e,{source:"drag-and-drop"})},[Y]),eh=(0,v.useCallback)(async e=>{if(j&&e){I(e);try{let t=await W({name:e});C(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),I(null),T(null)}catch{C(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j}),I(null)}}},[j,W,l]),ep=(0,v.useCallback)(async e=>{if(j){C({...j,description:e});try{let t=await W({description:e});C(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{C(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j})}}},[j,W,l]);if(V instanceof dL.i9)return(0,m.jsx)(hO,{});if(B||!j)return(0,m.jsx)(uq,{});let eg=j.ownerIsOrg?j.owner:void 0,ey=S??j.name,ex=(0,dT.Hh)(U);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tj.t,{fallback:(0,m.jsx)(tT,{regionName:"This space"}),children:(0,m.jsxs)(D.Container,{width:"small",children:[(0,m.jsx)("div",{className:pN.header,children:(0,m.jsxs)(D.Header,{children:[(0,m.jsx)("div",{children:(0,m.jsx)(eG.A,{children:hD(j)})}),(0,m.jsx)("h1",{children:j.editable?(0,m.jsx)(hR,{className:pN.titleText,value:ey,onChange:eh}):(0,m.jsx)("span",{className:pN.text,children:ey})}),j.editable?(0,m.jsx)(hR,{className:pN.descriptionText,placeholder:"Add a short description to explain this space's purpose (e.g., \u201CFrontend design system\u201D or \u201CAPI docs hub\u201D).",value:j.description||"",maxLength:X,onChange:ep}):j.description&&(0,m.jsx)("p",{className:pN.spaceDescription,children:j.description}),(0,m.jsx)(D.Actions,{children:(0,m.jsx)(tm.Q,{leadingVisual:ef.McpIcon,as:"a",href:dT.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})})]})}),(0,m.jsxs)("div",{className:pN.chatInput,children:[r&&(0,m.jsx)(dV.P,{ambientError:r}),ex&&(0,m.jsx)(d8,{}),!ex&&(0,m.jsx)(lN.V,{textAreaRef:n,onSubmit:es,isStreaming:!!s,size:"large",modes:[{name:"Chat",supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:(0,m.jsx)(ef.SpaceIcon,{}),placeholder:"How can I help you?"}],onNewThreadSelected:u},t)]}),(0,m.jsxs)("button",{ref:_,className:pN.instructions,onClick:()=>y(!0),"aria-haspopup":"dialog","aria-expanded":f,children:[(0,m.jsxs)("div",{className:pN.instructionsHeader,children:[(0,m.jsx)(ef.SlidersIcon,{size:16,className:pN.instructionsIcon}),(0,m.jsx)("h2",{className:pN.instructionsTitle,children:"Instructions"})]}),j.generalInstructions?(0,m.jsx)("p",{className:pN.instructionsContent,children:j.generalInstructions}):(0,m.jsx)("p",{className:pN.instructionsEmptyState,children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),ee&&(0,m.jsx)(q.l,{title:k?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof ee?ee:"object"==typeof ee&&null!==ee&&"base"in ee?String(ee.base):ee instanceof Error?ee.message:"An error occurred"}),R.length>0&&(0,m.jsx)(d9,{errorMessages:R,onDismiss:()=>A([])}),(0,m.jsxs)("div",{className:pN.content,children:[(0,m.jsxs)("div",{className:pN.tabContainer,children:[(0,m.jsx)("div",{className:pN.underlineNav,children:(0,m.jsxs)(mq.O,{"aria-label":"Space content",children:[(0,m.jsx)(mq.O.Item,{"aria-current":"attachments"===p?"page":void 0,onClick:()=>er("attachments"),counter:en,children:"Sources"}),(0,m.jsx)(mq.O.Item,{"aria-current":"conversations"===p?"page":void 0,onClick:()=>er("conversations"),counter:ei.length,children:"Conversations"})]})}),(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"none",children:[ea>80&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hA.z,{inline:!0,barSize:"small",progress:ea,className:pN.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-ea))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:pN.referencesSizeText,children:[ea<1?"<1":Math.round(ea),"%"]})]}),j.editable&&(0,m.jsx)("div",{className:pN.attachButton,children:en>=J?(0,m.jsx)(tm.Q,{leadingVisual:ef.PlusIcon,onClick:eu,children:"Add sources"}):(0,m.jsx)(po,{sizePercentage:ea,owner:eg,onResourcesAdded:ed,resourcesToSave:w,resourceCounts:{currentResourceCount:en,maxResourceCount:J},onError:A,initialRepo:P,onRepoSelect:O,onUploadingChange:e=>{e&&A([]),E(e)},children:(0,m.jsx)(tm.Q,{leadingVisual:ef.PlusIcon,children:"Add sources"})})})]})]}),(0,m.jsx)("div",{className:pN.tabContent,children:(()=>{if("attachments"===p){let e=w.filter(e=>!e.markedForDestroy);return e.length>0?(0,m.jsx)(px,{resources:e,sizePercentage:ea,onDeleteResources:el,onUpdateResource:ec,onResourcesAdded:ed,readOnly:!j?.editable}):(0,m.jsxs)("div",{className:pN.tabEmptyContainer,children:[(0,m.jsx)(ef.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,m.jsx)("h2",{className:pN.tabEmptyTitle,children:j?.editable?"Add sources to get started":"Welcome"}),(0,m.jsx)("p",{className:pN.tabEmptyText,children:j?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===p)return ei.length>0?(0,m.jsx)("ul",{role:"menu",className:pN.conversationsList,children:ei.map(e=>(0,m.jsx)(pI,{conversation:e,activeMenuConversationId:x,setActiveMenuConversationId:b,onDelete:eo},e.id))}):(0,m.jsxs)("div",{className:pN.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:pN.tabEmptyTitle,children:"No conversations yet"}),(0,m.jsx)("p",{className:pN.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),f&&(0,m.jsx)(pC,{copilotSpace:j,onClose:()=>y(!1),returnFocusRef:_,onSaved:e=>{C(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,m.jsx)(hw.A,{onFilesDrop:em,isUploading:L})]})}function pI(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,v,b=(0,h.c)(38),{conversation:_,activeMenuConversationId:j,setActiveMenuConversationId:C,onDelete:w}=e,N=(0,dv.Z)();b[0]!==_?(t=(0,n6.CB)(_),b[0]=_,b[1]=t):t=b[1];let S=t,I=`${n6.Jz}/c/${_.id}`;b[2]!==N||b[3]!==I?(n=()=>N(I),i=e=>{"Enter"===e.key&&N(I)},b[2]=N,b[3]=I,b[4]=n,b[5]=i):(n=b[4],i=b[5]);let k=null!==j&&pN.conversationItemMenuOpen;b[6]!==k?(a=(0,x.$)(pN.conversationItem,k),b[6]=k,b[7]=a):a=b[7],b[8]!==S?(s=(0,m.jsx)("div",{className:pN.conversationName,children:S}),b[8]=S,b[9]=s):s=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(ef.ClockIcon,{}),b[10]=r):r=b[10],b[11]!==_.updatedAt?(o=new Date(_.updatedAt),b[11]=_.updatedAt,b[12]=o):o=b[12],b[13]!==o?(l=(0,m.jsxs)("div",{className:pN.conversationTimestamp,children:[r," ",(0,m.jsx)(eg.A,{format:"relative",prefix:"",date:o})]}),b[13]=o,b[14]=l):l=b[14],b[15]!==s||b[16]!==l?(c=(0,m.jsxs)("div",{className:pN.conversationItemLeftColumn,children:[s,l]}),b[15]=s,b[16]=l,b[17]=c):c=b[17];let T=j===_.id;return b[18]!==_.id||b[19]!==C?(d=e=>{C(e?_.id:null)},b[18]=_.id,b[19]=C,b[20]=d):d=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(tt.K,{variant:"invisible","aria-label":"Conversation options",icon:ef.KebabHorizontalIcon,onClick:pT})}),b[21]=u):u=b[21],b[22]!==_||b[23]!==w?(p=()=>w(_),b[22]=_,b[23]=w,b[24]=p):p=b[24],b[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),b[25]=f):f=b[25],b[26]!==p?(g=(0,m.jsx)(eX.W.Overlay,{onClick:pk,align:"end",children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:p,children:[f,"Delete"]})})}),b[26]=p,b[27]=g):g=b[27],b[28]!==T||b[29]!==d||b[30]!==g?(y=(0,m.jsxs)(eX.W,{open:T,onOpenChange:d,children:[u,g]}),b[28]=T,b[29]=d,b[30]=g,b[31]=y):y=b[31],b[32]!==c||b[33]!==y||b[34]!==n||b[35]!==i||b[36]!==a?(v=(0,m.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:i,className:a,children:[c,y]}),b[32]=c,b[33]=y,b[34]=n,b[35]=i,b[36]=a,b[37]=v):v=b[37],v}function pk(e){return e.stopPropagation()}function pT(e){e.stopPropagation()}try{pS.displayName||(pS.displayName="SpacesConversation")}catch{}try{pI.displayName||(pI.displayName="ConversationItem")}catch{}function pL({primary:e=!1}){let[t,n]=(0,v.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[t?(0,m.jsx)(mX.D,{closeDialog:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),n(!1)}}):null,(0,m.jsx)(tm.Q,{variant:e?"primary":"default",onClick:()=>{(0,tv.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),n(!0)},children:"Create space"})]})}try{pL.displayName||(pL.displayName="CreateSpaceButton")}catch{}function pE(e,t){var n=["name","description","owner"],i=!1;if(!t.trim())return!0;let a=i?t.trim():t.toLowerCase().trim();return n.some(t=>{let n;return null!=(n="function"==typeof t?t(e):e[t])&&(i?String(n):String(n).toLowerCase()).includes(a)})}let pR={banner:"SpacesView-module__banner--ZHxIa",button:"SpacesView-module__button--j38nS",counter:"SpacesView-module__counter--ZdDOv",disabledButton:"SpacesView-module__disabledButton--Ygunf",description:"SpacesView-module__description--IyY7g",filterButtons:"SpacesView-module__filterButtons--qTV2E",metadata:"SpacesView-module__metadata--Sw1rv",metadataItem:"SpacesView-module__metadataItem--rLi5j",sharedSpacesTab:"SpacesView-module__sharedSpacesTab--dS9e3",benefitSections:"SpacesView-module__benefitSections--ZQRGR",benefitSection:"SpacesView-module__benefitSection--GRkgW",benefitIcon:"SpacesView-module__benefitIcon--Pk9zH",benefitTitle:"SpacesView-module__benefitTitle--NOGgu",benefitDescription:"SpacesView-module__benefitDescription--FU6Sj"};function pA(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(Q.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",rel:"noopener noreferrer",children:"Need help? Read the docs"}),t[0]=e):e=t[0],e}function pD(e){let t,n,i,a,s,r,o,l,c,d,u,p=(0,h.c)(32),{copilotSpace:f,onDelete:g,onClick:y}=e,x=f.ownerIsOrg?ef.OrganizationIcon:ef.PersonIcon;p[0]!==f?(t=hD(f),p[0]=f,p[1]=t):t=p[1];let v=t,b="Shared"===v?ef.PeopleIcon:ef.LockIcon,_=f.adminable||f.editable;return p[2]!==f?(n=(0,dT.Cb)(f),p[2]=f,p[3]=n):n=p[3],p[4]!==f.name?(i=(0,m.jsx)(en.Item.Title,{children:f.name}),p[4]=f.name,p[5]=i):i=p[5],p[6]!==f.description?(a=(0,m.jsx)(en.Item.Description,{children:(0,m.jsx)("div",{className:pR.description,children:f.description})}),p[6]=f.description,p[7]=a):a=p[7],p[8]!==x?(s=(0,m.jsx)(x,{size:16}),p[8]=x,p[9]=s):s=p[9],p[10]!==f.owner||p[11]!==s?(r=(0,m.jsxs)("span",{className:pR.metadataItem,children:[s,f.owner]}),p[10]=f.owner,p[11]=s,p[12]=r):r=p[12],p[13]!==b?(o=(0,m.jsx)(b,{size:16}),p[13]=b,p[14]=o):o=p[14],p[15]!==o||p[16]!==v?(l=(0,m.jsxs)("span",{className:pR.metadataItem,children:[o,v]}),p[15]=o,p[16]=v,p[17]=l):l=p[17],p[18]!==r||p[19]!==l?(c=(0,m.jsx)(en.Item.Metadata,{children:(0,m.jsxs)("div",{className:pR.metadata,children:[r,l]})}),p[18]=r,p[19]=l,p[20]=c):c=p[20],p[21]!==f||p[22]!==g||p[23]!==_?(d=_&&(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(hp,{copilot:f,onDelete:g})}),p[21]=f,p[22]=g,p[23]=_,p[24]=d):d=p[24],p[25]!==y||p[26]!==d||p[27]!==n||p[28]!==i||p[29]!==a||p[30]!==c?(u=(0,m.jsxs)(en.Item,{href:n,onClick:y,children:[i,a,c,d]}),p[25]=y,p[26]=d,p[27]=n,p[28]=i,p[29]=a,p[30]=c,p[31]=u):u=p[31],u}function pP(){let e,t,n,i,a,s=(0,h.c)(5);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[e,(0,m.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,m.jsx)(pL,{}),(0,m.jsx)(pA,{})]})]}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)("div",{className:pR.benefitSection,children:[(0,m.jsx)("div",{className:pR.benefitIcon,children:(0,m.jsx)(ef.CodeIcon,{size:16})}),(0,m.jsx)("h3",{className:pR.benefitTitle,children:"Generate code"}),(0,m.jsx)("p",{className:pR.benefitDescription,children:"Produce code that follows your team's patterns."})]}),s[2]=n):n=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsxs)("div",{className:pR.benefitSection,children:[(0,m.jsx)("div",{className:pR.benefitIcon,children:(0,m.jsx)(ef.BookIcon,{size:16})}),(0,m.jsx)("h3",{className:pR.benefitTitle,children:"Share knowledge"}),(0,m.jsx)("p",{className:pR.benefitDescription,children:"Centralize docs so your team can quickly find answers."})]}),s[3]=i):i=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsxs)("li",{children:[t,(0,m.jsxs)("div",{className:pR.benefitSections,children:[n,i,(0,m.jsxs)("div",{className:pR.benefitSection,children:[(0,m.jsx)("div",{className:pR.benefitIcon,children:(0,m.jsx)(ef.ProjectIcon,{size:16})}),(0,m.jsx)("h3",{className:pR.benefitTitle,children:"Plan projects"}),(0,m.jsx)("p",{className:pR.benefitDescription,children:"Create requirements and issues your team can ship."})]})]})]}),s[4]=a):a=s[4],a}let pO=e=>e.shared&&e.collaborative;function pM({spaces:e,starredSpaces:t,isLoading:n,onDelete:i,onSpaceClick:a,searchQuery:s,currentUserLogin:r}){let o=dD.Jt.getSpacesSelectedTab(),[l,c]=(0,v.useState)(o),d=(0,v.useCallback)(e=>{c(e),dD.Jt.setSpacesSelectedTab(e)},[]),u=t&&t.length>0,h=tx.W.copilotSpacesReadAccessToUserOwnedSpaces,{copilotSpacesConfig:{userHasOrgs:p}}=(0,F.X)();(0,v.useEffect)(()=>{u&&d("starred")},[u,d]);let f=(0,v.useMemo)(()=>e?e.filter(e=>!!("starred"===l&&e.starred||"personal"===l&&!e.ownerIsOrg&&!e.shared||"org"===l&&e.ownerIsOrg||h&&"shared"===l&&pO(e))&&pE(e,s)):[],[e,l,s,h]),{personalSpacesCount:g,orgSpacesCount:y,starredSpacesCount:b,sharedSpacesCount:_}=(0,v.useMemo)(()=>{if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let t=s.trim()?e.filter(e=>pE(e,s)):e;return{personalSpacesCount:t.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:t.filter(e=>e.ownerIsOrg).length,starredSpacesCount:t.filter(e=>e.starred).length,sharedSpacesCount:h?t.filter(pO).length:0}},[e,s,h]),j=e&&!e.some(e=>e.creator===r)&&!n,C=e&&e.length>0&&f?.length===0&&!n,w=h&&_>0;return(0,m.jsxs)(en,{children:[(0,m.jsx)(en.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:pR.filterButtons,children:[u&&(0,m.jsxs)("button",{onClick:()=>d("starred"),role:"tab","aria-selected":"starred"===l,"aria-controls":"spaces-list",id:"starred-tab",className:pR.button,children:["Starred ",(0,m.jsx)("span",{className:pR.counter,children:b})]}),p||u||w?(0,m.jsxs)("button",{onClick:()=>d("personal"),role:"tab","aria-selected":"personal"===l,"aria-controls":"spaces-list",id:"personal-tab",className:pR.button,children:["Yours ",(0,m.jsx)("span",{className:pR.counter,children:g})]}):(0,m.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:pR.disabledButton,children:["Yours ",(0,m.jsx)("span",{className:pR.counter,children:g})]}),w&&(0,m.jsxs)("button",{onClick:()=>d("shared"),role:"tab","aria-selected":"shared"===l,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,x.$)(pR.button,pR.sharedSpacesTab),children:["Shared with me ",(0,m.jsx)("span",{className:pR.counter,children:_})]}),p&&(0,m.jsxs)("button",{onClick:()=>d("org"),role:"tab","aria-selected":"org"===l,"aria-controls":"spaces-list",id:"org-tab",className:pR.button,children:["Organizations ",(0,m.jsx)("span",{className:pR.counter,children:y})]})]})}),(0,m.jsx)(en.List,{loading:n,id:"spaces-list","aria-labelledby":l,children:j&&f?.length===0?(0,m.jsx)(pP,{}):C?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsxs)("p",{children:["starred"===l&&"Spaces you star will appear here.","personal"===l&&"Spaces you create will appear here.","org"===l&&"Spaces belonging to your organizations will appear here.","shared"===l&&"Shared spaces will appear here."]}),(0,m.jsx)(pL,{}),(0,m.jsx)(pA,{})]}):f?.map(e=>(0,m.jsx)(pD,{copilotSpace:e,onDelete:()=>i(e),onClick:a},e.owner?`${e.owner}/${e.id}`:e.id))})]})}function pF(e){let t,n,i,a,s,r,o,l,c,d,u,p,f,g,y,x=(0,h.c)(33),{copilotSpaces:b}=e,_=(0,$.Pk)(),{ssoOrganizations:j}=_;x[0]!==j?(t=j.map(pV),x[0]=j,x[1]=t):t=x[1];let C=t,[w,N]=(0,v.useState)(null),[S,I]=(0,v.useState)(""),k=dD.Jt.getSpacesMcpBannerDismissalCount(),[T,L]=(0,v.useState)(k<2),E=void 0===b;x[2]!==b?(n=b?.filter(pU),x[2]=b,x[3]=n):n=x[3];let R=n,{mutateAsync:A}=(0,dL.$7)();x[4]!==A?(i=async e=>{try{await A(e),N(null)}catch(e){N(e instanceof Error?e:Error(String(e)))}},x[4]=A,x[5]=i):i=x[5];let P=i;x[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=dD.Jt.getSpacesMcpBannerDismissalCount();dD.Jt.setSpacesMcpBannerDismissalCount(e+1),L(!1)},x[6]=a):a=x[6];let O=a;return x[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tT,{regionName:"Spaces"}),x[7]=s):s=x[7],x[8]!==w?(r=w&&(0,m.jsxs)(mZ.A,{variant:"danger",children:[(0,m.jsx)(ef.AlertIcon,{}),"There was a problem deleting your space."]}),x[8]=w,x[9]=r):r=x[9],x[10]!==T?(o=T&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(q.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,m.jsx)(ef.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,m.jsx)(q.l.PrimaryAction,{as:"a",href:dT.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{O()}})}),x[10]=T,x[11]=o):o=x[11],x[12]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(D.Title,{children:"Spaces"}),c=(0,m.jsx)(D.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give more relevant help for your work."}),x[12]=l,x[13]=c):(l=x[12],c=x[13]),x[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(D.Header,{children:[l,c,(0,m.jsx)(D.Actions,{children:(0,m.jsx)(pL,{primary:!0})})]}),x[14]=d):d=x[14],x[15]!==C||x[16]!==j.length?(u=j.length>0&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)("div",{className:pR.banner,children:(0,m.jsx)(U.x,{protectedOrgs:C,redirectURI:pB})}),x[15]=C,x[16]=j.length,x[17]=u):u=x[17],x[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(cR,{onSearch:I}),x[18]=p):p=x[18],x[19]!==b||x[20]!==P||x[21]!==E||x[22]!==S||x[23]!==R||x[24]!==_.currentUserLogin?(f=(0,m.jsx)(D.Section,{children:(0,m.jsx)(pM,{spaces:b,starredSpaces:R,isLoading:E,onDelete:P,onSpaceClick:p$,searchQuery:S,currentUserLogin:_.currentUserLogin})}),x[19]=b,x[20]=P,x[21]=E,x[22]=S,x[23]=R,x[24]=_.currentUserLogin,x[25]=f):f=x[25],x[26]!==u||x[27]!==f||x[28]!==o?(g=(0,m.jsxs)(D.Container,{width:"small",children:[o,d,u,p,f]}),x[26]=u,x[27]=f,x[28]=o,x[29]=g):g=x[29],x[30]!==g||x[31]!==r?(y=(0,m.jsxs)(tj.t,{fallback:s,children:[r,g]}),x[30]=g,x[31]=r,x[32]=y):y=x[32],y}function pB(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function p$(){(0,tv.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function pU(e){return e.starred}function pV(e){return e.login}try{pA.displayName||(pA.displayName="DocsLink")}catch{}try{pD.displayName||(pD.displayName="SpacesListItem")}catch{}try{pP.displayName||(pP.displayName="FirstSpaceEmptyState")}catch{}try{pM.displayName||(pM.displayName="SpacesList")}catch{}try{pF.displayName||(pF.displayName="SpacesView")}catch{}function pH(){let e,t,n,i,a,s,r,o,l,c,d,u,p,f=(0,h.c)(48),g=(0,$.Pk)(),{customCopilots:y}=g,x=(0,eY.U)(),b=(0,dI.v)(),_=(0,Z.zy)(),j=(0,dL.BV)(),C=(0,dT.y_)(),w=j&&C,N=(0,dT.iI)(),{isNarrowViewport:S}=function(e){let t,n=(0,h.c)(2),i=function(e){let t,n,i,a=(0,h.c)(5);a[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,a[0]=e,a[1]=t):t=a[1];let[s,r]=(0,v.useState)(t);return a[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{r(e.matches)};return r(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},i=[e],a[2]=e,a[3]=n,a[4]=i):(n=a[3],i=a[4]),(0,v.useEffect)(n,i),s}(J.X);return n[0]!==i?(t={isNarrowViewport:i},n[0]=i,n[1]=t):t=n[1],t}();(0,dL.e9)(j),function(){let e=(0,$.Pk)(),{referenceId:t,messageIndex:n}=function(){let e,t,n,i=(0,h.c)(6),a=(0,Z.zy)();if(i[0]!==a.search){let n=new URLSearchParams(a.search);e=n.get("reference_id"),t=n.get("message_index"),i[0]=a.search,i[1]=e,i[2]=t}else e=i[1],t=i[2];let s=t,r=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(r=e)}return i[3]!==r||i[4]!==e?(n={referenceId:e,messageIndex:r},i[3]=r,i[4]=e,i[5]=n):n=i[5],n}(),[,i]=(0,Z.ok)(),a=(0,v.useMemo)(()=>e.messages??[],[e.messages]),s=(0,v.useMemo)(()=>null!==n&&n>=0&&n<a.length?a[n]:null,[a,n]),r=(0,v.useMemo)(()=>s?.references??e.currentReferences??[],[s?.references,e.currentReferences]),o=(0,v.useMemo)(()=>t&&r.length?r.find(e=>(0,n6.Vb)(e)===t)??null:null,[t,r]),l=n8({messageIndex:n??a.length,messageId:s?.id,messageTimestamp:s?.createdAt});(0,v.useEffect)(()=>{o&&(l(o),i(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,i])}();let I=(0,eQ.tZ)(),k=(0,eQ.wI)(),{closePreviewPane:T,openPreviewPane:L,closeResourcePanel:E,openResourcePanel:R}=(0,eQ.xx)();f[0]!==T||f[1]!==L?(e=e=>{e?L():T()},f[0]=T,f[1]=L,f[2]=e):e=f[2];let A=e;f[3]!==E||f[4]!==R?(t=e=>{e?R():E()},f[3]=E,f[4]=R,f[5]=t):t=f[5];let D=t;f[6]!==b||f[7]!==_?(n=(0,dk.bG)(b,_),f[6]=b,f[7]=_,f[8]=n):n=f[8];let P=n;if(b&&P){let e,t,n=P.Component;return f[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{"data-favicon-override":tO}),f[9]=e):e=f[9],f[10]!==n||f[11]!==b||f[12]!==g?(t=(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)(v.Suspense,{children:(0,m.jsx)(n,{chatState:g,plugin:b})})]}),f[10]=n,f[11]=b,f[12]=g,f[13]=t):t=f[13],t}f[14]!==N||f[15]!==y||f[16]!==w||f[17]!==g.selectedThreadID||f[18]!==x?(i=w?(0,m.jsx)(pF,{copilotSpaces:y}):N?(0,m.jsx)(pS,{customCopilotId:N,selectedThreadID:g.selectedThreadID,textAreaRef:x}):null,f[14]=N,f[15]=y,f[16]=w,f[17]=g.selectedThreadID,f[18]=x,f[19]=i):i=f[19];let O=i;if(O){let e,t,n;return f[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(hj,{})}),f[20]=e):e=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),f[21]=t):t=f[21],f[22]!==O?(n=(0,m.jsxs)(J.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:tO,children:[e,t,(0,m.jsx)(J.P.ColumnLeft,{children:O})]}),f[22]=O,f[23]=n):n=f[23],n}f[24]!==I||f[25]!==A?(a=[I,A],f[24]=I,f[25]=A,f[26]=a):a=f[26],f[27]!==k||f[28]!==D?(s=[k,D],f[27]=k,f[28]=D,f[29]=s):s=f[29],f[30]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),f[30]=r):r=f[30],f[31]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(mP,{})}),f[31]=o):o=f[31];let M=tx.W.stableConversationView?void 0:g.selectedThreadID;return f[32]!==S||f[33]!==M||f[34]!==x?(l=(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(m_,{isMobile:S,textAreaRef:x},M)}),f[32]=S,f[33]=M,f[34]=x,f[35]=l):l=f[35],f[36]!==k?(c=tx.W.copilotResourcePanel&&k&&(0,m.jsx)(mG,{}),f[36]=k,f[37]=c):c=f[37],f[38]!==x?(d=(0,m.jsx)(o9,{returnFocusRef:x}),f[38]=x,f[39]=d):d=f[39],f[40]!==c||f[41]!==d?(u=(0,m.jsxs)(J.P.ColumnRight,{className:"d-flex",children:[c,d]}),f[40]=c,f[41]=d,f[42]=u):u=f[42],f[43]!==u||f[44]!==a||f[45]!==s||f[46]!==l?(p=(0,m.jsxs)(J.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:tO,secondaryColumnState:a,resourcePanelState:s,children:[r,o,l,u]}),f[43]=u,f[44]=a,f[45]=s,f[46]=l,f[47]=p):p=f[47],p}try{pH.displayName||(pH.displayName="Layout")}catch{}let pW=(0,a6.E7)();function pq(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(no.RelayEnvironmentProvider,{environment:pW,children:(0,m.jsx)(pz,{})}),t[0]=e):e=t[0],e}function pz(){let e=(0,h.c)(2),t=(0,F.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(pG,{children:(0,m.jsx)(pQ,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(dN,{}),e[1]=t):t=e[1],t}}function pG(e){let t,n,i,a,s,r,o,l=(0,h.c)(47),{children:c}=e,d=(0,F.X)(),u=dM(),p=d.requestedTopic;if((0,n6.P)(p)){let e,n;l[0]!==p?(e=(0,n6.UU)(p),l[0]=p,l[1]=e):e=l[1],l[2]!==e?(n={refs:[e],topic:void 0},l[2]=e,l[3]=n):n=l[3],t=n}else if(d.reference){let e,n;l[4]!==d.reference?(e=[d.reference],l[4]=d.reference,l[5]=e):e=l[5],l[6]!==p||l[7]!==e?(n={refs:e,topic:p},l[6]=p,l[7]=e,l[8]=n):n=l[8],t=n}else{let e,n;l[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[9]=e):e=l[9],l[10]!==p?(n={refs:e,topic:p},l[10]=p,l[11]=n):n=l[11],t=n}let{refs:f,topic:g}=t;l[12]===Symbol.for("react.memo_cache_sentinel")?(n=(0,G.G7)("copilot_mission_control"),l[12]=n):n=l[12];let y=n;if(l[13]!==d.agentsEnabled||l[14]!==d.apiURL||l[15]!==d.graphqlApiUrl||l[16]!==d.loopsClientUrl||l[17]!==d.previewUrl||l[18]!==d.realIp||l[19]!==d.sparkEnabled||l[20]!==d.ssoOrganizations){if(i=[],tx.W.loopsPlugin){let e;l[22]!==d.apiURL||l[23]!==d.graphqlApiUrl||l[24]!==d.loopsClientUrl||l[25]!==d.previewUrl||l[26]!==d.realIp||l[27]!==d.ssoOrganizations?(e=new LoopsPlugin(d.apiURL,d.graphqlApiUrl,d.loopsClientUrl,d.ssoOrganizations.map(pK),d.previewUrl,d.realIp),l[22]=d.apiURL,l[23]=d.graphqlApiUrl,l[24]=d.loopsClientUrl,l[25]=d.previewUrl,l[26]=d.realIp,l[27]=d.ssoOrganizations,l[28]=e):e=l[28],i.push(e)}if(d.sparkEnabled){let e;l[29]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,l[29]=e):e=l[29],i.push(e)}if(d.agentsEnabled){let e;l[30]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,l[30]=e):e=l[30],i.push(e)}if(y){let e;l[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,l[31]=e):e=l[31],i.push(e)}l[13]=d.agentsEnabled,l[14]=d.apiURL,l[15]=d.graphqlApiUrl,l[16]=d.loopsClientUrl,l[17]=d.previewUrl,l[18]=d.realIp,l[19]=d.sparkEnabled,l[20]=d.ssoOrganizations,l[21]=i}else i=l[21];let x=i;return l[32]!==c?(a=(0,m.jsx)(eQ.BH,{children:c}),l[32]=c,l[33]=a):a=l[33],l[34]!==d||l[35]!==f||l[36]!==a||l[37]!==u||l[38]!==g?(s=(0,m.jsx)($.Mj,{workerPath:d.searchWorkerFilePath,threadId:u,refs:f,mode:"immersive",topic:g,ssoOrganizations:d.ssoOrganizations,copilotUpsellBannerDismissed:d.copilotUpsellBannerDismissed,copilotChatPayload:d,children:a}),l[34]=d,l[35]=f,l[36]=a,l[37]=u,l[38]=g,l[39]=s):s=l[39],l[40]!==d.apiURL||l[41]!==d.ssoOrganizations||l[42]!==s?(r=(0,m.jsx)(l2.hh,{apiURL:d.apiURL,ssoOrgs:d.ssoOrganizations,children:s}),l[40]=d.apiURL,l[41]=d.ssoOrganizations,l[42]=s,l[43]=r):r=l[43],l[44]!==x||l[45]!==r?(o=(0,m.jsx)(eY.KL,{children:(0,m.jsx)(d_.LB,{children:(0,m.jsx)(tE.Hb,{plugins:x,children:r})})}),l[44]=x,l[45]=r,l[46]=o):o=l[46],o}function pK(e){return e.id}function pQ(){let e,t,n,i=(0,h.c)(1);!function(){let e,t,n=(0,h.c)(7),i=dM(),a=(0,v.useRef)(!0),s=(0,v.useRef)(null),r=(0,H.b)(),{threads:o,selectedThreadID:l}=(0,$.Pk)(),c=dO(),{selectedThreadID:d,sharedThreadChannel:u}=(0,$.Pk)(),m=(0,H.b)();(0,la.x)(u,()=>{m.fetchSharedThreadMessages(d)}),n[0]!==c||n[1]!==r||n[2]!==l||n[3]!==i||n[4]!==o?(e=()=>{if(a.current){a.current=!1,s.current=i,c?r.fetchSharedThreadMessages(l):r.fetchMessages(l);return}if(s.current!==i){if(s.current=i,i===l)return;let e=i&&o?.get(i);r.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[r,i,o,l,c],n[0]=c,n[1]=r,n[2]=l,n[3]=i,n[4]=o,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,v.useEffect)(e,t)}(),function(){let e,t,n=(0,h.c)(8),{selectedThreadID:i}=(0,$.Pk)(),a=(0,dI.v)(),s=(0,uw.M)((0,Z.Zp)());n[0]!==s||n[1]!==a?.skipSyncRouteToThread||n[2]!==i?(e=()=>{if(!i||a?.skipSyncRouteToThread)return;let e=`${n6.Jz}/c/${i}`,t=`${n6.Jz}/share/${i}`,n=window.location.pathname;n.startsWith(e)||n.startsWith(t)||s.current(e)},n[0]=s,n[1]=a?.skipSyncRouteToThread,n[2]=i,n[3]=e):e=n[3];let r=a?.skipSyncRouteToThread;n[4]!==s||n[5]!==i||n[6]!==r?(t=[s,r,i],n[4]=s,n[5]=i,n[6]=r,n[7]=t):t=n[7],(0,v.useEffect)(e,t)}();let a=(0,h.c)(3),s=(0,H.b)();return a[0]!==s?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(s.showTopicPicker(!1),s.selectThread(null)):window.location.href.includes("/c/")||(s.showTopicPicker(!0),s.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,v.useEffect)(t,n),!function(){let e,t,n,i,a=(0,h.c)(11),s=(0,l3.y)(),{selectedThreadID:r,fetchSharedThreads:o}=(0,$.bP)("selectedThreadID","fetchSharedThreads"),l=!!o?.shareId&&r===o?.shareId;a[0]!==l||a[1]!==r||a[2]!==s?(e=()=>{r&&!l&&s.fetchAndLoadTraces(r)},t=[r,s,l],a[0]=l,a[1]=r,a[2]=s,a[3]=e,a[4]=t):(e=a[3],t=a[4]),(0,v.useEffect)(e,t),a[5]!==o||a[6]!==l||a[7]!==r||a[8]!==s?(n=()=>{o?.ok&&o.originalThreadId&&l&&r&&s.fetchAndLoadTraces(o.originalThreadId,r)},i=[o,s,l,r],a[5]=o,a[6]=l,a[7]=r,a[8]=s,a[9]=n,a[10]=i):(n=a[9],i=a[10]),(0,v.useEffect)(n,i)}(),i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(pH,{}),i[0]=e):e=i[0],e}try{pq.displayName||(pq.displayName="CopilotImmersive")}catch{}try{pz.displayName||(pz.displayName="CopilotImmersiveNoRelay")}catch{}try{pG.displayName||(pG.displayName="CopilotImmersiveProviders")}catch{}try{pQ.displayName||(pQ.displayName="Immersive")}catch{}(0,u.o)("copilot-immersive-v1",()=>({App:p,routes:[(0,d.a)({path:"/copilot",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/c/:threadID",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/d/:docsetName",Component:pq}),(0,d.a)({path:"/copilot/r/:owner/:repository",Component:pq}),(0,d.a)({path:"/copilot/share/:threadID",Component:pq}),(0,d.a)({path:"/copilot/loops",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/l/:loopID",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/workbench",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spark",Component:pq,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spaces",Component:pq}),(0,d.a)({path:"/copilot/spaces/:spaceID",Component:pq}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:pq}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:pq}),(0,d.a)({path:"/copilot/spaces/:spaceID/edit",Component:pq}),(0,d.a)({path:"/copilot/spaces/new",Component:pq}),(0,d.a)({path:"/copilot/agents",Component:pq}),(0,d.a)({path:"/copilot/tasks/pull/:globalID",Component:pq})]}))},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[o,l]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),r[0]=t):t=r[0];let c=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),r[1]=n):n=r[1];let d=n;return r[2]!==o?(s=[o,c,d],r[2]=o,r[3]=s):s=r[3],s}},41649:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(21728),a=n(88431),s=n(96540);let r=e=>{let t,n,r,o=(0,i.c)(4),l=(0,s.useRef)(e);return o[0]!==e?(t=()=>{l.current=e},n=[e],o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,a.N)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(r=(...e)=>l.current?.(...e),o[3]=r):r=o[3],r}},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},295:(e,t,n)=>{n.d(t,{h:()=>c});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),o=n(80770),l=n(99993);function c(){let e,t,n,c=(0,i.c)(7),d=(0,a.jE)(),u=(0,r.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M1,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,s.n)(n)}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(21728),a=n(94747),s=n(97665),r=n(46747),o=n(99519),l=n(99993),c=n(33026);function d(e){let t,n,s=(0,i.c)(5),r=(0,o.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,l.c_)(t,c.kj)});let a=n.getQueryData((0,l.c_)(t,c.kj)),s=a?.version?n.getQueryData((0,l.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,l.c_)(t,c.kj),e),e.version&&n.setQueryData((0,l.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,l.c_)(i.loopID,c.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,l.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],d(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),o=d(),u=(0,r.d)(o.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,l.c_)(n,c.kj)});let s=i(a.getQueryData((0,l.c_)(n,c.kj))??null);return a.setQueryData((0,l.c_)(n,c.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==o?(t={...o,mutate:m},n[3]=m,n[4]=o,n[5]=t):t=n[5],t}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},80770:(e,t,n)=>{n.d(t,{C:()=>o,n:()=>r});var i=n(21728),a=n(97286),s=n(99519);let r="all-loops";function o(){let e,t,n=(0,i.c)(3),o=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==o?(t={queryKey:e,queryFn:async()=>{let e=await o.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(l)},refetchOnMount:!0},n[1]=o,n[2]=t):t=n[2],(0,a.I)(t)}function l(e,t){return t.updatedAt-e.updatedAt}},48057:(e,t,n)=>{n.d(t,{Cv:()=>u,Qk:()=>y,vx:()=>f,wu:()=>p});var i=n(21728),a=n(97286),s=n(99519),r=n(5533),o=n(33026),l=n(50050),c=n(99993);let d=[400,401,403,404];function u(){let{data:e}=(0,c._N)(h,"latest"),t=(0,l.Ud)(m);return t===o.qD||t===o.kj?e:t}function m(e){return e.version}function h(e){return e?.version}function p(e,t){return["execution",e,t]}function f(){let e,t=(0,i.c)(3),{data:n}=(0,c._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=p(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let t,n,l,d,m=(0,i.c)(14),{data:h}=(0,c._N)(v),f=u(),g=(0,s.EY)(),y=h??"",b=f??"";m[0]!==y||m[1]!==b?(t=p(y,b),m[0]=y,m[1]=b,m[2]=t):t=m[2],m[3]!==h||m[4]!==g||m[5]!==f?(n=async()=>{if(!h||!f)return null;let e=await g.getExecution(h,f,o.qD);if(!e.success){let t=Error("Error fetching execution.");throw t.cause=e.httpStatus,t}let t=e.data;return g.isExecutionRunning(t.id)!==(0,r.y)(t)?null:t},m[3]=h,m[4]=g,m[5]=f,m[6]=n):n=m[6];let _=!!h&&!!f;return m[7]!==e?(l=e&&{select:e},m[7]=e,m[8]=l):l=m[8],m[9]!==t||m[10]!==n||m[11]!==_||m[12]!==l?(d={queryKey:t,queryFn:n,enabled:_,...l,staleTime:3e5,retry:x},m[9]=t,m[10]=n,m[11]=_,m[12]=l,m[13]=d):d=m[13],(0,a.I)(d)}function x(e,t){return!("number"==typeof t.cause&&d.includes(t.cause))&&e<3}function v(e){return e?.id}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>p,c_:()=>h});var i=n(21728),a=n(97665),s=n(97286),r=n(13017),o=n(99519),l=n(78456),c=n(33026),d=n(50050),u=n(90756);let m="loop";function h(e,t){return[m,e,t]}function p(e,t){let n,p,y,x,v=(0,i.c)(15),{loopID:b}=(0,r.g)(),_=(0,o.EY)(),j=(0,a.jE)(),C=(0,d.Ud)(g),w=t||C||c.kj;v[0]!==b||v[1]!==w?(n=[m,b,w],v[0]=b,v[1]=w,v[2]=n):n=v[2];let N=n;v[3]!==b||v[4]!==j||v[5]!==_||v[6]!==w?(p=async()=>{if(!b)return null;let e=l.Io.find(e=>e.id===b)??null;if(e)return e;let t=await _.getLoop(b,w);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==w&&j.setQueryData(h(t.data.id,t.data.version),t.data),t.data},v[3]=b,v[4]=j,v[5]=_,v[6]=w,v[7]=p):p=v[7];let S=!!b;return v[8]!==e?(y=e&&{select:e},v[8]=e,v[9]=y):y=v[9],v[10]!==N||v[11]!==p||v[12]!==S||v[13]!==y?(x={placeholderData:f,queryKey:N,queryFn:p,enabled:S,...y,staleTime:3e5},v[10]=N,v[11]=p,v[12]=S,v[13]=y,v[14]=x):x=v[14],(0,s.I)(x)}function f(e){return e}function g(e){return e?.version}},22053:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(21728),a=n(50050),s=n(33026),r=n(64917);function o(){let e,t=(0,i.c)(4),n=(0,a.Ud)(c),o=(0,r.I)(l),d=n!==s.kj&&n!==s.qD;if(void 0===o){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===o){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(d){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function l(e){return e?.owned}function c(e){return e.version}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(21728),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),o=n(16213),l=n(91348),c=n(45363),d=n(21046),u=n(90122),m=new WeakMap,h=new WeakMap,p=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,h),chatClient:(0,i._)(this,p),signal:e,onPartialResult:t,execution:n};return c.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,h,t),(0,s._)(this,p,n)}};var f=n(33026),g=new WeakMap,y=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,C=new WeakSet,w=new WeakSet,N=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,l.FT)((0,i._)(this,x));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,w,I).call(this,n,e,t)))}stop(e){(0,i._)(this,j).abort(),e((0,i._)(this,v))}constructor(e,t,n,i){(0,o._)(this,C),(0,o._)(this,w),(0,o._)(this,N),(0,a._)(this,g,{writable:!0,value:void 0}),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,s._)(this,g,n),(0,s._)(this,y,i),(0,s._)(this,x,e),(0,s._)(this,v,t),(0,s._)(this,b,(0,l.f0)(e.nodes)),(0,s._)(this,_,new Map),(0,s._)(this,j,new AbortController)}};function S(){return(0,i._)(this,j).signal.aborted}async function I(e,t,n){let a=(0,i._)(this,_).get(e.id);if(a)return a;let s=(0,r._)(this,N,k).call(this,e,t,n);return(0,i._)(this,_).set(e.id,s),s}async function k(e,t,n){if((0,r._)(this,C,S).call(this))return null;let a=await n((0,i._)(this,x).id,(0,i._)(this,x).version||f.kj,(0,i._)(this,v));if(!a.success)throw Error("Unable to load execution");let s=a.data,o=s.nodes[e.id]?.value;if(o)return o;let l=[...new Set((0,i._)(this,b).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,x).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(l.map(async e=>[e.id,await (0,r._)(this,w,I).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,C,S).call(this))return null;let h=Object.fromEntries(m);try{let n=((e,t)=>{let n={...e},i=n.content;return"string"==typeof i&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,d.vV)(`Node with ID "${i}" not found in node map`),e;let o=r;if(a)if(r&&"object"==typeof r&&!Array.isArray(r)){let e=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(r,a);if(null!==e)o=e;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`);return String(("string"!=typeof o||n?JSON.stringify(o):o)??e)})}(i,t,c.C.requiresCodeEvaluation(e.type))),n})(e,h),a=new NodeRunner(n,(0,i._)(this,g),(0,i._)(this,y));t({type:"SET_RUNNING",nodeID:e.id});let o=n=>{(0,r._)(this,C,S).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:l}=await a.run((0,i._)(this,j).signal,o,s);return(0,r._)(this,C,S).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:l}),l}catch(n){var p;return(0,r._)(this,C,S).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(p=n)instanceof Error?p.message:"string"==typeof p?p:"object"==typeof p?JSON.stringify(p):""}),null}}var T=n(43134),L=n(76746),E=n(53419),R=new WeakMap,A=new WeakMap,D=new WeakMap,P=new WeakMap,O=new WeakSet;let LoopsService=class LoopsService{async getGraphQLResponse(e){return(0,i._)(this,A).getGraphQLResponse(e)}getLoop(e,t=f.kj){return(0,i._)(this,R).getLoop(e,t)}getAllLoops(){return(0,i._)(this,R).listLoops()}getLoopVersions(e){return(0,i._)(this,R).listLoopVersions(e)}createLoop(e){return(0,i._)(this,R).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,R).getLoop(e,f.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,R).updateLoop(e,f.kj,a)}async deleteLoop(e){return(0,T._T)(e),(0,i._)(this,R).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,R).updateLoop(t.id,f.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,R).updateLoop(e.id,f.qD,e)}async revertLoop(e){let t=await (0,i._)(this,R).getLoop(e,f.qD);return t.success?(0,i._)(this,R).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,R).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,R).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,R).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,R).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,o]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===o.value&&r.nodes[s].error===o.error||await (0,i._)(this,R).updateNodeExecution(e,t,n,s,o);return await (0,i._)(this,R).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,P).get(e)}async runPipeline(e,t,n,a){if((0,L.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,A),(0,i._)(this,D));(0,i._)(this,P).set(t,s);try{await s.run(n,a),(0,E.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,E.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,P).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,P).get(e);n&&(n.stop(t),(0,i._)(this,P).delete(e),(0,E.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,R).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,R).unshareLoop(e)}constructor(e,t,n){(0,o._)(this,O),(0,a._)(this,R,{writable:!0,value:void 0}),(0,a._)(this,A,{writable:!0,value:void 0}),(0,a._)(this,D,{writable:!0,value:void 0}),(0,a._)(this,P,{writable:!0,value:new Map}),(0,r._)(this,O,M).call(this),(0,s._)(this,R,e),(0,s._)(this,A,t),(0,s._)(this,D,n)}};function M(){indexedDB.deleteDatabase("copilot-pipes")}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),o=n(38621);function l(e){return e.content}var c=n(90122),d=n(31629),u=n(39087),m=n(59370),h=n(53419),p=n(13647),f=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,h.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,c.Vq)(e),a="";for await(let s of t.chatClient.getChatCompletion(i,e.metadata?.model,t.signal))a+=s.content,s.usage&&(n=s.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e){return[]}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>o.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n;t.execution&&(n={nodeId:e.id,loopId:t.execution?.loopID,version:t.execution?.loopVersion,executionId:t.execution?.id});let i=await t.graphQLClient.getGraphQLResponse(e.content,{signal:t.signal,nodeExecution:n});return i?{value:i.data??null}:{value:null}}validate(e){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>o.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:p.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>o.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:p.a1,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>o.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:p.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution?.inputValues?.[e.id],i=void 0!==n?n:l(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e){let t=[],n=e.metadata;if("object"!=typeof n||!n)return t.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),t;switch(n.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||t.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):t.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return t}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,d.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return f.j6;else return f.hO;return(0,u.J)(e,"icon")}return o.TypographyIcon},description:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>o.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:p.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e){let t=(0,i._)(this,g).get(e.type);return t?t.validate(e):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n,i;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"===n.error?n.error:i??s:i??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),t.concat(s.C.validateNode(e))}(n));return t}(e),n=(0,a.f0)(e.nodes);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),s=e.nodes.find(e=>e.id===a.to);n&&s||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[a.to]})}let r=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(n);if(r&&r.length>0){let e=[...r,r[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:r})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(n);return o.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),t}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue"}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:a.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},82590:(e,t,n)=>{n.d(t,{J1:()=>c,Os:()=>o,QK:()=>l,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>d});var i=n(25641);let a="loops",s="loops",r="loop",o="Loops",l=`${i.Jz}/loops`,c=`${i.Jz}/l`,d=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(s,10),l="+"===a,c=new Date(t);switch(r){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:c}}(e).date:a(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>o,Qf:()=>r,Yj:()=>s,nS:()=>i})},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},13647:(e,t,n)=>{n.d(t,{PW:()=>o,V2:()=>r,Ve:()=>s,a1:()=>a});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_react_nodes")}function s(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function r(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function o(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>l,kX:()=>h,nT:()=>d});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),o=n(45363);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of c(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let o=e.nodes.get(s);if(!o)return t[s]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return new Set([...c(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},h=(e,t)=>{let n=function(e){return{...e,nodes:e.nodes.map(p)}}(e);return{...n,nodes:(n.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function p(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=l(e.nodes);return e.nodes.filter(e=>x(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>x(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function x(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(82590);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},87459:(e,t,n)=>{n.d(t,{oO:()=>iM,Ao:()=>iO,Yf:()=>F.Yf});var i=n(74848),a=n(2087),s=n(96540),r=n(36729),o=n(77430),l=n(38621),c=n(81960),d=n(26108),u=n(53627);function m(e,t="r"){(0,u.Zu)(`#${t}${e}`)}var h=n(91835),p=n(71315),f=n(83494),g=n(50625),y=n(93642);let x={AddCommentEditor:"AddCommentEditor-module__AddCommentEditor--JFfip"};var v=n(70109),b=n(59201);function _({batchingEnabled:e,condensed:t,fileLevelComment:n,filePath:a,focusOnMount:r,isReplying:o,lineNumber:l,onAddComment:c,onCancelComment:d,onPersistedCommentExists:u,quotedText:m="",side:_,startLineNumber:j,subjectId:C,threadId:w,suggestedChangesConfig:N}){let[S,I]=(0,s.useState)(m),[k,T]=(0,s.useState)(!1),[L,E]=(0,s.useState)(!1),R=(0,s.useRef)(m),[A,D]=(0,s.useState)(),P=(0,s.useRef)(null),O=(0,s.useRef)(null),M=(0,b.it)(),{persistCommentToStorage:F,removePersistedCommentFromStorage:B}=(0,g.L)({diffSide:_,filePath:a,line:l,subjectId:C,threadId:w,handlePersistedCommentExists:({text:e})=>{e&&(I(e),u?.())},fileLevelComment:!!n});(0,s.useEffect)(()=>{m!==R.current&&(R.current=m,I(m))},[m]),(0,s.useEffect)(()=>{if(r){let e=setTimeout(()=>{if(p.XC&&p.cg){if(O.current){let e=O.current,t=e.getBoundingClientRect(),n=p.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(p.cg?.innerHeight||n))){let i=t.top,a=p.XC?.documentElement.getBoundingClientRect().top||0,s=e.clientHeight*(2/3);p.cg?.scrollTo({top:i-a-2/3*n+s,behavior:"smooth"})}}P.current&&(P.current.focus(),P.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},[r]);let $=({submitBatch:e,isSubmittingCommentOverride:t,isSubmittingReviewCommentOverride:n})=>{let i="Failed to save comment";if(k||L)return;if(!S.trim())return void D(`${i}: Body can't be blank`);t?T(!0):n&&E(!0),D(void 0);let a=(0,y.u)(S,N?.sourceContentFromDiffLines??"");if(!a.isValid){D(a.errorMessage),k?T(!1):L&&E(!1);return}c?.({commentText:S,onCompleted(){t?T(!1):n&&E(!1),H()},onError(e){t?T(!1):n&&E(!1),e.message&&(i=`${i}: ${e.message}`),D(i)},submitBatch:e})},U=()=>$({submitBatch:!1,isSubmittingReviewCommentOverride:!0}),V=()=>$({submitBatch:!0,isSubmittingCommentOverride:!0}),H=(0,s.useCallback)(()=>{B(),I(""),d?.()},[d,B]),W={footer:{justifyContent:o?"end":"space-between","> div:first-child":{display:t||o?"none":"flex"},...t&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(f.tL,{commands:{"pull-requests-conversations:submit-comment-and-review":V},children:(0,i.jsx)("div",{className:x.AddCommentEditor,onKeyDown:e=>{"Escape"!==e.key||S.trim()?e.stopPropagation():(e.preventDefault(),H())},children:(0,i.jsxs)(v.S,{ref:P,label:"Add diff comment",sx:W,value:S,onChange:e=>{D(void 0),F({text:e}),I(e)},onPrimaryAction:e?U:V,suggestedChangesConfig:N,markdownErrorMessage:A,lineNumber:l,filePath:a,startLineNumber:j,disabled:k||L,children:[d&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:"default",onClick:H,children:"Cancel"}),!M&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:e?"default":"primary",onClick:V,ref:O,loading:k,children:o?"Reply":"Comment"}),e&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:"primary",onClick:U,loading:L,children:M?"Add review comment":"Start a review"})]})})})}try{_.displayName||(_.displayName="AddCommentEditor")}catch{}function j({addCommentDialogTitle:e,isLeftSide:t,fileLevelComment:n,filePath:a,focusOnMount:s=!0,lineNumber:r,onAddComment:u,onClose:h,viewerData:p,threadsConnectionId:f,showOnCloseIcon:g=!0,...y}){return(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsxs)(c.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,i.jsx)(o.r,{alt:p.login,size:24,src:p.avatarUrl||"",className:"mr-2"}),n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:e??"Add a comment"})]}),h&&g&&(0,i.jsx)(d.K,{variant:"invisible",icon:l.XIcon,onClick:h,"aria-label":"Cancel"})]}),(0,i.jsx)(_,{focusOnMount:s,condensed:!1,fileLevelComment:n??!1,filePath:a,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{u({text:e,onError:n,onCompleted:(e,n)=>{n&&m(n.toString()),t?.(e,n)},submitBatch:i})},onCancelComment:h,side:t?"LEFT":"RIGHT",...y})]})}try{j.displayName||(j.displayName="StartThreadComment")}catch{}var C=n(33671),w=n(8934),N=n(97286),S=n(73017),I=n(69726);let k={fileRendererViewport:"RichDiff-module__fileRendererViewport--EBwd1",fileRendererIframe:"RichDiff-module__fileRendererIframe--svTsY"};function T({queryConfig:e,initialData:t}){let n;t&&(t.proseDiffHtml||t.renderInfo||t.dependencyDiffPath)&&(n={proseDiffHtml:t.proseDiffHtml,renderInfo:t.renderInfo,dependencyDiffPath:t.dependencyDiffPath});let a=(0,N.I)({queryKey:[e?.key,e?.args],queryFn:async()=>await e?.fetcher(e.args)||{},initialData:n,staleTime:1/0,enabled:!!e}),{data:s,isLoading:r}=e?a:{data:n,isLoading:!1},{proseDiffHtml:o,renderInfo:l,dependencyDiffPath:c}=s||{};return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(I.A,{size:"large"})}):o?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(S.vb,{html:o})}):l?(0,i.jsx)(C.default,{...l,viewportClassName:k.fileRendererViewport,iframeClassName:k.fileRendererIframe}):c?(0,i.jsx)("div",{children:(0,i.jsx)(w.x,{src:c,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(I.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{T.displayName||(T.displayName="RichDiff")}catch{}var L=n(59523),E=n(19976),R=n(13083),A=n(1805),D=n(34164),P=n(21373);let O={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--gSfuk"};function M({children:e,helpText:t,helpUrl:n,onLoadDiff:a,diffAnchor:r}){let o=n&&t,[c,d]=(0,s.useState)("initial"),u=(0,s.useCallback)(async()=>{try{d("loading"),await a()}catch{d("error")}},[a,d]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":r,children:(0,i.jsxs)("div",{className:(0,D.$)(O.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===c&&(0,i.jsx)(I.A,{size:"medium"}),"error"===c&&(0,i.jsx)(l.AlertIcon,{size:24}),"initial"===c&&(0,i.jsx)(P.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),d("loading")},children:"Load Diff"}),"error"===c?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(A.A,{inline:!0,as:"button",onClick:()=>{u(),d("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,o&&(0,i.jsx)(A.A,{inline:!0,href:n,children:t})]})]})]})})}try{M.displayName||(M.displayName="HiddenDiffPatch")}catch{}var F=n(3038);let B={finalLineId:"final-hunk-header-line"};function $(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function U(e,t){if("HUNK"===e.type&&e.__id===B.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort($).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function V(e){let t,n=[],i=0;for(let a=1;a<e.length;a++){let s=e[a];if(s&&!(0,F.Po)(s)&&(t=s,"HUNK"===s.type)){let t,r=e[i];if(!r||(0,F.Po)(r))continue;let o=a-1;for(;(!t||(0,F.Po)(t))&&(t=e[o],-1!=--o););t&&!(0,F.Po)(t)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),s.__id===B.finalLineId&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:s.blobLineNumber+20}),i=a;continue}}if(t&&"HUNK"!==t.type){let a=e[i];a&&!(0,F.Po)(a)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var H=n(45800),W=n(35750),q=n(18150),z=n(85242),G=n(88243),K=n(16213),Q=n(50467),Y=n(51391),J=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,et=new WeakMap,en=new WeakMap,ei=new WeakSet,ea=new WeakSet,es=new WeakSet,er=new WeakSet,eo=new WeakSet,el=new WeakSet,ec=new WeakSet,ed=new WeakSet,eu=new WeakSet,em=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,W._)(this,X).get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,s]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,G._)(this,ec,ev).call(this,a)&&(0,W._)(this,ee)&&(s=(0,W._)(this,ee),(0,z._)(this,ee,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,W._)(this,J).length-1,t=(0,W._)(this,J)[e]?.length;t&&(n=(0,W._)(this,J)[e]?.[t-1]);break}case"ArrowUp"===e:(0,G._)(this,ec,ev).call(this,a-1)?((0,G._)(this,em,ej).call(this,s),n=(0,W._)(this,J)[a-1]?.[0]):n=(0,W._)(this,J)[a-1]?.[s];break;case"ArrowDown"===e:(0,G._)(this,ec,ev).call(this,a+1)?((0,G._)(this,em,ej).call(this,s),n=(0,W._)(this,J)[a+1]?.[0]):n=(0,W._)(this,J)[a+1]?.[s];break;case"ArrowLeft"===e:n=(0,W._)(this,J)[a]?.[s-1];break;case"ArrowRight"===e:n=(0,W._)(this,J)[a]?.[s+1];break;case"PageUp"===e:{(0,G._)(this,em,ej).call(this,s);let e=(0,G._)(this,es,ef).call(this,a);n=(0,W._)(this,J)[e]?.[0];break}case"PageDown"===e:{(0,G._)(this,em,ej).call(this,s);let e=(0,G._)(this,ea,ep).call(this,a),t=0;e||(e=(0,W._)(this,J).length-1,t=s),n=(0,W._)(this,J)[e]?.[t];break}case"Home"===e:n=(0,W._)(this,J)[a]?.[0];break;case"End"===e:{let e=(0,W._)(this,J)[a];if(e&&!(0,G._)(this,ec,ev).call(this,a)){let t=e.length-1;n=(0,W._)(this,J)[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,G._)(this,er,eg).call(this,e,t)}focusFirstGridCell(e){e&&(0,W._)(this,X).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,W._)(this,J)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,W._)(this,X).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,W._)(this,J)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,a=(0,W._)(this,X).get(i?.cellId??"");if(!a)return;let[s,r]=a;if("ArrowUp"===e){let e=s-1;for(;!t&&e>=0;)t=(0,G._)(this,ei,eh).call(this,{rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=s+1;for(;!t&&e<(0,W._)(this,J).length;)t=(0,G._)(this,ei,eh).call(this,{rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,W._)(this,X).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,W._)(this,en)?(0,W._)(this,J)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,W._)(this,en)?(0,W._)(this,J)[e]?.[this.focusedGridCell.columnIndex+2]:(0,W._)(this,J)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,W._)(this,J).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,W._)(this,J).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,F.qX)((0,W._)(this,et),e,t),a=(0,F.u6)(i,0),s=(0,W._)(this,X).get(a);if(!s)return!1;let[r]=s;return!!n===(0,G._)(this,ec,ev).call(this,r)}constructor(e,t,n,i,a){(0,K._)(this,ei),(0,K._)(this,ea),(0,K._)(this,es),(0,K._)(this,er),(0,K._)(this,eo),(0,K._)(this,el),(0,K._)(this,ec),(0,K._)(this,ed),(0,K._)(this,eu),(0,K._)(this,em),(0,q._)(this,J,{writable:!0,value:[]}),(0,q._)(this,X,{writable:!0,value:new Map}),(0,q._)(this,Z,{writable:!0,value:new Set}),(0,Q._)(this,"focusedGridCell",void 0),(0,Q._)(this,"lastSelectedGridCell",void 0),(0,q._)(this,ee,{writable:!0,value:void 0}),(0,q._)(this,et,{writable:!0,value:void 0}),(0,q._)(this,en,{writable:!0,value:void 0}),(0,z._)(this,et,e),(0,z._)(this,en,t),(0,G._)(this,er,eg).call(this,n,i),this.focusFirstGridCell(a)}};function eh({rowIndex:e,columnIndex:t}){let n=(0,W._)(this,J)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,W._)(this,en):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,W._)(this,en):return n?.[t+1];default:return n?.[t]}}function ep(e){return Array.from((0,W._)(this,Z)).sort((e,t)=>e-t).find(t=>t>e)}function ef(e){return Array.from((0,W._)(this,Z)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function eg(e,t){(0,z._)(this,J,[]),(0,z._)(this,X,new Map),(0,z._)(this,Z,new Set);for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if((0,W._)(this,en)){let e=(t||[])[n],s=(0,F.qX)((0,W._)(this,et),a,e);(0,F.Po)(a)||"HUNK"!==a.type?(0,G._)(this,ed,eb).call(this,{leftLine:a,rightLine:e,row:i,rowIdentifier:s,rowIndex:n}):(0,G._)(this,el,ex).call(this,i,s,n,a)}else{let e=(0,F.qX)((0,W._)(this,et),a,a);(0,F.Po)(a)||"HUNK"!==a.type?(0,G._)(this,eu,e_).call(this,{diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):(0,G._)(this,el,ex).call(this,i,e,n,a)}(0,W._)(this,J).push(i)}}}function ey({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:s,isSplit:r}){let o,l,c=(0,F.u6)(a,e);l=!(r||(0,F.Po)(t))&&t?.type==="DELETION"&&1===e||!(r||(0,F.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,F.Po)(t),(0,F.Po)(t)||"left"!==n||(o=t?.left),(0,F.Po)(t)||"right"!==n||(o=t?.right),i.push({lineNumber:o,orientation:n,isEmpty:l,isHunk:!1,cellId:(0,F.u6)(a,e),columnIndex:e,lineKey:!(0,F.Po)(t)&&t?(0,Y.bo)(t):void 0}),(0,W._)(this,X).set(c,[s,e])}function ex(e,t,n,i){let a=(0,F.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:a,columnIndex:0,lineKey:(0,Y.bo)(i)}),(0,W._)(this,X).set(a,[n,0]),(0,W._)(this,Z).add(n)}function ev(e){return(0,W._)(this,Z).has(e)}function eb({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){(0,G._)(this,eo,ey).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,G._)(this,eo,ey).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,G._)(this,eo,ey).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,G._)(this,eo,ey).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0})}function e_({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,F.Po)(e)||"DELETION"!==e.type?"right":"left";(0,G._)(this,eo,ey).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,G._)(this,eo,ey).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,G._)(this,eo,ey).call(this,{cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function ej(e){(0,G._)(this,ec,ev).call(this,e)||(0,z._)(this,ee,e)}function eC(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}var ew=n(11683);let eN={ArrowLeft:ew.z0.ArrowHorizontal,ArrowDown:ew.z0.ArrowVertical,ArrowUp:ew.z0.ArrowVertical,ArrowRight:ew.z0.ArrowHorizontal,h:ew.z0.HL,j:ew.z0.JK,k:ew.z0.JK,l:ew.z0.HL,a:ew.z0.AD,s:ew.z0.WS,w:ew.z0.WS,d:ew.z0.AD,Tab:ew.z0.Tab,Home:ew.z0.HomeAndEnd,End:ew.z0.HomeAndEnd,PageUp:ew.z0.PageUpDown,PageDown:ew.z0.PageUpDown,Backspace:ew.z0.Backspace},eS=ew.z0.ArrowAll|ew.z0.PageUpDown|ew.z0.HomeAndEnd|ew.z0.AD,eI={ghostUser:{avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"}};var ek=n(61583),eT=n(4559);function eL({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}){if(i&&t){var s;(0,ek.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}),(s={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}).startLineNumber===s.endLineNumber&&s.startOrientation===s.endOrientation?(0,eT.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} selected.`):(0,eT.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} to ${"left"===s.endOrientation?"L":"R"}${s.endLineNumber} selected.`)}}function eE(e){return e in eN&&(eN[e]&eS)>0}function eR({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:a,isSplitDiff:r,leftLines:o,rightLines:l,selectMultipleLines:c,disabled:d}){var u;let m=(0,s.useRef)(void 0),h=(0,s.useMemo)(()=>new GridNavigator(i,r,o,l,m.current?.focusedGridCell?.cellId),[i,r,o,l]);(0,s.useEffect)(()=>{m.current=h},[h]),(0,s.useEffect)(()=>{let e=n.current,t=()=>{h.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,h]),u=m.current,(0,s.useEffect)(()=>{if(u&&document.activeElement){let e=function(e,t,n){let i=[];for(let a=0;a<t.length;a++){let s=t[a],r=n?.[a]??s,o=!(0,F.Po)(s)&&s?.type==="HUNK";s&&r&&!e.hasLine(s,r,o)&&i.push(s)}return i}(u,o,l);if(0!==e.length){if(document.activeElement===document.body){let t,n,a,s=o.indexOf(e[e.length-1]),r=o[s+1],l=e[0];r&&!(0,F.Po)(r)&&"HUNK"===r.type&&(t=(0,F.u6)((0,F.qX)(i,r,r),0),n=document.querySelector(`[data-grid-cell-id=${t}]`),a=n?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(t=(0,F.u6)((0,F.qX)(i,l,l),0),n=document.querySelector(`[data-grid-cell-id=${t}]`),a=n?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&n&&(a?a.focus():n.focus(),h.focusGridCell(t),eC(n))}else if("BUTTON"===document.activeElement.tagName)eC(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=h.focusedGridCell?.cellId;if(e!==t){let e=n.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[i,o,h,l,u,n]);let p=(0,s.useCallback)(e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&h.focusGridCell(t)},[h]);(0,s.useEffect)(()=>{let e=n.current;return e?.addEventListener("focusin",p),()=>e?.removeEventListener("focusin",p)},[n,p]);let f=(0,s.useCallback)((n,i,s)=>{let r=h.getValidSelectableRowCell();switch(!0){case(s.metaKey||s.ctrlKey)&&"KeyA"===s.code:{let e=h.getFirstCodeCell(),t=h.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&c({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},eL),i}case s.shiftKey&&"ArrowDown"===s.key:{let t=h.getNextSelectableCell("ArrowDown");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eL):r.lineKey&&r.lineNumber&&r.orientation&&c({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:r.lineKey,startOrientation:r.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},eL),eA(t.cellId),i}case s.shiftKey&&"ArrowUp"===s.key:{let t=h.getNextSelectableCell("ArrowUp");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eL):r.lineKey&&r.lineNumber&&r.orientation&&c({endLineKey:r.lineKey,endOrientation:r.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},eL),eA(t.cellId),i}case"ArrowLeft"===s.key&&s.metaKey&&s.shiftKey:return i;default:{let e=h.moveToNextItem(s.key,s.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),h.clearLastSelectedCell(),n??void 0}}},[e,a,h,c,t]);return(0,H.G)({containerRef:n,bindKeys:eS,getNextFocusable:f,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:d},[f]),{gridNavigator:h}}function eA(e){let t=p.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!p.XC||!p.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(p.cg.innerHeight||p.XC.documentElement.clientHeight)&&t.right<=(p.cg.innerWidth||p.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var eD=n(21537),eP=n(71323),eO=n(97283),eM=n(87134),eF=n(36472);let eB=(0,s.createContext)(null);function e$(e){let t=(0,s.useContext)(eB);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,eP.P)(t,e)}let eU=({children:e,...t})=>{let n=(0,s.useRef)(null),a=(0,s.useRef)(t.diffLines),r=(0,s.useRef)(t.isSplitView),o=(0,s.useRef)(t.hiddenFeatures);return n.current||(n.current=eV(t)),(0,s.useEffect)(()=>{n.current&&a.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),a.current=t.diffLines)},[t,t.diffLines]),(0,s.useEffect)(()=>{n.current&&r.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),r.current=t.isSplitView)},[t,t.isSplitView]),(0,s.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(o.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),o.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(eB.Provider,{value:n.current,children:e})},eV=e=>(0,eO.y)()((0,eM.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,diffLines:t,fileLineCount:n,isSplitView:i})=>(a,s)=>{let r=t.reduce((e,t)=>(e[(0,Y.bo)(t)]=t,e),{}),{selectedLineKeys:o,selectedLineRange:l,startOrientation:c}=(0,Y.EV)({diffAnchor:e,diffLines:t,isSplitView:i,lineRange:(0,Y.KV)(e)}),d=(0,Y.Aj)(o),u=(0,Y.sB)(o),m=t.reduce((e,t)=>{let n=(0,Y.bo)(t);return o.has((0,Y.bo)(t))&&(e[n]={isSelected:!0,isFirstSelected:d===n,isLastSelected:u===n}),e},{}),h=null;if(d){let e=r[d];if(e&&c){let t="left"===c?e.left:e.right;t&&(h={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:(0,Y.bo)(e)})}}return{diffLines:{diffAnchor:e,_diffLines:t,_diffLinesHash:r,selectedLinesInfo:m,fileLineCount:n,firstLineSelectionOnDrag:h,_firstSelectedLineInfo:h?{lineKey:h.lineKey,lineNumber:h.lineNumber,orientation:h.orientation}:null,getDiffLinesInfo:()=>s().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,F.Mk)(s().diffLines._diffLines),n=t.leftLines,i=t.rightLines;return(0,eF.A)({selectedLineRange:e,leftLines:n,rightLines:i})},getSelectedDiffLines:()=>{let e=[];for(let t of s().diffLines.selectedLineKeys){let n=s().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>s().diffLines.firstLineSelectionOnDrag,getSelectedLineRange:()=>s().diffLines.selectedLineRange,hasSelectedLines:()=>s().diffLines.selectedLineKeys.size>0,isSplitView:i,selectedLineKeys:o,selectedLineRange:l},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(e[(0,Y.bo)(t)]=t,e),{});a(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>a(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null}}),void 0,"clearFirstLineSelectionOnDrag"),addLineToSelection:({lineKey:t,orientation:n},i)=>{let r;if(!t)return;let o=s().diffLines._diffLinesHash[t];if(!o)return;let l=s().diffLines.firstLineSelectionOnDrag,c=s().diffLines._firstSelectedLineInfo,d=s().diffLines.selectedLineRange;if(l&&t===l.lineKey||!d){let e="right"===n?o.right:o.left;if(!e)return;s().diffLinesActions.selectLine({lineKey:t,firstLineSelectionOnDrag:{lineNumber:e,orientation:n,lineKey:t,shouldStartConversation:!1}},i);return}if(!c)return;let u=s().diffLines._diffLinesHash[c.lineKey];r=(0,Y.M6)({current:o,currentOrientation:n,previous:u,previousOrientation:c.orientation})?{...d,startLineNumber:("left"===n?o?.left:o?.right)??-1,startOrientation:n,endLineNumber:c.lineNumber,endOrientation:c.orientation}:{...d,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===n?o?.left:o?.right)??-1,endOrientation:n};let{selectedLineKeys:m,selectedLineRange:h}=(0,Y.EV)({diffAnchor:e,diffLines:s().diffLines._diffLines,isSplitView:s().diffLines.isSplitView,lineRange:r}),p=(0,Y.Aj)(m),f=(0,Y.sB)(m),g=Array.from(m).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===f,isSelected:!0},e),{});h?.endLineNumber&&h?.startLineNumber&&(a(e=>({diffLines:{...e.diffLines,selectedLineKeys:m,selectedLinesInfo:g,selectedLineRange:h}}),void 0,"addLineToSelection"),i(h))},clearSelectedLines:()=>{a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:t},n)=>{if(!e)return;s().diffLinesActions.clearSelectedLines();let i=s().diffLines._diffLinesHash[e];if(!i)return;let r={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},o="left"===t.orientation?i.left:i.right;if(!o)return;let l={diffAnchor:s().diffLines.diffAnchor,endLineNumber:o,endOrientation:t.orientation,startLineNumber:o,startOrientation:t.orientation};a(n=>({diffLines:{...n.diffLines,firstLineSelectionOnDrag:{...t,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:r,selectedLineRange:l,_firstSelectedLineInfo:{lineKey:e,lineNumber:t.lineNumber,orientation:t.orientation}}}),void 0,"selectLine"),n(l)},selectMultipleLines:({startLineKey:t,endLineKey:n,startOrientation:i,endOrientation:r,firstLineSelectionOnDrag:o},l)=>{if(!t||!n||!o)return;let c=s().diffLines._diffLinesHash[t],d=s().diffLines._diffLinesHash[n];if(!c||!d||!c.left&&!c.right||!d.left&&!d.right)return;let u={diffAnchor:e,endLineNumber:("right"===r?d.right:d.left)??-1,endOrientation:r,startLineNumber:("right"===i?c.right:c.left)??-1,startOrientation:i},{selectedLineKeys:m,selectedLineRange:h}=(0,Y.EV)({diffAnchor:e,diffLines:s().diffLines._diffLines,isSplitView:s().diffLines.isSplitView,lineRange:u}),p=(0,Y.Aj)(m),f=(0,Y.sB)(m),g=Array.from(m).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===f,isSelected:!0},e),{});h?.endLineNumber&&h?.startLineNumber&&(a(e=>({diffLines:{...e.diffLines,selectedLinesInfo:g,selectedLineKeys:m,firstLineSelectionOnDrag:o,selectedLineRange:h,_firstSelectedLineInfo:{lineNumber:o.lineNumber,orientation:o.orientation,lineKey:o.lineKey}}}),void 0,"selectMultipleLines"),l(h))}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t)}),{name:`diff-store-${e.diffAnchor}`}));try{eB.displayName||(eB.displayName="DiffStoreContext")}catch{}try{eU.displayName||(eU.displayName="DiffStoreProvider")}catch{}let eH=()=>e$(e=>e.diffLines.getSelectedDiffLines),eW=()=>e$(e=>e.diffLines.getDiffLinesInfo),eq=()=>e$(e=>e.diffLines.getfirstLineSelectionOnDrag),ez=()=>e$(e=>e.diffLines.getSelectedLineRange),eG=()=>e$(e=>e.hiddenFeatures),eK=e=>e$(t=>!!e&&t.dialogMode.activeGridCellId===e),eQ=()=>e$(e=>e.dialogModeActions),eY=()=>e$(e=>e.diffLines.diffAnchor),eJ=()=>e$(e=>e.diffLines.fileLineCount),eX={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},eZ=e=>e$(t=>e&&t.diffLines.selectedLinesInfo[(0,Y.bo)(e)]||eX),e0=()=>e$(e=>e.diffLinesActions);var e1=n(30459);function e2({anchorRef:e,diffAnchor:t,isInDialogMode:n,isOpen:a,returnFocusRef:r,onCloseCommentDialog:o,suggestedChangesConfig:l,...c}){let{sendAnalyticsEvent:d}=(0,e1.s)(),u=(0,s.useRef)(null),m=(0,s.useMemo)(()=>{if(a&&l?.configureSuggestedChangesFromLineRange){let e=function(e){let t=(0,ek.EW)(p.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,a=t[4]?"L"===t[4]?"left":"right":void 0,s=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:a??n,endLineNumber:s??i,startOrientation:n,startLineNumber:i}}(t);return l.configureSuggestedChangesFromLineRange(e,l?.shouldStartNewConversationWithSuggestedChange)}},[t,a,l]);return a?(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:u,tabIndex:n?0:-1,onFocus:e=>{e.target===u.current&&u.current.querySelector("textarea")?.focus()},children:(0,i.jsx)(j,{onClose:()=>{o(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:m,...c})}):null}try{e2.displayName||(e2.displayName="StartConversation")}catch{}var e3=n(2265);let e4=ew.z0.ArrowAll;ew.z0.ArrowHorizontal,ew.z0.ArrowVertical,ew.z0.ArrowVertical,ew.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,a=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(a)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let s=this.markers[n];if(s)return this.currentMarkerPosition={markerId:s.id,index:n},s}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),a=i?.getAttribute("data-marker-id");if(!i||!a)return;let s=this.markerComments[a]||[];if(0===s.length)return;let r=t.getAttribute("data-marker-navigation-comment-id"),o=s.findIndex(e=>e.id===r);if(-1===o)return;let l=o===s.length-1;switch(e){case"ArrowDown":if(l)return;n=o+1;break;case"ArrowUp":if(0===o)return;n=o-1;break;default:return}let c=s[n];if(c)return this.currentMarkerCommentPosition={markerId:c.id,index:n},c}constructor(e,t,n){if((0,Q._)(this,"markers",void 0),(0,Q._)(this,"markerComments",null),(0,Q._)(this,"currentMarkerPosition",null),(0,Q._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){let e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function e5({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let a=(0,s.useRef)(void 0),r=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{r.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||void 0),a.current=r.current},[t]);let o=(0,s.useCallback)((e,t,n)=>{let i=n.key,a=!e6(t)&&!e7(t)&&!tt(t)&&!e8(t);switch(!0){case a&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return te(t)||e9(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(r.current&&e6(t)){let e=r.current.moveToNextMarker(i,e9(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(r.current&&e8(t)){let e=r.current.moveToNextMarker(i,e8(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(r.current&&tt(t)){let e=r.current.moveToNextMarkerItem(i,tt(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(r.current&&e7(t)){let e=r.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(e7(t))return te(t);if(e6(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(e6(t))return e9(t);if(e8(t))return e8(t);if(tt(t))return tt(t);if(e7(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[r]);return(0,H.G)({containerRef:e,bindKeys:e4,getNextFocusable:o,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[o,n]),{markerNavigator:r}}function e6(e){return!!e?.hasAttribute("data-marker-id")}function e7(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function e8(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function e9(e){return e?.closest("[data-marker-id]")??void 0}function te(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function tt(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var tn=n(48505);let ti="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function ta(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(ti)??[]))t.setAttribute("tabindex","0")}function ts({commentSubjectType:e,gridCellId:t,markerRef:n,isThread:i=!1,thread:a}){let r=eK(t);(0,s.useEffect)(()=>{let t=null;if(!i||a){if(r)"commit"===e?t=setTimeout(()=>{ta(n.current)},100):ta(n.current);else{var s;s=n.current,s?.setAttribute("aria-hidden","true"),function e(t=0){setTimeout(()=>{let t=Array.from(s?.querySelectorAll("*")??[]),n=Array.from(s?.querySelectorAll(ti)??[]);if(0===n.length)return e(200);for(let e of t)e?.setAttribute("aria-hidden","true");for(let e of n)e.setAttribute("tabindex","-1")},t)}()}return()=>{t&&clearTimeout(t)}}},[r,e,n,i,a])}var tr=n(86909);let to={inlineAnnotation:"InlineAnnotation-module__inlineAnnotation--bVDzc"};function tl({annotation:e,gridCellId:t,isFirstMarker:n}){let a=(0,s.useRef)(null),r=eK(t);return ts({commentSubjectType:"pull request",gridCellId:t,markerRef:a}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:a,className:(0,D.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",n?"mb-1":"mb-2",to.inlineAnnotation),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:r?0:-1,children:(0,i.jsx)(tr.Y,{annotation:e})})}try{tl.displayName||(tl.displayName="InlineAnnotation")}catch{}let tc={closeMarkersDialogButton:"InlineMarkers-module__closeMarkersDialogButton--wdW2G",markersWrapper:"InlineMarkers-module__markersWrapper--Fw1hl",fileMarkersWrapper:"InlineMarkers-module__fileMarkersWrapper--rXaAB",markersDialogActive:"InlineMarkers-module__markersDialogActive--v0PSm"};var td=n(33643),tu=n(75202),tm=n(82075),th=n(91747),tp=n(26607),tf=n(72511),tg=n(26382);function ty(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(tg.E,{border:!0,children:[(0,i.jsx)(tg.E.Visual,{children:(0,i.jsx)(l.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(tg.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(tg.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(tg.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})}try{ty.displayName||(ty.displayName="CommentErrorFallback")}catch{}let tx={inlineReviewThreadHeading:"InlineReviewThread-module__inlineReviewThreadHeading--CBLMR",ReviewThreadContainer:"InlineReviewThread-module__ReviewThreadContainer--MW9GI",ResolvableContainer:"InlineReviewThread-module__ResolvableContainer--FkZ8G",ThreadLoading:"InlineReviewThread-module__ThreadLoading--UIhR9"};var tv=n(11738),tb=n(96760),t_=n(97949),tj=n(20622),tC=n(48845),tw=n(97665),tN=n(94747),tS=n(96379),tI=n(69510),tk=n(80081),tT=n(95542);let tL={ReviewThreadContainer:"ReviewThread-module__ReviewThreadContainer--s6e8A"};var tE=n(39525),tR=n(45270);function tA({batchingEnabled:e,commentAnchorPrefix:t,lineMarkersKey:n,disableDialogMode:a,enableDialogMode:r,filePath:o,gridCellId:l,isInlineComment:c,isInDialogMode:d,onDeleteLineComment:u,subjectId:h,thread:f,threadPositionNumber:g,threadsConnectionId:y,shouldLimitHeight:x=!0,suggestedChangesConfig:v,viewerData:j,ghostUser:C}){let[w,N]=(0,s.useState)(!1),[S,I]=(0,s.useState)(void 0),{sendAnalyticsEvent:k}=(0,e1.s)(),T=(0,s.useRef)(null),L=(0,s.useRef)(null),E=(0,th.u)("code_quality_automated_review_comment"),{mutate:R}=function(e,t){let n=(0,b.Kp)(),i=(0,tw.jE)(),a=`${n}/page_data/${tj.u.createReviewComment}`,{updateThread:s}=(0,b.an)(),{addPendingComment:r,clearPendingReview:o}=(0,b._N)();return(0,tN.n)({mutationFn:async e=>{let t=await (0,tS.Sr)(`${a}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,tC.hp)(t);return(0,tC.R)(t,n),n},onSuccess:(a,l)=>(void 0!==l.submitBatch&&!l.submitBatch&&a.thread&&r(Number(a.thread.id)),l.submitBatch&&o(),s(Number(a.thread.id),e,t,e=>a.thread),i.invalidateQueries({queryKey:(0,tI.XG)(n)}))})}(o,n),{endOid:A,startOid:D}=(0,tR.Xv)(),P=e=>{I(e),N(!0)};if(!f.commentsData||null===f.commentsData.comments||f.commentsData.comments.length<1)return null;let O=(0,tk.Lm)(f),M=f.subjectType?.toLowerCase()==="line"?{lineRange:O}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:tL.ReviewThreadContainer,"data-limit-height":x,children:[f.commentsData.comments.map((e,s)=>E&&e.reviewVariantType===tn.hH.Automated&&0===s?(0,i.jsx)(tT.y,{anchorPrefix:t,comment:e,isAnchorable:!0,isInlineComment:c,isInDialogMode:d,isOutdated:f.positioning?.isOutdated,isThreadResolved:!!f.isResolved,onQuoteReply:P,subjectId:h,threadId:f.id,threadPositionNumber:g,threadsConnectionId:y,viewerData:j},e.id):(0,i.jsx)(tE.U,{lineMarkersKey:n,isAnchorable:!0,index:s,threadPositionNumber:g,isFirstComment:0===s,isInlineComment:c,isLastChild:s===(f.commentsData?.comments.length??0)-1,anchorPrefix:t,comment:e,commentConnectionId:f.commentsData?.__id,disableDialogMode:a,enableDialogMode:r,filePath:o,gridCellId:l,isInDialogMode:d,isOutdated:f.positioning?.isOutdated,subjectId:h,threadId:f.id,onDeleteLineComment:u,onQuoteReply:P,threadCommentCount:f.commentsData?.comments.length,threadsConnectionId:y,isThreadResolved:!!f.isResolved,suggestedChangesConfig:v,applySuggestedChangesValidationData:M,viewerData:j,ghostUser:C},e.id)),f.reviewCommentsLimitExceeded&&(0,i.jsx)(t_.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(f.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),f.viewerCanReply&&(0,i.jsxs)("div",{id:tb.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":f.id,"data-marker-navigation-comment-id":`${f.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:d?0:-1,onFocus:e=>{L.current===e.target&&(w?L.current?.querySelector("textarea")?.focus():T.current?.focus())},ref:L,children:[w&&(0,i.jsx)(_,{batchingEnabled:e,condensed:!1,fileLevelComment:!0,filePath:o,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{N(!1),I(void 0),k("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),p.cg?.requestAnimationFrame(()=>T.current?.focus())},quotedText:S,subjectId:h,threadId:f.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=f.commentsData?.comments[f.commentsData?.comments.length-1];R({text:e,submitBatch:i,inReplyTo:a?.databaseId,path:o,comparisonEndOid:A,comparisonStartOid:D},{onError:n,onSuccess:e=>{var n;(n=e.comment.databaseId)&&m(n.toString()),t?.()}}),k("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:v}),!w&&(0,i.jsx)(tv.z,{ref:T,onClick:()=>{k("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),N(!0)},children:"Write a reply"})]})]})})}try{tA.displayName||(tA.displayName="ReviewThread")}catch{}var tD=n(97695),tP=n(39698),tO=n(25407),tM=n(21067),tF=n(73262);function tB({automatedComment:e,thread:t,filePath:n,lineMarkersKey:a,setErrorMessage:s,setIsCollapsed:r,safeLocalStorage:o}){let{mutate:l,isPending:c,error:d}=function(e,t){let n=(0,b.Kp)(),i=(0,tM.cj)(),a=(0,tw.jE)(),{updateThread:s}=(0,b.an)();return(0,tN.n)({mutationFn:async({automatedReviewCommentId:e,reason:t,resolutionNote:i})=>{let a=(0,tO.L7I)({basePath:n,automatedReviewCommentId:e}),s=await (0,tC.q$)(a,{method:"PUT",body:{reason:t,resolution_note:i}});(0,tC.R)(s)},onSuccess:(r,o)=>{s(Number(o.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:i,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),a.invalidateQueries({queryKey:(0,tI.XG)(n)})}})}(n,a),{mutate:u,isPending:m}=function(e,t){let n=(0,b.Kp)(),i=(0,tw.jE)(),{updateThread:a}=(0,b.an)();return(0,tN.n)({mutationFn:async({automatedReviewCommentId:e})=>{let t=(0,tO.Aav)({basePath:n,automatedReviewCommentId:e}),i=await (0,tC.q$)(t,{method:"PUT"});(0,tC.R)(i)},onSuccess:(s,r)=>{a(Number(r.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}),i.invalidateQueries({queryKey:(0,tI.XG)(n)})}})}(n,a);return(0,i.jsx)(tF.K,{automatedComment:e,dismissError:d,isButtonDisabled:c||m,onDismiss:({reason:n,resolutionNote:i},{onSuccess:a})=>{l({automatedReviewCommentId:e.id,threadId:t.id,reason:n,resolutionNote:i},{onError:()=>s("Failed to dismiss"),onSuccess:()=>{a(),r(!0),o.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},onReopen:()=>{u({automatedReviewCommentId:e.id,threadId:t.id},{onError:()=>s("Failed to reopen"),onSuccess:()=>{r(!1),o.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},className:"p-2 border-top"})}try{tB.displayName||(tB.displayName="InlineAutomatedReviewThreadActions")}catch{}function t$({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})}function tU({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?tH({positioning:t}):tV({positioning:t}):null}function tV({positioning:e}){let t="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:tx.inlineReviewThreadHeading,children:["Comment on line"," ",(0,i.jsxs)(t$,{children:[t,e.endLine??""]})]})}function tH({positioning:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:tx.inlineReviewThreadHeading,children:["Comment on lines"," ",(0,i.jsxs)(t$,{children:[t,e.startLine??""]})," ","to"," ",(0,i.jsxs)(t$,{children:[n,e.endLine??""]})]})}function tW({fileAnchor:e,filePath:t,gridCellId:n,onDeleteLineComment:a,threadId:r,threadPositionNumber:o,lineMarkersKey:c,threadsConnectionId:u,isFirstThread:m,ghostUser:h,manuallyUpdateCommentsWithThisThreadId:p,suggestedChangesConfig:f,...g}){let y=(0,b._W)(r,t,c),{mutate:x}=(0,tD.H)(t,c),v=(0,s.useRef)(null),_=(0,tm.A)("localStorage"),j=y?.isResolved,[C,w]=(0,s.useState)(""),[N,S]=(0,s.useState)(j??!1),k=eK(n),{disableDialogMode:T,enableDialogMode:L}=eQ();(0,s.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${r}`);null!==e?S(JSON.parse(e)):j&&S(!0)},[j,r]),ts({commentSubjectType:"pull request",gridCellId:n,markerRef:v,isThread:!0,thread:y});let E=(0,s.useMemo)(()=>{let t=y?.positioning??y?.subject;if(t&&e&&y&&t.startDiffSide&&t.endDiffSide&&t.startLine&&t.endLine&&f?.configureSuggestedChangesFromLineRange){let n=t.startLine??t.endLine,i=t.startDiffSide??t.endDiffSide,a={diffAnchor:e,endLineNumber:t.endLine,endOrientation:"LEFT"===t.endDiffSide?"left":"right",startLineNumber:n,startOrientation:"LEFT"===i?"left":"right",firstSelectedLineNumber:n,firstSelectedOrientation:"LEFT"===i?"left":"right"};return f?.configureSuggestedChangesFromLineRange(a)}},[e,y,f]),{sendAnalyticsEvent:R}=(0,e1.s)(),{mutate:A}=(0,tP.i)(t,c),O=(0,th.u)("code_quality_automated_review_comment")&&y?.commentsData?.comments[0]?.reviewVariantType===tn.hH.Automated,M=O?y.commentsData?.comments[0]?.automatedComment:null;if(!y||!((y.commentsData?.comments?.length??0)>0))return null;let F=!!y.isResolved,B=y.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),$=y.commentsData?.comments?.[0]?.createdAt,U=y.commentsData?.comments?.[0]?.author?.login??"Unknown Author",V=`${j?"Unresolve":"Resolve"} comment`;if($){let e=(0,td.C)(new Date($));V=`${j?"Unresolve":"Resolve"} ${U}'s comment, ${e}`}return(0,i.jsx)(tu.t,{fallback:(0,i.jsx)(ty,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:v,children:[(0,i.jsxs)("div",{className:(0,D.$)("px-1",tx.ReviewThreadContainer),children:[(0,i.jsx)(d.K,{"aria-label":N?"Expand comment":"Collapse comment",icon:N?l.ChevronRightIcon:l.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{_.setItem(`reviewThreadIsCollapsed_${r}`,JSON.stringify(!N))}),S(e=>!e)},"data-is-first-collapse-button":m}),(0,i.jsx)(tU,{thread:y}),(0,i.jsxs)("div",{className:tx.ResolvableContainer,children:[y.positioning?.isOutdated&&(0,i.jsx)(tp.A,{variant:"secondary",children:"Outdated"}),F&&!O&&(0,i.jsx)(tp.A,{variant:"secondary",children:"Resolved"}),M?.isDismissed&&(0,i.jsx)(tp.A,{variant:"secondary",children:"Dismissed"})]})]}),(0,i.jsxs)(s.Suspense,{fallback:(0,i.jsxs)("div",{className:tx.ThreadLoading,children:[(0,i.jsx)(I.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[C&&(0,i.jsxs)(tf.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(l.StopIcon,{className:"mr-2"}),C]}),!N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tA,{lineMarkersKey:c,disableDialogMode:T,enableDialogMode:L,filePath:t,gridCellId:n,onDeleteLineComment:a,isInlineComment:!0,isInDialogMode:k,thread:y,threadPositionNumber:o,threadsConnectionId:u,suggestedChangesConfig:E,shouldLimitHeight:!1,...g,ghostUser:h}),B&&!O&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(P.Q,{"aria-label":V,onClick:F?()=>{y&&(A({threadId:y.id},{onError:()=>w("Failed to unresolve thread"),onSuccess:()=>{S(!1),_.removeItem(`reviewThreadIsCollapsed_${y.id}`)}}),R("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{y&&(x({threadId:y.id},{onError:()=>w("Failed to resolve thread"),onSuccess:()=>{S(!0),_.removeItem(`reviewThreadIsCollapsed_${r}`)}}),R("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:j?"Unresolve comment":"Resolve comment"}),F&&y.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:y.resolvedBy})," marked this comment as resolved"]})]}),M&&(0,i.jsx)(tB,{automatedComment:M,thread:y,filePath:t,lineMarkersKey:c,setErrorMessage:w,setIsCollapsed:S,safeLocalStorage:_})]})]})]})})}try{t$.displayName||(t$.displayName="Emphasis")}catch{}try{tU.displayName||(tU.displayName="ThreadBanner")}catch{}try{tV.displayName||(tV.displayName="SingleLineThreadBanner")}catch{}try{tH.displayName||(tH.displayName="MultineLineThreadBanner")}catch{}try{tW.displayName||(tW.displayName="InlineReviewThread")}catch{}function tq(e,t,n){let{enableDialogMode:i}=eQ();return(0,s.useCallback)((a={shouldFocusFirstMarker:!0},s)=>{t.current?.classList.contains("diff-text-cell")&&(i(e),n("USER_EXPANDED_MARKERS"),a.shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):s&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${s}"]`)?.focus()},0))},[t,i,e,n])}let tz={[tn.UZ.Failure]:0,[tn.UZ.Warning]:1,[tn.UZ.Notice]:2};function tG(e){return(0,i.jsx)(e3.j,{children:(0,i.jsx)(tK,{...e})})}function tK({annotations:e,backgroundColor:t,cellRef:n,dispatchMarkersStatus:a,children:r,conversationListThreads:o,inlineMarkersRef:c,isMarkerListOpen:u,isRowSelected:m,lineMarkersKey:h,fileAnchor:f,filePath:g,gridCellId:y,gutterSizeOffset:x,lineType:v,onCloseConversationList:_,onCloseFocusMode:j,onDeleteLineComment:C,returnFocusRef:w,threadsConnectionId:N,suggestedChangesConfig:S,manuallyUpdateCommentsWithThisThreadId:I,ghostUser:k,...T}){let L=eK(y),{disableDialogMode:E,enableDialogMode:R}=eQ(),A=tq(y,n,a),P=(0,s.useRef)(null),O=(0,s.useMemo)(()=>[...e].sort((e,t)=>tz[e.annotationLevel]-tz[t.annotationLevel]),[e]),M=(0,s.useMemo)(()=>r?[...o,{id:"new-comment"},...O]:[...o,...O],[r,o,O]),F=e=>e.stopPropagation(),B=(0,s.useCallback)(e=>{e.target&&L&&(e.target.closest("[data-inline-markers]")||E())},[E,L]);(0,s.useEffect)(()=>(p.XC?.addEventListener("mousedown",B),()=>p.XC?.removeEventListener("mousedown",B)),[B]);let $=(0,b.mF)();return(0,s.useEffect)(()=>{if($){let t=o.map(e=>e.id),n=e.map(e=>e.id);(t.includes($)||n.includes($))&&A({shouldFocusFirstMarker:!1},$)}},[$,A,o,e]),e5({containerRef:P,markers:M,disabled:!L}),(0,i.jsxs)("div",{className:(0,D.$)("d-flex pt-1",L?tc.markersDialogActive:""),style:L?{marginRight:`-${x}`,backgroundColor:t}:{marginRight:`-${x}`},"aria-hidden":L?"false":"true",onFocus:e=>{F(e),L||R(y)},onClick:F,onKeyUp:F,onMouseDown:F,onMouseUp:F,"data-inline-markers":!0,ref:c,children:[(0,i.jsxs)("div",{className:tc.markersWrapper,ref:P,children:[o.map((e,t)=>(0,i.jsx)("div",{className:(0,D.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===M.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:L?0:-1,children:(0,i.jsx)(tW,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:I,isFirstThread:0===t,filePath:g,lineMarkersKey:h,fileAnchor:f,gridCellId:y,onDeleteLineComment:C,threadId:e.id,threadsConnectionId:N,suggestedChangesConfig:S,ghostUser:k,...T})},`review-thread-${e.id}`)),r,O.map((e,t)=>{let n=0===t&&e===M[0];return(0,i.jsx)(tl,{annotation:e,gridCellId:y,isFirstMarker:n},`annotation-${e.id}`)})]}),L&&(0,i.jsx)(d.K,{icon:l.UndoIcon,className:(0,D.$)(tc.closeMarkersDialogButton,"ml-2 position-relative",0===o.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:j,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&j()}})]})}try{tG.displayName||(tG.displayName="InlineMarkers")}catch{}try{tK.displayName||(tK.displayName="InlineMarkersInternal")}catch{}var tQ=n(18799),tY=n(40260);async function tJ({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:a,isLeftSide:s}){let r,o=window.getSelection();if(o&&""!==o.toString())return void document.execCommand("copy");let l=n().length<=1;switch(!0){case l:r=tZ(e);break;case a:r=t0({diffLines:t,diffOrientation:s?"left":"right",getSelectedLineRange:i});break;default:r=tX({diffLines:t,getSelectedLineRange:i})}await (0,tY.D)(r)}let tX=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:a,startLineNumber:s,endLineNumber:r}=n,o=0,l=0;return e.length>1&&(o=e.findIndex(e=>"left"===i?e.left===s:e.right===s),l=e.findIndex(e=>"left"===a?e.left===r:e.right===r)),(0,F.Ls)(e.slice(o,l+1))},tZ=e=>(0,F.Po)(e)||!e?"":(0,F.Ls)([e]),t0=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let a=(0,F.Mk)(e),s=a.leftLines,r=a.rightLines,{selectedRightLines:o,selectedLeftLines:l}=(0,eF.A)({selectedLineRange:i,leftLines:s,rightLines:r});return"left"===t?(0,F.Ls)(l):(0,F.Ls)(o)},t1=(0,s.createContext)(null);function t2({children:e}){let[t,n]=(0,s.useState)(!1),[a,r]=(0,s.useState)(),[o,l]=(0,s.useState)(),[c,d]=(0,s.useState)(),[u,m]=(0,s.useState)(),h=(0,s.useMemo)(()=>!!a||!!o||!!c||!!u,[a,c,o,u]),p=(0,s.useCallback)(()=>{n(!0)},[]),f=(0,s.useCallback)(()=>{n(!1)},[]),g=(0,s.useCallback)((e,t,n)=>{switch(e){case"context-menu":r(t),m(void 0),d(void 0),l(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),r(void 0),d(void 0),l(void 0);break;case"marker-details":d(t),r(void 0),l(void 0),m(void 0);break;case"marker-list":l(t),r(void 0),m(void 0),d(void 0)}},[]),y=(0,s.useCallback)(e=>{switch(e){case"context-menu":r(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":d(void 0);break;case"marker-list":l(void 0)}},[]),x=(0,s.useMemo)(()=>({isActionBarVisible:t,showActionBar:p,hideActionBar:f,closeDialog:y,openDialog:g,anyMenuOpen:h,openContextMenuCell:a,openMarkersListCell:o,openMarkerDetailsCell:c,openNewConversationCell:u}),[t,p,f,y,g,h,a,o,c,u]);return(0,i.jsx)(t1.Provider,{value:x,children:e})}function t3(){let e=(0,s.useContext)(t1);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}try{t1.displayName||(t1.displayName="MarkersDialogContext")}catch{}try{t2.displayName||(t2.displayName="MarkersDialogContextProvider")}catch{}function t4({cellId:e,actionBarRef:t}){let[n,i]=(0,s.useState)(t),{openDialog:a,closeDialog:r,openContextMenuCell:o,anyMenuOpen:l}=t3(),c=(0,s.useMemo)(()=>o===e,[e,o]),d=(0,s.useCallback)(()=>{a("context-menu",e)},[e,a]),u=(0,s.useCallback)(()=>{i(t),d()},[t,d]),m=(0,s.useCallback)(()=>{r("context-menu")},[r]),h=(0,s.useCallback)(()=>{c?m():d()},[m,c,d]),p=(0,s.useCallback)(()=>{i(t),h()},[t,h]);return{isContextMenuOpen:c,openContextMenu:d,openContextMenuFromActionBar:u,closeContextMenu:m,toggleContextMenu:h,toggleContextMenuFromActionBar:p,closeMarkerListDialog:(0,s.useCallback)(()=>{r("marker-list")},[r]),returnFocusRef:n,anyMenuOpen:l}}function t5({cellId:e,onOpenDialog:t}){let{openDialog:n,closeDialog:i,openNewConversationCell:a}=t3(),{sendAnalyticsEvent:r}=(0,e1.s)(),o=(0,s.useMemo)(()=>a?.cellId===e,[e,a]),l=(0,s.useCallback)(i=>{t?.(),n("new-conversation",e,i)},[e,t,n]),c=(0,s.useCallback)(()=>{l()},[l]),d=(0,s.useCallback)(()=>{l({withSuggestedChange:!0}),r("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[l,r]);return{isNewConversationDialogOpen:o,startNewConversation:c,startNewConversationWithSuggestedChange:d,closeNewConversation:(0,s.useCallback)(()=>{i("new-conversation")},[i]),shouldStartNewConversationWithSuggestedChange:(0,s.useMemo)(()=>a?.withSuggestedChange,[a])}}function t6({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=t3(),[a,r]=(0,s.useState)(!1),o=(0,s.useCallback)(()=>{t()},[t]),l=(0,s.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),c=(0,s.useCallback)(()=>{t()},[t]),d=(0,s.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||n())},[i,e,n]),u=(0,s.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&r(!1):(n(),r(!1))))},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:l,handleCellFocus:o,handleCellMouseEnter:c,handleCellMouseLeave:d,handleActionBarBlur:u,handleActionBarFocusCapture:(0,s.useCallback)(e=>{i||(e.stopPropagation(),r(!0))},[i]),handleActionBarKeydownCapture:(0,s.useCallback)(e=>{!i&&eE(e.key)&&e.stopPropagation()},[i])}}var t7=n(88431),t8=n(54571),t9=n(21513),ne=n(73783),nt=n(1992),nn=n(5524),ni=n(94602),na=n(90274);let ns={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--GS12p",AvatarStack:"CommentIndicator-module__AvatarStack--LfU8D",Compact:"CommentIndicator-module__Compact--Q1u86",Relaxed:"CommentIndicator-module__Relaxed--oSXaK",textStyles:"CommentIndicator-module__textStyles--ZLD5t"},nr={compact:{avatarSize:18},relaxed:{avatarSize:20}},no=eI.ghostUser;function nl({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:a}){(0,s.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:r}=nr[t],l=n.length+a.length;if(0===l)return null;let c={},d=[];a.map(e=>{e?.annotationLevel&&d.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?c[e?.author.login]=e.author:no?.login&&(c[no.login]=no)}));let u=[...d.sort((e,t)=>(na.GF[e.level]?.priority||0)<(na.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(na.S,{annotationLevel:t.level},t.id):(0,i.jsx)(na.Xh,{annotationLevel:t.level},t.id)),...Object.keys(c).map(e=>{let t=c[e]?.login,n=c[e]?.avatarUrl??(no?.avatarUrl||" ");return(0,i.jsx)(o.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=l>9?"9+":`${l}`;return(0,i.jsxs)("div",{className:(0,D.$)("d-flex","flex-justify-between","flex-items-center",ns.commentIndicatorContainer),children:[(0,i.jsx)(ni.A,{disableExpand:!0,size:r,className:(0,D.$)(ns.AvatarStack,"relaxed"===t?ns.Relaxed:ns.Compact),children:u}),(0,i.jsx)("span",{className:(0,D.$)("fgColor-default","ml-1",ns.textStyles),children:m})]})}try{nl.displayName||(nl.displayName="CommentIndicator")}catch{}var nc=n(89141);function nd({currentHunk:e,nextHunk:t,previousHunk:n}){let{addInjectedContextLines:i}=e$(e=>e.injectedContextLinesActions),a=!!e&&0!==e.startBlobLineNumber,s=!!e&&!!t;return{expandStartOfHunk:()=>{if(!a||!e)return;let t=n&&e&&n.endBlobLineNumber+20>e.startBlobLineNumber,s={start:Math.max(0,e.startBlobLineNumber-20),end:e.startBlobLineNumber};t&&(s.start=n.endBlobLineNumber+1),i(s)},expandEndOfHunk:()=>{s&&e&&i({start:e.endBlobLineNumber+1,end:e.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:s,canExpandStartOfHunk:a}}var nu=n(69014);let nm={left:"L",right:"R"},nh="Add comment",np="Suggest change";function nf(e,t,n){let i=n&&!(0,F.Ji)(t)?nm.left:nm.right;return`${e} on line ${i}${t.blobLineNumber}`}function ng({diffLine:e,handleStartConversationWithSuggestedChange:t,handleStartConversation:n,isLeftSide:a,isSplit:r}){let o,c,d,{selectMultipleLines:u}=e0(),m=eH(),h=ez()(),p=(0,s.useMemo)(()=>(0,F.Mk)(m()),[m]),f=(0,s.useMemo)(()=>p.leftLines.find(e=>!(0,F.Po)(e)),[p.leftLines]),g=(0,s.useMemo)(()=>{let e=p.leftLines.filter(e=>!(0,F.Po)(e));return e[e.length-1]},[p.leftLines]),y=(0,s.useMemo)(()=>p.leftLines.filter(e=>!(0,F.Po)(e)).every(e=>"DELETION"!==e.type),[p.leftLines]),x=(0,s.useMemo)(()=>p.rightLines.find(e=>!(0,F.Po)(e)),[p.rightLines]),v=(0,s.useMemo)(()=>{let e=p.rightLines.filter(e=>!(0,F.Po)(e));return e[e.length-1]},[p.rightLines]),b=(0,s.useMemo)(()=>0===p.rightLines.filter(e=>!(0,F.Po)(e)).length,[p.rightLines]),_=(0,s.useMemo)(()=>0===p.leftLines.filter(e=>!(0,F.Po)(e)).length,[p.leftLines]),j=(0,s.useMemo)(()=>!(p.leftLines.find(e=>!(0,F.Po)(e)&&!(0,F.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||p.rightLines.find(e=>!(0,F.Po)(e)&&!(0,F.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[p.leftLines,p.rightLines]),C=(0,s.useCallback)((e,i)=>{!(!h||!g||!f||(0,F.Po)(g)||(0,F.Po)(f))&&f.left&&g.left&&(u({endLineKey:(0,Y.bo)(g),endOrientation:"left",startLineKey:(0,Y.bo)(f),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,Y.bo)(f),lineNumber:f.left,orientation:"left",shouldStartConversation:!1}},eL),i?.withSuggestedChange?t():n())},[h,g,f,u,t,n]),w=(0,s.useCallback)((e,i)=>{!(!h||!v||!x||(0,F.Po)(v)||(0,F.Po)(x))&&x.right&&v.right&&(u({endLineKey:(0,Y.bo)(v),endOrientation:"right",startLineKey:(0,Y.bo)(x),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,Y.bo)(x),lineNumber:x.right,orientation:"right",shouldStartConversation:!1}},eL),i?.withSuggestedChange?t():n())},[h,v,x,u,t,n]),N="DELETION"!==e.type,S=(0,s.useMemo)(()=>!!h&&(h.startOrientation!==h.endOrientation||h.startLineNumber!==h.endLineNumber),[h]),I=!1,k=!1;if(h&&S){let e=nm[h.startOrientation],a=nm[h.endOrientation];return d=` on lines ${e}${h.startLineNumber}-${a}${h.endLineNumber}`,!(0,F.Po)(f)&&!(0,F.Po)(g)&&f&&g&&(I=!0,o=f.left===g.left?b?` on line L${f.left}`:`, original line L${f.left}`:b?` on lines L${f.left}-L${g.right}`:`, original lines L${f.left}-L${g.left}`),!(0,F.Po)(x)&&!(0,F.Po)(v)&&x&&v&&(k=!0,c=x.right===v.right?_||r&&j?` on line R${x.right}`:`, modified line R${v.right}`:_||r&&j?` on lines R${x.right}-R${v.right}`:`, modified lines R${x.right}-R${v.right}`),(0,i.jsx)(i.Fragment,{children:r?(0,i.jsx)(i.Fragment,{children:j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nn.l.Item,{onSelect:w,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusIcon,{})}),nh+c,(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(nn.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusCircleIcon,{})}),np+c]})]}):(0,i.jsxs)(i.Fragment,{children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nn.l.Item,{onSelect:C,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusIcon,{})}),nh+o,(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:b?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,i.jsxs)(nn.l.Item,{onSelect:e=>C(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusCircleIcon,{})}),np+o]})]}):null,k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nn.l.Item,{onSelect:w,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusIcon,{})}),nh+c,(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(nn.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusCircleIcon,{})}),np+c]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nn.l.Item,{onSelect:n,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusIcon,{})}),nh+d]}),N&&y&&(0,i.jsxs)(nn.l.Item,{onSelect:t,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusCircleIcon,{})}),np+d]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nn.l.Item,{onSelect:n,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusIcon,{})}),nf(nh,e,a)]}),N&&(0,i.jsxs)(nn.l.Item,{onSelect:t,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.PlusCircleIcon,{})}),nf(np,e,a)]})]})}try{ng.displayName||(ng.displayName="StartConversationContextMenuItems")}catch{}var ny=n(66358);function nx(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nj,{...e}),(0,i.jsx)(nb,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),(0,i.jsx)(nI,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(n_,{diffAnchor:e.diffAnchor}),(0,i.jsx)(nv,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),(0,i.jsx)(nk,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk})]})}function nv({diffLine:e,diffAnchor:t}){let n=ez(),a=(0,s.useCallback)(()=>{let i=n(),a=(0,F.j2)({line:e,range:i,fileAnchor:t});a&&(0,tY.D)(a)},[t,n,e]);return(0,i.jsxs)(nn.l.Item,{onSelect:a,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.LinkIcon,{})}),"Copy link",(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:"Mod+Alt+y"})})]})}let nb=e=>{let t=ez()(),n=(0,F.Av)(t,e.diffLine,e.isLeftSide,e.diffAnchor);return e.fileDiffReference?(0,i.jsx)(nc.w,{showDivider:!0,selectedRange:n,fileDiffReference:e.fileDiffReference}):null};function n_({diffAnchor:e}){return(0,i.jsxs)(nn.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:"Mod+a"})})]})}function nj({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,showStartConversation:r,startConversationCurrentLine:o,startConversationWithSuggestedChange:l,threads:c,annotations:d,viewerData:u}){let m=d.length>0;return r||c||m?(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(ng,{diffLine:e,handleStartConversation:o,handleStartConversationWithSuggestedChange:l,isLeftSide:n,isSplit:a}),(0,i.jsx)(nC,{threads:c,annotations:d,diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,viewerData:u}),(0,i.jsx)(nn.l.Divider,{})]}):null}function nC({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,threads:s,annotations:r,shouldDisplayCollapseComments:o,viewerData:l}){return l.commentsPreference===tQ.sI.Visible?null:a?(0,i.jsx)(nw,{threads:s,annotations:r,handleViewMarkersSelection:t,isLeftSide:n,shouldDisplayCollapseComments:o}):(0,i.jsx)(nN,{threads:s,annotations:r,diffLine:e,onSelect:()=>t(),shouldDisplayCollapseComments:o})}function nw({handleViewMarkersSelection:e,isLeftSide:t,shouldDisplayCollapseComments:n,threads:a,annotations:s}){let r=a.length>0,o=s.length>0;return t?(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(nS,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")})}):(0,i.jsx)(i.Fragment,{children:(r||o)&&(0,i.jsx)(nS,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")})})}function nN({diffLine:e,onSelect:t,threads:n,annotations:a,shouldDisplayCollapseComments:s}){return e&&(n.length>0||a.length>0)?(0,i.jsx)(nS,{text:s?"Collapse comments":"Expand comments",onSelect:()=>t()}):null}function nS({onSelect:e,text:t}){return(0,i.jsxs)(nn.l.Item,{onSelect:e,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.CommentDiscussionIcon,{})}),t]})}function nI({handleCopyCode:e}){return(0,i.jsxs)(nn.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.CopyIcon,{})}),"Copy",(0,i.jsx)(nn.l.TrailingVisual,{children:(0,i.jsx)(nu.U,{keys:"Mod+c"})})]})}function nk({currentHunk:e,diffAnchor:t,nextHunk:n,previousHunk:a}){let s=eG(),{canExpandStartOfHunk:r,canExpandEndOfHunk:o}=nd({currentHunk:e,nextHunk:n,previousHunk:a});return r||o||a||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nn.l.Divider,{}),s.has(ny.YR.expandLines)?null:(0,i.jsx)(nT,{currentHunk:e,nextHunk:n,previousHunk:a}),(0,i.jsx)(nL,{diffAnchor:t,nextHunk:n,previousHunk:a})]}):null}function nT({currentHunk:e,nextHunk:t,previousHunk:n}){let{canExpandStartOfHunk:a,expandEndOfHunk:s,expandStartOfHunk:r,canExpandEndOfHunk:o}=nd({currentHunk:e,nextHunk:t,previousHunk:n});return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)(nn.l.Item,{onSelect:r,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.FoldUpIcon,{})}),"Expand above"]}),o&&(0,i.jsxs)(nn.l.Item,{onSelect:s,children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.FoldDownIcon,{})}),"Expand below"]})]})}function nL({diffAnchor:e,nextHunk:t,previousHunk:n}){return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(nn.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(nn.l.TrailingVisual,{children:"Page Down"})]}):null,n?(0,i.jsxs)(nn.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(nn.l.LeadingVisual,{children:(0,i.jsx)(l.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(nn.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{nx.displayName||(nx.displayName="CellContextMenu")}catch{}try{nv.displayName||(nv.displayName="CopyAnchorLink")}catch{}try{n_.displayName||(n_.displayName="SelectAllListItem")}catch{}try{nj.displayName||(nj.displayName="MarkerListItems")}catch{}try{nC.displayName||(nC.displayName="ViewMarkerListItems")}catch{}try{nw.displayName||(nw.displayName="SplitDiffMarkersListItems")}catch{}try{nN.displayName||(nN.displayName="UnifiedDiffMarkerListItem")}catch{}try{nS.displayName||(nS.displayName="MarkerListItem")}catch{}try{nI.displayName||(nI.displayName="CopyContentListItems")}catch{}try{nk.displayName||(nk.displayName="HunkListItems")}catch{}try{nT.displayName||(nT.displayName="ExpandHunksListItems")}catch{}try{nL.displayName||(nL.displayName="JumpToHunkListItems")}catch{}var nE=n(17998);function nR({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:a}){return(0,i.jsx)(nE.k,{altText:`${t}'s avatar image with pending indicator`,icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...a}})}try{nR.displayName||(nR.displayName="InProgressCommentIndicator")}catch{}let nA={"action-bar-position":"ActionBar-module__action-bar-position--cMcOj",addCommentButton:"ActionBar-module__addCommentButton--gIYSg",addCommentButtonDraftCompact:"ActionBar-module__addCommentButtonDraftCompact--HKIKU",addCommentButtonDraftRelaxed:"ActionBar-module__addCommentButtonDraftRelaxed--_qJPM",addCommentButtonNew:"ActionBar-module__addCommentButtonNew--j1kFj",actionBarArrowSizing:"ActionBar-module__actionBarArrowSizing--L93H4",actionBarHeight:"ActionBar-module__actionBarHeight--wiyuB",actionBarStartCommentWidth:"ActionBar-module__actionBarStartCommentWidth--TTHf8","action-bar-button-group":"ActionBar-module__action-bar-button-group--G1uFN"},nD=(0,s.forwardRef)(function({annotations:e,authorAvatarUrl:t,authorLogin:n,cellId:a,cellRef:r,copilotChatReference:o,currentHunk:c,diffAnchor:d,diffLine:u,enterDialogMode:m,hasDraftComment:h,handleCopyCode:p,isLeftSide:f,isSplit:g,nextHunk:y,onMouseDownAddCommentButton:x,onMouseLeaveAddCommentButton:v,previousHunk:b,shouldDisplayCollapseComments:_,shouldDisplayMinimizedComments:j,showStartConversation:C,threads:w,toggleViewingMarkers:N,viewerData:S},I){let k=(0,s.useRef)(null),T=(0,s.useRef)(null),{lineSpacingPreference:L,commentsPreference:E}=S,R=(0,s.useRef)(null),A=k.current?k:T;(0,t9.T)(I,A);let O=w.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),M=e.length,{isActionBarFocused:F,handleActionBarBlur:B,handleActionBarFocusCapture:$,handleActionBarKeydownCapture:U}=t6({cellRef:r}),{isContextMenuOpen:V,anyMenuOpen:H,toggleContextMenu:W,toggleContextMenuFromActionBar:q}=t4({cellId:a,actionBarRef:R}),{startNewConversation:z,startNewConversationWithSuggestedChange:G}=t5({cellId:a,onOpenDialog:m}),K=(0,s.useCallback)(e=>{e.stopPropagation(),z()},[z]),Q=O+M>0&&E===tQ.sI.Collapsed,Y={onBlur:B,onFocusCapture:$,onKeyDownCapture:U},J=(0,s.useCallback)(t=>{(1===w.length||1===e.length)&&t.preventDefault(),N?.()},[e.length,w.length,N]);return(0,i.jsxs)(i.Fragment,{children:[C&&(0,i.jsx)("div",{"aria-hidden":!F,className:(0,D.$)("d-flex","flex-row",nA.addCommentButton),children:(0,i.jsx)(i.Fragment,{children:h?(0,i.jsx)(P.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,D.$)("py-0","compact"===L?nA.addCommentButtonDraftCompact:nA.addCommentButtonDraftRelaxed,nA.actionBarHeight),onClick:z,...Y,children:(0,i.jsx)(nR,{lineSpacingPreference:L,authorAvatarUrl:t,authorLogin:n})}):(0,i.jsx)(P.Q,{icon:l.PlusIcon,"aria-label":"Add comment",ref:T,size:"small","data-add-comment-button":!0,className:(0,D.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",nA.addCommentButtonNew,nA.actionBarHeight,nA.actionBarStartCommentWidth),onClick:K,onMouseDown:x,onMouseLeave:v,...Y})})}),(0,i.jsx)("div",{"aria-hidden":!F,className:(0,D.$)("d-flex","flex-row",nA["action-bar-position"]),children:(0,i.jsxs)(ne.A,{className:nA["action-bar-button-group"],...Y,children:[Q&&j&&(0,i.jsx)(P.Q,{ref:k,"aria-expanded":H,"aria-label":"View comments",size:"small",className:(0,D.$)("py-0","px-1",nA.actionBarHeight),onClick:J,children:(0,i.jsx)(nl,{threads:w,annotations:e,lineSpacingPreference:L})}),(0,i.jsxs)(nt.W,{anchorRef:R,open:V,onOpenChange:W,children:[(0,i.jsx)(nt.W.Anchor,{children:(0,i.jsx)(P.Q,{ref:R,"aria-haspopup":"true","aria-label":"More actions",icon:l.TriangleDownIcon,size:"small",className:(0,D.$)("fgColor-muted",nA.actionBarArrowSizing),onClick:q})}),(0,i.jsx)(nt.W.Overlay,{width:"medium",children:(0,i.jsx)(nn.l,{children:(0,i.jsx)(nx,{threads:w,annotations:e,currentHunk:c,diffAnchor:d,diffLine:u,shouldDisplayCollapseComments:_,copilotChatReference:o,showStartConversation:C,handleCopyCode:p,handleViewMarkersSelection:N,isLeftSide:f,isSplit:g,nextHunk:y,previousHunk:b,startConversationCurrentLine:z,startConversationWithSuggestedChange:G,viewerData:S})})})]})]})})]})});function nP({threadCount:e,annotationCount:t}){let n=function(e,t){let n=t>0,i=e>0;switch(!0){case n&&i:return"Code has comments and alerts. Press enter to view.";case i:return"Code has comments. Press enter to view.";case n:return"Code has alerts. Press enter to view.";default:return""}}(e,t);return n?(0,i.jsx)("span",{className:"sr-only user-select-none",children:n}):null}nD.displayName="ActionBar";try{nP.displayName||(nP.displayName="DiffLineScreenReaderSummary")}catch{}let nO={"comment-indicator":"ContentCell-module__comment-indicator--Avv5C","in-progress-comment-indicator":"ContentCell-module__in-progress-comment-indicator--Onob7"},nM=(0,s.forwardRef)(function({cellId:e,children:t,className:n,columnIndex:a,diffLine:r,diffAnchor:o,handleDiffCellMouseDown:l,handleExitDialogMode:c,handleHideMarkersFromFocus:d,handleDiffSideCellSelectionBlocking:u,handleStartConversation:m,handleUserClosedMarkersDialog:h,isLeftSide:p,isRowSelected:f=!1,isSplit:g,lineAnchor:y,commentDialogOpen:x,enterDialogMode:v,hasThreads:b,role:_,...j},C){let w=(0,s.useRef)(null),N=ez();(0,s.useImperativeHandle)(C,()=>w.current,[]);let{disableDialogMode:S}=eQ(),I=(0,s.useCallback)(()=>{let e=N(),t=(0,F.j2)({line:r,range:e,fileAnchor:o});t&&(0,tY.D)(t)},[o,N,r]),k=eq(),{clearFirstLineSelectionOnDrag:T}=e0(),L=(0,s.useCallback)(()=>{let e=k();e?.shouldStartConversation&&m?.(),T()},[T,k,m]),E=(0,s.useCallback)(e=>{e.shiftKey&&e.preventDefault(),l?.(e),u?.(e)},[l,u]),R=(0,s.useCallback)(()=>{w.current?.focus(),S(),c?.(),h?.()},[S,c,h]),A=eH(),D=eW(),P=(0,s.useCallback)(async e=>{if(e.target===w.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=D();await tJ({diffLine:r,diffLines:t,getSelectedDiffLines:A,getSelectedLineRange:N,isSplit:g,isLeftSide:p});return}if(e.target===w.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void I();if(w.current?.contains(e.target)&&e?.key==="Escape")return void R();if(w.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),w.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(w.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),w.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===w.current&&"Enter"===e.key&&(v?.(),!1===b&&m?.(),e.preventDefault())},[D,r,A,N,g,p,I,R,v,b,m]),O=`Cell-left:${r.left}-right:${r.right}-leftSide:${p}`;return(0,i.jsx)("td",{ref:w,"data-grid-cell-id":e,"data-line-anchor":y,"data-selected":!!f,role:_??"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${a<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:P,onMouseDown:E,onMouseUp:L,...j,children:t},O)});try{nM.displayName||(nM.displayName="Cell")}catch{}var nF=n(43362);function nB(){let e=(0,b.Kp)(),t=(0,tw.jE)(),n=`${e}/page_data/${tj.u.createReviewComment}`,{updateThread:i}=(0,b.an)(),{onCommentThreadAdded:a}=(0,b.Ud)(),{addPendingComment:s,clearPendingReview:o}=(0,b._N)();return(0,tN.n)({mutationFn:async e=>{let t=await (0,tS.Sr)(`${n}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,tC.hp)(t);return(0,tC.R)(t,i),i},onSuccess:(n,l)=>{let c=l.subjectType===r.Wr.File?"FILE":"right"===l.side?`R${l.line}`:`L${l.line}`,d=l.startSide&&l.startLine?"right"===l.startSide?`R${l.startLine}`:`L${l.startLine}`:void 0;void 0!==l.submitBatch&&!l.submitBatch&&n.thread&&s(Number(n.thread.id)),l.submitBatch&&o(),i(Number(n.thread.id),l.path,c,()=>{let e=(0,nF.YY)(l);return n.thread.subject=e,n.thread.positioning=e,n.thread}),a({path:l.path,diffLineKey:c,startPosition:d,threadID:n.thread.id}),t.invalidateQueries({queryKey:(0,tI.XG)(e)})}})}var n$=new WeakMap,nU=new WeakMap,nV=new WeakMap,nH=new WeakMap,nW=new WeakMap,nq=new WeakMap,nz=new WeakMap,nG=new WeakSet,nK=new WeakSet,nQ=new WeakSet;let ReviewCommentFactory=class ReviewCommentFactory{fileRequestData(){return{...(0,G._)(this,nQ,nX).call(this),path:(0,W._)(this,nU),subjectType:r.Wr.File,positioning:{type:r.Wr.File,baseCommitOid:(0,W._)(this,n$),headCommitOid:(0,W._)(this,nV),path:(0,W._)(this,nU),commitOid:(0,W._)(this,nV)}}}lineRequestData(e,t){let n=t&&!(0,F.Ji)(e)?"left":"right";return{...(0,G._)(this,nQ,nX).call(this),line:e.blobLineNumber,path:(0,G._)(this,nG,nY).call(this,n),positioning:{type:r.Wr.Line,baseCommitOid:(0,W._)(this,n$),headCommitOid:(0,W._)(this,nV),path:(0,G._)(this,nG,nY).call(this,n),line:e.blobLineNumber,commitOid:(0,G._)(this,nK,nJ).call(this,n)},side:n,subjectType:r.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}=e,s="left"===n?"left":"right",o="left"===a?"left":"right";return{...(0,G._)(this,nQ,nX).call(this),line:t,path:(0,G._)(this,nG,nY).call(this,s),positioning:{baseCommitOid:(0,W._)(this,n$),headCommitOid:(0,W._)(this,nV),type:r.Wr.Multiline,startPath:(0,G._)(this,nG,nY).call(this,o),startLine:i,startCommitOid:(0,G._)(this,nK,nJ).call(this,o),endPath:(0,G._)(this,nG,nY).call(this,s),endLine:t,endCommitOid:(0,G._)(this,nK,nJ).call(this,s)},side:s,startLine:i,startSide:o,subjectType:r.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,selectedDiffRange:i,submitBatch:a,text:s}){(0,K._)(this,nG),(0,K._)(this,nK),(0,K._)(this,nQ),(0,q._)(this,n$,{writable:!0,value:void 0}),(0,q._)(this,nU,{writable:!0,value:void 0}),(0,q._)(this,nV,{writable:!0,value:void 0}),(0,q._)(this,nH,{writable:!0,value:void 0}),(0,q._)(this,nW,{writable:!0,value:void 0}),(0,q._)(this,nq,{writable:!0,value:void 0}),(0,q._)(this,nz,{writable:!0,value:void 0}),(0,z._)(this,n$,i.baseOid),(0,z._)(this,nU,e),(0,z._)(this,nV,i.headOid),(0,z._)(this,nH,t),(0,z._)(this,nW,n),(0,z._)(this,nq,a),(0,z._)(this,nz,s)}};function nY(e){return"left"===e&&(0,W._)(this,nW)?.path&&(0,W._)(this,nH)?.path&&(0,W._)(this,nW).path!==(0,W._)(this,nH).path?(0,W._)(this,nW).path:(0,W._)(this,nU)}function nJ(e){return"left"===e?(0,W._)(this,n$):(0,W._)(this,nV)}function nX(){return{comparisonEndOid:(0,W._)(this,nV),comparisonStartOid:(0,W._)(this,n$),text:(0,W._)(this,nz),submitBatch:(0,W._)(this,nq)}}let nZ=(0,s.forwardRef)(function({annotationsAtPosition:e,columnIndex:t,copilotChatReference:n,currentHunk:a,diffAnchor:r,diffLine:o,dispatchMarkersStatus:c,filePath:d,handleDiffSideCellSelectionBlocking:u,isLeftSide:m,isRowSelected:h,isSplit:p,lineAnchor:f,markersStatus:y,nextHunk:x,previousHunk:v,rowId:_,subjectId:j,threadsAtPosition:C,viewerData:w},N){let[I,k]=(0,F.x_)(o.html,o.type),T=k&&["+","-"].includes(k),[L,E]=(0,s.useState)(""),{isActionBarVisible:R}=t3(),{hasPersistedComment:A}=(0,g.L)({diffSide:m?"LEFT":"RIGHT",filePath:d,line:o.blobLineNumber,subjectId:j,fileLevelComment:!1}),P=(0,F.u6)(_,t),O=eK(P),{disableDialogMode:M}=eQ(),B=m?"LEFT":"RIGHT",$="RIGHT"===B?o.right:o.left,U=(0,F.oH)($,B),V=C.length,H=e.length,W=(0,s.useRef)(null),q=(0,s.useRef)(null);(0,s.useImperativeHandle)(N,()=>q.current,[]);let z=0!==V+H,G=(0,F.S4)({hasThreads:z&&w.commentsPreference===tQ.sI.Collapsed}),K=function(e,t,n){let i=ez();return(0,s.useMemo)(()=>{let a=i(),s="Add a comment on",r=!!a&&a.startLineNumber!==a.endLineNumber;if(a&&r&&n){let e={left:"L",right:"R"},t=e[a.startOrientation],n=e[a.endOrientation];s+=a.startLineNumber!==a.endLineNumber?` lines ${t}${a.startLineNumber} to ${n}${a.endLineNumber}`:` line ${t}${a.startLineNumber}`}else{let n=t&&!(0,F.Ji)(e)?"L":"R";s+=` line ${n}${e.blobLineNumber}`}return s},[e,i,t,n])}(o,!!m,h),{handleCellBlur:Q,handleCellFocus:J,handleCellMouseEnter:X,handleCellMouseLeave:Z}=t6({cellRef:q}),ee=(0,s.useRef)(null),et=tq(P,q,c),en=(0,s.useCallback)(()=>{setTimeout(()=>q.current?.focus()),M(),c("USER_MINIMIZED_MARKERS")},[M,c]),ei=(0,s.useCallback)(()=>{w.commentsPreference===tQ.sI.Collapsed&&y.showMarkers?en():et()},[en,et,y.showMarkers,w.commentsPreference]),{closeMarkerListDialog:ea,returnFocusRef:es}=t4({cellId:P,actionBarRef:W}),{isNewConversationDialogOpen:er,shouldStartNewConversationWithSuggestedChange:eo,startNewConversation:el,closeNewConversation:ec}=t5({cellId:P,onOpenDialog:et}),ed=eW(),eu=eH(),em=ez(),eh=(0,th.u)("cotd_ui"),ep=(0,s.useMemo)(()=>!!R&&!er&&!!w.viewerCanComment&&(eh?!(0,F.Po)(o):(0,F.a1)(o,(0,F.Mk)(eu()))),[R,er,w.viewerCanComment,eh,o,eu]),{endOid:ef,startOid:eg}=(0,tR.Xv)(),{mutate:ey}=nB(),{selectedRange:ex}=(0,b.L3)(),{newTreeEntry:ev,oldTreeEntry:eb}=e$(e=>e.treeEntries),e_=function(e,t){let{sendAnalyticsEvent:n}=(0,e1.s)(),i=e$(e=>e.diffLines.getSplitDiffLinesFromLineRange),a=ez(),[r]=(0,t8.I)(()=>!1,!0,[]),o=(e=>{let t=(0,s.useRef)(e);return(0,t7.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,s.useCallback)((...e)=>t.current?.(...e),[])})(function(t,a){let s=function(t){if(!t)return"DELETION"!==e.type;if("right"===t.startOrientation&&"right"===t.endOrientation)return!0;if(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let n=i(t)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(t);return{isValidSuggestionRange:s,showSuggestChangesButton:s,sourceContentFromDiffLines:s?function(t){let n=t?i(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return r?"":(0,F.Ls)(n);if(!e)return"";let[a]=(0,F.dv)(e.text,e.type);return a}(t):void 0,onInsertSuggestedChange:()=>{n("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:a}});return(0,s.useMemo)(()=>({getSelectedLineRange:a,configureSuggestedChangesFromLineRange:o,shouldStartNewConversationWithSuggestedChange:t}),[o,a,t])}(o,eo),ej=(0,s.useCallback)(()=>{et?.(),el?.()},[et,el]),eC=(0,s.useRef)(!0),ew=(0,s.useMemo)(()=>!!w.shouldDisplayComments&&(z&&w.commentsPreference===tQ.sI.Collapsed?!y.userMinimized:(!!er||!!z)&&(w.commentsPreference===tQ.sI.Collapsed&&(!!er||!!O)||w.commentsPreference===tQ.sI.Visible&&(!!z||!!er||!!y.showMarkers)||!1)),[z,O,er,y.showMarkers,y.userMinimized,w.commentsPreference,w.shouldDisplayComments]),eN=(0,s.useMemo)(()=>(0,F.dT)(o),[o]),{addLineToSelection:eS,clearSelectedLines:ek,selectLine:eT}=e0(),eE=eq();(0,s.useEffect)(()=>{A&&w.commentsPreference===tQ.sI.Visible&&ej()},[A,ej,w.commentsPreference]);let eR=(0,s.useCallback)(()=>{let e=em();return!!e&&("right"===e.endOrientation&&!m&&e.endLineNumber===o.right||!!e&&"left"===e.endOrientation&&!!m&&e.endLineNumber===o.left)},[em,m,o.left,o.right]),eA=(0,s.useCallback)(()=>{eR()||ek()},[ek,eR]),eD=(0,s.useCallback)(e=>{if(1!==e.buttons)return;Z();let t=m?o.left:o.right,n=(0,Y.bo)(o);h||!t||eR()?eS({lineKey:(0,Y.bo)(o),orientation:m?"left":"right"},eL):eT({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:m?"left":"right",lineKey:n,shouldStartConversation:!0}},eL)},[eS,Z,eR,m,h,o,eT]),eP=(0,s.useCallback)(e=>{let t=eE();1===e.buttons&&t&&eS({lineKey:(0,Y.bo)(o),orientation:m?"left":"right"},eL),X()},[eS,eE,X,m,o]),eO=(0,s.useCallback)(()=>{let e=eE();if(!e)return void Z();let t=em(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!m&&o.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&m&&o.left===e.lineNumber;n||i||Z()},[eE,em,Z,m,o.left,o.right]),eM=(0,s.useCallback)(()=>{c("USER_EXITED_MARKERS_DIALOG")},[c]),eF=(0,s.useCallback)(()=>{c("USER_MINIMIZED_MARKERS")},[c]),eB=(0,s.useCallback)(()=>{en(),ec()},[en,ec]),eU=async()=>{let e=ed();await tJ({diffLine:o,diffLines:e,getSelectedDiffLines:eu,getSelectedLineRange:em,isSplit:p,isLeftSide:m})},eV=`ContentCell-left:${o.left}-right:${o.right}-leftSide:${m}`,eG=`inline-dialog-heading-${(0,s.useId)()}`,eY=(0,s.useMemo)(()=>{if(!h)return o.blobLineNumber;let e=em();return e?.endLineNumber??o.blobLineNumber},[em,h,o.blobLineNumber]),eJ=(0,s.useMemo)(()=>{if(!h)return;let e=em();return e?.endLineNumber},[em,h]);return(0,i.jsxs)(nM,{ref:q,cellId:P,columnIndex:t,commentDialogOpen:er,diffAnchor:r,diffLine:o,enterDialogMode:et,handleDiffSideCellSelectionBlocking:u,handleExitDialogMode:eM,handleUserClosedMarkersDialog:eF,lineAnchor:f,handleStartConversation:ej,hasThreads:z,isLeftSide:m,isRowSelected:h,isSplit:p,className:(0,D.$)(`diff-text-cell ${m?"left-side-diff-cell":"right-side-diff-cell"} ${eN?"pt-4":""}`,{"border-right":m&&"HUNK"!==o.type}),style:{backgroundColor:(0,F.Yf)(o.type,!1,h),paddingRight:G},onBlur:Q,onFocus:J,onMouseEnter:eP,onMouseLeave:eO,"aria-labelledby":O?eG:void 0,role:O?"dialog":"gridcell",children:[O&&(0,i.jsx)("h1",{id:eG,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,D.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===o.type,deletion:"DELETION"===o.type}),children:[T&&(0,i.jsx)("span",{className:"diff-text-marker",children:k}),(0,i.jsx)(S.$6,{html:I,className:(0,D.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})})]}),o.displayNoNewLineWarning&&(0,i.jsx)(l.NoEntryIcon,{size:16,className:"fgColor-danger"}),(R||o.isLastSelected&&m&&em()?.endOrientation==="left"&&o.left===em()?.endLineNumber||!m&&em()?.endOrientation==="right"&&o.right===em()?.endLineNumber)&&(0,i.jsx)(nD,{authorAvatarUrl:w.avatarUrl,authorLogin:w.login,ref:W,cellId:P,cellRef:q,copilotChatReference:n,currentHunk:a,diffAnchor:r,diffLine:o,threads:C,annotations:e,enterDialogMode:et,handleCopyCode:eU,hasDraftComment:A,isLeftSide:m,isSplit:p,nextHunk:x,onMouseDownAddCommentButton:eA,onMouseLeaveAddCommentButton:eD,previousHunk:v,showStartConversation:ep,shouldDisplayMinimizedComments:w.shouldDisplayComments,shouldDisplayCollapseComments:y.showMarkers,toggleViewingMarkers:ei,viewerData:w}),ew?(0,i.jsx)(tG,{backgroundColor:(0,F.Yf)(o.type,!0,h),gridCellId:P,gutterSizeOffset:G,inlineMarkersRef:ee,cellRef:q,dispatchMarkersStatus:c,lineMarkersKey:U,manuallyUpdateCommentsWithThisThreadId:L,annotations:e,batchingEnabled:!0,conversationListThreads:C,fileAnchor:r,filePath:d,onCloseFocusMode:en,isMarkerListOpen:!!q.current?.classList.contains("diff-text-cell")&&C.length>0,isRowSelected:h,lineType:o.type,returnFocusRef:es,subjectId:j,suggestedChangesConfig:e_,onCloseConversationList:ea,onDeleteLineComment:()=>{C.length<=1&&setTimeout(()=>q.current?.focus())},viewerData:w,ghostUser:eI.ghostUser,children:er&&(0,i.jsx)("div",{className:(0,D.$)(" border rounded-2 color-border-default",(C.length,"mt-2 mb-1")),children:(0,i.jsx)(e2,{addCommentDialogTitle:K,anchorRef:q,diffAnchor:r,batchingEnabled:!0,filePath:d,focusOnMount:!(A&&w.commentsPreference===tQ.sI.Visible),isLeftSide:!!m,isInDialogMode:O,isOpen:er,lineNumber:eY,returnFocusRef:es,startLineNumber:eJ,subjectId:j,suggestedChangesConfig:e_,viewerData:w,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!o)return;let a=em();if(eh){let s,r=new ReviewCommentFactory({filePath:d,newTreeEntry:ev,oldTreeEntry:eb,selectedDiffRange:ex,submitBatch:n,text:i});ey(s=a&&h&&a.startLineNumber&&a.endLineNumber&&a.startLineNumber!==a.endLineNumber?r.multilineRequestData(a):r.lineRequestData(o,m),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),et(),E(t.thread.id)}})}else{let s,r,l=!!a&&a.startLineNumber!==a.endLineNumber,c=o.blobLineNumber,u=m&&!(0,F.Ji)(o)?"left":"right";a&&l&&h&&(u="left"===a.endOrientation?"left":"right",r="left"===a.startOrientation?"left":"right",c=a.endLineNumber,s=a.startLineNumber),ey({text:i,line:c,path:d,side:u,startSide:r,submitBatch:n,startLine:s,comparisonEndOid:ef,comparisonStartOid:eg},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),et(),E(t.thread.id)}})}},onCloseCommentDialog:eB})})}):null,!R&&w.commentsPreference===tQ.sI.Collapsed&&w.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===w.lineSpacingPreference?"-8px":"-9px"},className:(0,D.$)("position-absolute top-0 d-flex user-select-none",nO["in-progress-comment-indicator"]),children:A&&(0,i.jsx)(nR,{lineSpacingPreference:w.lineSpacingPreference,authorAvatarUrl:w.avatarUrl,authorLogin:w.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,D.$)("position-absolute top-0 d-flex user-select-none",nO["comment-indicator"]),children:(0,i.jsx)(nl,{threads:C,annotations:e,shouldAnimateRef:eC,lineSpacingPreference:w.lineSpacingPreference})})]}),(0,i.jsx)(nP,{annotationCount:H,threadCount:V})]},eV)}),n0=(0,s.memo)(nZ);try{nZ.displayName||(nZ.displayName="ContentCellUnmemoized")}catch{}try{n0.displayName||(n0.displayName="ContentCell")}catch{}let n1=["CONTEXT","INJECTED_CONTEXT"],n2=(0,s.memo)(n3);function n3({children:e,columnIndex:t,diffAnchor:n,diffLine:a,handleDiffSideCellSelectionBlocking:r,isLeftSide:o,isRowSelected:l,isSplit:c,filePath:d,copilotChatReference:u,contentRef:m,contentColumnIndex:h,dispatchMarkersStatus:p,rowId:f,threadsAtPosition:g,annotationsAtPosition:y,...x}){var v;let b=(0,s.useRef)(null),_=eq(),{addLineToSelection:j}=e0(),C=(0,s.useCallback)(e=>{1===e.buttons&&_()&&j({lineKey:(0,Y.bo)(a),orientation:o?"left":"right"},eL)},[_,j,a,o]),{selectLine:w}=e0(),N=ez(),S=`LineNumberCell-left:${a.left}-right:${a.right}-leftSide:${o}`,I=(0,F.u6)(f,h),k=tq(I,m,p),{startNewConversation:T}=t5({cellId:I,onOpenDialog:k}),L=(0,F.u6)(f,t);return(0,i.jsx)(nM,{ref:b,cellId:L,className:(0,D.$)("diff-line-number position-relative",n1.includes(a.type)&&"diff-line-number-neutral"),columnIndex:t,diffAnchor:n,diffLine:a,"data-first-unified-line-number-cell":!c&&0===t,enterDialogMode:k,handleDiffSideCellSelectionBlocking:r,hasThreads:(v=g.length+y.length,("CONTEXT"!==a.type||!o||!c)&&v>0),style:{backgroundColor:(0,F.Yf)(a.type,!0,l),textAlign:"center"},handleDiffCellMouseDown:e=>{if(N()&&e.shiftKey)return void j({lineKey:(0,Y.bo)(a),orientation:o?"left":"right"},eL);let t=o?a.left:a.right;t&&w({lineKey:(0,Y.bo)(a),firstLineSelectionOnDrag:{orientation:o?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,Y.bo)(a)}},eL)},handleStartConversation:T,isLeftSide:o,isRowSelected:l,isSplit:c,onMouseEnter:C,...x,children:(0,i.jsx)("code",{children:e})},S)}try{n2.displayName||(n2.displayName="LineNumberCell")}catch{}try{n3.displayName||(n3.displayName="LineNumberCellUnmemoized")}catch{}function n4({columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s,showRightBorder:r}){return(0,i.jsx)(nM,{className:(0,D.$)("empty-diff-line",{"border-right":r}),columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})}try{n4.displayName||(n4.displayName="EmptyCell")}catch{}function n5(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}var n6=n(87825);let n7=({annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffAnchor:a,diffLine:r,filePath:o,lineAnchor:l,handleDiffSideCellSelectionBlocking:c,hasHiddenUnicodeCharacters:d,isLeftSide:u,isRowSelected:m,isSplit:h,nextHunk:p,previousHunk:f,rowId:g,subjectId:y,threadsAtPosition:x,viewerData:v})=>{let b=(0,s.useRef)(null),_="ADDITION"!==r.type,j=!h||u,C="DELETION"!==r.type,w=!h||!u,N=(0,s.useCallback)(()=>{c&&c("left")},[c]),S=(0,s.useCallback)(()=>{c&&c("right")},[c]),I=h?u?1:3:2,[k,T]=function(e){let[t,n]=(0,s.useReducer)(n5,{userMinimized:e===tQ.sI.Collapsed,showMarkers:!1}),i=(0,s.useRef)(e);return(0,s.useEffect)(()=>{i.current!==e&&(i.current=e,e===tQ.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]}(v.commentsPreference);return(0,i.jsxs)(t2,{children:[j&&(0,i.jsxs)(n2,{threadsAtPosition:x,annotationsAtPosition:e,copilotChatReference:t,columnIndex:0,contentColumnIndex:I,contentRef:b,diffAnchor:a,diffLine:r,dispatchMarkersStatus:T,filePath:o,handleDiffSideCellSelectionBlocking:S,isLeftSide:u,isRowSelected:m,isSplit:h,rowId:g,children:[d&&!C&&(0,i.jsx)(n9,{children:(0,i.jsx)(n6.o,{})}),_&&r.left]}),w&&(0,i.jsxs)(n2,{annotationsAtPosition:e,copilotChatReference:t,columnIndex:h?2:1,contentColumnIndex:I,contentRef:b,diffAnchor:a,diffLine:r,dispatchMarkersStatus:T,filePath:o,handleDiffSideCellSelectionBlocking:N,isLeftSide:u,isRowSelected:m,isSplit:h,rowId:g,threadsAtPosition:x,children:[d&&C&&(0,i.jsx)(n9,{children:(0,i.jsx)(n6.o,{})}),C&&r.right]}),(0,i.jsx)(n0,{annotationsAtPosition:e,copilotChatReference:t,columnIndex:I,currentHunk:n,diffAnchor:a,diffLine:r,dispatchMarkersStatus:T,filePath:o,lineAnchor:l,handleDiffSideCellSelectionBlocking:u?S:N,isLeftSide:u,isRowSelected:m,isSplit:h,markersStatus:k,nextHunk:p,previousHunk:f,ref:b,rowId:g,subjectId:y,threadsAtPosition:x,viewerData:v})]})},n8=({annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffLine:a,diffAnchor:s,filePath:r,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:l,isLeftSide:c,isRowSelected:d,isSplit:u,nextHunk:m,previousHunk:h,rowId:p,subjectId:f,threadsAtPosition:g,viewerData:y})=>{if((0,F.Po)(a))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n4,{columnIndex:2*!c,diffAnchor:s,diffLine:a,isLeftSide:c,isSplit:u}),(0,i.jsx)(n4,{columnIndex:c?1:3,diffAnchor:s,diffLine:a,isLeftSide:c,isSplit:u})]});let x=c?"left":(0,R.XU)(a.type),v="left"===x?a.left:a.right,b=(0,R.IQ)(s,x,v??0);switch(a.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(it,{annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffAnchor:s,diffLine:a,filePath:r,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:l,isLeftSide:c,isRowSelected:d,isSplit:u,lineAnchor:b,nextHunk:m,previousHunk:h,rowId:p,subjectId:f,threadsAtPosition:g,viewerData:y});default:throw Error(`cannot handle type ${a.type}`)}};function n9({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})}let ie=s.memo(n8),it=s.memo(n7);try{n7.displayName||(n7.displayName="CodeDiffLineUnmemoized")}catch{}try{n8.displayName||(n8.displayName="DiffLineSideUnmemoized")}catch{}try{n9.displayName||(n9.displayName="DiffCodeAlert")}catch{}try{ie.displayName||(ie.displayName="DiffLineSide")}catch{}try{it.displayName||(it.displayName="CodeDiffLine")}catch{}function ii({isSplit:e}){return(0,i.jsx)("div",{className:(0,D.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(l.KebabHorizontalIcon,{})})}try{ii.displayName||(ii.displayName="HunkKebabIcon")}catch{}function ia({diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,renderHunkButton:r}){let o=(0,s.useRef)(null),[l,c]=function(e){let[t,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),r=(0,s.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),o=(0,s.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),l=(0,s.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]),c=(0,s.useCallback)(e=>{e.stopPropagation(),a(!0)},[]);return[{onFocus:o,onBlur:r},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:l,onFocusCapture:c,onKeyDownCapture:(0,s.useCallback)(e=>{eE(e.key)&&e.stopPropagation()},[])}]}(o);if((0,F.Po)(t))return null;let d=`HunkCell-left:${t.left}-right:${t.right}`;return(0,i.jsx)(nM,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,ref:o,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...l,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[r?.(c)??(0,i.jsx)(ii,{isSplit:a}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(S.$6,{className:"diff-text-inner color-fg-muted",html:t.html})})]})},d)}try{ia.displayName||(ia.displayName="HunkCell")}catch{}let is={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--CbsbZ","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--amzYl","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--pt9f0"};function ir({direction:e,icon:t,isSplit:n,label:a,onClick:s,ariaLabel:r,className:o,...l}){let{sendAnalyticsEvent:c}=(0,e1.s)();return(0,i.jsx)("button",{onClick:()=>{s(),c("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,D.$)("Button Button--iconOnly Button--invisible",is["expand-button-line"],!n&&is["expand-button-unified"],o),"aria-label":r??a,"data-direction":e,...l,children:(0,i.jsx)(t,{})})}function io({currentHunk:e,diffAnchor:t,diffLine:n,fileLineCount:a,isLeftSide:r,isSplit:o,nextHunk:c,nextLine:d,previousHunk:u,prevLine:m}){let{expandStartOfHunk:h,expandEndOfPreviousHunk:p}=nd({currentHunk:e,nextHunk:c,previousHunk:u}),f=0===n.position&&0!==n.blobLineNumber||!m,g=!d,y=0===n.blobLineNumber,x=f||g,v=g&&n.blobLineNumber===a,b=(0,s.useMemo)(()=>!x&&!(n.blobLineNumber<=0)&&(!!(n.blobLineNumber-m.blobLineNumber<=20)||!!(d.blobLineNumber-n.blobLineNumber>=20)),[x,n,d,m]),_=(0,s.useMemo)(()=>!x&&!v&&n.blobLineNumber-m.blobLineNumber>20,[x,v,n,m]),j=(0,s.useMemo)(()=>!(n.blobLineNumber<=0)&&!y&&!!f,[f,y,n]),C=(0,s.useMemo)(()=>!f&&!v&&!!g,[f,g,v]),w=(0,s.useMemo)(()=>{switch(!0){case b:return"expand-all";case _:return"expand-up-and-down";case j:return"expand-up";case C:return"expand-down"}},[b,_,j,C]),N=()=>h(),S=()=>p(),I=()=>h(),k=eG();return(0,i.jsx)(ia,{renderHunkButton:e=>{if(k.has(ny.YR.expandLines))return null;switch(w){case"expand-all":return(0,i.jsx)(ir,{...e,direction:"all",icon:l.UnfoldIcon,isSplit:o,label:`Expand file from line ${m?.blobLineNumber||""} to line ${d?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(ir,{...e,direction:"down",icon:l.FoldDownIcon,isSplit:o,label:`Expand file down from line ${m?.blobLineNumber||""}`,className:is["expand-up-and-down"],onClick:S}),(0,i.jsx)(ir,{...e,direction:"up",icon:l.FoldUpIcon,isSplit:o,label:`Expand file up from line ${d?.blobLineNumber||""}`,className:is["expand-up-and-down"],onClick:N})]});case"expand-up":return(0,i.jsx)(ir,{...e,direction:"up",icon:l.FoldUpIcon,isSplit:o,label:`Expand file up from line ${d?.blobLineNumber||""}`,onClick:N});case"expand-down":return(0,i.jsx)(ir,{...e,direction:"down",icon:l.FoldDownIcon,isSplit:o,label:`Expand file down from line ${m?.blobLineNumber||""}`,onClick:S});default:return null}},diffAnchor:t,diffLine:n,isLeftSide:r,isSplit:o})}try{ir.displayName||(ir.displayName="ExpandButtonLine")}catch{}try{io.displayName||(io.displayName="ExpandableHunkHeaderDiffLine")}catch{}var il=n(12918);let ic=(0,s.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,handleDiffSideCellSelectionBlocking:a,hunksData:r,leftDiffLine:o,nextDiffLine:l,prevDiffLine:c,rightDiffLine:d,showHiddenUnicode:u,subjectId:m,viewerData:h}){let p=eY(),f=eJ(),g=e=>{let n=!1;return t&&!(0,F.Po)(e)&&(n=(0,eD.Y)(e.text),u&&n&&(e=e.html?{...e,html:(0,il.Gx)(e.html)??e.html}:{...e,text:(0,eD.TA)(e.text)})),[e,n]},[y,x]=g(o),[v,_]=g(d),j=eZ((0,F.Po)(y)?void 0:y),C=eZ((0,F.Po)(v)?void 0:v),w=(0,s.useMemo)(()=>(0,F.Po)(y)?y:{...y,...j},[y,j]),N=(0,s.useMemo)(()=>(0,F.Po)(v)?v:{...v,...C},[v,C]),S=(0,F.qK)(w)&&"HUNK"===w.type,I=(0,F.qX)(p,o,d),k=(0,F.Po)(w)?(0,F.Po)(N)?void 0:N:w,T=(0,F.Po)(y)?void 0:(0,F.oH)(y.left,"LEFT"),{threads:L,annotations:E}=(0,b.rP)(n,T??""),R=(0,F.Po)(v)?void 0:(0,F.oH)(v.right,"RIGHT"),{threads:A,annotations:D}=(0,b.rP)(n,R??""),P=(0,s.useMemo)(()=>!(((0,F.Po)(w)||!w.isSelected)&&((0,F.Po)(N)||!N.isSelected)),[w,N]);if(!k)return null;let{currentHunk:O,nextHunk:M,previousHunk:B}=U(k,r);return w?(0,i.jsx)("tr",{className:"diff-line-row",children:S?(0,i.jsx)(io,{currentHunk:O,diffAnchor:p,diffLine:o,fileLineCount:f,isLeftSide:!0,isSplit:!0,nextHunk:M,nextLine:l,previousHunk:B,prevLine:c}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ie,{annotationsAtPosition:E,copilotChatReference:e,currentHunk:O,diffLine:w,diffAnchor:p,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:x,isLeftSide:!0,isRowSelected:P,isSplit:!0,nextHunk:M,previousHunk:B,rowId:I,subjectId:m,threadsAtPosition:L,viewerData:h}),(0,i.jsx)(ie,{threadsAtPosition:A,annotationsAtPosition:D,copilotChatReference:e,currentHunk:O,diffLine:N,diffAnchor:p,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:_,isLeftSide:!1,isRowSelected:P,isSplit:!0,nextHunk:M,previousHunk:B,rowId:I,subjectId:m,viewerData:h})]})},I):null});try{ic.displayName||(ic.displayName="SplitDiffRow")}catch{}let id=(0,s.memo)(function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,handleDiffSideCellSelectionBlocking:o,showHiddenUnicode:l,tableRef:c,copilotChatReference:d,subjectId:u,viewerData:m}){let{leftLines:h,rightLines:p}=function(e){let{leftLines:t,rightLines:n}=(0,s.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.Vv);for(;n.length<t.length;)n.push(r.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(e),[e]);return{leftLines:t,rightLines:n}}(t),f=(0,s.useMemo)(()=>V(h),[h]),{addLineToSelection:g,clearSelectedLines:y,selectMultipleLines:x}=e0();return eR({addLineToSelection:g,clearSelectedLines:y,containerRef:c,fileAnchor:n,getfirstLineSelectionOnDrag:eq(),isSplitDiff:!0,leftLines:h,selectMultipleLines:x,rightLines:p,disabled:!1}),(0,i.jsx)(i.Fragment,{children:h.map((t,n)=>{let s=h[n],r=p[n],c=h[n-1],g=(0,F.Po)(h[n+1])?p[n+1]:h[n+1],y=`${(0,F.Po)(s)||!s?`empty-left-diff-${n}`:s.blobLineNumber}-${(0,F.Po)(r)||!r?`empty-right-diff-${n}`:r.blobLineNumber}`;return(0,i.jsx)(ic,{copilotChatReference:d,diffHasHiddenUnicodeCharacters:e,filePath:a,handleDiffSideCellSelectionBlocking:o,hunksData:f,leftDiffLine:s,nextDiffLine:g,prevDiffLine:c,rightDiffLine:r,showHiddenUnicode:l,subjectId:u,viewerData:m},y)})})});try{id.displayName||(id.displayName="SplitDiffLines")}catch{}let iu=(0,s.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,hunksData:a,currentDiffLine:r,nextDiffLine:o,prevDiffLine:l,showHiddenUnicode:c,subjectId:d,viewerData:u}){let m=eY(),h=eJ(),p=eZ(r),f=(0,s.useMemo)(()=>({...r,...p}),[r,p]),g=(0,s.useMemo)(()=>!!f.isSelected,[f.isSelected]),y="DELETION"!==r.type?"RIGHT":"LEFT",x="RIGHT"===y?r.right:r.left,v=(0,F.oH)(x,y),{threads:_,annotations:j}=(0,b.rP)(n,v??""),C="HUNK"===f.type,w=(0,R.IQ)(m,(0,R.XU)(f.type),f.blobLineNumber),{currentHunk:N,nextHunk:S,previousHunk:I}=U(f,a),k=(0,F.qX)(m,f,f),T=t&&(0,eD.Y)(f.text);c&&T&&(f=f.html?{...f,html:(0,il.Gx)(f.html)??f.html}:{...f,text:(0,eD.TA)(f.text)});let L="DELETION"===f.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:C?(0,i.jsx)(io,{currentHunk:N,diffAnchor:m,diffLine:f,fileLineCount:h,isLeftSide:L,isSplit:!1,nextHunk:S,nextLine:o,previousHunk:I,prevLine:l}):(0,i.jsx)(it,{annotationsAtPosition:j,copilotChatReference:e,currentHunk:N,diffAnchor:m,diffLine:f,filePath:n,hasHiddenUnicodeCharacters:T,isLeftSide:L,isRowSelected:g,isSplit:!1,lineAnchor:w,nextHunk:S,previousHunk:I,rowId:k,subjectId:d,threadsAtPosition:_,viewerData:u})},k)});try{iu.displayName||(iu.displayName="UnifiedDiffRow")}catch{}let im=(0,s.memo)(function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,tableRef:r,showHiddenUnicode:o,copilotChatReference:l,subjectId:c,viewerData:d}){let u=(0,s.useMemo)(()=>V(t.map(e=>e)),[t]),{addLineToSelection:m,clearSelectedLines:h,selectMultipleLines:p}=e0();return eR({addLineToSelection:m,clearSelectedLines:h,containerRef:r,fileAnchor:n,getfirstLineSelectionOnDrag:eq(),isSplitDiff:!1,leftLines:t,selectMultipleLines:p,disabled:!1}),(0,i.jsx)(i.Fragment,{children:t.map((n,s)=>{let r=t[s+1],m=t[s-1],h=`unified-diff-row-l:${n.left}-r:${n.right}-b:${n.blobLineNumber}`;return(0,i.jsx)(iu,{copilotChatReference:l,diffHasHiddenUnicodeCharacters:e,filePath:a,hunksData:u,currentDiffLine:n,nextDiffLine:r,prevDiffLine:m,showHiddenUnicode:o,subjectId:c,viewerData:d},h)})})});try{im.displayName||(im.displayName="UnifiedDiffLines")}catch{}let ih={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--UBX7h",compact:"DiffLines-module__compact--wxqBo"};var ip=n(60745);function ig({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let iy=(0,s.memo)(function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:a,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:o,subjectId:l,viewerData:c}){let d=`diff-${e.pathDigest}`;if(e.isBinary)return(0,i.jsx)(ig,{diffAnchor:d,children:"Binary file not shown."});if((0,L.dK)(e))return(0,i.jsx)(ig,{diffAnchor:d,children:"File renamed without changes."});if((0,L.Jc)(e))return(0,i.jsx)(ig,{diffAnchor:d,children:"File copied without changes."});if((0,L.Sn)(e,e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(ig,{diffAnchor:d,children:"File mode changed."});if(!t&&(0,L.HI)(e))return(0,i.jsx)(M,{diffAnchor:d,onLoadDiff:a,children:(0,L.l_)(e.truncatedReason)});if((0,L.s8)(e))return(0,i.jsx)(ig,{diffAnchor:d,children:"Whitespace-only changes."});if(!t&&(0,L.lO)(e))return(0,i.jsx)(M,{diffAnchor:d,onLoadDiff:a,children:"This file was deleted."});if(!t&&(0,L.xW)(e))return(0,i.jsxs)(M,{diffAnchor:d,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:a,children:["Some generated files are not rendered by default. Learn more about"," "]});if(e.isTooBig&&0===e.diffLines.length)if(t)return(0,i.jsxs)(ig,{diffAnchor:d,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(A.A,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(M,{diffAnchor:d,onLoadDiff:a,children:"Large diffs are not rendered by default."});return e.diffLines?(0,i.jsx)(ix,{diffAnchor:d,diffEntryData:e,viewerData:c,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:o,subjectId:l}):null});function ix({diffAnchor:e,viewerData:t,diffEntryData:n,copilotChatReference:a,hasExpandedAllRanges:r,isSplitView:o,subjectId:l}){let c=(0,s.useRef)(null),{clearSelectedLines:d}=e0(),[m,h]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,x=(0,s.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:B.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{lineSpacingPreference:v,tabSizePreference:b}=t,_=e$(e=>e.diffLines.hasSelectedLines),j=(0,s.useCallback)(e=>{if(!c.current||!e.target)return;let t=e.target;!c.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&_()&&(d(),(0,eT.i)("Selection Cleared"),(0,u.K3)())},[d,_]);(0,s.useEffect)(()=>(p.XC?.addEventListener("mousedown",j),()=>{p.XC?.removeEventListener("mousedown",j)}),[j]);let C=(0,s.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,a=n.newTreeEntry?.path;if(i||a)return e="RENAMED"===t?`${i} renamed to ${a}`:"DELETED"===t||"REMOVED"===t?i:a,`Diff for: ${e}`},[n]),w=(0,R.c7)(x),N=(0,s.useCallback)(e=>{h(e)},[h]),S=(0,s.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!r&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[r,n.path]),I=(0,s.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${o?`, ${"left"===m?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[m,o]),k=(0,s.useMemo)(()=>x.some(e=>(0,eD.Y)(e.text)),[x]),T={diffHasHiddenUnicodeCharacters:k,diffLines:x,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffSideCellSelectionBlocking:N,showHiddenUnicode:f,tableRef:c,copilotChatReference:a,subjectId:l,viewerData:t};return(0,i.jsxs)(i.Fragment,{children:[k&&(0,i.jsx)(ip.a,{isShown:f,toggleShowHiddenCharacters:()=>g(!f)}),(0,i.jsx)("table",{"aria-label":C,onKeyDown:S,ref:c,className:(0,D.$)("tab-size","width-full",ih.tableLayoutFixed,{[ih.compact]:"compact"===v}),"data-block-diff-cell-selection":m,"data-diff-anchor":e,"data-tab-size":b,"data-paste-markdown-skip":!0,onCopy:I,role:"grid",style:{"--line-number-cell-width":`${w}px`,"--line-number-cell-width-unified":`${2*parseFloat(w)}px`},children:o?(0,i.jsx)(E.wj,{lineWidth:w,children:(0,i.jsx)(id,{...T})}):(0,i.jsx)(E.Qe,{lineWidth:w,children:(0,i.jsx)(im,{...T})})})]})}try{ig.displayName||(ig.displayName="PlainTextStatus")}catch{}try{iy.displayName||(iy.displayName="DiffLines")}catch{}try{ix.displayName||(ix.displayName="CodeDiffLines")}catch{}var iv=n(8431),ib=n(46251),i_=n(78049);let ij={filesActionList:"SubmoduleDiff-module__filesActionList--sbPQt",fileRowLinkItem:"SubmoduleDiff-module__fileRowLinkItem--Z1ES5",path:"SubmoduleDiff-module__path--hB1wm",fileRow:"SubmoduleDiff-module__fileRow--Y9n2E",linesAdded:"SubmoduleDiff-module__linesAdded--tJqtP",linesDeleted:"SubmoduleDiff-module__linesDeleted--nr9cp"};function iC({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:a,newCommitOid:r,oldCommitOid:o,status:c,submoduleUrl:d}=e,u=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===c,m=(0,s.useMemo)(()=>{switch(c){case"ADDED":return(0,i.jsx)(iS,{commitOid:r,contentsUrl:a,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(iS,{commitOid:o,contentsUrl:a,type:"deleted"});default:return(0,i.jsx)(iI,{newCommitOid:r,oldCommitOid:o,changedFiles:n,contentsUrl:a})}},[r,o,c,n,a]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${u?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(l.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(iw,{basePath:t,submoduleUrl:d}),m]}),u&&(0,i.jsx)(nn.l,{className:ij.filesActionList,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(ik,{compareUrl:`${a}/compare/${o}...${r}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function iw({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(A.A,{inline:!0,href:t,children:e}):e," "]})}function iN(e){return e.slice(0,7)}function iS({commitOid:e="",contentsUrl:t,type:n}){let a="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[a," ",(0,i.jsx)(A.A,{inline:!0,href:`${t}/tree/${e}`,children:iN(e)})]}):(0,i.jsxs)(i.Fragment,{children:[a," ",iN(e)]})}function iI({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:a}){let s=n>0&&a?`${n} ${1===n?"file":"files"}`:`from ${iN(t)} to ${iN(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",a?(0,i.jsx)(A.A,{inline:!0,href:`${a}/compare/${t}...${e}`,children:s}):s]})}function ik({compareUrl:e,linesAdded:t,linesDeleted:n,path:s,pathDigest:r,status:o}){return(0,i.jsx)(nn.l.LinkItem,{href:`${e}#diff-${r}`,className:ij.fileRowLinkItem,children:(0,i.jsxs)(ib.B,{gap:"condensed",direction:"horizontal",align:"center",className:ij.fileRow,children:[(0,i.jsx)(i_.E,{status:o}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:ij.path,children:s}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:ij.linesAdded,children:t>0&&(0,i.jsxs)(a.C,{isAddition:!0,children:["+",iT(t)]})}),(0,i.jsx)("div",{className:ij.linesDeleted,children:n>0&&(0,i.jsxs)(a.C,{isAddition:!1,children:["-",iT(n)]})})]})]})]})})}function iT(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{iC.displayName||(iC.displayName="SubmoduleDiff")}catch{}try{iw.displayName||(iw.displayName="SubmodulePath")}catch{}try{iS.displayName||(iS.displayName="SubmoduleCommitChange")}catch{}try{iI.displayName||(iI.displayName="SubmoduleModified")}catch{}try{ik.displayName||(ik.displayName="SubmoduleFileRow")}catch{}let iL=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,tO.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,iE={ReviewThreadContainer:"FileReviewThread-module__ReviewThreadContainer--InwxI",ReviewThreadHeading:"FileReviewThread-module__ReviewThreadHeading--oFg3s",ReviewThreadInnerContainer:"FileReviewThread-module__ReviewThreadInnerContainer--jYE3S",SpinnerWrapper:"FileReviewThread-module__SpinnerWrapper--zQOoj"};function iR({fileAnchor:e,filePath:t,thread:n,isFirstThread:a,ghostUser:o,manuallyUpdateCommentsWithThisThreadId:c,...u}){let m=(0,s.useRef)(null),h=(0,tm.A)("localStorage"),p=n?.isResolved,[f,g]=(0,s.useState)(""),[y,x]=(0,s.useState)(p??!1);(0,s.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${n.id}`);null!==e?x(JSON.parse(e)):p&&x(!0)},[p,n.id]);let{sendAnalyticsEvent:v}=(0,e1.s)(),{mutate:b}=(0,tD.H)(t,r.zW),{mutate:_}=(0,tP.i)(t,r.zW);if(!n||!(n.commentsData?.comments&&n.commentsData.comments.length>0))return null;let j=!!n.isResolved,C=n.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),w=n.commentsData?.comments[0]?.createdAt,N=n.commentsData?.comments[0]?.author?.login??"Unknown Author",S=`${p?"Unresolve":"Resolve"} comment`;if(w){let e=(0,td.C)(new Date(w));S=`${p?"Unresolve":"Resolve"} ${N}'s comment, ${e}`}return(0,i.jsx)(tu.t,{fallback:(0,i.jsx)(ty,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:m,children:[(0,i.jsxs)("div",{className:(0,D.$)("px-1",iE.ReviewThreadContainer),children:[(0,i.jsx)(d.K,{"aria-label":y?"Expand comment":"Collapse comment",icon:y?l.ChevronRightIcon:l.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{h.setItem(`reviewThreadIsCollapsed_${n.id}`,JSON.stringify(!y))}),x(e=>!e)},"data-is-first-collapse-button":a}),(0,i.jsx)("h2",{className:iE.ReviewThreadHeading,children:"Comment on file"}),(0,i.jsxs)("div",{className:iE.ReviewThreadInnerContainer,children:[n.positioning?.isOutdated&&(0,i.jsx)(tp.A,{variant:"secondary",children:"Outdated"}),j&&(0,i.jsx)(tp.A,{variant:"secondary",children:"Resolved"})]})]}),(0,i.jsxs)(s.Suspense,{fallback:(0,i.jsxs)("div",{className:iE.SpinnerWrapper,children:[(0,i.jsx)(I.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[f&&(0,i.jsxs)(tf.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(l.StopIcon,{className:"mr-2"}),f]}),!y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tA,{lineMarkersKey:r.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:n,shouldLimitHeight:!1,...u,ghostUser:o}),C&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(P.Q,{"aria-label":S,onClick:j?()=>{n&&(_({threadId:n.id},{onError:()=>g("Failed to unresolve thread"),onSuccess:()=>{x(!1),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),v("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{n&&!n.isResolved&&(b({threadId:n.id},{onError:()=>g("Failed to resolve thread"),onSuccess:()=>{x(!0),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),v("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:p?"Unresolve comment":"Resolve comment"}),j&&n.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:n.resolvedBy})," marked this comment as resolved"]})]})]})]})]})})}try{iR.displayName||(iR.displayName="FileReviewThread")}catch{}function iA({conversationListThreads:e,filePath:t,manuallyUpdateCommentsWithThisThreadId:n,ghostUser:a,...r}){let o=(0,s.useRef)(null);return e5({containerRef:o,markers:e,disabled:!1,focusInStrategy:"closest"}),(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:tc.fileMarkersWrapper,ref:o,children:e.map((n,s)=>(0,i.jsx)("div",{className:(0,D.$)("mt-1 border rounded-2 color-border-default color-shadow-small",s===e.length-1?"mb-1":"mb-2"),"data-first-marker":0===s,"data-marker-id":`${n.id}`,tabIndex:0,children:(0,i.jsx)(iR,{subjectId:r.subjectId,viewerData:r.viewerData,filePath:t,thread:n,ghostUser:a},n.id)},`review-thread-${n.id}`))})})}try{iA.displayName||(iA.displayName="FileMarkers")}catch{}let iD=new Set,iP=(0,s.forwardRef)(function({addFileCommentButtonRef:e,collapsed:t,currentUser:n,diffLines:o,diffManuallyExpanded:c,diffSize:d,helpUrl:u,fileComments:m,hiddenFeatures:h=iD,isAddingFileComment:f,isBinary:g,isSelected:y=!1,isSubmodule:x,isTooBig:v,leftSideContent:_,linesAdded:C,linesChanged:w,linesDeleted:N,newTreeEntry:S,newCommitOid:I,objectId:k,oldTreeEntry:L,oldCommitOid:E,onToggleCollapse:R,path:A,pathDigest:P,pullRequestGlobalRelayId:O,repository:M,richDiff:F,richDiffQueryConfig:B,rightSideContent:$,setIsAddingFileComment:U,hasExpandedAllRanges:V,expandAllContextLines:H,canExpandOrCollapseLines:W,status:q,submodule:z,truncatedReason:G,addInjectedContextLines:K,loadDiff:Q},Y){let[J,X]=(0,s.useState)(F?.defaultToRichDiff),Z=x&&!!z,ee=!Z&&!J,[et,en]=(0,s.useState)(c),ei=(0,b.j5)(),ea=function({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,newCommitOid:r,newTreeEntry:o,oldCommitOid:l,oldTreeEntry:c,pathDigest:d,hasCopilotAccess:u}){return(0,s.useMemo)(()=>{if((({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:a,status:s})=>!!e&&!t&&!n&&!!i&&"DELETED"!==s&&"REMOVED"!==s&&!!a.id&&!!a.name&&!!a.ownerLogin&&!0)({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,hasCopilotAccess:u}))return(({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:a,pathDigest:s,repository:r})=>{let o=n&&e?(0,tO.IO9)({repo:r,commitish:n,action:"raw",path:a}):"";return{baseFile:iL({path:i?.path,oid:n,repository:r}),headFile:iL({path:t?.path,oid:e,repository:r}),baseBranchRef:n,id:`#diff-${s}`,type:"file-diff",url:o}})({newCommitOid:r,newTreeEntry:o,oldCommitOid:l,oldTreeEntry:c,path:n,pathDigest:d,repository:a})},[r,o,l,c,d,a,u,e,t,n,i])}({isBinary:g,isSubmodule:x,path:A,status:q,repository:M,newCommitOid:I,newTreeEntry:S,oldCommitOid:E,oldTreeEntry:L,pathDigest:P,hasCopilotAccess:n.hasCopilotAccess}),es=async()=>{await Q(),en(!0)},{endOid:er,startOid:eo}=(0,tR.Xv)(),el=(0,th.u)("cotd_ui"),{selectedRange:ec}=(0,b.L3)(),{mutate:ed}=nB(),eu=(0,s.useMemo)(()=>({avatarUrl:n?.avatarURL??"",diffViewPreference:n?.splitPreference,login:n?.login??"",lineSpacingPreference:n?.lineSpacing,shouldDisplayComments:n?.shouldDisplayComments,shouldDisplayEditOptions:n?.shouldDisplayEditOptions,tabSizePreference:n?.tabSize??4,viewerCanComment:n?.canComment,viewerCanApplySuggestion:n?.canApplySuggestion,commentsPreference:n?.commentsPreference}),[n]),em=(0,s.useId)(),eh=`heading-${em}`,ep=(0,s.useMemo)(()=>"split"===new URLSearchParams(p.cg?.location.search).get("diff")||"split"===n.splitPreference,[n.splitPreference]),ef=S?.lineCount??L?.lineCount??0;return(0,i.jsxs)(eU,{addInjectedContextLines:K,diffAnchor:`diff-${P}`,diffLines:o,fileLineCount:ef,hiddenFeatures:h,isSplitView:ep,oldTreeEntry:L,newTreeEntry:S,children:[(0,i.jsxs)("div",{role:"region",ref:Y,"aria-labelledby":eh,id:`diff-${P}`,className:(0,D.$)(iv.A.diffTargetable,iv.A.diff),"data-targeted":y,children:[(0,i.jsx)("div",{className:iv.A.diffHeaderWrapper,children:(0,i.jsx)(a.B,{headingId:eh,hiddenFeatures:h,areLinesExpanded:V,canExpandOrCollapseLines:W,fileLinkHref:`#diff-${P}`,isCollapsed:t,isBinary:g,size:d,canToggleRichDiff:F?.canToggleRichDiff,linesAdded:C,linesChanged:w,linesDeleted:N,newMode:S?.mode,newPath:S?.path,oldMode:L?.mode,oldPath:L?.path,patchStatus:q,path:A,onToggleExpandAllLines:H,onToggleFileCollapsed:e=>R(e,!t),onToggleDiffDisplay:e=>X(e),additionalLeftSideContent:_,rightSideContent:$,showRichDiff:J,isInSingleFileMode:ei})}),t?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[m.length>0&&(0,i.jsx)(iA,{conversationListThreads:m,filePath:A,subjectId:O||""}),f&&(0,i.jsx)("div",{className:(0,D.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",iv.A.diffAddFileThread),children:(0,i.jsx)(j,{batchingEnabled:!0,filePath:A,fileLevelComment:!0,isLeftSide:void 0,subjectId:O||"",viewerData:eu,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{el?ed(new ReviewCommentFactory({filePath:A,selectedDiffRange:ec,submitBatch:n,text:i}).fileRequestData(),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),U(!1)}}):ed({text:i,path:A,submitBatch:n,subjectType:r.Wr.File,comparisonEndOid:er,comparisonStartOid:eo},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),U(!1)}})},onClose:()=>{U(!1),e?.current?.focus()}})})]}),Z&&(0,i.jsx)(iC,{submodule:z}),J&&(0,i.jsx)(T,{queryConfig:B,initialData:F}),ee&&(0,i.jsx)(iy,{hasExpandedAllRanges:V,copilotChatReference:ea,diffEntryData:{diffLines:o,isBinary:g,isTooBig:v,linesChanged:w,newTreeEntry:S,newCommitOid:I,objectId:k,oldTreeEntry:L,oldCommitOid:E,path:A,pathDigest:P,status:q,truncatedReason:G},baseHelpUrl:u,subjectId:O||"",viewerData:eu,isSplitView:ep,diffLinesManuallyUnhidden:et,onHandleLoadDiff:es})]})]},`${P}_${o.length}`),ei&&(0,i.jsxs)("div",{className:iv.A.diffFooter,children:[(0,i.jsx)(l.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:"Due to the large number of changes in this pull request, only one file is being shown at a time."})]})]})});function iO({path:e,pathDigest:t,linesAdded:n,linesChanged:r,linesDeleted:o,oldTreeEntry:c,newTreeEntry:d,status:u}){let m=(0,s.useId)(),h=`heading-${m}`,[p,f]=(0,s.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":h,id:`diff-${t}`,className:(0,D.$)(iv.A.diffTargetable,iv.A.diff),children:[(0,i.jsx)("div",{className:iv.A.diffHeaderWrapper,children:(0,i.jsx)(a.B,{headingId:h,isCollapsed:p,isBinary:!1,linesAdded:n,linesChanged:r,linesDeleted:o,newMode:d?.mode,newPath:d?.path,oldMode:c?.mode,oldPath:c?.path,patchStatus:u,path:e,onToggleFileCollapsed:()=>f(!p)})}),!p&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(tg.E,{children:[(0,i.jsx)(tg.E.Visual,{children:(0,i.jsx)(l.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(tg.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(tg.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)}let iM=(0,s.memo)(iP);try{iP.displayName||(iP.displayName="DiffUnmemoized")}catch{}try{iO.displayName||(iO.displayName="DiffErrorFallback")}catch{}try{iM.displayName||(iM.displayName="Diff")}catch{}},36472:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(13083),a=n(3038);function s({selectedLineRange:e,leftLines:t,rightLines:n}){let s=!!n,{startOrientation:r,endOrientation:o}=e,l=m(r).findIndex(t=>(0,a.a2)(t,e.startLineNumber,e.startOrientation)),c=m(o).findIndex(t=>(0,a.a2)(t,e.endLineNumber,e.endOrientation)),d=l>=0&&c>=0;function u(e){if(!d||(0,a.Po)(e))return!1;let t=m((0,i.XU)(e.type)).indexOf(e);return t>=l&&t<=c}function m(e){var a;return s&&"left"!==("string"==typeof(a=e)?a:(0,i.XU)(a.type))?n:t}let h=m("left").filter(e=>u(e));return{selectedRightLines:m("right").filter(e=>u(e)),selectedLeftLines:h}}},3038:(e,t,n)=>{n.d(t,{Av:()=>S,Ji:()=>p,Ls:()=>w,Mk:()=>x,Po:()=>m,S4:()=>_,Yf:()=>I,a1:()=>C,a2:()=>l,dT:()=>N,dv:()=>f,j2:()=>b,oH:()=>c,qK:()=>h,qX:()=>d,u6:()=>u,x_:()=>g});var i=n(13083),a=n(61583),s=n(66358),r=n(36729),o=n(51391);function l(e,t,n){return"left"===n?!m(e)&&e.left===t:!m(e)&&(0,i.XU)(e.type)===n&&e.right===t}function c(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function d(e,t,n){let i=`-${m(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${m(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function u(e,t){return`${e}-${t}`}function m(e){return!!e&&e===r.Vv}function h(e){return!!e&&e!==r.Vv}function p(e){return"CONTEXT"===e.type}function f(e,t){return t===s.w$.Empty||t===s.w$.Hunk?[e,void 0]:y(e,s.JF[t])}function g(e,t){let n;switch(t){case s.w$.Addition:n=s.JF[s.w$.Addition];break;case s.w$.Deletion:n=s.JF[s.w$.Deletion];break;case s.w$.Context:case s.w$.InjectedContext:n=s.JF[s.w$.Context]}return y(e,n)}function y(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function x(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.Vv);for(;n.length<t.length;)n.push(r.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function v(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function b({line:e,range:t,fileAnchor:n}){let i,{origin:s,pathname:r}=window.location;if(e){let s=v(e)?e.left:e.right;i=t&&s&&t.startLineNumber<=s&&t.endLineNumber>=s?(0,a.j$)(t):function(e,t){let n=v(e),i=n?e.left:e.right,s=n?"left":"right";if(null!==i)return(0,a.j$)({diffAnchor:t,endLineNumber:i,endOrientation:s,startLineNumber:i,startOrientation:s})}(e,n)}else t&&(i=(0,a.j$)(t));if(i)return`${s}${r}#${i}`}function _({hasThreads:e}){return e?"80px":"24px"}let j=["ADDITION","DELETION","CONTEXT"],C=(e,t)=>{if(m(e)||!e)return!1;let n=t.leftLines.concat(t.rightLines),i=n.filter(e=>!m(e)).map(e=>(0,o.bo)(e)),a=(0,o.bo)(e);return n.length>0&&i.includes(a)?n.every(e=>!!m(e)||j.includes(e.type)):!!m(e)||j.includes(e.type)},w=e=>e?e.filter(e=>!m(e)).map(e=>{var t;let[n]=g((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join(`
`):"";function N(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let S=(e,t,n,i)=>{let a;if(e)return e;if(!m(t)){let e=(n?t.left:t.right)??0,s=n?"left":"right";a={startOrientation:s,endOrientation:s,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return a};function I(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?"":i}},80081:(e,t,n)=>{function i(e,t){return t.some(t=>{var n,i;return n=t,i=e,n.commentId===i.commentId&&n.path===i.path&&n.suggestion.length===i.suggestion.length&&a(n.suggestion,i.suggestion)})}n.d(t,{EJ:()=>o,Lm:()=>l,c0:()=>i,o_:()=>r});let a=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),s={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function r({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:a,pullRequestIsInMergeQueue:r,userCanApplySuggestion:o,applySuggestedChangesValidationData:l,suggestedChangesConfig:c}){let{lineRange:d}=l;if(t)return{isValid:!1,reason:s.IS_OUTDATED};if(n)return{isValid:!1,reason:s.IS_PENDING};if(i)return{isValid:!1,reason:s.IS_RESOLVED};if(a)return{isValid:!1,reason:s.PULL_REQUEST_IS_CLOSED};if(r)return{isValid:!1,reason:s.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!o)return{isValid:!1,reason:s.USER_CANNOT_APPLY_SUGGESTION};if(!d)return{isValid:!1,reason:s.RANGE_NOT_PROVIDED};if(!c)return{isValid:!1,reason:s.UNABLE_TO_DETERMINE_VALIDITY};if(!c?.isValidSuggestionRange)return{isValid:!1,reason:s.DELETED_LINES};let u=c?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:s.UNCHANGED_CODE}:{isValid:!0}}function o(e,t){let n={isValid:!1,reason:s.INVALID_RANGE},i={isValid:!1,reason:s.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function l(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},50625:(e,t,n)=>{n.d(t,{L:()=>l});var i=n(82075),a=n(96540);let{getItem:s,removeItem:r,setItem:o}=(0,i.D)("localStorage");function l({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:l,threadId:c,fileLevelComment:d}){let u,m,h=(0,a.useMemo)(()=>c||(c??((e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:s}=e;if(t)return`PullRequest:${s}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${s}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")})({diffSide:e,filePath:t,line:i,subjectId:l},d)),[e,t,i,l,c,d]),{hasPersistedComment:p,removePersistedCommentFromStorage:f}=(u=s(h),m=!!u?.text?.trim(),(0,a.useEffect)(()=>{m&&n?.(u)},[m]),{hasPersistedComment:m,removePersistedCommentFromStorage:()=>{r(h),m=!1,u=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),o(h,t)},removePersistedCommentFromStorage:f}}},51391:(e,t,n)=>{n.d(t,{Aj:()=>u,EV:()=>c,KV:()=>m,M6:()=>l,bo:()=>o,sB:()=>d});var i=n(36472),a=n(3038),s=n(61583),r=n(71315);function o(e){return`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}function l({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}function c({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:s}){let r,l=new Set([]);if(0===t.length)return{selectedLineKeys:l};if(!s)return{selectedLineKeys:new Set([])};let{startLineNumber:c,startOrientation:d,endLineNumber:u,endOrientation:m}=s,h=t;if(n){let e=(0,a.Mk)(t);h=e.leftLines,r=e.rightLines}let p={diffAnchor:e,endLineNumber:u??c,endOrientation:m??d,startLineNumber:c,startOrientation:d},f=(0,i.A)({selectedLineRange:p,leftLines:h,rightLines:r});for(let e=0;e<f.selectedLeftLines.length;e++){let t=f.selectedLeftLines[e];t&&!(0,a.Po)(t)&&l.add(o(t))}for(let e=0;e<f.selectedRightLines.length;e++){let t=f.selectedRightLines[e];t&&!(0,a.Po)(t)&&l.add(o(t))}return{selectedLineKeys:l,startOrientation:d,selectedLineRange:p}}function d(e){let t;for(t of e);return t}function u(e){return e.values().next().value}function m(e){let t=(0,s.EW)(r.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,a=t[4]?"L"===t[4]?"left":"right":void 0,o=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:a??n,endLineNumber:o??i,startOrientation:n,startLineNumber:i}}},36729:(e,t,n)=>{n.d(t,{Vv:()=>a,Wr:()=>s,zW:()=>i});let i="FILE",a="empty-diff-line",s={Line:"line",Multiline:"multiline",File:"file"}},93642:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(a());if(!i)return n;let s=i.groups.fence;if(!s)return n;let r=s.includes("~")?"~":"`",o=t.match(function(e,t){let n=a([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(r,s.length));if(!o)return n;let l=0,c=i.groups.indent;""!==c&&(l=c.length);let d=o.groups.suggestion;if(l>0){let e=RegExp(`^ {0,${l}}`,"m");d=d.replace(e,"")}return n.push(d),e(t.slice(o.index+o[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},43883:(e,t,n)=>{n.d(t,{Gl:()=>s,TC:()=>c,ai:()=>r,eh:()=>l});var i=n(21067);let a={};function s(e,t){let n=t?.currency??"USD";return(a[n]||(a[n]=new Intl.NumberFormat((0,i.JK)(),{currency:n,style:"currency"}))).format(e)}function r(e,t){return new Intl.NumberFormat((0,i.JK)(),{maximumFractionDigits:t?.precision}).format(e)}let o=["k","m","b"];function l(e,t){let{suffix:n=!0,capping:i=1/0,precision:a=1}=t??{},s="",l=Math.min(i,e);if(n){let e=d(l);s=o[e-1]||"",l/=1e3**e}let c=r(l,{precision:a})+s;return e>i?`${c}+`:c}function c(e){if(e<=1e4)return 1;let t=d(e);return e/1e3**t>=10?0:1}function d(e){let t=Math.floor(Math.log(Math.max(Math.abs(e),1))/Math.log(1e3));return Math.min(o.length,t)}},60429:(e,t,n)=>{n.d(t,{A:()=>r});let i=n.p+"jetbrains-e16495e63a33.png",a=n.p+"neovim-3301f23c4307.png",s=n.p+"vscode-380056900de8.png",r={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:s,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:i,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:a,name:"Neovim",eventName:"NEOVIM"}}},61767:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>r,dV:()=>o,h$:()=>d,jK:()=>c});let i=null,a=!1;function s(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);i=e,function(){if(a)return;a=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{i&&(i(e.contextRegion),i=null)},{once:!0})}()}function r(e){s(t=>t.pushCrumb(e))}function o(){s(e=>e.popCrumb())}function l(e){s(t=>t.replaceCrumbs(e))}function c(e){s(t=>t.renameCurrentCrumb(e))}function d(e){s(t=>t.replaceCurrentCrumb(e))}},79988:(e,t,n)=>{n.d(t,{c$:()=>i,n5:()=>a,z4:()=>s});let i="global_sso_banner",a=3,s="dismissed_sso_orgs"},894:(e,t,n)=>{n.d(t,{L:()=>s,M:()=>a});var i=n(96540);let a=(0,i.createContext)(null);function s(){let e=(0,i.useContext)(a);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},43362:(e,t,n)=>{n.d(t,{Be:()=>s,Sl:()=>o,Wp:()=>a,YY:()=>c,jH:()=>l,wm:()=>r});var i=n(36729);function a(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function s(e){return e.reduce((e,t)=>(e[t.path]=!!t.markedAsViewed,e),{})}function r(e){let t=e.comments.map(e=>parseInt(e.threadId));return{id:e.id,pendingReviewIDs:t,comments:e.comments}}function o(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function l(e,t){if(!e)return;let n={};if(!t)return n;for(let a of t){if(!a.markersMap||0===Object.keys(a.markersMap).length)continue;let t=a.path,s={};for(let t in a.markersMap){let n=a.markersMap[t];if(!n?.threads&&!n?.annotations)continue;let r={threads:[],annotations:[]};if(n.annotations)for(let t of n.annotations){let n=e.annotations[Number(t.id)];n&&r.annotations.push(n)}if(n.threads)for(let i of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!u(n))return;let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];u(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:d[n],startLine:a,startDiffSide:d[s],isOutdated:!!t.outdatedReason}}(t,i),a=e.threads[Number(i.id)];a&&n&&(a={...a,positioning:n,subject:n}),a&&r.threads.push(a)}"FILE"===t?s[i.zW]=r:s[t]=r}n[t]=s}return n}function c(e){return{endLine:e.line,endDiffSide:e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",startLine:e.startLine??e.line,startDiffSide:e.startSide?e.startSide?.toLowerCase()==="right"?"RIGHT":"LEFT":e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",isOutdated:!1}}let d={L:"LEFT",R:"RIGHT"};function u(e){return"L"===e||"R"===e}},89155:(e,t,n)=>{n.d(t,{F:()=>s});var i=n(39029),a=n(34261);function s(e){let{refetch:t}=(0,a.W)();(0,i.og)(e,t,{git_updated:!0,title_updated:!0})}},39029:(e,t,n)=>{n.d(t,{Zi:()=>l,og:()=>o});var i=n(40235),a=n(70170),s=n(70263),r=n(96540);function o(e,t,n,i){l(e,t,n,i)}function l(e,t,n,o){let l=(0,s.A)(),c=(0,r.useMemo)(()=>(0,a.n)(()=>{l()&&t()},o??2e3),[l,t,o]),d=(0,r.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(c,e.wait||0);else window.setTimeout(c,e.wait||0)},[c,n]);(0,i.x)(e,d)}},24798:(e,t,n)=>{n.d(t,{o:()=>a});var i=n(76648);function a(){let e=(0,i.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:a,repository:s,urls:r,user:o}=e;return{aliveChannel:t,pullRequest:n,bannersData:a,repository:s,urls:r,user:o}}},97695:(e,t,n)=>{n.d(t,{H:()=>d});var i=n(48845),a=n(20622),s=n(97665),r=n(94747),o=n(69510),l=n(59201),c=n(21067);function d(e,t){let n=(0,l.Kp)(),d=(0,c.cj)(),u=`${n}/page_data/${a.u.resolveThread}`,m=(0,s.jE)(),{updateThread:h}=(0,l.an)();return(0,r.n)({mutationFn:async({threadId:e})=>{let t=await (0,i.q$)(u,{method:"POST",body:{threadId:e}});(0,i.R)(t)},onSuccess:(i,a)=>(h(Number(a.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:d}}),m.invalidateQueries({queryKey:(0,o.XG)(n)}))})}},39698:(e,t,n)=>{n.d(t,{i:()=>c});var i=n(48845),a=n(20622),s=n(97665),r=n(94747),o=n(69510),l=n(59201);function c(e,t){let n=(0,l.Kp)(),c=`${n}/page_data/${a.u.unresolveThread}`,d=(0,s.jE)(),{updateThread:u}=(0,l.an)();return(0,r.n)({mutationFn:async({threadId:e})=>{let t=await (0,i.q$)(c,{method:"POST",body:{threadId:e}});(0,i.R)(t)},onSuccess:(i,a)=>(u(Number(a.threadId),e,t,e=>{if(e)return{...e,isResolved:!1,resolvedBy:void 0}}),d.invalidateQueries({queryKey:(0,o.XG)(n)}))})}},82603:(e,t,n)=>{n.d(t,{dG:()=>d,hG:()=>h,o5:()=>u});var i=n(96540),a=n(97286),s=n(65510),r=n(96379),o=n(37285),l=n(20622);function c(e){return{queryKey:[l.u.codeowners,e],queryFn:async()=>{let t=`${e}/page_data/${l.u.codeowners}`,n=await (0,r.QJ)(t);if(!n.ok)throw Error(`HTTP ${n.status}`);let i=await n.json();return(0,o.Av)(i),i},staleTime:1/0}}function d({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}=c(e);return(0,a.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})}function u({basePath:e,diffPath:t}){let{queryFn:n,queryKey:a}=c(e);return(0,s.U)({queryKey:a,queryFn:n,staleTime:1/0,select:(0,i.useCallback)(e=>h({codeownersData:e,diffPath:t}),[t])})}let m={isOwnedByViewer:!1,owners:[],ruleLineNumber:void 0,ruleUrl:void 0};function h({diffPath:e,codeownersData:t}){if(!t)return m;let n=t.ownershipByPath[e];return n?{isOwnedByViewer:n.isOwnedByViewer,owners:n.owners||[],ruleLineNumber:n.ruleLineNumber,ruleUrl:n.ruleUrl}:m}},2022:(e,t,n)=>{n.d(t,{E:()=>c,d:()=>d});var i=n(65510),a=n(20622),s=n(53885),r=n(96379),o=n(50129),l=n(37285);function c(){let{basePageDataUrl:e}=(0,o.Yu)();return[a.u.commits,`basePageDataURL:${e}`]}function d(e){let t=(0,s.e)(a.u.commits),n=c();return(0,i.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,l.Av)(n),n},initialData:e,staleTime:1/0})}},34261:(e,t,n)=>{n.d(t,{W:()=>d,f:()=>c});var i=n(65510),a=n(20622),s=n(53885),r=n(96379),o=n(37285),l=n(50129);function c(){let{basePageDataUrl:e}=(0,l.Yu)();return[a.u.header,`basePageDataURL:${e}`]}function d(e){let t=(0,s.e)(a.u.header),n=c();return(0,i.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,o.Av)(n),n},initialData:e,staleTime:1/0})}},69510:(e,t,n)=>{n.d(t,{XG:()=>c,_l:()=>d});var i=n(65510),a=n(20622),s=n(96379),r=n(37285);function o(e){return null!==e&&"object"==typeof e&&"previewInfo"in e}function l(e){return{thread:{id:e.threadId,isResolved:e.isResolved,isOutdated:e.isOutdated,line:e.line,subjectType:e.subjectType,subject:e.subject,commentsData:e.commentsData},previewInfo:{threadId:e.threadId,commentId:e.commentId,path:e.path,threadPreviewComments:e.threadPreviewComments,originalDiffPathUri:e.originalDiffPathUri,firstComment:e.firstComment,subject:e.subject}}}function c(e){return[a.u.threadPreviews,e]}function d({pathName:e,initialData:t}){let{queryFn:n,queryKey:d}=function(e){let t=`${e}/page_data/${a.u.threadPreviews}`;return{queryKey:c(e),queryFn:async()=>{let e=await (0,s.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return((0,r.Av)(n),n.length>0&&!o(n[0]))?n.map(l):n}}}(e),u=t&&t.length>0&&!o(t[0])?t.map(l):t;return(0,i.U)({queryKey:d,queryFn:n,initialData:u,staleTime:1/0})}},59201:(e,t,n)=>{n.d(t,{JA:()=>E,YL:()=>R,wI:()=>L,gt:()=>D,iY:()=>A,wh:()=>q,kN:()=>G,JR:()=>z,L3:()=>m,yo:()=>h,HZ:()=>Q,$W:()=>J,jT:()=>K,QV:()=>Y,or:()=>ee,I8:()=>Z,l0:()=>g,Ud:()=>x,uh:()=>v,Fm:()=>b,qg:()=>y,mU:()=>_,GR:()=>S,SM:()=>M,it:()=>W,j5:()=>p,Lh:()=>w,ne:()=>P,an:()=>U,rP:()=>B,_N:()=>V,ys:()=>H,pV:()=>X,mY:()=>j,Kp:()=>ei,XN:()=>f,zK:()=>N,mF:()=>I,m9:()=>C,_W:()=>F,Qb:()=>$,BI:()=>O,Mv:()=>et,gi:()=>en});var i=n(70466),a=n(59914),s=n(53215),r=n(82603),o=n(71315),l=n(35311);let c=[],d=[],u={threads:c,annotations:d},m=()=>(0,s.n)(e=>e.comparisonInfo),h=()=>(0,s.n)(e=>e.comparisonInfoActions),p=()=>(0,s.n)(e=>e.isSingleFileMode),f=()=>(0,s.n)(e=>e.pullRequest.state),g=()=>(0,s.n)(e=>e.diffSummaries),y=()=>(0,s.n)(e=>Object.values(e.diffSummaries).length??0),x=()=>(0,s.n)(e=>e.diffSummariesActions),v=()=>(0,s.n)(T([e=>e.diffSummaries],e=>Object.values(e),i.x)),b=e=>(0,s.n)(t=>t.diffSummaries[e]),_=()=>k().filteredDiffSummaries,j=()=>(0,s.n)(e=>e.entries),C=()=>(0,s.n)(e=>e.selectedPathDigest),w=()=>(0,s.n)(e=>e.markerAndDiffNavigationActions),N=()=>(0,s.n)(e=>e.markerAndDiffNavigation.commentId),S=()=>(0,s.n)(e=>e.markerAndDiffNavigation.getMarkerId),I=()=>(0,s.n)(e=>e.markerAndDiffNavigation.markerId),k=()=>(0,s.n)(T([e=>e.diffSummaries,e=>e.codeowners,e=>e.diffFilter.state,e=>e.diffFilter.filtersInteractedWith,e=>e.changeGroupGeneration.changeGroups],(e,t,n,i,a)=>{let s=new Map,c=[],d=a.find(e=>e.id===n.activeChangeGroupId),u=d?.hunkPositions?new Set(Object.keys(d.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,r.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;!function(e,t,n,i){return(!i||!!i.has(e.path))&&e.path.toLowerCase().includes(t.filterText.toLowerCase())&&!t.unselectedFileExtensions.has((0,l.QC)(e.path))&&(t.showDeletedFiles||"REMOVED"!==e.changeType&&"DELETED"!==e.changeType)&&(!t.showOnlyManifestFiles||!!e.isManifestFile)&&(!t.showOnlyOwnedFiles||n)&&(t.showViewedFiles||!e.markedAsViewed)&&(t.showVendoredFiles||!e.isVendored)}(i,n,e,u)?s.set(i.path,!0):(c.push(i),s.set(i.path,!1))}if(i){let e=c.length;!function(e,t=0){if(void 0===o.XC)return;let n=o.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===o.XC)return;let e=o.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),o.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(`${e} file${1===e?"":"s"} remain${1===e?"s":""}`,150)}return{hiddenFiles:s,filteredDiffSummaries:c}},i.x));function T(e,t,n){let i,a;return s=>{let r=e.map(e=>e(s));if(i&&n(r,i))return a;let o=t(...r);return i=r,a=o,o}}let L=()=>(0,s.n)((0,a.k)(e=>Object.values(e.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??d)))),E=()=>(0,s.n)(e=>{let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}),R=()=>(0,s.n)(e=>e.diffFilter.state.activeChangeGroupId),A=()=>(0,s.n)(e=>e.changeGroupGeneration.changeGroups),D=()=>(0,s.n)(e=>e.changeGroupGeneration.canAccessChangeGroups),P=e=>(0,s.n)((0,a.k)(t=>t.markers?.[e])),O=e=>(0,s.n)((0,a.k)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??c)),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i})),M=()=>(0,s.n)(e=>e.getThread),F=(e,t,n)=>(0,s.n)(i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e)),B=(e,t)=>(0,s.n)(T([n=>n.markers?.[e]?.[t]],e=>{let t=e?.threads??c,n=e?.annotations??d;return t.length||n.length?{threads:t,annotations:n}:u},i.x)),$=e=>(0,s.n)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??c)).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(e=>!e.isResolved&&!e.positioning?.isOutdated).reduce((e,t)=>e+(t.commentsData?.comments?.length??0),0):0}),U=()=>(0,s.n)(e=>e.markersActions),V=()=>(0,s.n)(e=>e.pendingReviewActions),H=()=>(0,s.n)(e=>e.pendingReview),W=()=>(0,s.n)(e=>(e.pendingReview?.pendingReviewIDs?.length??0)>0),q=()=>(0,s.n)(e=>e.codeownersActions),z=()=>(0,s.n)(e=>e.filesCollapsedStatusActions),G=e=>(0,s.n)(t=>t.collapsedFilesMap?.[e]??!1),K=e=>(0,s.n)(t=>t.diffEntries?.[e]??null),Q=()=>(0,s.n)(e=>e.diffEntries),Y=()=>(0,s.n)(e=>e.diffEntriesActions),J=e=>(0,s.n)((0,a.k)(t=>t.entries.filter(t=>e.some(e=>e.path===t.path)))),X=()=>(0,s.n)(e=>e.progressiveDiffsActions),Z=()=>(0,s.n)(e=>e.diffFilter.state),ee=()=>(0,s.n)(e=>e.diffFilterActions),et=e=>(0,s.n)(t=>t.summariesViewedStatus?.[e]??!1),en=()=>(0,s.n)(e=>e.summariesViewedCount),ei=()=>(0,s.n)(e=>e.pullRequest.basePath)},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},21132:(e,t,n)=>{n.d(t,{s:()=>i});let i={Loaded:"Loaded",Loading:"Loading",NotLoaded:"NotLoaded"}},15697:(e,t,n)=>{function i({paths:e,diffSummaries:t}){let n={};for(let i of e){let e=t[i];if(e&&e.markersMap){let t=[];for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push(i)}n[i]=t}}return n}function a({diffSummary:e}){let t=[];if(e&&e.markersMap)for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push({start:i[0],end:i[1]})}return t}n.d(t,{B:()=>a,i:()=>i})},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},39111:(e,t,n)=>{n.d(t,{X:()=>a});var i=n(54571);function a(e){let t=e.join(","),[n]=(0,i.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},51587:(e,t,n)=>{n.d(t,{N:()=>s});var i=n(79634),a=n(96540);let s=()=>{let e=(0,i.X)();return(0,a.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},34001:(e,t,n)=>{n.d(t,{t:()=>c});var i=n(42455),a=n(67154),s=n(78314),r=n(51120),o=n(96540),l=n(13017);function c({pullId:e,initialData:t,sessionsPollingInterval:n}){let c=(0,s.t)(),[d,u]=(0,o.useState)(0),[m,h]=(0,o.useState)(!1),p=(0,l.g)(),[f]=(0,l.ok)(),g=f.get("session_id"),y=p.session_id||g,x=(0,o.useRef)(!0),v=e=>{if(!e)return[];let t=new Set,n=[];for(let i of e)t.has(i.id)||(t.add(i.id),n.push(i));return n};return{...(0,i.b)({queryKey:["agent-sessions",c.ownerLogin,c.name,e],queryFn:async()=>{try{let t=[];if(x.current){let n=await (0,r.I)({path:`/agents/sessions/resource/pull/${e}`}),i=await n.json(),a=(t=v(i.sessions)).some(e=>e.id===y);(0===t.length||y&&!a)&&(x.current=!1)}if(!x.current){let e=await (0,r.I)({path:`/agents/sessions/${y}`}),n=await e.json();n&&n.id&&(t=[n])}return u(0),h(!1),t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}catch(e){throw u(e=>{let t=e+1;return t>=10&&h(!0),t}),e}},initialData:t?v(t):t,refetchInterval:e=>{let t=e.state.data;return t?t.some(e=>e.state===a.Yj.InProgress||e.state===a.Yj.Idle||e.state===a.Yj.WaitingForUser||e.state===a.Yj.Queued)?n:10*n:n},enabled:d<10}),timedOut:m,isRetrying:d>0&&!m}}},73262:(e,t,n)=>{n.d(t,{K:()=>d});var i=n(74848),a=n(21728),s=n(96540),r=n(21373),o=n(34164),l=n(48505),c=n(18373);function d(e){let t,n,d,u,m=(0,a.c)(21),{automatedComment:h,isButtonDisabled:p,dismissError:f,onDismiss:g,onReopen:y,className:x}=e,[v,b]=(0,s.useState)(!1),{isDismissable:_,isReopenable:j,resourceName:C,toggleButtonLabel:w}=function(e){let t,n=(0,a.c)(6),i=e.isDismissed,s=!i&&e.viewerCanDismiss,r=i&&e.viewerCanReopen,o="alert";e.source===l.vk.CodeQuality&&(o="finding");let c=i?`Reopen ${o}`:`Dismiss ${o}`;return n[0]!==s||n[1]!==i||n[2]!==r||n[3]!==o||n[4]!==c?(t={isDismissed:i,isDismissable:s,isReopenable:r,resourceName:o,toggleButtonLabel:c},n[0]=s,n[1]=i,n[2]=r,n[3]=o,n[4]=c,n[5]=t):t=n[5],t}(h);return m[0]!==h||m[1]!==v||m[2]!==f||m[3]!==g?(t=v&&(0,i.jsx)(c.U,{setOpen:b,count:1,error:f,onSubmit:e=>{let{resolution:t,dismissalComment:n}=e;return g({reason:t,resolutionNote:n},{onSuccess:()=>b(!1)})},delegatedAlertDismissalEnabled:!1,codeSecurity:h.source===l.vk.CodeScanning}),m[0]=h,m[1]=v,m[2]=f,m[3]=g,m[4]=t):t=m[4],m[5]!==x||m[6]!==p||m[7]!==_||m[8]!==C||m[9]!==w?(n=_&&(0,i.jsxs)("div",{className:(0,o.$)("d-flex flex-items-center flex-wrap",x),children:[(0,i.jsx)(r.Q,{"aria-label":w,className:"mr-2",onClick:()=>b(!0),disabled:p,children:w}),(0,i.jsxs)("span",{className:"fgColor-muted f6",children:["Dismissing the ",C," will mark this conversation as resolved."]})]}),m[5]=x,m[6]=p,m[7]=_,m[8]=C,m[9]=w,m[10]=n):n=m[10],m[11]!==x||m[12]!==p||m[13]!==j||m[14]!==y||m[15]!==w?(d=j&&(0,i.jsx)("div",{className:(0,o.$)("d-flex flex-items-center flex-wrap",x),children:(0,i.jsx)(r.Q,{"aria-label":w,onClick:y,disabled:p,children:w})}),m[11]=x,m[12]=p,m[13]=j,m[14]=y,m[15]=w,m[16]=d):d=m[16],m[17]!==t||m[18]!==n||m[19]!==d?(u=(0,i.jsxs)(i.Fragment,{children:[t,n,d]}),m[17]=t,m[18]=n,m[19]=d,m[20]=u):u=m[20],u}try{d.displayName||(d.displayName="BaseAutomatedReviewCommentActions")}catch{}},19199:(e,t,n)=>{n.d(t,{n:()=>C});var i=n(74848),a=n(82075),s=n(21373),r=n(1481),o=n(96540),l=n(13107),c=n(26410),d=n(37285),u=n(20622),m=n(53885),h=n(96379),p=n(65510),f=n(91747),g=n(31604),y=n(1992),x=n(38621);let v=({isPrimary:e,children:t,size:n,onOpenChange:a})=>{let r=(0,f.u)("accessible_code_button"),[l,c]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r&&a&&a(l)},[l,r]),r)?(0,i.jsx)(g.T,{align:"end",focusZoneSettings:{disabled:!0},open:l,onOpen:()=>c(!0),onClose:()=>c(!1),renderAnchor:t=>(0,i.jsx)(s.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(x.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,i.jsx)(x.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,i.jsxs)(y.W,{children:[(0,i.jsx)(y.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(x.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,i.jsx)(y.W.Overlay,{width:"auto",align:"end",children:t})]})};try{v.displayName||(v.displayName="CodeMenuButton")}catch{}let b={TabNav:"CodeDropdownButton-module__TabNav--zWa9N",NavItem:"CodeDropdownButton-module__NavItem--_hXZP"},_=(0,a.A)("localStorage"),j={Local:"local",Codespaces:"cloud"};function C(e){var t,n;let{primary:a,size:d,showCodespacesTab:u,isEnterprise:m,localTab:h,codespacesTab:p,localTabProps:f,codespacesPath:g}=e,y="code-button-default-tab",[x,C]=(0,o.useState)(j.Local),N=(0,o.useCallback)(e=>{C(j.Codespaces),_.setItem(y,j.Codespaces),e?.preventDefault()},[]),S=(0,o.useCallback)(e=>{C(j.Local),_.setItem(y,j.Local),e?.preventDefault()},[]);(0,o.useEffect)(()=>{_.getItem(y)===j.Codespaces&&u&&N()},[]);let I=!m&&u;return(0,i.jsxs)(v,{size:d,isPrimary:a,children:[I&&(0,i.jsxs)(r.A,{className:b.TabNav,children:[(0,i.jsx)(r.A.Link,{as:s.Q,selected:x===j.Local,onClick:S,className:b.NavItem,children:"Local"}),!m&&u&&(0,i.jsx)(r.A.Link,{as:s.Q,selected:x===j.Codespaces,onClick:N,className:b.NavItem,children:"Codespaces"})]}),(0,i.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[x===j.Local&&(h||((t=f)?(0,i.jsx)(c.F,{...t}):null)),x===j.Codespaces&&(p||((n=g)?(0,i.jsx)(l.VO,{children:(0,i.jsx)(w,{codespacesPath:n})}):null))]})]})}function w(e){let t=function(e){let t=(0,m.e)(u.u.codeButton);return(0,p.U)({queryKey:[u.u.codeButton,t],queryFn:async()=>{let e=await (0,h.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,d.Av)(n),n},initialData:void 0,staleTime:1/0})}().data;return(0,i.jsx)(l.NF,{codespacesPath:e.codespacesPath,...t})}try{C.displayName||(C.displayName="CodeDropdownButton")}catch{}try{w.displayName||(w.displayName="SuspendedCodespacesTab")}catch{}},13107:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>p,wW:()=>y});var i=n(74848),a=n(73017),s=n(96379),r=n(1805),o=n(69726),l=n(96540),c=n(75202),d=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,i.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,i.jsx)(r.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function h({header:e,message:t}){return(0,i.jsxs)("div",{className:"blankslate",children:[(0,i.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,i.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function p({children:e}){return(0,i.jsx)("div",{className:"d-flex flex-justify-center",children:(0,i.jsx)(c.t,{fallback:(0,i.jsx)(h,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(o.A,{})}),children:e})})})}function f({codespacesPath:e}){let{data:t}=(0,d.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,s.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,i.jsx)(a.vb,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repoPolicyInfo:n,contactPath:a,currentUserIsEnterpriseManaged:s,enterpriseManagedBusinessName:o,newCodespacePath:l,codespacesPath:c,isLoggedIn:d}=e;if(!t){if(!d)return(0,i.jsx)(h,{header:"Sign in required",message:(0,i.jsxs)("span",{children:["Please"," ",(0,i.jsx)(r.A,{inline:!0,href:l,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)if(!n?.changesWouldBeSafe)return(0,i.jsx)(h,{header:"Repository access limited",message:(0,i.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});else return(0,i.jsx)(h,{header:"Codespace access limited",message:m(a)});{let e=null;return e=!n?.canBill&&s?(0,i.jsxs)("span",{children:[(0,i.jsx)(r.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${o||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,i.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,i.jsx)(r.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"})," ","which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,i.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,i.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(a),(0,i.jsx)(h,{header:"Codespace access limited",message:e})}}return(0,i.jsx)(f,{codespacesPath:c})}function y(e){return(0,i.jsx)(p,{children:(0,i.jsx)(g,{...e})})}try{h.displayName||(h.displayName="ErrorMessage")}catch{}try{p.displayName||(p.displayName="CodespacesTabWrapper")}catch{}try{f.displayName||(f.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{y.displayName||(y.displayName="CodespacesTab")}catch{}},26410:(e,t,n)=>{n.d(t,{J:()=>b,F:()=>x});var i=n(74848),a=n(96540),s=n(39111),r=n(96459),o=n(96379),l=n(1805),c=n(89179),d=n(72511),u=n(5524),m=n(81960),h=n(11196),p=n(98755),f=n(38621);let g={UnderlineNav:"LocalTab-module__UnderlineNav--epbgw",PlatformContents:"LocalTab-module__PlatformContents--rz1GK",CloneContainer:"LocalTab-module__CloneContainer--fne3C",CopyToClipboardButton:"LocalTab-module__CopyToClipboardButton--G8eJx"};var y=n(34164);function x(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:p,sshUrl:y,sshCertificatesRequired:x,sshCertificatesAvailable:_,ghCliUrl:j,newSshKeyUrl:C,setProtocolPath:w}=e.protocolInfo,{defaultProtocol:N}=e.protocolInfo,[S,I]=(0,a.useState)(N),[k,T]=(0,a.useState)(""),{cloneUrl:L,visualStudioCloneUrl:E,showVisualStudioCloneButton:R,showXcodeCloneButton:A,xcodeCloneUrl:D,zipballUrl:P}=e.platformInfo,O=(0,s.X)(["windows","mac"]),M=(0,s.X)(["mac"]),F=(0,r.Z)(),B="mt-2 fgColor-muted text-normal",$=(0,a.useCallback)(e=>{if(S!==e){I(e);let t=new FormData;t.set("protocol_selector",e),(0,o.DI)(w,{method:"post",body:t})}},[S,I,w]),U=(0,a.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>$("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>$("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>$("gh_cli")}),e},[t,$,n]),V=(0,a.useMemo)(()=>{let e=[];return O&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:L,icon:f.DesktopDownloadIcon}),O&&R&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:E}),M&&A&&e.push({name:"xcode",text:"Open with Xcode",url:D}),e.push({name:"zip",text:"Download ZIP",url:P,icon:f.FileZipIcon}),e},[L,M,O,R,A,E,D,P]);return(0,i.jsx)("div",{children:"githubDesktop"===k?(0,i.jsx)(v,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===k?(0,i.jsx)(v,{platform:"Visual Studio"}):"xcode"===k?(0,i.jsx)(v,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(f.TerminalIcon,{className:"mr-2"}),(0,i.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,i.jsx)(h.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,i.jsx)(l.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,i.jsx)(f.QuestionIcon,{className:"mr-1"})})})]}),(0,i.jsx)(c.O,{"aria-label":"Remote URL selector",className:g.UnderlineNav,children:U.map(e=>(0,i.jsx)(c.O.Item,{"aria-current":S===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,i.jsx)("p",{className:B,children:"Clone using the web URL."})]}):"ssh"===S?(0,i.jsxs)(i.Fragment,{children:[p&&(0,i.jsxs)(d.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,i.jsx)(l.A,{inline:!0,href:C,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,i.jsx)(b,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:y}),(0,i.jsx)("p",{className:B,children:x?"Use a password-protected SSH certificate.":_?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:j}),(0,i.jsxs)("p",{className:B,children:["Work fast with our official CLI."," ",(0,i.jsx)(l.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,i.jsx)(u.l,{variant:"inset",className:"border-top",children:V.map(e=>"zip"===e.name?(0,i.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name):(0,i.jsxs)(u.l.Item,{onSelect:t=>{T(e.name),t.preventDefault(),F(e.url)},children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function v({platform:e,href:t}){return(0,i.jsxs)("div",{className:(0,y.$)("p-3",g.PlatformContents),children:[(0,i.jsx)(m.A,{as:"h4",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,i.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,i.jsx)(l.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function b({buttonAriaLabel:e="Copy url to clipboard",inputId:t,inputLabel:n,url:a}){return(0,i.jsxs)("div",{className:(0,y.$)("d-flex mb-2",g.CloneContainer),children:[(0,i.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,i.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:a,readOnly:!0,style:{flexGrow:1}}),(0,i.jsx)(p.T,{className:(0,y.$)("ml-1 mr-0",g.CopyToClipboardButton),textToCopy:a,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{x.displayName||(x.displayName="LocalTab")}catch{}try{v.displayName||(v.displayName="LaunchingPlatformContents")}catch{}try{b.displayName||(b.displayName="CloneUrl")}catch{}},97315:(e,t,n)=>{n.d(t,{P:()=>c});var i=n(74848),a=n(21728),s=n(97949),r=n(96540),o=n(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,n,c,u,m,h,p=(0,a.c)(14),{ambientError:f,useLargerBorderRadius:g}=e,y=(0,o.b)(),[x,v]=(0,r.useState)(0),b=void 0!==g&&g?l.largeBorderRadius:l.mediumBorderRadius,_=(0,r.useRef)(null);p[0]!==f.message?(t=()=>{if(f.message){v(d);let e=setTimeout(()=>{_.current&&_.current.focus()},250);return()=>clearTimeout(e)}},p[0]=f.message,p[1]=t):t=p[1],p[2]!==f?(n=[f],p[2]=f,p[3]=n):n=p[3],(0,r.useEffect)(t,n);let j=`${l.ambientErrorBanner} ${b}`;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},p[4]=c):c=p[4],p[5]!==f.message?(u=(0,i.jsx)("div",{ref:_,tabIndex:-1,style:c,children:f.message}),p[5]=f.message,p[6]=u):u=p[6],p[7]!==y?(m=()=>{y.dismissAmbientError()},p[7]=y,p[8]=m):m=p[8],p[9]!==x||p[10]!==j||p[11]!==u||p[12]!==m?(h=(0,i.jsx)(s.l,{"aria-atomic":"true",className:j,description:u,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},x),p[9]=x,p[10]=j,p[11]=u,p[12]=m,p[13]=h):h=p[13],h}function d(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}},55009:(e,t,n)=>{n.d(t,{o:()=>d});var i=n(74848),a=n(21728),s=n(34164),r=n(96540);let o={chatImageAttachment:"ChatImage-module__chatImageAttachment--yonSm",squareView:"ChatImage-module__squareView--nZPWG",fullView:"ChatImage-module__fullView--hHWSy",userAttachedImage:"ChatImage-module__userAttachedImage--e5PZR",overlay:"ChatImage-module__overlay--Z0bfs",overlayScreen:"ChatImage-module__overlayScreen--oZnB_",expandIcon:"ChatImage-module__expandIcon--H2k4g"};function l(e){let t,n,s=(0,a.c)(5),{className:r,size:o}=e,l=o||14,c=o||14;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"}),s[0]=t):t=s[0],s[1]!==r||s[2]!==l||s[3]!==c?(n=(0,i.jsx)("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:c,fill:"none",viewBox:"0 0 14 14",role:"presentation",children:t}),s[1]=r,s[2]=l,s[3]=c,s[4]=n):n=s[4],n}try{l.displayName||(l.displayName="ExpandIcon")}catch{}let c=e=>{let t,n,c,d,u,m,h,p,f,g=(0,a.c)(25),{src:y,alt:x,onClick:v,useOverlay:b,mode:_,squareView:j}=e,[C,w]=(0,r.useState)(!1),N=j?o.squareView:o.fullView,S="assistive"===_;g[0]!==N||g[1]!==S?(t=(0,s.$)(o.chatImageAttachment,N,{assistive:S}),g[0]=N,g[1]=S,g[2]=t):t=g[2];let I=j?o.squareView:o.fullView;return g[3]!==I?(n=(0,s.$)(o.userAttachedImage,I),g[3]=I,g[4]=n):n=g[4],g[5]!==x||g[6]!==y||g[7]!==n?(c=(0,i.jsx)("img",{className:n,src:y,alt:x}),g[5]=x,g[6]=y,g[7]=n,g[8]=c):c=g[8],g[9]!==C||g[10]!==j?(d=(0,s.$)(o.overlay,{hovered:C,[o.squareView]:j}),g[9]=C,g[10]=j,g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>w(!0),m=()=>w(!1),g[12]=u,g[13]=m):(u=g[12],m=g[13]),g[14]!==b?(h=b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o.overlayScreen}),(0,i.jsx)(l,{className:o.expandIcon,size:20})]}),g[14]=b,g[15]=h):h=g[15],g[16]!==v||g[17]!==y||g[18]!==h||g[19]!==d?(p=(0,i.jsx)("a",{href:y,className:d,onClick:v,onMouseEnter:u,onMouseLeave:m,"aria-label":"Open image thumbnail",target:"_blank",rel:"noreferrer",children:h}),g[16]=v,g[17]=y,g[18]=h,g[19]=d,g[20]=p):p=g[20],g[21]!==p||g[22]!==t||g[23]!==c?(f=(0,i.jsxs)("div",{className:t,children:[c,p]}),g[21]=p,g[22]=t,g[23]=c,g[24]=f):f=g[24],f},d=(0,r.memo)(c);try{c.displayName||(c.displayName="ChatImageUnmemoized")}catch{}try{d.displayName||(d.displayName="ChatImage")}catch{}},46665:(e,t,n)=>{n.d(t,{$:()=>o,V:()=>l});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(void 0),o=e=>{let t,n,s=(0,a.c)(5),{message:o,children:l}=e;s[0]!==o?(t={message:o},s[0]=o,s[1]=t):t=s[1];let c=t;return s[2]!==l||s[3]!==c?(n=(0,i.jsx)(r.Provider,{value:c,children:l}),s[2]=l,s[3]=c,s[4]=n):n=s[4],n},l=()=>{let e=(0,s.useContext)(r);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{r.displayName||(r.displayName="ChatMessageContext")}catch{}try{o.displayName||(o.displayName="ChatMessageProvider")}catch{}},59524:(e,t,n)=>{n.d(t,{Q:()=>c});var i=n(74848),a=n(21728),s=n(38621),r=n(4908),o=n(23398);let l={Details:"ChatMessageMcpToolResultsList-module__Details--ri1It",ToolInputOutputHeading:"ChatMessageMcpToolResultsList-module__ToolInputOutputHeading--tgNpb",ToolInputOutputContents:"ChatMessageMcpToolResultsList-module__ToolInputOutputContents--DB0rS"};function c(e){let t,n,s=(0,a.c)(4),{mcpToolResults:r}=e;return r&&0!==r.length?(s[0]!==r?(t=r.map(d),s[0]=r,s[1]=t):t=s[1],s[2]!==t?(n=(0,i.jsx)("div",{className:"mb-2",children:t}),s[2]=t,s[3]=n):n=s[3],n):null}function d(e){return(0,i.jsx)(u,{result:e},e.toolName)}function u(e){let t,n,c,d,u,m,h,p,f,g,y,x,v,b=(0,a.c)(29),{result:_}=e;b[0]===Symbol.for("react.memo_cache_sentinel")?(t={},b[0]=t):t=b[0];let{getDetailsProps:j,open:C}=(0,r.A)(t),w=_.toolName;return b[1]!==j?(n=j(),b[1]=j,b[2]=n):n=b[2],b[3]!==C?(c=!C&&(0,i.jsx)(s.ChevronRightIcon,{size:16,className:"mr-1 inline-block"}),b[3]=C,b[4]=c):c=b[4],b[5]!==C?(d=C&&(0,i.jsx)(s.ChevronDownIcon,{size:16,className:"mr-1 inline-block"}),b[5]=C,b[6]=d):d=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(s.ToolsIcon,{size:16,className:"mr-1 inline-block"}),b[7]=u):u=b[7],b[8]!==_.serverName||b[9]!==_.toolName||b[10]!==c||b[11]!==d?(m=(0,i.jsxs)("summary",{children:[c,d,u,"Called ",_.toolName," from ",_.serverName]}),b[8]=_.serverName,b[9]=_.toolName,b[10]=c,b[11]=d,b[12]=m):m=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Input"}),b[13]=h):h=b[13],b[14]!==_.toolArguments?(p=JSON.stringify(_.toolArguments,null,2),b[14]=_.toolArguments,b[15]=p):p=b[15],b[16]!==p?(f=(0,i.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,i.jsx)("span",{className:l.ToolInputOutputContents,children:p})}),b[16]=p,b[17]=f):f=b[17],b[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,i.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Output"}),b[18]=g):g=b[18],b[19]!==_.toolResponse?(y=JSON.stringify(_.toolResponse,null,2),b[19]=_.toolResponse,b[20]=y):y=b[20],b[21]!==y?(x=(0,i.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,i.jsx)("span",{className:l.ToolInputOutputContents,children:y})}),b[21]=y,b[22]=x):x=b[22],b[23]!==_.toolName||b[24]!==f||b[25]!==x||b[26]!==n||b[27]!==m?(v=(0,i.jsxs)(o.A,{className:l.Details,...n,children:[m,h,f,g,x]},w),b[23]=_.toolName,b[24]=f,b[25]=x,b[26]=n,b[27]=m,b[28]=v):v=b[28],v}try{c.displayName||(c.displayName="ChatMessageMcpToolResultsList")}catch{}try{u.displayName||(u.displayName="McpToolResult")}catch{}},63262:(e,t,n)=>{n.d(t,{A:()=>d,i:()=>c});var i=n(74848),a=n(21728),s=n(71315),r=n(96540),o=n(2635),l=n(7104);let c=e=>{let t,n,c,d,u=(0,a.c)(10),{isLastGroup:m,children:h}=e,{scrollContainerHeight:p,scrollToBottom:f}=(0,l.b)(),{threadHasNewMessages:g,pendingFirstMessage:y}=(0,o.Pk)(),x=m&&(g||y);if(u[0]!==x||u[1]!==f?(t=()=>{x&&f("smooth")},n=[x,f],u[0]=x,u[1]=f,u[2]=t,u[3]=n):(t=u[2],n=u[3]),(0,r.useEffect)(t,n),x)if(s.cg?.CSS?.supports("container-type: size")){let e;u[4]===Symbol.for("react.memo_cache_sentinel")?(e={minHeight:"100cqh"},u[4]=e):e=u[4],d=e}else{let e;u[5]!==p?(e={minHeight:p},u[5]=p,u[6]=e):e=u[6],d=e}return u[7]!==h||u[8]!==d?(c=(0,i.jsx)("div",{style:d,children:h}),u[7]=h,u[8]=d,u[9]=c):c=u[9],c};function d(e){return e.reduce((e,t)=>{let n=e.at(-1);return"assistant"===(n?.at(-1)?.role??"assistant")&&"user"===t.role?e.push([t]):n?.push(t),e},[])}try{c.displayName||(c.displayName="ChatMessagesGroup")}catch{}},88752:(e,t,n)=>{n.d(t,{t:()=>A,s:()=>E});var i,a=n(74848),s=n(38621),r=n(4908),o=n(23398),l=n(5524),c=n(1805),d=n(10095),u=n(34164),m=n(96540),h=n(25641),p=n(35247),f=n(2635),g=n(23967),y=n(69497),x=n(1992),v=n(33592);let b={ActionList_LinkItem:"ChatReference-module__ActionList_LinkItem--gopkk"};var _=n(35673),j=n(1631);function C({reference:e,onClick:t}){let n,i=(0,f.Pk)(),r=(0,v.b)(),o=(0,m.useRef)(null),[c,d]=(0,m.useState)(!1),p=i?.mode??"assistive",{currentReferences:g}=i??{currentReferences:[]},C=(0,m.useMemo)(()=>g.map(e=>(0,h.Vb)(e)),[g]),w=(0,m.useMemo)(()=>(0,h.Vb)(e),[e]),N=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),S=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),I=!N&&!S&&"web-search-result"!==e.type,k=(0,m.useMemo)(()=>N||S||C.includes(w),[N,S,C,w]),T=(0,m.useCallback)(t=>{t.stopPropagation(),k||r.addReference(e,"refMenu")},[r,e,k]),L=(0,h.JP)(e),E=(0,h.Xs)(L),R=(0,j.a_)(e,(0,h.P)(i?.currentTopic));switch(e.type){case"file":case"snippet":{n=`${e.repoName}`;let t=e.path.lastIndexOf("/");-1!==t&&(n=`${n}/${e.path.substring(0,t)}`);break}case"web-search-result":n=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let A=(0,h.z$)(e);return(0,a.jsxs)(l.l.LinkItem,{onClick:n=>{t&&!n.defaultPrevented&&t(e,n)},href:L,rel:"noopener",className:(0,u.$)("reference-action",b.ActionList_LinkItem),target:"immersive"===p||"third-party"===e.type?"_blank":void 0,children:[R&&(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(R,{})}),(0,a.jsxs)(y.A,{title:A,maxWidth:"100%",className:"text-semibold",children:[A,n&&(0,a.jsx)("span",{className:"color-fg-muted ml-2",children:n})]}),I&&(0,a.jsx)(l.l.TrailingAction,{onClick:()=>d(!0),icon:s.KebabHorizontalIcon,label:"More reference options",ref:o}),I&&(0,a.jsx)(x.W,{anchorRef:o,open:c,onOpenChange:d,children:(0,a.jsx)(_.UJ,{portalContainerName:_.Dq,children:(0,a.jsxs)(l.l,{children:[E&&("immersive"===p||["third-party","folder","repository","docset"].includes(e.type)?(0,a.jsxs)(l.l.LinkItem,{href:L,rel:"noopener",target:"_blank",children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(s.LinkIcon,{})}),"Open"]}):(0,a.jsxs)(l.l.Item,{onSelect:()=>{r.selectReference(e)},children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(s.LinkIcon,{})}),"Preview"]})),(0,a.jsxs)(l.l.Item,{onSelect:T,disabled:k,children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(s.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{C.displayName||(C.displayName="OutputReference")}catch{}try{(i=Icon).displayName||(i.displayName="Icon")}catch{}let w={referencesContainer:"ChatReferences-module__referencesContainer--qLjdy",referencesListImmersiveContainer:"ChatReferences-module__referencesListImmersiveContainer--gM5wy",title:"ChatReferences-module__title--d18y3",assistiveTitle:"ChatReferences-module__assistiveTitle--Ojcrs",referencesDetails:"ChatReferences-module__referencesDetails--Ypv2c",referenceTokensOuterContainer:"ChatReferences-module__referenceTokensOuterContainer--OV840",referenceTokensContainer:"ChatReferences-module__referenceTokensContainer--nhf9A",chatMessageReferenceListFooter:"ChatReferences-module__chatMessageReferenceListFooter--WgJAa",chevronDownIcon:"ChatReferences-module__chevronDownIcon--Fv9mJ",chevronUpIcon:"ChatReferences-module__chevronUpIcon--OPX7R",ActionList:"ChatReferences-module__ActionList--ACk2F"};var N=n(21728),S=n(69726);let I={referenceToken:"FigmaChatReference-module__referenceToken--PONuv",name:"FigmaChatReference-module__name--XjBR8",content:"FigmaChatReference-module__content--Mpcb0",thumbnail:"FigmaChatReference-module__thumbnail--mm7QC",thumbnailHidden:"FigmaChatReference-module__thumbnailHidden--pv7wD",thumbnailOuter:"FigmaChatReference-module__thumbnailOuter--oMFvD",thumbnailLoading:"FigmaChatReference-module__thumbnailLoading--cQ2Uf",figmaIconOuter:"FigmaChatReference-module__figmaIconOuter--KtveL",figmaIcon:"FigmaChatReference-module__figmaIcon--kEY45"};var k=n(89237);let T=(0,m.forwardRef)(function(e,t){let n,i,s,r,o,l,c,d,p,f,g=(0,N.c)(23);g[0]!==e?({reference:n,...i}=e,g[0]=e,g[1]=n,g[2]=i):(n=g[1],i=g[2]);let[y,x]=(0,m.useState)(!0);return g[3]!==n?(s=(0,h.JP)(n),g[3]=n,g[4]=s):s=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,u.$)(I.referenceToken),g[5]=r):r=g[5],g[6]!==n.thumbnailUrl||g[7]!==n.title||g[8]!==y?(o=n.thumbnailUrl&&(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)("span",{className:I.thumbnailLoading,children:(0,a.jsx)(S.A,{size:"medium"})}),(0,a.jsx)("img",{className:(0,u.$)(I.thumbnail,{[I.thumbnailHidden]:y}),src:n.thumbnailUrl,alt:`preview thumbnail for ${n.title}`,onLoad:()=>x(!1)})]}),g[6]=n.thumbnailUrl,g[7]=n.title,g[8]=y,g[9]=o):o=g[9],g[10]!==o?(l=(0,a.jsx)("span",{className:I.thumbnailOuter,children:o}),g[10]=o,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("div",{className:I.figmaIconOuter,children:(0,a.jsx)(k._,{className:I.figmaIcon})}),g[12]=c):c=g[12],g[13]!==n?(d=(0,h.z$)(n),g[13]=n,g[14]=d):d=g[14],g[15]!==d?(p=(0,a.jsxs)("span",{className:I.content,children:[c,(0,a.jsx)("span",{className:I.name,children:d})]}),g[15]=d,g[16]=p):p=g[16],g[17]!==t||g[18]!==i||g[19]!==s||g[20]!==l||g[21]!==p?(f=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:s,className:r,ref:t,target:"_blank",rel:"noreferrer",...i,children:[l,p]})}),g[17]=t,g[18]=i,g[19]=s,g[20]=l,g[21]=p,g[22]=f):f=g[22],f});try{T.displayName||(T.displayName="FigmaChatReference")}catch{}var L=n(95896);function E({references:e,onToggle:t,onClick:n,isImmersive:i,className:p}){let g=(0,f.Pk)(),y=(0,m.useMemo)(()=>(0,h.rT)(e),[e]),{getDetailsProps:x}=(0,r.A)({}),v=(0,m.useMemo)(()=>(0,h.P)(g?.currentTopic)&&y.every(R),[g?.currentTopic,y]),b=(0,m.useMemo)(()=>y.some(e=>"web-search-result"===e.type),[y]);if(0===y.length)return null;let _=v&&g?.currentTopic?.name?`Search results from ${g.currentTopic.name}`:`${y.length} ${1===y.length?"reference":"references"}`;return(0,a.jsxs)(o.A,{...x(),onToggle:t,className:(0,u.$)(p,w.referencesDetails),children:[(0,a.jsxs)("summary",{className:(0,u.$)(w.referencesContainer),children:[(0,a.jsx)("span",{className:(0,u.$)(w.title,i?"":w.assistiveTitle),children:_}),(0,a.jsx)(d.A,{icon:s.ChevronDownIcon,className:(0,u.$)("references-chevron-down",w.chevronDownIcon)}),(0,a.jsx)(d.A,{icon:s.ChevronUpIcon,className:(0,u.$)("references-chevron-up",w.chevronUpIcon)})]}),(0,a.jsxs)(l.l,{className:(0,u.$)(i&&w.referencesListImmersiveContainer,w.ActionList),children:[y.map(e=>(0,a.jsx)(C,{reference:e,onClick:n},(0,h.Vb)(e))),b&&(0,a.jsxs)("div",{className:w.chatMessageReferenceListFooter,children:["Copilot used the"," ",(0,a.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,a.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function R(e){return"snippet"===e.type&&!!e.languageName&&g.Yr.has(e.languageName)}function A({references:e,message:t,className:n,size:i,onClickReference:s,getReferenceVersion:r}){let{bigReferences:o,smallReferences:l}=(0,m.useMemo)(()=>(function(e){let t=(0,h.rT)(e),n=[],i=[];for(let e of t)D.has(e.type)?n.push(e):i.push(e);return{bigReferences:n,smallReferences:i}})(e),[e]),c=e=>"figma"===e.type&&p.W.immersiveFigmaIntegration?(0,a.jsx)(T,{reference:e,onClick:t=>s?.(e,t)},(0,h.Vb)(e)):(0,a.jsx)(j.BR,{message:t,reference:e,size:i,onClick:(t,n)=>s?.(e,n),getReferenceVersion:r},(0,h.Vb)(e));return(0,a.jsxs)(L.M,{"aria-label":"Attachments",className:(0,u.$)(w.referenceTokensOuterContainer,n),children:[o.map(c),(0,a.jsx)("div",{className:w.referenceTokensContainer,children:l.map(c)})]})}let D=new Set(["figma","image"]);try{E.displayName||(E.displayName="ChatMessageReferencesList")}catch{}try{A.displayName||(A.displayName="ChatMessageReferenceTokens")}catch{}try{D.displayName||(D.displayName="BIG_REFERENCE_TYPES")}catch{}},7104:(e,t,n)=>{n.d(t,{$:()=>d,b:()=>u});var i=n(74848),a=n(21728),s=n(36523),r=n(34164),o=n(96540);let l={container:"ChatScrollContainer-module__container--z_iNX"},c=(0,o.createContext)(null);function d(e){let t,n,d,u,m,h,p,f,g,y=(0,a.c)(22),{children:x,disabled:v,containerRef:b,..._}=e,j=(0,s.L)(b),C=(0,o.useRef)(null),[w,N]=(0,o.useState)(!1);y[0]!==j?(t=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return N(!t?.isIntersecting)},{root:j.current,threshold:0,rootMargin:"50px"});return e.observe(C.current),()=>e.disconnect()},n=[j],y[0]=j,y[1]=t,y[2]=n):(t=y[1],n=y[2]),(0,o.useEffect)(t,n);let[S,I]=(0,o.useState)();y[3]!==j?(d=()=>{let e=()=>{if(!j.current)return;let e=getComputedStyle(j.current);I(`calc(${j.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(j.current),()=>t.disconnect()},u=[j],y[3]=j,y[4]=d,y[5]=u):(d=y[4],u=y[5]),(0,o.useEffect)(d,u),y[6]!==v?(m=e=>{v||C.current?.scrollIntoView({behavior:e,block:"end"})},y[6]=v,y[7]=m):m=y[7];let k=m;y[8]!==w||y[9]!==S||y[10]!==k?(h={isScrolledUp:w,scrollToBottom:k,scrollContainerHeight:S},y[8]=w,y[9]=S,y[10]=k,y[11]=h):h=y[11];let T=h,L=(0,r.$)(l.container,_.className);return y[12]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("div",{ref:C,style:{height:"1px",marginTop:"-1px"}}),y[12]=p):p=y[12],y[13]!==x||y[14]!==j||y[15]!==_||y[16]!==L?(f=(0,i.jsxs)("div",{ref:j,..._,className:L,children:[x,p]}),y[13]=x,y[14]=j,y[15]=_,y[16]=L,y[17]=f):f=y[17],y[18]!==T||y[19]!==f||y[20]!==c.Provider?(g=(0,i.jsx)(c.Provider,{value:T,children:f}),y[18]=T,y[19]=f,y[20]=c.Provider,y[21]=g):g=y[21],g}let u=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{c.displayName||(c.displayName="ChatScrollContext")}catch{}try{d.displayName||(d.displayName="ChatScrollContainer")}catch{}},32744:(e,t,n)=>{n.d(t,{m:()=>u});var i=n(74848),a=n(21728),s=n(81960),r=n(21373),o=n(34164),l=n(96540),c=n(2635);let d={ConfirmationContainer:"Confirmation-module__ConfirmationContainer--LWT81",confirmationTitle:"Confirmation-module__confirmationTitle--e5Xlk",confirmationMessage:"Confirmation-module__confirmationMessage--APY8y",actionButtonsContainer:"Confirmation-module__actionButtonsContainer--MdVl0"};function u(e){let t,n,u,h,p,f,g,y=(0,a.c)(22),{confirmation:x,handleConfirmation:v,isLatestMessage:b}=e,_=(0,c.Pk)();if(y[0]!==x.confirmation||y[1]!==_.allClientConfirmations){let e=JSON.stringify(Object.values(x.confirmation).sort());t=_.allClientConfirmations?.includes(e),y[0]=x.confirmation,y[1]=_.allClientConfirmations,y[2]=t}else t=y[2];let j=t,{isWaitingOnCopilot:C,currentUserLogin:w}=_,[N,S]=(0,l.useState)(j&&!b);y[3]!==x.confirmation||y[4]!==x.onSubmit||y[5]!==x.title||y[6]!==w||y[7]!==v?(n=e=>{S(!0),v({state:e,userLogin:w,confirmation:x.confirmation},x.title,x.onSubmit)},y[3]=x.confirmation,y[4]=x.onSubmit,y[5]=x.title,y[6]=w,y[7]=v,y[8]=n):n=y[8];let I=n;return y[9]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.$)("border rounded-2",d.ConfirmationContainer),y[9]=u):u=y[9],y[10]!==x.title?(h=(0,i.jsx)(s.A,{as:"h3",className:d.confirmationTitle,children:x.title}),y[10]=x.title,y[11]=h):h=y[11],y[12]!==x.message?(p=x.message.split(`
`).map(m),y[12]=x.message,y[13]=p):p=y[13],y[14]!==N||y[15]!==I||y[16]!==C?(f=!N&&(0,i.jsxs)("div",{className:d.actionButtonsContainer,children:[(0,i.jsx)(r.Q,{disabled:C,variant:"primary",onClick:()=>I("accepted"),children:"Allow"}),(0,i.jsx)(r.Q,{disabled:C,onClick:()=>I("dismissed"),children:"Dismiss"})]}),y[14]=N,y[15]=I,y[16]=C,y[17]=f):f=y[17],y[18]!==h||y[19]!==p||y[20]!==f?(g=(0,i.jsxs)("div",{className:u,children:[h,p,f]}),y[18]=h,y[19]=p,y[20]=f,y[21]=g):g=y[21],g}function m(e){return(0,i.jsx)("p",{className:d.confirmationMessage,children:e},e)}try{u.displayName||(u.displayName="Confirmation")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(21728),s=n(77274),r=n(96379),o=n(96540),l=n(35247),c=n(54508);let d=[{name:"Hate it",value:1,icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:s.Cf,color:"satisfied"},{name:"Love it",value:4,icon:s.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let n,u,m,h,p=(0,a.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useRef)(void 0);p[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),p[0]=n):n=p[0],(0,o.useImperativeHandle)(t,n),p[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},p[1]=f,p[2]=u):u=p[2];let b=u;return p[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),p[3]=m):m=p[3],p[4]!==b||p[5]!==g?(h=(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)(s.NE,{ref:x,options:d,onSubmit:b,returnFocusRef:g})]}),p[4]=b,p[5]=g,p[6]=h):h=p[6],h});u.displayName="ConversationFeedbackDialog"},82178:(e,t,n)=>{n.d(t,{W:()=>h});var i=n(74848),a=n(21728),s=n(74807),r=n(34164),o=n(96540);let l={copilotBadge:"CopilotBadgeV2-module__copilotBadge--w1X6Q",loading:"CopilotBadgeV2-module__loading--qeW04",animation:"CopilotBadgeV2-module__animation--ttRRT",assistive:"CopilotBadgeV2-module__assistive--YGoYv",clickableAnimationWrapper:"CopilotBadgeV2-module__clickableAnimationWrapper--i45z5"},c=[s.L.Tickle,s.L.Celebrate,s.L.JumpWiggle],d=["yes","absolutely","certainly","sure","definitely","right","correct","indeed","precisely","exactly","true","affirmative","agree","agreed"],u=["no","never","negative","wrong","false","untrue","cannot","can't","sorry","incorrect","deny","disagree","refuse","unfortunately"];function m(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/1e3/60<.5}function h(e){let t,n,h,f,g,y,x,v,b,_,j=(0,a.c)(37),{isFirstMessage:C,isLoading:w,isLoadingSkills:N,isError:S,className:I,mode:k,message:T,createdAt:L}=e,E=void 0!==C&&C;j[0]!==L||j[1]!==E?(t=()=>({animationType:E&&(!L||m(L))?s.L.Celebrate:s.L.Static,onFinish:s.L.Static,loopAnimation:!1,hasLoadedMessage:!1}),j[0]=L,j[1]=E,j[2]=t):t=j[2];let[R,A]=(0,o.useState)(t);j[3]!==L||j[4]!==S||j[5]!==w||j[6]!==N||j[7]!==T?(n=()=>{m(L)&&A(e=>(function({previousState:e,isLoadingSkills:t,isAffirmativeSentiment:n,isNegativeSentiment:i,isError:a,isLoading:r}){switch(e.animationType){case s.L.Static:if((n||i)&&!a&&!e.hasLoadedMessage)return{animationType:n?s.L.Affirmative:s.L.Negative,onFinish:s.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(t)return{...e,animationType:s.L.Thinking,loopAnimation:!0};if(!r&&!e.hasLoadedMessage&&!a)return{animationType:s.L.Confirm,onFinish:s.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(a&&!e.hasLoadedMessage)return{animationType:s.L.Negative,onFinish:s.L.Static,loopAnimation:!1,hasLoadedMessage:!0};return e;case s.L.Thinking:if(!t)return{...e,animationType:a?s.L.Negative:s.L.Static,loopAnimation:!1};return e;default:return e}})({previousState:e,isLoadingSkills:N||!1,isError:S||!1,isLoading:w||!1,isAffirmativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return d.some(e=>t.includes(e.toLowerCase()))}return!1}(T),isNegativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return u.some(e=>t.includes(e.toLowerCase()))}return!1}(T)}))},j[3]=L,j[4]=S,j[5]=w,j[6]=N,j[7]=T,j[8]=n):n=j[8],j[9]!==R.animationType||j[10]!==R.hasLoadedMessage||j[11]!==L||j[12]!==S||j[13]!==E||j[14]!==w||j[15]!==N||j[16]!==T?(h=[N,S,w,R.animationType,R.hasLoadedMessage,E,T,L],j[9]=R.animationType,j[10]=R.hasLoadedMessage,j[11]=L,j[12]=S,j[13]=E,j[14]=w,j[15]=N,j[16]=T,j[17]=h):h=j[17],(0,o.useEffect)(n,h),j[18]!==R||j[19]!==w?(f=()=>{w||A({...R,animationType:c[Math.floor(Math.random()*c.length)],onFinish:s.L.Static,loopAnimation:!1})},j[18]=R,j[19]=w,j[20]=f):f=j[20];let D=f,P=w&&l.loading;j[21]!==I||j[22]!==P?(g=(0,r.$)(l.copilotBadge,P,I),j[21]=I,j[22]=P,j[23]=g):g=j[23];let O=R.animationType;j[24]===Symbol.for("react.memo_cache_sentinel")?(y=()=>A(p),j[24]=y):y=j[24];let M=R.loopAnimation,F="assistive"===k&&l.assistive;return j[25]!==F?(x=(0,r.$)(l.animation,F),j[25]=F,j[26]=x):x=j[26],j[27]!==R.animationType||j[28]!==R.loopAnimation||j[29]!==x?(v=(0,i.jsx)(s.N,{animationType:O,onAnimationEnd:y,loopAnimation:M,className:x}),j[27]=R.animationType,j[28]=R.loopAnimation,j[29]=x,j[30]=v):v=j[30],j[31]!==D||j[32]!==v?(b=(0,i.jsx)("div",{onClick:D,className:l.clickableAnimationWrapper,children:v}),j[31]=D,j[32]=v,j[33]=b):b=j[33],j[34]!==b||j[35]!==g?(_=(0,i.jsx)("div",{className:g,"aria-label":"Copilot badge",role:"img",children:b}),j[34]=b,j[35]=g,j[36]=_):_=j[36],_}function p(e){return{...e,animationType:e.onFinish}}try{h.displayName||(h.displayName="CopilotBadge")}catch{}},94517:(e,t,n)=>{n.d(t,{h:()=>C,K:()=>_});var i=n(74848),a=n(21728),s=n(4817),r=n(38621),o=n(1805),l=n(21998),c=n(62227);function d({error:e,className:t}){let n=e.identifier||"",a=n.split("url=")[1]||"",s=n.match(/\/([^/]+)\/sso/),d=s&&s[1]||"";return d&&a?(0,i.jsx)("div",{className:t,"data-testid":"sso-banner",children:(0,i.jsx)("div",{className:c.A.Box,children:(0,i.jsx)("section",{"aria-label":"Single sign-on information",children:(0,i.jsx)(l.Hx,{sx:{borderRadius:2,borderWidth:1},className:c.A.Flash,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(r.ShieldLockIcon,{}),(0,i.jsx)(o.A,{inline:!0,href:function({authorizeUrl:e}){let t=new URL(e,window.location.origin);return t.searchParams.set("return_to",window.location.toString()),t.toString()}({authorizeUrl:a}),children:"Single sign-on"})," ","to see results in the ",(0,i.jsx)("b",{children:d})," organization."]})})})})}):null}try{d.displayName||(d.displayName="SSOBannerFromError")}catch{}var u=n(29731),m=n(97949),h=n(26108),p=n(21373),f=n(34164),g=n(96540),y=n(25641),x=n(17285),v=n(77939),b=n(46665);function _(e){let t=(0,a.c)(8),{manager:n}=e,{message:s}=(0,b.V)(),{error:r}=s;if(!r)return null;switch(r.type){case"agentUnauthorized":{let e;return t[0]!==r||t[1]!==n?(e=(0,i.jsx)(j,{error:r,manager:n}),t[0]=r,t[1]=n,t[2]=e):e=t[2],e}case"agentRequest":{let e;return t[3]!==r.details?(e=(0,i.jsx)(C,{errors:[r.details]}),t[3]=r.details,t[4]=e):e=t[4],e}default:{let e,n;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,u.G)("error-message-banner"),t[5]=e):e=t[5];let a=r.message||"Something went wrong";return t[6]!==a?(n=(0,i.jsx)(m.l,{...e,title:"Error",hideTitle:!0,description:a,variant:"warning"}),t[6]=a,t[7]=n):n=t[7],n}}}function j(e){let t,n,s,o,l,c,d,m,x,b,_,j=(0,a.c)(25),{error:C,manager:w}=e,{details:N}=C,[S,I]=(0,g.useState)(!1);j[0]!==N.name||j[1]!==w?(t=()=>{I(!0),w.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"user",content:`Dismissed the connection with ${N.name}.`,mediaContent:[],parentMessageID:w.FindLastMessageID()})}),w.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"assistant",content:`I was unable to connect you to ${N.name} because you cancelled the authentication.`,mediaContent:[],parentMessageID:w.FindLastMessageID()})})},j[0]=N.name,j[1]=w,j[2]=t):t=j[2];let k=t;j[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.G)("agent-unauthorized-error"),j[3]=n):n=j[3],j[4]!==S||j[5]!==k?(s=!S&&(0,i.jsx)(h.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:r.XIcon,onClick:k,variant:"invisible",unsafeDisableTooltip:!0}),j[4]=S,j[5]=k,j[6]=s):s=j[6],j[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,i.jsx)(r.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),l=(0,i.jsx)(r.LinkIcon,{className:"fgColor-muted"}),c=(0,f.$)("avatar",v.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),j[7]=o,j[8]=l,j[9]=c):(o=j[7],l=j[8],c=j[9]);let T=`icon for ${N.name}`;return j[10]!==N.avatar_url||j[11]!==T?(d=(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[o,l,(0,i.jsx)("img",{className:c,src:N.avatar_url,alt:T})]}),j[10]=N.avatar_url,j[11]=T,j[12]=d):d=j[12],j[13]!==N.name?(x=(0,i.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",N.name]}),m=(0,i.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",N.name," extension, you\u2019ll need to connect your GitHub account to your ",N.name," account."]}),j[13]=N.name,j[14]=m,j[15]=x):(m=j[14],x=j[15]),j[16]!==N.authorize_url||j[17]!==S?(b=!S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:N.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,i.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",N.authorize_url]})]}),j[16]=N.authorize_url,j[17]=S,j[18]=b):b=j[18],j[19]!==m||j[20]!==b||j[21]!==s||j[22]!==d||j[23]!==x?(_=(0,i.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",...n,children:[s,d,x,m,b]}),j[19]=m,j[20]=b,j[21]=s,j[22]=d,j[23]=x,j[24]=_):_=j[24],_}function C(e){let t,n,s=(0,a.c)(4),{errors:r}=e;return s[0]!==r?(t=r.map(w),s[0]=r,s[1]=t):t=s[1],s[2]!==t?(n=(0,i.jsx)("div",{className:"d-flex flex-column gap-2",children:t}),s[2]=t,s[3]=n):n=s[3],n}function w(e,t){var n,a,o,l,c;return n=e,a=t,"sso"===n.code?(0,i.jsx)(d,{error:n,className:"mt-3"},a):(o=n,l=a,(0,i.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,i.jsxs)("div",{className:"text-bold",children:[(0,i.jsx)(r.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===(c=o).type?`${c.code} ${c.identifier}`:`${(0,x.Z)(c.type)} error`]}),(0,i.jsx)(s.To,{markdown:o.message})]},l))}try{_.displayName||(_.displayName="ErrorMessage")}catch{}try{j.displayName||(j.displayName="AgentUnauthorizedError")}catch{}try{C.displayName||(C.displayName="AgentErrors")}catch{}},34363:(e,t,n)=>{n.d(t,{G:()=>v});var i=n(74848),a=n(21728),s=n(38621),r=n(26108),o=n(96540),l=n(2635),c=n(33592),d=n(46665);let u={submittedFeedbackButton:"Feedback-module__submittedFeedbackButton--BrkHM"};var m=n(77274),h=n(35247),p=n(79064),f=n(54508);let g={thumbsUp:"MessageFeedbackDialog-module__thumbsUp--go17F",thumbsDown:"MessageFeedbackDialog-module__thumbsDown--sluhP"},y=[{name:"Bad",value:"NEGATIVE",icon:(0,i.jsx)(s.ThumbsdownIcon,{className:g.thumbsDown}),color:"bad"},{name:"Good",value:"POSITIVE",icon:(0,i.jsx)(s.ThumbsupIcon,{className:g.thumbsUp}),color:"good"}],x=(0,o.forwardRef)(function({messageId:e,threadId:t,returnFocusRef:n,onSubmitted:a,onClose:s},r){let l=(0,c.b)(),d=(0,o.useRef)(null),u=(0,o.useRef)(null),g=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(r,()=>({openDialog:e=>{g.current=e,h.W.copilotChatInterviewSurvey?d.current?.openDialog():u.current?.openDialog(e)}}));let x=async(n,i)=>{let s=[];if(null==n&&s.push("Please select a rating."),i.length>500&&s.push("Please keep your feedback within 500 characters or less."),s.length>0)return s;try{(await l.service.sendFeedback({feedback:n,feedbackChoice:[],messageId:e,threadId:t,textResponse:i})).ok?a?.(n):s.push("An error occurred while submitting your feedback.")}catch{s.push("An error occurred while submitting your feedback.")}return s};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.E,{ref:d,title:"Give additional feedback",onClose:e=>{"no-thanks"===e?u.current?.openDialog(g.current):s?.()}}),(0,i.jsx)(m.NE,{title:"Give additional feedback",ref:u,options:y,onSubmit:x,onClose:s,requestID:p.Jt.getRequestID(e),returnFocusRef:n})]})});function v(e){let t,n,m,h,p,f=(0,a.c)(20),{iconSize:g}=e,{message:y}=(0,d.V)(),v=y.id,b=y.threadID,_=(0,c.b)(),j=(0,o.useRef)(null),C=(0,o.useRef)(null);f[0]!==_||f[1]!==y?(t=e=>{_.handleFeedback(y,e)},f[0]=_,f[1]=y,f[2]=t):t=f[2];let w=t,{optedInToUserFeedback:N}=(0,l.Pk)();f[3]!==_.service||f[4]!==v||f[5]!==w||f[6]!==N||f[7]!==b?(n=e=>{_.service.sendFeedback({feedback:e,messageId:v,threadId:b}),w(e),N?j.current?.openDialog(e):C.current?.focus()},f[3]=_.service,f[4]=v,f[5]=w,f[6]=N,f[7]=b,f[8]=n):n=f[8];let S=n;return f[9]!==g||f[10]!==y.feedback||f[11]!==S?(m=null!=y.feedback?(0,i.jsx)(r.K,{ref:C,"aria-label":`${y.feedback.toLocaleLowerCase()} feedback submitted`,icon:"POSITIVE"===y.feedback?s.ThumbsupIcon:s.ThumbsdownIcon,variant:"invisible",size:g,"aria-disabled":!0,className:u.submittedFeedbackButton}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.K,{icon:s.ThumbsupIcon,"aria-label":"Good response",onClick:()=>S("POSITIVE"),variant:"invisible",size:g}),(0,i.jsx)(r.K,{icon:s.ThumbsdownIcon,size:g,"aria-label":"Bad response",onClick:()=>S("NEGATIVE"),variant:"invisible"})]}),f[9]=g,f[10]=y.feedback,f[11]=S,f[12]=m):m=f[12],f[13]!==v||f[14]!==w||f[15]!==b?(h=(0,i.jsx)(x,{ref:j,messageId:v,threadId:b,onSubmitted:w,returnFocusRef:C}),f[13]=v,f[14]=w,f[15]=b,f[16]=h):h=f[16],f[17]!==m||f[18]!==h?(p=(0,i.jsxs)(i.Fragment,{children:[m,h]}),f[17]=m,f[18]=h,f[19]=p):p=f[19],p}x.displayName="MessageFeedbackDialog";try{v.displayName||(v.displayName="Feedback")}catch{}},11633:(e,t,n)=>{n.d(t,{WA:()=>ev});var i,a,s,r,o,l,c,d,u,m,h,p,f,g=n(74848),y=n(21728),x=n(41738),v=n(38621),b=n(81960),_=n(21998);n(51213),n(35247);var j=n(79064),C=n(1805),w=n(69726),N=n(21373),S=n(5524),I=n(69497),k=n(10095),T=n(34164),L=n(96540),E=n(25641),R=n(2635);let A={functionCallButton:"FunctionCallButton-module__functionCallButton--_WmIK"},D={functionReferenceListContainer:"FunctionLoadingUtils-module__functionReferenceListContainer--_vK99",functionLoading:"FunctionLoadingUtils-module__functionLoading--APVUB",spinner:"FunctionLoadingUtils-module__spinner--LI0rU",functionReferenceButton:"FunctionLoadingUtils-module__functionReferenceButton--AiuYU",functionReferenceButtonContents:"FunctionLoadingUtils-module__functionReferenceButtonContents--fRReb",functionReferenceTitle:"FunctionLoadingUtils-module__functionReferenceTitle--pFYb2",functionReferenceListFooter:"FunctionLoadingUtils-module__functionReferenceListFooter--Nvw6l",errorContainer:"FunctionLoadingUtils-module__errorContainer--uwToA",errorHeading:"FunctionLoadingUtils-module__errorHeading--AXPQe",errorMessage:"FunctionLoadingUtils-module__errorMessage--GB_0R",toolDescriptionText:"FunctionLoadingUtils-module__toolDescriptionText--wLOuU",toolNameHighlight:"FunctionLoadingUtils-module__toolNameHighlight--Jpfyk",functionTitleContainer:"FunctionLoadingUtils-module__functionTitleContainer--jes_G"};function P(e){return(e.references?.[0]?.results??[]).map(O)}function O(e){return{title:e.title,url:e.url,description:e.excerpt,leadingIcon:v.GlobeIcon}}function M(e){let t=e.references?.[0];return(t?.results??[]).map(e=>({title:e.title,url:e.url,leadingIcon:"bing_search"===e.reference_type?x._:v.GlobeIcon}))}function F(e){return(e.references??[]).map(B)}function B(e){return"file-v2"===e.type?{description:`${e.repoName}/${e.path}`,leadingIcon:v.FileIcon,reference:e,title:(0,E.Xo)(e),url:e.url}:void 0}let $=(e,t)=>t?`${e} on ref ${t}`:e;function U(e){return(e.references??[]).map(V)}function V(e){return"alert.api"===e.type?{description:"Alert",leadingIcon:H,title:"Alert"}:void 0}function H(){return(0,g.jsx)(v.ShieldIcon,{})}function W(e){return(e.references??[]).map(q)}function q(e){return"discussion"===e.type?{title:e.title??"Discussion",description:`Using discussion #${e.number} for ${e.repository.owner}/${e.repository.name}`,url:e.url,leadingIcon:v.CommentDiscussionIcon}:void 0}function z(e){let t,n,i=(0,y.c)(3),{children:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)("span",{className:D.spinner,children:(0,g.jsx)(w.A,{size:"small"})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,g.jsxs)("div",{className:D.functionLoading,children:[t,(0,g.jsx)("span",{children:a})]}),i[1]=a,i[2]=n):n=i[2],n}function G(e){return(e.references??[]).filter(Q).map(K)}function K(e){return{description:`${e.id} \xb7 ${e.repoOwner}/${e.repoName}`,leadingIcon:v.PlayIcon,title:"Job"}}function Q(e){return"job"===e.type}function Y(e){return e.jobId?`job ${e.jobId}`:e.runId?`workflow run ${e.runId}`:e.pullRequestNumber?`pull request ${e.pullRequestNumber}`:e.workflowPath?`workflow ${e.workflowPath}`:"unknown job"}function J(e){let t,n,i=(0,y.c)(27),{additionalFooterContent:a,chatManager:s,errorButtonText:r,errorTitle:o,functionCall:l,inProgressMessage:c,noResultsMessage:d,resultsMapper:u,successButtonText:m,toolLink:h,toolName:p,useSelectReference:f}=e,[x,b]=(0,L.useState)(!1),_=(0,L.useId)();if(i[0]!==a||i[1]!==s||i[2]!==_||i[3]!==r||i[4]!==o||i[5]!==x||i[6]!==l||i[7]!==c||i[8]!==d||i[9]!==u||i[10]!==m||i[11]!==h||i[12]!==p||i[13]!==f){n=Symbol.for("react.early_return_sentinel");e:{let e,y,j,C,w=u(l),{status:L,errorMessage:E}=l;if(l.references?.length===1){let e=l.references[0];if(e)switch(e.type){case"text":L="error",E=e.text;break;case"unsupported":L="unsupported",E=e.text}}if("started"===L){let e;i[16]!==c?(e=(0,g.jsx)(z,{children:c}),i[16]=c,i[17]=e):e=i[17],n=e;break e}i[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,T.$)(D.functionReferenceButton,A.functionCallButton),i[18]=e):e=i[18];let R=x?v.ChevronUpIcon:v.ChevronDownIcon;i[19]===Symbol.for("react.memo_cache_sentinel")?(y=()=>b(X),i[19]=y):y=i[19];let P="error"===L?r:"unsupported"===L?d:m;i[20]!==P?(j=(0,g.jsx)("span",{className:D.functionReferenceButtonContents,children:P}),i[20]=P,i[21]=j):j=i[21],i[22]!==_||i[23]!==x||i[24]!==R||i[25]!==j?(C=(0,g.jsx)(N.Q,{"aria-expanded":x,"aria-controls":_,className:e,leadingVisual:R,onClick:y,variant:"invisible",children:j}),i[22]=_,i[23]=x,i[24]=R,i[25]=j,i[26]=C):C=i[26],t=(0,g.jsxs)(g.Fragment,{children:[C,x&&(0,g.jsxs)("div",{id:_,className:D.functionReferenceListContainer,children:[(0,g.jsx)(S.l,{children:"error"===L?(0,g.jsxs)(S.l.Item,{children:[o,(0,g.jsx)(S.l.Description,{variant:"block",children:E})]}):"unsupported"===L?(0,g.jsxs)(S.l.Item,{children:[E,(0,g.jsx)(S.l.Description,{truncate:!0,children:""})]}):0===w.length?(0,g.jsxs)(S.l.Item,{children:[d,(0,g.jsx)(S.l.Description,{truncate:!0,children:"Try modifying your query by reframing your question."})]}):w.map((e,t)=>e&&(0,g.jsxs)(S.l.LinkItem,{className:"width-fit",href:e.url,onClick:t=>{f&&e.reference&&(s.selectReference(e.reference),t.preventDefault())},target:"_blank",rel:"noopener",children:[e.leadingIcon&&(0,g.jsx)(S.l.LeadingVisual,{children:(0,g.jsx)(k.A,{icon:e.leadingIcon,sx:{...e.leadingIconColor&&{color:e.leadingIconColor}}})}),(0,g.jsx)(I.A,{className:D.functionReferenceTitle,title:e.title,children:e.title}),(0,g.jsx)(S.l.Description,{variant:"block",children:e.description})]},t))}),(0,g.jsxs)("span",{className:D.functionReferenceListFooter,children:["Copilot used the"," ",(0,g.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:p})," ","tool",a&&(0,g.jsxs)(g.Fragment,{children:[". ",a]})]})]})]})}i[0]=a,i[1]=s,i[2]=_,i[3]=r,i[4]=o,i[5]=x,i[6]=l,i[7]=c,i[8]=d,i[9]=u,i[10]=m,i[11]=h,i[12]=p,i[13]=f,i[14]=t,i[15]=n}else t=i[14],n=i[15];return n!==Symbol.for("react.early_return_sentinel")?n:t}function X(e){return!e}function Z(e){return"text"!==e.type}function ee(e){return e.charAt(0).toUpperCase()+e.slice(1)}function et(e){let t=e.references?.[0];return[{title:t?.title||"",url:t?.url||"",description:""}]}let en="https://docs.github.com/en/support/contacting-github-support/using-copilot-in-github-support";function ei(e){return(e.references?.[0]?.results??[]).map(ea)}function ea(e){return{title:e.title,url:e.url,description:e.url}}function es(e){return(e.references??[]).map(e=>"file"===e.type||"snippet"===e.type?{description:(0,E.Z8)(e),leadingIcon:v.CodeIcon,reference:e,title:(0,E.z$)(e),url:e.url}:void 0)}try{(i=function(e){let t,n,i=(0,y.c)(8),{chatManager:a,functionCall:s,skillArgs:r}=e,o=r.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching the web for \u{201C}${o}\u{201D}`,d=`No web search results for \u{201C}${o}\u{201D} were found`,u=`Using web search results for \u{201C}${o}\u{201D}`;return i[1]!==a||i[2]!==s||i[3]!==l||i[4]!==c||i[5]!==d||i[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://bing.com",toolName:"Bing search",functionCall:s,inProgressMessage:c,noResultsMessage:d,resultsMapper:P,successButtonText:u,useSelectReference:!1}),i[1]=a,i[2]=s,i[3]=l,i[4]=c,i[5]=d,i[6]=u,i[7]=n):n=i[7],n}).displayName||(i.displayName="BingFunctionButton")}catch{}try{(a=function(e){let t,n,i=(0,y.c)(8),{chatManager:a,functionCall:s,skillArgs:r}=e,o=r.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching the web for \u{201C}${o}\u{201D}`,d=`No web search results for \u{201C}${o}\u{201D} were found`,u=`Using web search results for \u{201C}${o}\u{201D}`;return i[1]!==a||i[2]!==s||i[3]!==l||i[4]!==c||i[5]!==d||i[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://gh.io/azure-ai-agent-with-bing-grounding",toolName:"Bing Search",functionCall:s,inProgressMessage:c,noResultsMessage:d,resultsMapper:M,successButtonText:u,useSelectReference:!1}),i[1]=a,i[2]=s,i[3]=l,i[4]=c,i[5]=d,i[6]=u,i[7]=n):n=i[7],n}).displayName||(a.displayName="BingGroundingFunctionButton")}catch{}try{(s=function(e){var t;let n,i=(0,y.c)(9),{chatManager:a,functionCall:s,skillArgs:r,useSelectReference:o}=e,l=r.query,c="scopingQuery"in r?r.scopingQuery:r.repoOwner&&r.repoName?`repo:${r.repoOwner}/${r.repoName}`:void 0;c&&(c=(t=c).startsWith("repo:")?t.substring(5):t);let d="semantic-code-search"===r.kind?"semantic":"lexical",u=`An error occurred when searching for \u{201C}${l}\u{201D}`,m=`${d.charAt(0).toUpperCase()+d.slice(1)} search`,h=`Searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,p=`No results were found when ${d} searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,f=`Using ${d} search results for \u{201C}${l}\u{201D}${c&&` in ${c}`}`;return i[0]!==a||i[1]!==s||i[2]!==u||i[3]!==m||i[4]!==h||i[5]!==p||i[6]!==f||i[7]!==o?(n=(0,g.jsx)(J,{chatManager:a,errorButtonText:u,errorTitle:"An error occurred when searching code",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:m,functionCall:s,inProgressMessage:h,noResultsMessage:p,resultsMapper:es,successButtonText:f,useSelectReference:o}),i[0]=a,i[1]=s,i[2]=u,i[3]=m,i[4]=h,i[5]=p,i[6]=f,i[7]=o,i[8]=n):n=i[8],n}).displayName||(s.displayName="CodeSearchButton")}catch{}try{(r=function(e){let t,n=(0,y.c)(8),{chatManager:i,functionCall:a,skillArgs:s,useSelectReference:r}=e,o=s.query,l=s.kbID,{knowledgeBases:c}=(0,R.Pk)(),d=c.find(e=>e.id===l),u=d?.name??"the knowledge base",m=`An error occurred when searching for \u{201C}${o}\u{201D} in ${u}`,h=`Searching the ${u} knowledge base for \u{201C}${o}\u{201D}`,p=`No results were found when searching the ${u} knowledge base for \u{201C}${o}\u{201D}`,f=`Using search results from the ${u} knowledge base for \u{201C}${o}\u{201D}`;return n[0]!==i||n[1]!==a||n[2]!==m||n[3]!==h||n[4]!==p||n[5]!==f||n[6]!==r?(t=(0,g.jsx)(J,{chatManager:i,errorButtonText:m,errorTitle:"An error occurred when searching the knowledge base",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Knowledge base search",functionCall:a,inProgressMessage:h,noResultsMessage:p,resultsMapper:es,successButtonText:f,useSelectReference:r}),n[0]=i,n[1]=a,n[2]=m,n[3]=h,n[4]=p,n[5]=f,n[6]=r,n[7]=t):t=n[7],t}).displayName||(r.displayName="KnowledgeBaseSearchButton")}catch{}try{(o=function(e){let t,n,i,a,s,r=(0,y.c)(20),{chatManager:o,functionCall:l,skillArgs:c,useSelectReference:d}=e,{path:u,repo:m,ref:h}=c,p=`An error occurred when finding \u{201C}${u}\u{201D} in ${m}`;r[0]!==h||r[1]!==p?(t=$(p,h),r[0]=h,r[1]=p,r[2]=t):t=r[2];let f=`File results for \u{201C}${u}\u{201D} in ${m}`;r[3]!==h||r[4]!==f?(n=$(f,h),r[3]=h,r[4]=f,r[5]=n):n=r[5];let x=`No files matching \u{201C}${u}\u{201D} in ${m} were found`;r[6]!==h||r[7]!==x?(i=$(x,h),r[6]=h,r[7]=x,r[8]=i):i=r[8];let v=`Using results for \u{201C}${u}\u{201D} in ${m}`;return r[9]!==h||r[10]!==v?(a=$(v,h),r[9]=h,r[10]=v,r[11]=a):a=r[11],r[12]!==o||r[13]!==l||r[14]!==t||r[15]!==n||r[16]!==i||r[17]!==a||r[18]!==d?(s=(0,g.jsx)(J,{chatManager:o,errorButtonText:t,errorTitle:"An error occurred when finding a file",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file",functionCall:l,inProgressMessage:n,noResultsMessage:i,resultsMapper:F,successButtonText:a,useSelectReference:d}),r[12]=o,r[13]=l,r[14]=t,r[15]=n,r[16]=i,r[17]=a,r[18]=d,r[19]=s):s=r[19],s}).displayName||(o.displayName="GetFileButton")}catch{}try{(l=function(e){let t,n,i,a,s,r,o=(0,y.c)(23),{chatManager:l,functionCall:c,skillArgs:d,useSelectReference:u}=e,{path:m,repo:h,ref:p}=d,f=`An error occurred when finding file changes for \u{201C}${m}\u{201D} in ${h}`;o[0]!==p||o[1]!==f?(t=$(f,p),o[0]=p,o[1]=f,o[2]=t):t=o[2];let x=`File changes results for \u{201C}${m} in ${h}`;o[3]!==p||o[4]!==x?(n=$(x,p),o[3]=p,o[4]=x,o[5]=n):n=o[5];let b=`No files changes were found for \u{201C}${m}\u{201D} in ${h}`;o[6]!==p||o[7]!==b?(i=$(b,p),o[6]=p,o[7]=b,o[8]=i):i=o[8],o[9]!==m?(a=e=>(e.references??[]).map(e=>"file-changes"===e.type?{description:`${e.repository.name}/${m}`,leadingIcon:v.FileIcon,reference:e,title:(0,E.Xo)(e),url:e.url}:void 0),o[9]=m,o[10]=a):a=o[10];let _=`Using results for \u{201C}${m}\u{201D} in ${h}`;return o[11]!==p||o[12]!==_?(s=$(_,p),o[11]=p,o[12]=_,o[13]=s):s=o[13],o[14]!==l||o[15]!==c||o[16]!==t||o[17]!==n||o[18]!==i||o[19]!==a||o[20]!==s||o[21]!==u?(r=(0,g.jsx)(J,{chatManager:l,errorButtonText:t,errorTitle:"An error occurred when finding the file changes",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file changes",functionCall:c,inProgressMessage:n,noResultsMessage:i,resultsMapper:a,successButtonText:s,useSelectReference:u}),o[14]=l,o[15]=c,o[16]=t,o[17]=n,o[18]=i,o[19]=a,o[20]=s,o[21]=u,o[22]=r):r=o[22],r}).displayName||(l.displayName="GetFileChangesButton")}catch{}try{(c=function(e){let t,n=(0,y.c)(5),{chatManager:i,functionCall:a,skillArgs:s,useSelectReference:r}=e,o=`An error occurred when fetching alert information for ${s.url}`;return n[0]!==i||n[1]!==a||n[2]!==o||n[3]!==r?(t=(0,g.jsx)(J,{chatManager:i,errorButtonText:o,errorTitle:"An error occurred when fetching alert information",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get alert information",functionCall:a,inProgressMessage:"Fetching alert information",noResultsMessage:"Unable to fetch alert information",resultsMapper:U,successButtonText:"Using alert information",useSelectReference:r}),n[0]=i,n[1]=a,n[2]=o,n[3]=r,n[4]=t):t=n[4],t}).displayName||(c.displayName="GetAlertButton")}catch{}try{(d=function(e){let t,n=(0,y.c)(7),{chatManager:i,functionCall:a,skillArgs:s,useSelectReference:r}=e,o=`Fetching discussion ${s.discussionNumber}`,l=`Unable to fetch discussion ${s.discussionNumber}`,c=`Using discussion #${s.discussionNumber}`;return n[0]!==i||n[1]!==a||n[2]!==o||n[3]!==l||n[4]!==c||n[5]!==r?(t=(0,g.jsx)(J,{chatManager:i,errorButtonText:"An error occurred when fetching discussion",errorTitle:"An error occurred when fetching discussion",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get discussion",functionCall:a,inProgressMessage:o,noResultsMessage:l,resultsMapper:W,successButtonText:c,useSelectReference:r}),n[0]=i,n[1]=a,n[2]=o,n[3]=l,n[4]=c,n[5]=r,n[6]=t):t=n[6],t}).displayName||(d.displayName="GetDiscussionButton")}catch{}try{z.displayName||(z.displayName="FunctionLoading")}catch{}try{(u=function(e){let t=(0,y.c)(1),{functionCall:n}=e,{status:i}=n;if("started"===i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(z,{children:"Coming up with a plan"}),t[0]=e):e=t[0],e}}).displayName||(u.displayName="PlanButton")}catch{}try{(m=function(e){let t,n=(0,y.c)(8),{chatManager:i,functionCall:a,skillArgs:s,useSelectReference:r}=e,o=Y(s),l=`An error occurred when fetching logs for ${o} in ${s.repo}`,c=`Fetching logs for ${o} in ${s.repo}`,d=`Unable to fetch logs for ${o} in ${s.repo}`,u=`Using logs for ${o} in ${s.repo}`;return n[0]!==i||n[1]!==a||n[2]!==l||n[3]!==c||n[4]!==d||n[5]!==u||n[6]!==r?(t=(0,g.jsx)(J,{chatManager:i,errorButtonText:l,errorTitle:"An error occurred when fetching a commit",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get job logs",functionCall:a,inProgressMessage:c,noResultsMessage:d,resultsMapper:G,successButtonText:u,useSelectReference:r}),n[0]=i,n[1]=a,n[2]=l,n[3]=c,n[4]=d,n[5]=u,n[6]=r,n[7]=t):t=n[7],t}).displayName||(m.displayName="GetJobLogsButton")}catch{}try{J.displayName||(J.displayName="ExpandableFunctionButton")}catch{}try{(h=function(e){let t,n,i,a=(0,y.c)(15),{chatManager:s,functionCall:r,skillArgs:o,useSelectReference:l}=e,c="GitHub API",d=r.references?.[0];if(d){let e=d.type;if(e.endsWith(".api")){let t=e.split(".")[0];t&&(c=`${t.split("-").map(ee).join(" ")} API`)}else"api-response"===d.type&&(c=`${d.resourceType} API`)}a[0]!==o.endpoint||a[1]!==o.endpointDescription?(t=o.endpointDescription?{errorButtonText:`An error occurred when using the GitHub API to ${o.endpointDescription}`,inProgressMessage:`Using the GitHub API to ${o.endpointDescription}`,noResultsMessage:`Unable to use the GitHub API to ${o.endpointDescription}`,successButtonText:`Using the GitHub API to ${o.endpointDescription}`}:{errorButtonText:`An error occurred when fetching from ${o.endpoint}`,inProgressMessage:`Fetching endpoint ${o.endpoint}`,noResultsMessage:`Unable to fetch from ${o.endpoint}`,successButtonText:`Using endpoint ${o.endpoint}`},a[0]=o.endpoint,a[1]=o.endpointDescription,a[2]=t):t=a[2];let u=t;return a[3]!==o?(n=e=>e.references?.filter(Z).map(e=>(function(e,t){switch(e.type){case"release.api":return{description:`Release ${e.tag_name} \xb7 ${t.repo}`,leadingIcon:v.TagIcon,title:e.name??"Release",url:e.html_url};case"issue.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:v.IssueOpenedIcon,title:e.title??"Issue",url:e.html_url};case"pull-request.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:v.GitPullRequestIcon,title:e.title??"Pull request",url:e.html_url};case"repository.api":return{description:e.description||"",title:e.name,leadingIcon:v.RepoIcon,url:e.html_url};case"commit.api":return{description:`${e.sha} \xb7 ${t.repo}`,leadingIcon:v.GitCommitIcon,title:e.commit.message??"Commit",url:e.html_url};case"topic.api":return{description:e.short_description||"",leadingIcon:v.HashIcon,title:e.display_name??e.name};case"api-response":switch(e.resourceType){case"Repository":return{description:e.data.description||"",title:e.data.name,leadingIcon:v.RepoIcon,url:e.data.html_url};case"Issue":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:v.IssueOpenedIcon,title:e.data.title??"Issue",url:e.data.html_url};case"Release":return{description:`Release ${e.data.tag_name} \xb7 ${t.repo}`,leadingIcon:v.TagIcon,title:e.data.name??"Release",url:e.data.html_url};case"PullRequest":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:v.GitPullRequestIcon,title:e.data.title??"Pull request",url:e.data.html_url};case"Commit":return{description:`${e.data.sha} \xb7 ${t.repo}`,leadingIcon:v.GitCommitIcon,title:e.data.commit.message??"Commit",url:e.data.html_url};case"Topic":return{description:e.data.short_description||"",leadingIcon:v.HashIcon,title:e.data.display_name??e.data.name};default:return{description:"API endpoint returned results successfully",leadingIcon:v.InfoIcon,title:"API results"}}default:return{description:"API endpoint returned results successfully",leadingIcon:v.InfoIcon,title:"API results"}}})(e,o))??[],a[3]=o,a[4]=n):n=a[4],a[5]!==s||a[6]!==r||a[7]!==u.errorButtonText||a[8]!==u.inProgressMessage||a[9]!==u.noResultsMessage||a[10]!==u.successButtonText||a[11]!==n||a[12]!==c||a[13]!==l?(i=(0,g.jsx)(J,{chatManager:s,errorTitle:"An error occurred when fetching data from the GitHub API",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:c,functionCall:r,errorButtonText:u.errorButtonText,inProgressMessage:u.inProgressMessage,noResultsMessage:u.noResultsMessage,successButtonText:u.successButtonText,useSelectReference:l,resultsMapper:n}),a[5]=s,a[6]=r,a[7]=u.errorButtonText,a[8]=u.inProgressMessage,a[9]=u.noResultsMessage,a[10]=u.successButtonText,a[11]=n,a[12]=c,a[13]=l,a[14]=i):i=a[14],i}).displayName||(h.displayName="GetGitHubDataButton")}catch{}try{(p=function(e){let t,n=(0,y.c)(7),{chatManager:i,functionCall:a,skillArgs:s}=e,r=`An error occurred when retrieving \u{201C}${s.name}\u{201D}`,o=`Getting Figma file \u{201C}${s.name}\u{201D}`,l=`Unable to retrieve \u{201C}${s.name}\u{201D}`,c=`Using result from \u{201C}${s.name}\u{201D}`;return n[0]!==i||n[1]!==a||n[2]!==r||n[3]!==o||n[4]!==l||n[5]!==c?(t=(0,g.jsx)(J,{chatManager:i,errorButtonText:r,errorTitle:"An error occurred retrieving Figma file",toolLink:"https://figma.com",toolName:"Get Figma",functionCall:a,inProgressMessage:o,noResultsMessage:l,resultsMapper:et,successButtonText:c,useSelectReference:!1}),n[0]=i,n[1]=a,n[2]=r,n[3]=o,n[4]=l,n[5]=c,n[6]=t):t=n[6],t}).displayName||(p.displayName="FigmaButton")}catch{}try{(f=function(e){let t,n,i=(0,y.c)(8),{chatManager:a,functionCall:s,skillArgs:r}=e,o=r.rawUserQuery;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:en,rel:"nofollow",target:"_blank",children:"Information on using Copilot in GitHub Support"}),i[0]=t):t=i[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching support documents for \u{201C}${o}\u{201D}`,d=`No support documents for \u{201C}${o}\u{201D} were found`,u=`Using support search results for \u{201C}${o}\u{201D}`;return i[1]!==a||i[2]!==s||i[3]!==l||i[4]!==c||i[5]!==d||i[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching support documents",toolLink:en,toolName:"Support Search",functionCall:s,inProgressMessage:c,noResultsMessage:d,resultsMapper:ei,successButtonText:u,useSelectReference:!1}),i[1]=a,i[2]=s,i[3]=l,i[4]=c,i[5]=d,i[6]=u,i[7]=n):n=i[7],n}).displayName||(f.displayName="SupportSearchButton")}catch{}let er=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.SearchIcon,{}),t[0]=e):e=t[0],e},eo=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.FileIcon,{}),t[0]=e):e=t[0],e},el=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.TagIcon,{}),t[0]=e):e=t[0],e},ec=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.PlayIcon,{}),t[0]=e):e=t[0],e},ed=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.BookIcon,{}),t[0]=e):e=t[0],e},eu=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.CommentDiscussionIcon,{}),t[0]=e):e=t[0],e},em=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.TasklistIcon,{}),t[0]=e):e=t[0],e},eh=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(eh,{}),t[0]=e):e=t[0],e},ep="planning response";function ef(e){let t,n,i,a,s=(0,y.c)(10),{maxWidth:r,functionMetadata:o}=e;return s[0]!==o?(t=o.icon(),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n={maxWidth:r},s[2]=r,s[3]=n):n=s[3],s[4]!==o.completedText||s[5]!==n?(i=(0,g.jsx)(_.PA,{title:o.completedText,sx:n,children:o.completedText}),s[4]=o.completedText,s[5]=n,s[6]=i):i=s[6],s[7]!==t||s[8]!==i?(a=(0,g.jsxs)(g.Fragment,{children:[t,i]}),s[7]=t,s[8]=i,s[9]=a):a=s[9],a}function eg(e){let t,n,i,a,s=(0,y.c)(10),{maxWidth:r,functionMetadata:o}=e;return s[0]!==o?(t=o.icon(),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n={maxWidth:r},s[2]=r,s[3]=n):n=s[3],s[4]!==o.loadingText||s[5]!==n?(i=(0,g.jsx)(_.PA,{title:o.loadingText,sx:n,children:o.loadingText}),s[4]=o.loadingText,s[5]=n,s[6]=i):i=s[6],s[7]!==t||s[8]!==i?(a=(0,g.jsxs)(g.Fragment,{children:[t,i]}),s[7]=t,s[8]=i,s[9]=a):a=s[9],a}function ey(e){let t,n,i,a,s=(0,y.c)(10),{functionCall:r,functionMetadata:o}=e;return s[0]!==o.activeSkillText?(t=(0,g.jsxs)(b.A,{as:"h3",className:D.errorHeading,children:["An error occurred while ",o.activeSkillText]}),s[0]=o.activeSkillText,s[1]=t):t=s[1],s[2]!==r.errorMessage?(n=(0,g.jsx)("p",{className:D.errorMessage,children:r.errorMessage}),s[2]=r.errorMessage,s[3]=n):n=s[3],s[4]!==o.name?(i=(0,g.jsxs)("p",{className:D.toolDescriptionText,children:["Copilot used the ",(0,g.jsx)("span",{className:D.toolNameHighlight,children:o.name})," tool"]}),s[4]=o.name,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a=(0,g.jsxs)("div",{className:D.errorContainer,children:[t,n,i]}),s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}function ex(e){let t,n=(0,y.c)(4),{functionCall:i,functionMetadata:a,panelWidth:s}=e,r=s?s-130:j.Jt.DEFAULT_PANEL_WIDTH;if(n[0]!==i||n[1]!==a||n[2]!==r){let e=i?.status==="error"?(0,g.jsx)(ey,{functionCall:i,functionMetadata:a}):i?.status==="completed"?(0,g.jsx)(ef,{maxWidth:r,functionMetadata:a}):(0,g.jsx)(eg,{maxWidth:r,functionMetadata:a});t=(0,g.jsx)("div",{className:D.functionTitleContainer,children:e}),n[0]=i,n[1]=a,n[2]=r,n[3]=t}else t=n[3];return t}function ev(e){if(!e)return ep;let t=function(e){if(e)return(e=>{switch(e.kind){case"bing-search":return{id:"bing-search",referenceType:"web-search",loadingText:`Using Bing to search for "${e.query}"`,completedText:`Bing results for "${e.query}"`,icon:x._,name:"Bing search",activeSkillText:"searching Bing"};case"lexical-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.scopingQuery}"`,completedText:`Search results for "${e.query}" in "${e.scopingQuery}"`,icon:er,name:"Code search",activeSkillText:"searching the codebase"};case"semantic-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,completedText:`Search results for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,icon:er,name:"Code search",activeSkillText:"searching the codebase"};case"kb-search":return{id:"kb-search",loadingText:`Searching for "${e.query}" in the knowledge base`,completedText:`Knowledge base search results for "${e.query}"`,icon:ed,name:"Knowledge base search",activeSkillText:"searching the knowledge base"};case"getalert":return{id:"getalert",loadingText:"Retrieving information about alerts",completedText:"Including information about alerts",icon:()=>(0,g.jsx)(v.ShieldIcon,{}),name:"Get alert",activeSkillText:"getting alert"};case"get-github-data":return{id:"get-github-data",loadingText:`Fetching ${e.endpoint}`,completedText:`Results of ${e.endpoint}`,icon:el,name:"Get GitHub Data",activeSkillText:"getting data"};case"get-actions-job-logs":{let t=Y(e),n=t.charAt(0).toUpperCase()+t.slice(1);return{id:"get-actions-jog-logs",loadingText:`Retrieving ${t} in ${e.repo}`,completedText:`${n} in ${e.repo}`,icon:ec,name:"Get job logs",activeSkillText:"getting job logs"}}case"getdiscussion":return{id:"getdiscussion",loadingText:`Fetching discussion ${e.discussionNumber}`,completedText:`Details about discussion #${e.discussionNumber}`,icon:eu,name:"Get discussion",activeSkillText:"getting discussion"};case"getfile":return{id:"getfile",loadingText:"Searching for file",completedText:"Using results of get file",icon:eo,name:"Get file",activeSkillText:"searching for file"};case"getfilechanges":return{id:"getfilechanges",loadingText:"Searching for file changes",completedText:`File changes for ${e.path} in ${e.repo}`,icon:eo,name:"Get file changes",activeSkillText:"searching for file changes"};case"planskill":return{id:"planskill",loadingText:"Planning response...",completedText:"Plan created",icon:em,name:"Plan skill",activeSkillText:"planning response"};case"support-search":return{id:"supportsearch",loadingText:"Searching for support documents",completedText:"Using results of support search",icon:ed,name:"Support search",activeSkillText:"searching for support documents"};case"get-figma":return{id:"getfigma",loadingText:"Analyzing Figma file",completedText:"Using results of Figma file",icon:ed,name:"Get Figma",activeSkillText:"analyzing Figma file"};case"codesearchagentskill":return{id:"codesearchagentskill",loadingText:"Using the code search agent",completedText:"Using results of code search agent",icon:ed,name:"Code Search Agent",activeSkillText:"searching the codebase"};case"github-draft-issue.draft-issue":{let t,n;return e.issueNumber?(t=e.repository?`Drafting update for @${e.repository}/issues/${e.issueNumber}`:"Drafting update",n=e.repository?`Drafted update for @${e.repository}/issues/${e.issueNumber}`:"Drafted update"):(t=e.repository?`Drafting issue in ${e.repository}`:"Drafting issue",n=e.repository?`Drafted issue in ${e.repository}`:"Drafted issue"),{id:"github-draft-issue.draft-issue",loadingText:t,completedText:n,icon:eh,name:"GitHub Draft Issue Step: Draft Issue",activeSkillText:t.toLowerCase()}}case"github-draft-issue.existing-issue":{let t=e.repository?`Drafting issue in ${e.repository}`:"Drafting issue";return{id:"github-draft-issue.existing-issue",loadingText:t,completedText:e.repository?`Drafted issue in ${e.repository}`:"Drafted issue",icon:eh,name:"GitHub Draft Issue Step: Existing Issue",activeSkillText:t.toLowerCase()}}case"github-draft-issue.repository-metadata":{let t=`Fetching metadata from ${e.repository}`;return{id:"github-draft-issue.repository-metadata",loadingText:t,completedText:`Using metadata from ${e.repository}`,icon:eh,name:"GitHub Draft Issue Step: Repository Metadata",activeSkillText:t.toLowerCase()}}case"github-draft-issue.get-issues":{let t=(e.issueRefs||[]).length>1?"Fetching issues":"Fetching issue";return{id:"github-draft-issue.get-issues",loadingText:t,completedText:(e.issueRefs||[]).length>1?"Fetched issues":"Fetched issue",icon:eh,name:"GitHub Draft Issue Step: Get Issues",activeSkillText:t.toLowerCase()}}}})({...JSON.parse(e?.arguments||"{}"),kind:e.slug})}(e);return e.statusMessage??t?.activeSkillText??ep}try{er.displayName||(er.displayName="CodeSearchIcon")}catch{}try{eo.displayName||(eo.displayName="GetFileIcon")}catch{}try{el.displayName||(el.displayName="ReleaseIcon")}catch{}try{ec.displayName||(ec.displayName="JobIcon")}catch{}try{ed.displayName||(ed.displayName="KnowledgeBaseIcon")}catch{}try{eu.displayName||(eu.displayName="DiscussionIcon")}catch{}try{em.displayName||(em.displayName="PlanIcon")}catch{}try{eh.displayName||(eh.displayName="IssueDraftIcon")}catch{}try{ef.displayName||(ef.displayName="FunctionCompleted")}catch{}try{eg.displayName||(eg.displayName="FunctionLoading")}catch{}try{ey.displayName||(ey.displayName="FunctionError")}catch{}try{ex.displayName||(ex.displayName="FunctionTitle")}catch{}},31958:(e,t,n)=>{n.d(t,{h:()=>l});var i=n(74848),a=n(21728),s=n(97949),r=n(34164);let o={interruptedBanner:"InterruptedBanner-module__interruptedBanner--o4zN7",hasContent:"InterruptedBanner-module__hasContent--eZVJ0"};function l(e){let t,n,l=(0,a.c)(4),{messageHasContent:c}=e,d=c&&o.hasContent;return l[0]!==d?(t=(0,r.$)(o.interruptedBanner,d),l[0]=d,l[1]=t):t=l[1],l[2]!==t?(n=(0,i.jsx)(s.l,{className:t,"data-testid":"chat-message-interrupted",description:"Copilot was interrupted before it could finish this message.",hideTitle:!0,title:"Message interrupted",variant:"info"}),l[2]=t,l[3]=n):n=l[3],n}try{l.displayName||(l.displayName="InterruptedBanner")}catch{}},54508:(e,t,n)=>{n.d(t,{E:()=>u});var i=n(74848),a=n(21728),s=n(73077),r=n(21373),o=n(15042),l=n(96540);let c={dialog:"InterviewSurveyDialog-module__dialog--VJeZO",body:"InterviewSurveyDialog-module__body--GX6c_",primaryText:"InterviewSurveyDialog-module__primaryText--H2SlC InterviewSurveyDialog-module__text--WPIpz",secondaryText:"InterviewSurveyDialog-module__secondaryText--SQrin InterviewSurveyDialog-module__text--WPIpz",surveyLink:"InterviewSurveyDialog-module__surveyLink--XKIEl",noThanksButton:"InterviewSurveyDialog-module__noThanksButton--yLSzs"};function d(e,t){let n,d,u,m,h=(0,a.c)(10),{title:p,onClose:f}=e,g=void 0===p?"Give feedback":p,[y,x]=(0,l.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>x(!0)}),h[0]=n):n=h[0],(0,l.useImperativeHandle)(t,n),h[1]!==f?(d=e=>{x(!1),f?.(e)},h[1]=f,h[2]=d):d=h[2];let v=d;h[3]!==v?(u=()=>(0,i.jsxs)("div",{className:c.body,children:[(0,i.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,i.jsx)("span",{className:c.primaryText,children:"Would you like to participate in our research?"}),(0,i.jsx)("span",{className:c.secondaryText,children:"You will be compensated for your time"}),(0,i.jsx)(s.z,{variant:"primary",className:c.surveyLink,href:"/github-copilot/chat/feedback/interview-survey",target:"_blank",children:"Book a session"}),(0,i.jsx)(r.Q,{variant:"link",className:c.noThanksButton,onClick:()=>v("no-thanks"),children:"No, thanks"})]}),h[3]=v,h[4]=u):u=h[4];let b=u;return h[5]!==v||h[6]!==y||h[7]!==b||h[8]!==g?(m=y&&(0,i.jsx)(o.l,{className:c.dialog,onClose:()=>v("close"),title:g,renderBody:b}),h[5]=v,h[6]=y,h[7]=b,h[8]=g,h[9]=m):m=h[9],m}let u=(0,l.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},93412:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(74848),a=n(21728),s=n(1805);let r={container:"LegalDisclaimer-module__container--lNe5E"},o=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("span",{className:r.container,children:[(0,i.jsx)(s.A,{href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-chat-in-githubcom",inline:!0,muted:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]}),t[0]=e):e=t[0],e};try{o.displayName||(o.displayName="LegalDisclaimer")}catch{}},87255:(e,t,n)=>{n.d(t,{Y:()=>S});var i,a=n(74848),s=n(21728),r=n(70170),o=n(53419),l=n(29731),c=n(83494),d=n(88431),u=n(96379),m=n(56149),h=n(36284),p=n(4175),f=n(21373),g=n(15042),y=n(96540),x=n(40961),v=n(2635),b=n(33592);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--T9wxr"};var j=n(38621),C=n(5524);let w={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,y.forwardRef)(function(e,t){let n,i,r,o,l,c,d,u,m=(0,s.c)(19),{onSelect:h}=e,[p,f]=(0,y.useState)(!1);m[0]!==p?(n=()=>f(!p),m[0]=p,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(i={marginBottom:"1px"},m[2]=i):i=m[2],m[3]!==h||m[4]!==p?(r=p&&Object.entries(w)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(C.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,n.body),children:[(0,a.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=h,m[4]=p,m[5]=r):r=m[5],m[6]!==r?(o=(0,a.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=o):o=m[7];let x=p?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==p?(c=p?(0,a.jsx)(j.XIcon,{}):(0,a.jsx)(j.LightBulbIcon,{}),m[9]=p,m[10]=c):c=m[10],m[11]!==x||m[12]!==c||m[13]!==g?(d=(0,a.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(C.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=x,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:i,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(i=PersonalInstructionsTemplatesWithRef).displayName||(i.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let S=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),i=(0,b.b)(),[j,C]=(0,y.useState)(n.personalInstructions??""),[w,S]=(0,y.useState)(void 0),[k,T]=(0,y.useState)(!1),L=(0,y.useRef)(null),E=(0,y.useRef)(null),[R,A]=(0,y.useState)(""),D=((e,t)=>{let n,i,a=(0,s.c)(4),[o,l]=(0,y.useState)(48);return a[0]!==e||500!==a[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&l(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],a[0]=e,a[1]=500,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,y.useEffect)(n,i),o})(E);(0,d.N)(()=>{L?.current&&(L.current.scrollTop=L.current.scrollHeight)},[j]);let P=(0,y.useCallback)(async()=>{if(!k){T(!0),R&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:R});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:j}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),i.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:j}),(0,x.flushSync)(()=>e());else{let e=await t.json();S(String(e.errorMessage))}}catch{S("An error occurred while saving your personal instructions.")}finally{T(!1)}}},[k,j,i,e,R]),O=(e,t)=>{t&&(C(j?`${j}
${t}`:t),A(e),L?.current?.focus())},M=()=>{P()},F=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.ZL,{children:(0,a.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:P,children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(c.tL,{commands:{"github:submit-form":M},children:[(0,a.jsx)(p.Ay,{ref:L,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:j,validationStatus:w||j.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{C(e.target.value),S(void 0)}}),(0,a.jsx)(N,{ref:E,onSelect:O})]})}),(0,a.jsx)(I,{text:j,promptCharLimit:4e3}),w&&(0,a.jsx)(h.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,l.G)("error-message"),children:w})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:_.footerContainer,children:[(0,a.jsx)(f.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,a.jsx)(f.Q,{loading:k,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function I(e){let t,n,i,r,o=(0,s.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=n):n=o[2],o[3]!==d||o[4]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",d," characters"]}),o[3]=d,o[4]=n,o[5]=i):i=o[5];let u=i;return o[6]!==u||o[7]!==d||o[8]!==c.length?(r=(0,a.jsx)(a.Fragment,{children:c.length>d?(0,a.jsx)(h.A.Validation,{variant:"error",children:u}):(0,a.jsx)(h.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=r):r=o[9],r}try{S.displayName||(S.displayName="PersonalInstructionsDialog")}catch{}try{I.displayName||(I.displayName="CharacterCount")}catch{}},42983:(e,t,n)=>{n.d(t,{$:()=>l});var i=n(74848),a=n(21728),s=n(38621),r=n(26108),o=n(12970);function l(e){let t,n,l=(0,a.c)(10),{handleRetryMessage:c,disabled:d,showModelPicker:u,model:m,navigateToNewThread:h}=e,p=void 0!==d&&d,f=void 0!==u&&u;l[0]!==c||l[1]!==m?(t=()=>{c(m)},l[0]=c,l[1]=m,l[2]=t):t=l[2];let g=t;if(f&&(!h||!m))throw Error("navigateToNewThread and model must be provided in order to show the model picker");return l[3]!==p||l[4]!==g||l[5]!==c||l[6]!==m||l[7]!==h||l[8]!==f?(n=f?(0,i.jsx)(o.Yb,{onNewThreadSelected:h,type:"message-retry",selectedModel:m,onModelSelected:c,disabled:p}):(0,i.jsx)(r.K,{variant:"invisible","aria-label":"Retry","data-testid":"retry-button",onClick:g,icon:s.SyncIcon,disabled:p}),l[3]=p,l[4]=g,l[5]=c,l[6]=m,l[7]=h,l[8]=f,l[9]=n):n=l[9],n}try{l.displayName||(l.displayName="RetryButton")}catch{}},95896:(e,t,n)=>{n.d(t,{M:()=>l});var i=n(74848),a=n(21728),s=n(11683),r=n(45800),o=n(96540);function l(e){let t,n,l,c,d=(0,a.c)(8);d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let u=(0,o.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(l={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:s.z0.ArrowHorizontal|s.z0.HomeAndEnd},d[3]=l):l=d[3],(0,r.G)(l),d[4]!==t||d[5]!==e.children||d[6]!==n?(c=(0,i.jsx)("div",{ref:u,className:t,role:"toolbar",...n,children:e.children}),d[4]=t,d[5]=e.children,d[6]=n,d[7]=c):c=d[7],c}try{l.displayName||(l.displayName="Toolbar")}catch{}},82151:(e,t,n)=>{n.d(t,{R:()=>h});var i=n(74848),a=n(21728),s=n(1805),r=n(34164),o=n(7277),l=n(99054),c=n(20330),d=n(16378),u=n(46665),m=n(6224);function h(e){let t,n,s,h,f,g,y=(0,a.c)(20),{className:x,accessibleHeader:v}=e,{message:b}=(0,u.V)(),_=b.content??"";y[0]!==_?(t=(0,d._)(_),y[0]=_,y[1]=t):t=y[1];let{availableAgents:j}=(0,l.JE)(t);if(y[2]!==v||y[3]!==x||y[4]!==b.references||y[5]!==j||y[6]!==_){let e=void 0===j?[]:j,t=(0,o.l)().use(c.U,{references:b.references??[],agents:e}).parse(_);y[10]!==v?(h=v&&(0,i.jsx)("h3",{className:"sr-only",children:v}),y[10]=v,y[11]=h):h=y[11],y[12]!==x?(n=(0,r.$)(m.A.container,x),y[12]=x,y[13]=n):n=y[13],s=t.children.map(p),y[2]=v,y[3]=x,y[4]=b.references,y[5]=j,y[6]=_,y[7]=n,y[8]=s,y[9]=h}else n=y[7],s=y[8],h=y[9];return y[14]!==n||y[15]!==s?(f=(0,i.jsx)("div",{className:n,children:s}),y[14]=n,y[15]=s,y[16]=f):f=y[16],y[17]!==h||y[18]!==f?(g=(0,i.jsxs)(i.Fragment,{children:[h,f]}),y[17]=h,y[18]=f,y[19]=g):g=y[19],g}function p(e,t){switch(e.type){case"text":return e.value;case"agent-mention":return(0,i.jsx)(f,{agent:e.data.mentionedAgent,children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:m.A.mention,children:e.value},t):e.value}}function f(e){let t,n=(0,a.c)(4),{agent:r,children:o}=e,l=`/integrations/${r.slug}/hovercard`;return n[0]!==r.integrationUrl||n[1]!==o||n[2]!==l?(t=(0,i.jsx)(s.A,{href:r.integrationUrl,"data-hovercard-url":l,className:m.A.mention,children:o}),n[0]=r.integrationUrl,n[1]=o,n[2]=l,n[3]=t):t=n[3],t}try{h.displayName||(h.displayName="UserMessage")}catch{}try{f.displayName||(f.displayName="AgentLink")}catch{}},40683:(e,t,n)=>{n.d(t,{p:()=>E,V:()=>L});var i=n(74848),a=n(21728),s=n(53419),r=n(79634),o=n(97286),l=n(38621),c=n(5524),d=n(40928),u=n(36284),m=n(99511),h=n(15042),p=n(96540),f=n(84802),g=n(25641),y=n(35247),x=n(2635),v=n(33592);let b={hideOnDesktop:"ConversationActions-module__hideOnDesktop--J5K5t"};var _=n(40260),j=n(71315),C=n(21373),w=n(69726),N=n(98552),S=n(46251),I=n(20139);let k={container:"ConversationSharingDialog-module__container--wNKq6",innerContainer:"ConversationSharingDialog-module__innerContainer--OaIjU",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",textInputContainer:"ConversationSharingDialog-module__textInputContainer--jHhX6",textInput:"ConversationSharingDialog-module__textInput--DymUf",success:"ConversationSharingDialog-module__success--zCOcd",spinner:"ConversationSharingDialog-module__spinner--KpY5f",successIcon:"ConversationSharingDialog-module__successIcon--z1nhd",mutedText:"ConversationSharingDialog-module__mutedText--r3ZSy",warningText:"ConversationSharingDialog-module__warningText--t4nnB",snapshotText:"ConversationSharingDialog-module__snapshotText--XNu1W",buttonStack:"ConversationSharingDialog-module__buttonStack--gWe8E",lockIcon:"ConversationSharingDialog-module__lockIcon--yCWzZ",cancelButton:"ConversationSharingDialog-module__cancelButton--CL34L",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--_qvsX"},T=e=>{let t,n,r,o,c,d,f,g,b,T,L,E,R,A,D,P,O,M,F,B,$,U,V,H,W,q,z,G,K,Q=(0,a.c)(94),{closeDialog:Y,threadId:J,returnFocusRef:X,showThirdPartyMcpWarning:Z}=e,ee=void 0!==Z&&Z,et=(0,x.Pk)(),en=(0,v.b)(),[ei,ea]=(0,p.useState)(!1),[es,er]=(0,p.useState)(!1),[eo,el]=(0,p.useState)(!1),[ec,ed]=(0,p.useState)(!1),{selectedThreadID:eu,ssoOrganizations:em,apiUrl:eh,threads:ep}=et;Q[0]!==eu||Q[1]!==J||Q[2]!==ep?(t=ep.get(J||eu),Q[0]=eu,Q[1]=J,Q[2]=ep,Q[3]=t):t=Q[3];let ef=t;Q[4]!==ef?.sharedID?(n=()=>ef?.sharedID||"",Q[4]=ef?.sharedID,Q[5]=n):n=Q[5];let[eg,ey]=(0,p.useState)(n);Q[6]!==ef?(r=()=>ef?.sharedMessageID?ef.sharedMessageID:"",Q[6]=ef,Q[7]=r):r=Q[7];let[ex,ev]=(0,p.useState)(r),eb=j.fV.origin,e_=`${eb}/copilot/share/${eg}`;Q[8]!==ei?(o=()=>{if(ei){let e=setTimeout(()=>ea(!1),1500);return()=>clearTimeout(e)}},c=[ei],Q[8]=ei,Q[9]=o,Q[10]=c):(o=Q[9],c=Q[10]),(0,p.useEffect)(o,c),Q[11]!==eo?(d=()=>{if(eo){let e=setTimeout(()=>el(!1),1500);return()=>clearTimeout(e)}},f=[eo],Q[11]=eo,Q[12]=d,Q[13]=f):(d=Q[12],f=Q[13]),(0,p.useEffect)(d,f),Q[14]!==e_?(g=async()=>{try{await (0,_.D)(e_),ea(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},Q[14]=e_,Q[15]=g):g=Q[15];let ej=g;Q[16]!==ef?.sharedID||Q[17]!==eu||Q[18]!==J?(b=()=>{(J||eu)&&ey(ef?.sharedID||"")},Q[16]=ef?.sharedID,Q[17]=eu,Q[18]=J,Q[19]=b):b=Q[19];let eC=ef?.sharedID;Q[20]!==eu||Q[21]!==eC||Q[22]!==J?(T=[eC,eu,J],Q[20]=eu,Q[21]=eC,Q[22]=J,Q[23]=T):T=Q[23],(0,p.useEffect)(b,T),Q[24]!==eh||Q[25]!==en||Q[26]!==eu||Q[27]!==em||Q[28]!==J?(L=async()=>{er(!0);let e=J||eu,t=new I.k(eh,em),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eu?en.FindLastMessageID():"");if(n.ok){er(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ey(i),el(!0),ev(a),en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else er(!1)},Q[24]=eh,Q[25]=en,Q[26]=eu,Q[27]=em,Q[28]=J,Q[29]=L):L=Q[29];let ew=L;Q[30]!==eh||Q[31]!==en||Q[32]!==eu||Q[33]!==eg||Q[34]!==ec||Q[35]!==em||Q[36]!==J?(E=async()=>{if(!ec)return void ed(!0);ed(!1),er(!0);let e=J||eu,t=new I.k(eh,em),n=await t.unshareThread(e);if(n.ok){er(!1),ev("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eg})}else er(!1)},Q[30]=eh,Q[31]=en,Q[32]=eu,Q[33]=eg,Q[34]=ec,Q[35]=em,Q[36]=J,Q[37]=E):E=Q[37];let eN=E;Q[38]!==ew||Q[39]!==es||Q[40]!==eg?(R=()=>{if(!eg)return(0,i.jsx)(C.Q,{variant:"primary",disabled:es,onClick:ew,children:"Share"})},Q[38]=ew,Q[39]=es,Q[40]=eg,Q[41]=R):R=Q[41];let eS=R;Q[42]!==ej||Q[43]!==eg?(A=()=>{if(eg)return(0,i.jsx)(C.Q,{variant:"primary",autoFocus:!0,onClick:ej,children:"Copy link"})},Q[42]=ej,Q[43]=eg,Q[44]=A):A=Q[44];let eI=A;Q[45]!==eN||Q[46]!==es||Q[47]!==eg?(D=()=>{if(eg)return(0,i.jsx)(C.Q,{variant:"danger",disabled:es,onClick:eN,children:"Unshare"})},Q[45]=eN,Q[46]=es,Q[47]=eg,Q[48]=D):D=Q[48];let ek=D;Q[49]!==eg||Q[50]!==ec?(P=()=>{if(eg&&ec)return(0,i.jsx)(C.Q,{variant:"default",onClick:()=>ed(!1),className:k.cancelButton,children:"Cancel"})},Q[49]=eg,Q[50]=ec,Q[51]=P):P=Q[51];let eT=P;Q[52]!==ei||Q[53]!==es||Q[54]!==eg||Q[55]!==ec||Q[56]!==eo?(O=()=>es?(0,i.jsxs)("div",{className:k.quickFadeUp,children:[(0,i.jsx)(w.A,{size:"small",className:k.spinner}),eg?"Unsharing conversation...":"Sharing conversation..."]}):ec?(0,i.jsx)("div",{className:k.quickFadeUp,children:(0,i.jsx)(N.A,{size:"medium",className:k.warningText,children:"Confirm unsharing this conversation?"})}):ei?(0,i.jsxs)("div",{className:k.quickFadeUp,children:[(0,i.jsx)(l.CheckIcon,{className:k.successIcon}),(0,i.jsx)(N.A,{size:"medium",className:k.success,children:"Copied to clipboard"})]}):eo?(0,i.jsxs)("div",{className:k.quickFadeUp,children:[(0,i.jsx)(l.CheckIcon,{className:k.successIcon}),(0,i.jsx)(N.A,{size:"medium",className:k.success,children:"Conversation shared"})]}):eg?(0,i.jsxs)("div",{children:[(0,i.jsx)(l.UnlockIcon,{className:k.lockIcon}),(0,i.jsx)(N.A,{size:"medium",className:k.mutedText,children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),Q[52]=ei,Q[53]=es,Q[54]=eg,Q[55]=ec,Q[56]=eo,Q[57]=O):O=Q[57];let eL=O,eE=eg?"Conversation shared":"Share conversation";return Q[58]!==ex||Q[59]!==eg||Q[60]!==ee?(M=(0,i.jsx)(S.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:ex?(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:k.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):eg?(0,i.jsx)("span",{children:`This conversation and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${ee?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${ee?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),Q[58]=ex,Q[59]=eg,Q[60]=ee,Q[61]=M):M=Q[61],Q[62]!==e_||Q[63]!==eg?(F=eg&&(0,i.jsx)("div",{className:k.innerContainer,children:(0,i.jsx)("div",{className:k.sharedLinkContainer,children:(0,i.jsxs)(u.A,{id:"share-link",className:k.textInputContainer,children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:eg&&e_,className:k.textInput})]})})}),Q[62]=e_,Q[63]=eg,Q[64]=F):F=Q[64],Q[65]!==M||Q[66]!==F?(B=(0,i.jsxs)(S.B,{direction:"vertical",gap:"condensed",children:[M,F]}),Q[65]=M,Q[66]=F,Q[67]=B):B=Q[67],Q[68]!==eL?($=(0,i.jsx)("div",{role:"status",children:eL()}),Q[68]=eL,Q[69]=$):$=Q[69],Q[70]!==eS?(U=eS(),Q[70]=eS,Q[71]=U):U=Q[71],Q[72]!==eT?(V=eT(),Q[72]=eT,Q[73]=V):V=Q[73],Q[74]!==ek?(H=ek(),Q[74]=ek,Q[75]=H):H=Q[75],Q[76]!==eI?(W=eI(),Q[76]=eI,Q[77]=W):W=Q[77],Q[78]!==U||Q[79]!==V||Q[80]!==H||Q[81]!==W?(q=(0,i.jsxs)(S.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[U,V,H,W]}),Q[78]=U,Q[79]=V,Q[80]=H,Q[81]=W,Q[82]=q):q=Q[82],Q[83]!==$||Q[84]!==q?(z=(0,i.jsxs)(S.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:k.buttonStack,children:[$,q]}),Q[83]=$,Q[84]=q,Q[85]=z):z=Q[85],Q[86]!==B||Q[87]!==z?(G=(0,i.jsxs)("div",{className:k.container,children:[B,z]}),Q[86]=B,Q[87]=z,Q[88]=G):G=Q[88],Q[89]!==Y||Q[90]!==X||Q[91]!==eE||Q[92]!==G?(K=(0,i.jsx)(h.l,{title:eE,onClose:Y,width:"large",returnFocusRef:X,children:G}),Q[89]=Y,Q[90]=X,Q[91]=eE,Q[92]=G,Q[93]=K):K=Q[93],K};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}function L(e){let t,n,o,d,u,m,h,p,f,y=(0,a.c)(23),{onOpenDialog:v,showShare:_,hideShareOnDesktop:j,isShared:C}=e,w=void 0===_||_,N=void 0!==j&&j,S=void 0!==C&&C,{canShareThread:I}=(0,r.X)(),{isWaitingOnCopilot:k,messages:T}=(0,x.Pk)(),L=(0,g.Q7)(T);y[0]!==T?(t=(0,g.UM)(T),y[0]=T,y[1]=t):t=y[1];let E=t,R=L.length>0||k||E;return y[2]!==v?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),v("rename")},y[2]=v,y[3]=n):n=y[3],y[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,i.jsx)(c.l.LeadingVisual,{children:(0,i.jsx)(l.PencilIcon,{})}),y[4]=o):o=y[4],y[5]!==n?(d=(0,i.jsxs)(c.l.Item,{onSelect:n,children:[o,"Rename"]}),y[5]=n,y[6]=d):d=y[6],y[7]!==I||y[8]!==N||y[9]!==S||y[10]!==v||y[11]!==R||y[12]!==w?(u=w&&I&&(0,i.jsxs)(c.l.Item,{className:N?b.hideOnDesktop:void 0,disabled:R,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),v("share")},children:[(0,i.jsx)(c.l.LeadingVisual,{children:S?(0,i.jsx)(l.UnlockIcon,{}):(0,i.jsx)(l.LockIcon,{})}),"Share"]}),y[7]=I,y[8]=N,y[9]=S,y[10]=v,y[11]=R,y[12]=w,y[13]=u):u=y[13],y[14]!==v?(m=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),v("delete")},y[14]=v,y[15]=m):m=y[15],y[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(c.l.LeadingVisual,{children:(0,i.jsx)(l.TrashIcon,{})}),y[16]=h):h=y[16],y[17]!==m?(p=(0,i.jsxs)(c.l.Item,{variant:"danger",onSelect:m,children:[h,"Delete"]}),y[17]=m,y[18]=p):p=y[18],y[19]!==p||y[20]!==d||y[21]!==u?(f=(0,i.jsxs)(i.Fragment,{children:[d,u,p]}),y[19]=p,y[20]=d,y[21]=u,y[22]=f):f=y[22],f}function E(e){let t,n,r,l,c,d,u,m=(0,a.c)(33),{visibleDialog:h,onClose:p,threadName:g,threadId:b,selectedThreadId:_,onStartLoading:j,onFinishLoading:C,returnFocusRef:w}=e,{threads:N}=(0,x.Pk)(),S=(0,v.b)(),I=(0,f.G)();m[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],m[0]=t):t=m[0],m[1]!==S?(n={queryKey:t,queryFn:async()=>S.service.fetchMCPServers(),placeholderData:R},m[1]=S,m[2]=n):n=m[2];let{data:k}=(0,o.I)(n),L=y.W.copilotThirdPartyMcp&&(k||[]).length>0;m[3]!==p?(r=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),p()},m[3]=p,m[4]=r):r=m[4];let E=r;m[5]!==S||m[6]!==I||m[7]!==p||m[8]!==C||m[9]!==j||m[10]!==_||m[11]!==b||m[12]!==N?(l=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),j();let e=N.get(b);e&&(b===_&&await I({clearTopic:!0,includeThreads:!1}),await S.deleteThread(e)),C(),p()},m[5]=S,m[6]=I,m[7]=p,m[8]=C,m[9]=j,m[10]=_,m[11]=b,m[12]=N,m[13]=l):l=m[13];let P=l;m[14]!==S||m[15]!==p||m[16]!==C||m[17]!==j||m[18]!==b||m[19]!==N?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),j();let t=N.get(b);t&&await S.renameThread(t,e),C(),p()},m[14]=S,m[15]=p,m[16]=C,m[17]=j,m[18]=b,m[19]=N,m[20]=c):c=m[20];let O=c;return m[21]!==E||m[22]!==P||m[23]!==p||m[24]!==w||m[25]!==L||m[26]!==O||m[27]!==b||m[28]!==g||m[29]!==h?(d="delete"===h?(0,i.jsx)(A,{onCancel:p,onConfirm:P,returnFocusRef:w}):"rename"===h?(0,i.jsx)(D,{onCancel:p,currentName:g,onSubmit:O,returnFocusRef:w}):"share"===h?(0,i.jsx)(T,{closeDialog:E,threadId:b,returnFocusRef:w,showThirdPartyMcpWarning:L}):null,m[21]=E,m[22]=P,m[23]=p,m[24]=w,m[25]=L,m[26]=O,m[27]=b,m[28]=g,m[29]=h,m[30]=d):d=m[30],m[31]!==d?(u=(0,i.jsx)(i.Fragment,{children:d}),m[31]=d,m[32]=u):u=m[32],u}function R(e){return e}let A=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:o,returnFocusRef:l}=e;return n[0]!==o||n[1]!==r||n[2]!==l?(t=(0,i.jsx)(d.K,{title:"Delete conversation",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=l.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),o(),window.setTimeout(()=>l.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),n[0]=o,n[1]=r,n[2]=l,n[3]=t):t=n[3],t},D=e=>{let t,n,r,o,l,c,d,f,g,y,x,v,b=(0,a.c)(34),{currentName:_,onCancel:j,onSubmit:C,returnFocusRef:w}=e,[N,S]=(0,p.useState)(void 0),I=(0,p.useRef)(null),k=(0,p.useId)(),T=(0,p.useId)();b[0]!==C?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(S("max_length"),I.current?.focus()):(S(void 0),C(t)):(S("required"),I.current?.focus())},b[0]=C,b[1]=t):t=b[1];let L=t;b[2]!==j?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},b[2]=j,b[3]=n):n=b[3];let E=n;b[4]!==T?(r=(0,i.jsx)("span",{id:T,children:"Rename conversation"}),b[4]=T,b[5]=r):r=b[5],b[6]!==E?(o={content:"Cancel",onClick:E},b[6]=E,b[7]=o):o=b[7],b[8]!==k?(l={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:P},b[8]=k,b[9]=l):l=b[9],b[10]!==o||b[11]!==l?(c=[o,l],b[10]=o,b[11]=l,b[12]=c):c=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),b[13]=d):d=b[13];let R=N?"error-message":void 0,A=N?"true":void 0;return b[14]!==_||b[15]!==T||b[16]!==R||b[17]!==A?(f=(0,i.jsx)(m.A,{"aria-labelledby":T,"aria-describedby":R,"aria-invalid":A,ref:I,defaultValue:_,block:!0}),b[14]=_,b[15]=T,b[16]=R,b[17]=A,b[18]=f):f=b[18],b[19]!==N?(g=N&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===N?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=N,b[20]=g):g=b[20],b[21]!==f||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[d,f,g]}),b[21]=f,b[22]=g,b[23]=y):y=b[23],b[24]!==k||b[25]!==L||b[26]!==y?(x=(0,i.jsx)("form",{id:k,onSubmit:L,children:y}),b[24]=k,b[25]=L,b[26]=y,b[27]=x):x=b[27],b[28]!==E||b[29]!==w||b[30]!==x||b[31]!==r||b[32]!==c?(v=(0,i.jsx)(h.l,{title:r,onClose:E,width:"small",footerButtons:c,initialFocusRef:I,returnFocusRef:w,children:x}),b[28]=E,b[29]=w,b[30]=x,b[31]=r,b[32]=c,b[33]=v):v=b[33],v};try{L.displayName||(L.displayName="ConversationActions")}catch{}try{E.displayName||(E.displayName="ConversationActionDialogs")}catch{}try{A.displayName||(A.displayName="DeleteDialog")}catch{}try{D.displayName||(D.displayName="RenameDialog")}catch{}function P(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},26822:(e,t,n)=>{n.d(t,{U:()=>eC});var i=n(74848),a=n(21728),s=n(82595),r=n(894),o=n(75202),l=n(13017),c=n(38621),d=n(1992),u=n(5524),m=n(34164),h=n(96540),p=n(35247),f=n(2635),g=n(33592),y=n(53419),x=n(26108),v=n(81960),b=n(40090),_=n(40961),j=n(25641),C=n(40683);let w={container:"ConversationListV2-module__container--DfLLE",condensed:"ConversationListV2-module__condensed--vCbJZ",empty:"ConversationListV2-module__empty--4TgQY",list:"ConversationListV2-module__list--N8p2i",section:"ConversationListV2-module__section--G3Lm1",title:"ConversationListV2-module__title--VKD9S",item:"ConversationListV2-module__item--cPXI6",link:"ConversationListV2-module__link--J46j6",text:"ConversationListV2-module__text--IsNRP",context:"ConversationListV2-module__context--a0pCE",emptyStateHeading:"ConversationListV2-module__emptyStateHeading--KkuQU",emptyStateText:"ConversationListV2-module__emptyStateText--LsdKG"};function N({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,g.b)(),{threads:r}=(0,f.Pk)(),o=(0,h.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),l=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?s.push(c):c.date.toDateString()===n.toDateString()?r.push(c):c.date>i?o.push(c):c.date>a&&l.push(c);return{Today:s,Yesterday:r,"Last 7 days":o,"Last 30 days":l}}(o),c=0===o.length,d=(0,h.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${d}-conversations`,id:`${d}-conversation-list`,tabIndex:-1,className:(0,m.$)(w.container,a&&w.condensed),children:c&&("loading"===t||"pending"===t)?(0,i.jsx)(b.r,{lines:5}):c?(0,i.jsx)(k,{}):(0,i.jsxs)("div",{className:w.section,children:[(0,i.jsx)("h3",{id:`${d}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(l).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${d}_${t}`,className:w.title,children:t}),(0,i.jsx)("ul",{className:w.list,children:a.map(t=>(0,i.jsx)(S,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function S(e){let t,n,s,r,o,m=(0,a.c)(17),{item:p,selectedItemId:f,onSelect:g,threads:v}=e,b=p.id===f,[j,N]=(0,h.useState)(null),[S,k]=(0,h.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>k(!0),m[0]=t):t=m[0];let T=t;m[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>k(!1),m[1]=n):n=m[1];let L=n;m[2]!==f||m[3]!==v?(s=v.get(f),m[2]=f,m[3]=v,m[4]=s):s=m[4];let E=s,R=!!E?.customCopilotID,A=(0,h.useRef)(null);m[5]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,_.flushSync)(()=>N(null)),A.current?.focus()},m[5]=r):r=m[5];let D=r;return m[6]!==j||m[7]!==R||m[8]!==p.href||m[9]!==p.id||m[10]!==p.text||m[11]!==S||m[12]!==g||m[13]!==b||m[14]!==f||m[15]!==v?(o=p.href&&(0,i.jsxs)("li",{className:w.item,children:[(0,i.jsx)(l.N_,{className:w.link,to:p.href,"aria-current":b?"page":void 0,onClick:()=>{g(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:p.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:w.text,children:p.text})}),(0,i.jsx)("span",{className:w.context,children:(0,i.jsxs)(d.W,{anchorRef:A,children:[(0,i.jsx)(d.W.Anchor,{children:(0,i.jsx)(x.K,{loading:S,icon:c.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:I})}),(0,i.jsx)(d.W.Overlay,{children:(0,i.jsx)(u.l,{children:(0,i.jsx)(C.V,{onOpenDialog:N,isShared:!!v.get(p.id)?.sharedID,showShare:!R})})})]})}),(0,i.jsx)(C.p,{visibleDialog:j,onClose:D,threadName:p.text,threadId:p.id,selectedThreadId:f,onStartLoading:T,onFinishLoading:L,returnFocusRef:A})]},p.id),m[6]=j,m[7]=R,m[8]=p.href,m[9]=p.id,m[10]=p.text,m[11]=S,m[12]=g,m[13]=b,m[14]=f,m[15]=v,m[16]=o):o=m[16],o}function I(){return(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function k(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:w.empty,children:[(0,i.jsx)(v.A,{as:"h3",className:w.emptyStateHeading,children:"No conversations yet"}),(0,i.jsx)("span",{className:w.emptyStateText,children:"Ask Copilot anything on the right to start your first conversation."})]}),t[0]=e):e=t[0],e}try{N.displayName||(N.displayName="ConversationList")}catch{}try{S.displayName||(S.displayName="ConversationListEntry")}catch{}try{k.displayName||(k.displayName="EmptyState")}catch{}var T=n(11607),L=n(71205);let E={container:"SidebarNavigation-module__container--XJoVm",condensed:"SidebarNavigation-module__condensed--FtKTo",list:"SidebarNavigation-module__list--bB1nv",section:"SidebarNavigation-module__section--IspfT",title:"SidebarNavigation-module__title--aV4qO",empty:"SidebarNavigation-module__empty--Bbzym",emptyStateHeading:"SidebarNavigation-module__emptyStateHeading--MBsqt",emptyStateText:"SidebarNavigation-module__emptyStateText--nQR_F"};function R(e){let t,n,s,r=(0,a.c)(10),{children:o,isCondensed:l,"aria-label":c,className:d}=e,u=void 0===c?"Navigation":c,p=(0,h.useId)(),f=`${p}-navigation`,g=l&&E.condensed;return r[0]!==d||r[1]!==g?(t=(0,m.$)(E.container,g,d),r[0]=d,r[1]=g,r[2]=t):t=r[2],r[3]!==o?(n=(0,i.jsx)("div",{className:E.section,children:o}),r[3]=o,r[4]=n):n=r[4],r[5]!==u||r[6]!==f||r[7]!==t||r[8]!==n?(s=(0,i.jsx)("nav",{"aria-label":u,id:f,tabIndex:-1,className:t,children:n}),r[5]=u,r[6]=f,r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function A(e){let t,n,s,r=(0,a.c)(12),{title:o,children:l,isLoading:c,isEmpty:d,emptyStateTitle:u,emptyStateText:m}=e,p=void 0===u?"No items":u,f=void 0===m?"No items to display.":m,g=(0,h.useId)();return r[0]!==g||r[1]!==o?(t=(0,i.jsx)("h4",{id:g,className:E.title,children:o}),r[0]=g,r[1]=o,r[2]=t):t=r[2],r[3]!==l||r[4]!==f||r[5]!==p||r[6]!==d||r[7]!==c?(n=d&&c?(0,i.jsx)(b.r,{lines:5}):d?(0,i.jsx)(D,{title:p,text:f}):(0,i.jsx)("ul",{className:E.list,children:l}),r[3]=l,r[4]=f,r[5]=p,r[6]=d,r[7]=c,r[8]=n):n=r[8],r[9]!==t||r[10]!==n?(s=(0,i.jsxs)("div",{children:[t,n]}),r[9]=t,r[10]=n,r[11]=s):s=r[11],s}function D(e){let t,n,s,r=(0,a.c)(7),{title:o,text:l}=e;return r[0]!==o?(t=(0,i.jsx)(v.A,{as:"h3",className:E.emptyStateHeading,children:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==l?(n=(0,i.jsx)("span",{className:E.emptyStateText,children:l}),r[2]=l,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(s=(0,i.jsxs)("div",{className:E.empty,children:[t,n]}),r[4]=t,r[5]=n,r[6]=s):s=r[6],s}try{R.displayName||(R.displayName="SidebarNavigation")}catch{}try{A.displayName||(A.displayName="SidebarSection")}catch{}try{D.displayName||(D.displayName="EmptyState")}catch{}var P=n(77999),O=n(47789);let M={compactContainer:"ActivityPanel-module__compactContainer--KLMAT",dropdownContent:"ActivityPanel-module__dropdownContent--_qmdT"};function F({handleSidebarClick:e}){let t=(0,l.zy)().pathname.includes("/share/"),{threadsLoading:n,selectedThreadID:a,threads:s}=(0,f.bP)("threadsLoading","selectedThreadID","threads"),r=(0,g.b)(),o=(0,h.useMemo)(()=>r.sortAndFilterThreads(s).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[s,r]),c=0===o.length,d="loading"===n.state||"pending"===n.state;return(0,i.jsx)(A,{title:"Conversations",isEmpty:c,isLoading:d,emptyStateTitle:"No conversations yet",emptyStateText:"Ask Copilot anything on the right to start your first conversation.",children:o.map(n=>(0,i.jsx)(B,{item:n,selectedItemId:t?void 0:a??void 0,onSelect:e,threads:s},n.id))})}function B(e){let t,n,s,r,o,l,m,p,f,g,v=(0,a.c)(28),{item:b,selectedItemId:j,onSelect:w,threads:N}=e,S=b.id===j,[I,k]=(0,h.useState)(null),[T,E]=(0,h.useState)(!1);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>E(!0),v[0]=t):t=v[0];let R=t;v[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>E(!1),v[1]=n):n=v[1];let A=n,D=N.get(j),P=!!D?.customCopilotID,O=(0,h.useRef)(null);v[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,_.flushSync)(()=>k(null)),O.current?.focus()},v[2]=s):s=v[2];let M=s;v[3]!==T?(r=(0,i.jsx)(d.W.Anchor,{children:(0,i.jsx)(x.K,{loading:T,icon:c.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:$})}),v[3]=T,v[4]=r):r=v[4];let F=!!N.get(b.id)?.sharedID,B=!P;v[5]!==F||v[6]!==B?(o=(0,i.jsx)(d.W.Overlay,{children:(0,i.jsx)(u.l,{children:(0,i.jsx)(C.V,{onOpenDialog:k,isShared:F,showShare:B})})}),v[5]=F,v[6]=B,v[7]=o):o=v[7],v[8]!==r||v[9]!==o?(l=(0,i.jsxs)(d.W,{anchorRef:O,children:[r,o]}),v[8]=r,v[9]=o,v[10]=l):l=v[10],v[11]!==I||v[12]!==b.id||v[13]!==b.text||v[14]!==j?(m=(0,i.jsx)(C.p,{visibleDialog:I,onClose:M,threadName:b.text,threadId:b.id,selectedThreadId:j,onStartLoading:R,onFinishLoading:A,returnFocusRef:O}),v[11]=I,v[12]=b.id,v[13]=b.text,v[14]=j,v[15]=m):m=v[15],v[16]!==l||v[17]!==m?(p=(0,i.jsxs)(i.Fragment,{children:[l,m]}),v[16]=l,v[17]=m,v[18]=p):p=v[18];let U=p;return v[19]!==b.id||v[20]!==w?(f=()=>{w(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:b.id,mode:"immersive"})},v[19]=b.id,v[20]=w,v[21]=f):f=v[21],v[22]!==b.href||v[23]!==b.text||v[24]!==S||v[25]!==f||v[26]!==U?(g=(0,i.jsx)(L.W,{href:b.href,text:b.text,isSelected:S,trailingAction:U,onClick:f}),v[22]=b.href,v[23]=b.text,v[24]=S,v[25]=f,v[26]=U,v[27]=g):g=v[27],g}function $(){return(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function U({handleSidebarClick:e,isCondensed:t}){let n=(0,O.qw)(),a=(0,h.useMemo)(()=>n.flatMap(e=>e.activityItems?e.activityItems.map(e=>({component:e.Component,displayName:e.displayName})):[]),[n]),s=(0,i.jsxs)(R,{isCondensed:!1,"aria-label":"Navigation",children:[a.map(e=>(0,i.jsx)(A,{title:e.displayName,children:(0,i.jsx)(e.component,{})},e.displayName)),(0,i.jsx)(F,{handleSidebarClick:e})]});return t?(0,i.jsx)("div",{className:M.compactContainer,children:(0,i.jsxs)(d.W,{children:[(0,i.jsx)(d.W.Anchor,{children:(0,i.jsx)(P.m,{text:"Tasks and conversations",children:(0,i.jsx)(T.$,{"aria-label":"Tasks and conversations",icon:(0,i.jsx)(c.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(d.W.Overlay,{width:"medium",children:(0,i.jsx)("div",{className:M.dropdownContent,children:s})})]})}):s}try{F.displayName||(F.displayName="ConversationListWrapper")}catch{}try{B.displayName||(B.displayName="ConversationListEntry")}catch{}try{U.displayName||(U.displayName="ActivityPanel")}catch{}let V={quicklinks:"CopilotNavigation-module__quicklinks--y91ru",footer:"CopilotNavigation-module__footer--WE0C5",blankslateContainer:"CopilotNavigation-module__blankslateContainer--nuX9Y",ssoButton:"CopilotNavigation-module__ssoButton--cAcPq",ssoContent:"CopilotNavigation-module__ssoContent--sQStD",condensed:"CopilotNavigation-module__condensed--TzlR_"};var H=n(84646),W=n(69599),q=n(49851),z=n(26607),G=n(27359),K=n(84802),Q=n(23657);let Y={list:"ServiceList-module__list--nR74A",section:"ServiceList-module__section--k1uLc",item:"ServiceList-module__item--fn806",link:"ServiceList-module__link--VJdHH",content:"ServiceList-module__content--k6BSj",textWrapper:"ServiceList-module__textWrapper--jtpsQ",text:"ServiceList-module__text--DxTKY",label:"ServiceList-module__label--eTRas",externalLabel:"ServiceList-module__externalLabel--P9mcb",condensed:"ServiceList-module__condensed--x5s6A",previewLabel:"ServiceList-module__previewLabel--JWC5Z",externalIcon:"ServiceList-module__externalIcon--lTFBq"};function J(e){let t,n,r,o,d=(0,a.c)(18),{"aria-current":u,"data-analytics-event":h,href:p,icon:f,onLinkClick:g,id:y,displayName:x,condensed:v,label:b,external:_}=e;d[0]!==y||d[1]!==g?(t=e=>{g?.(e,y)},d[0]=y,d[1]=g,d[2]=t):t=d[2];let j=t;d[3]!==u||d[4]!==h||d[5]!==j?(n={"aria-current":u,"data-analytics-event":h,className:Y.link,onClick:j},d[3]=u,d[4]=h,d[5]=j,d[6]=n):n=d[6];let C=n;d[7]!==C||d[8]!==v||d[9]!==x||d[10]!==_||d[11]!==p||d[12]!==f||d[13]!==b?(r=_?(0,i.jsxs)("a",{href:p,className:Y.link,"aria-label":x,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:f}),(0,i.jsxs)("div",{className:(0,m.$)(Y.content,v&&Y.condensed),children:[(0,i.jsx)("div",{className:Y.textWrapper,children:(0,i.jsx)("div",{className:Y.text,children:x})}),(0,i.jsx)("div",{className:Y.label,children:(0,i.jsxs)("div",{className:Y.externalLabel,children:[(0,i.jsx)("span",{className:Y.previewLabel,children:b}),(0,i.jsx)(c.ArrowUpRightIcon,{className:Y.externalIcon})]})})]})]}):(0,i.jsxs)(l.N_,{to:p,...C,"aria-label":x,children:[(0,i.jsx)(s.I,{size:16,icon:f}),(0,i.jsxs)("div",{className:(0,m.$)(Y.content,v&&Y.condensed),children:[(0,i.jsx)("div",{className:Y.textWrapper,children:(0,i.jsx)("div",{className:Y.text,children:x})}),(0,i.jsx)("div",{className:Y.label,children:b})]})]}),d[7]=C,d[8]=v,d[9]=x,d[10]=_,d[11]=p,d[12]=f,d[13]=b,d[14]=r):r=d[14];let w=r,N=v?x:"";return d[15]!==w||d[16]!==N?(o=(0,i.jsx)("li",{className:Y.section,children:(0,i.jsx)("div",{className:Y.item,children:(0,i.jsx)(P.m,{text:N,children:w})})}),d[15]=w,d[16]=N,d[17]=o):o=d[17],o}let X=JSON.stringify({source:"ServiceList"});function Z({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,f.Pk)(),a=(0,G.v)()?.id,s=(0,O.qw)(),r=(0,K.G)(),o=(0,H.BV)(),l=(0,Q.mM)(),c=!n&&!a&&!l,d=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},u=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),m=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),p=!(0,W.G7)("copilot_spaces_ga"),g=(0,h.useMemo)(()=>[...o?[{type:"spaces",component:(0,i.jsx)(J,{"aria-current":l?"page":void 0,"data-analytics-event":X,displayName:"Spaces",href:j.VR,icon:q.Dy,condensed:t,id:"spaces",onLinkClick:u,label:p&&(0,i.jsx)(z.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(J,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":X,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:m,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[o,l,t,u,p,s,a,m]);return(0,i.jsxs)("ul",{className:Y.list,children:[(0,i.jsx)(J,{"aria-current":c?"page":void 0,"data-analytics-event":X,displayName:"New chat",href:j.Jz,icon:q.KJ,condensed:t,id:"home",onLinkClick:d}),g.map(e=>e.component)]})}try{J.displayName||(J.displayName="ServiceListItem")}catch{}try{Z.displayName||(Z.displayName="ServiceList")}catch{}var ee=n(77430),et=n(51213),en=n(98755),ei=n(71315),ea=n(15042),es=n(46251),er=n(69726),eo=n(1805),el=n(26382),ec=n(10006),ed=n(3803);let eu={dialog:"ManageSharedConversationsDialog-module__dialog--_C8sX",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--iuECd",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--mA28C",footer:"ManageSharedConversationsDialog-module__footer--aTXFp",mutedText:"ManageSharedConversationsDialog-module__mutedText--_uOci",footerContent:"ManageSharedConversationsDialog-module__footerContent--yVU91",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",footerRight:"ManageSharedConversationsDialog-module__footerRight--n1XJG",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--tYQ41",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--JqMKE"};var em=n(21373),eh=n(20139);let ep={container:"UnshareConversationDialog-module__container--Tc1R_",buttonStack:"UnshareConversationDialog-module__buttonStack--JvbNF",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--gcf6y",threadTitle:"UnshareConversationDialog-module__threadTitle--eBgrX",threadDescription:"UnshareConversationDialog-module__threadDescription--E1H0T"},ef=e=>{let t,n,s,r,o,l,c,d,u,m,p,x,v,b,_,j,C,w,N,S,I=(0,a.c)(60),{closeDialog:k,threadId:T}=e,L=(0,f.Pk)(),E=(0,g.b)(),{selectedThreadID:R,ssoOrganizations:A,apiUrl:D,threads:P}=L,[O,M]=(0,h.useState)(L.messages);I[0]!==T||I[1]!==P?(t=()=>{let e=P.get(T);return e?.sharedID||""},I[0]=T,I[1]=P,I[2]=t):t=I[2];let[F,B]=(0,h.useState)(t),$=(0,h.useRef)(""!==F),U=(0,h.useRef)("");I[3]!==O||I[4]!==F||I[5]!==L.apiUrl||I[6]!==L.ssoOrganizations||I[7]!==T?(n=()=>{let e=async()=>{if(0===O.filter(e=>e.threadID===T).length){let e=new eh.k(L.apiUrl,L.ssoOrganizations),t=await e.listSharedThreadMessages(F);t.ok&&M(t.payload.messages)}};U.current!==F&&F&&(U.current=F,e())},s=[F,T,O,L.apiUrl,L.ssoOrganizations],I[3]=O,I[4]=F,I[5]=L.apiUrl,I[6]=L.ssoOrganizations,I[7]=T,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,h.useEffect)(n,s),I[10]!==R||I[11]!==T||I[12]!==P?(r=P.get(T||R),I[10]=R,I[11]=T,I[12]=P,I[13]=r):r=I[13];let V=r,H=O[O.length-1],W=H?.content||"";I[14]!==R||I[15]!==T||I[16]!==P?(o=()=>{let e=T||R;if(e){let t=P.get(e);B(t?.sharedID||"")}},I[14]=R,I[15]=T,I[16]=P,I[17]=o):o=I[17],I[18]!==E||I[19]!==R||I[20]!==T||I[21]!==P?(l=[E,B,R,P,T],I[18]=E,I[19]=R,I[20]=T,I[21]=P,I[22]=l):l=I[22],(0,h.useEffect)(o,l),I[23]!==D||I[24]!==k||I[25]!==E||I[26]!==R||I[27]!==F||I[28]!==A||I[29]!==T?(c=async()=>{let e=T||R,t=new eh.k(D,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;E.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),$.current=!1,k(),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:F})}},I[23]=D,I[24]=k,I[25]=E,I[26]=R,I[27]=F,I[28]=A,I[29]=T,I[30]=c):c=I[30];let q=c;I[31]!==k?(d=()=>{k()},I[31]=k,I[32]=d):d=I[32];let z=d;I[33]!==q||I[34]!==F?(u=()=>{if(F)return(0,i.jsx)(em.Q,{onClick:q,variant:"danger",children:"Unshare"})},I[33]=q,I[34]=F,I[35]=u):u=I[35];let G=u;I[36]!==k?(m=()=>(0,i.jsx)(em.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let K=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=p):p=I[38];let Q=V?.name||"";return I[39]!==Q?(x=(0,i.jsx)("span",{className:ep.threadTitle,children:Q}),I[39]=Q,I[40]=x):x=I[40],I[41]!==W?(v=(0,i.jsx)("span",{className:ep.threadDescription,children:W}),I[41]=W,I[42]=v):v=I[42],I[43]!==x||I[44]!==v?(b=(0,i.jsxs)(es.B,{direction:"vertical",className:ep.threadInfoStack,children:[x,v]}),I[43]=x,I[44]=v,I[45]=b):b=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=_):_=I[46],I[47]!==K?(j=K(),I[47]=K,I[48]=j):j=I[48],I[49]!==G?(C=G(),I[49]=G,I[50]=C):C=I[50],I[51]!==j||I[52]!==C?(w=(0,i.jsxs)(es.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:ep.buttonStack,children:[j,C]}),I[51]=j,I[52]=C,I[53]=w):w=I[53],I[54]!==b||I[55]!==w?(N=(0,i.jsxs)("div",{className:ep.container,children:[p,b,_,w]}),I[54]=b,I[55]=w,I[56]=N):N=I[56],I[57]!==z||I[58]!==N?(S=(0,i.jsx)(ea.l,{title:"Unshare conversation",onClose:z,width:"large",children:N}),I[57]=z,I[58]=N,I[59]=S):S=I[59],S};try{ef.displayName||(ef.displayName="UnshareConversationDialog")}catch{}let eg=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ey=({closeDialog:e,returnFocusRef:t})=>{let n=(0,g.b)(),a=(0,f.Pk)(),[s,r]=(0,h.useState)(0),[o,l]=(0,h.useState)([]),[d,u]=(0,h.useState)(!0),[m,p]=(0,h.useState)(!1),[v,b]=(0,h.useState)(null),[_,j]=(0,h.useState)(!1),[C,w]=(0,h.useState)(5>o.length),N=5*s,S=o.slice(N,N+5);(0,h.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eg(e.updatedAt),sharedUrl:`${ei.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ei.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,h.useEffect)(()=>{C&&s>0&&o.length<=5*s&&r(0);let e=5<o.length;e!==C&&w(e)},[o,s,5,C]);let I=(0,h.useCallback)(()=>{e()},[e]),k=(0,h.useCallback)(async()=>{if(!_)return void j(!0);j(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(l([]),await n.fetchThreads())}finally{u(!1)}},[_,n]),T=async()=>{p(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eg(e.updatedAt),sharedUrl:`${ei.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ei.fV.origin}/copilot/c/${e.id}`}))),u(!1)},L=d||"error"===a.sharedThreadsLoading.state||0===o.length,E=(0,h.useMemo)(()=>{if(!o.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{_?k():j(!0)}};return _?[{buttonType:"default",content:"Cancel",onClick:()=>j(!1)},e]:[e]},[o.length,_,k]),R=(0,h.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,a.sharedThreadsLoading.state]);return(0,i.jsxs)(ea.l,{title:"Manage shared conversations",width:"xlarge",className:eu.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>E?.length?(0,i.jsx)(ea.l.Footer,{className:eu.footer,children:(0,i.jsxs)("div",{className:eu.footerContent,children:[(0,i.jsx)("div",{className:eu.footerLeft,children:_&&(0,i.jsx)("div",{className:`${eu.confirmationText} ${eu.quickFadeUp}`,children:(e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`)(o.length)})}),(0,i.jsx)("div",{className:eu.footerRight,children:(0,i.jsx)(ea.l.Buttons,{buttons:E})})]})}):null,children:[L?(0,i.jsxs)(el.E,{children:[(0,i.jsx)(el.E.Visual,{children:R.isSpinner?(0,i.jsx)(es.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(er.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:eu.mutedText,children:"error"===R.result?(0,i.jsx)(c.AlertIcon,{size:"medium",className:eu.alertIcon,"aria-label":"Error loading shared conversations"}):(0,i.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(el.E.Heading,{children:R.heading}),(0,i.jsx)(el.E.Description,{children:R.description})]}):(0,i.jsxs)(ec.X.Container,{children:[(0,i.jsx)(ed.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(eo.A,{href:e.threadUrl,className:eu.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:eu.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:eu.actionButtons,children:[(0,i.jsx)(en.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(x.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),p(!0)}})]})})}],data:S}),o.length>5&&(0,i.jsx)(ec.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:s,totalCount:o.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&v&&(0,i.jsx)(ef,{threadId:v.id,closeDialog:T})]})};try{ey.displayName||(ey.displayName="ManageSharedConversationsDialog")}catch{}var ex=n(17005),ev=n(87255);let eb={userButton:"UserMenu-module__userButton--FuXsC",condensed:"UserMenu-module__condensed--rjzRR",userContent:"UserMenu-module__userContent--jXldm",userAvatar:"UserMenu-module__userAvatar--sp40T",menuItem:"UserMenu-module__menuItem--oXBxi",userDetails:"UserMenu-module__userDetails--mes1V",username:"UserMenu-module__username--n5Tln",description:"UserMenu-module__description--FvI5s"};function e_(e){let t,n,s,r,o,l,p,g,x,v,b,_,j,C,w,N,S,I,k,T,L,E,R,A,D=(0,a.c)(51),{isCondensed:P}=e,O=void 0!==P&&P,M=(0,h.useRef)(null),F=(0,h.useRef)(null),[B,$]=(0,h.useState)(!1),[U,V]=(0,h.useState)(!1),{currentUserLogin:H,plan:W}=(0,f.bP)("currentUserLogin","plan"),q=(0,Q.mM)(),z=O&&eb.condensed;D[0]!==z?(t=(0,m.$)(eb.userButton,z),D[0]=z,D[1]=t):t=D[1];let G=O?"user":void 0,K=`/${H}.png`;D[2]!==K?(n=(0,i.jsx)("div",{className:eb.userAvatar,children:(0,i.jsx)(ee.r,{src:K,size:20})}),D[2]=K,D[3]=n):n=D[3],D[4]!==H?(s=(0,i.jsx)("div",{className:eb.userContent,children:H}),D[4]=H,D[5]=s):s=D[5],D[6]!==t||D[7]!==G||D[8]!==n||D[9]!==s?(r=(0,i.jsx)(d.W.Anchor,{children:(0,i.jsxs)("button",{className:t,"aria-label":G,children:[n,s]})}),D[6]=t,D[7]=G,D[8]=n,D[9]=s,D[10]=r):r=D[10];let Y=`/${H}`,J=`/${H}.png`;return D[11]!==J?(o=(0,i.jsx)("div",{className:eb.userAvatar,children:(0,i.jsx)(ee.r,{src:J,size:32})}),D[11]=J,D[12]=o):o=D[12],D[13]!==H?(l=(0,i.jsx)("div",{className:eb.username,children:H}),D[13]=H,D[14]=l):l=D[14],D[15]!==W?(p=function(e){switch(e){case et.UH.IndividualFree:return"Free";case et.UH.IndividualPro:return"Pro";case et.UH.IndividualProPlus:return"Pro+";case et.UH.Business:return"Business";case et.UH.Enterprise:return"Enterprise";default:return"Free"}}(W),D[15]=W,D[16]=p):p=D[16],D[17]!==p?(g=(0,i.jsxs)("span",{className:eb.description,children:["Copilot ",p]}),D[17]=p,D[18]=g):g=D[18],D[19]!==l||D[20]!==g?(x=(0,i.jsxs)("div",{className:eb.userDetails,children:[l,g]}),D[19]=l,D[20]=g,D[21]=x):x=D[21],D[22]!==o||D[23]!==x?(v=(0,i.jsxs)("div",{className:eb.menuItem,children:[o,x]}),D[22]=o,D[23]=x,D[24]=v):v=D[24],D[25]!==v||D[26]!==Y?(b=(0,i.jsx)(u.l.LinkItem,{href:Y,children:v}),D[25]=v,D[26]=Y,D[27]=b):b=D[27],D[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)(u.l.Divider,{}),D[28]=_):_=D[28],D[29]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{V(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},D[29]=j):j=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsxs)(u.l.Item,{onSelect:j,children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),D[30]=C):C=D[30],D[31]!==q?(w=!q&&(0,i.jsxs)(u.l.Item,{onSelect:()=>{$(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),D[31]=q,D[32]=w):w=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{F.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},D[33]=N):N=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(S=(0,i.jsxs)(u.l.Item,{onSelect:N,children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(c.CommentIcon,{})}),"Give feedback"]}),D[34]=S):S=D[34],D[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsxs)(u.l.LinkItem,{href:"/settings/copilot",onClick:ej,children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(c.GearIcon,{})}),"Settings"]}),D[35]=I):I=D[35],D[36]!==b||D[37]!==w?(k=(0,i.jsx)(d.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(u.l,{children:[b,_,C,w,S,I]})}),D[36]=b,D[37]=w,D[38]=k):k=D[38],D[39]!==k||D[40]!==r?(T=(0,i.jsxs)(d.W,{anchorRef:M,children:[r,k]}),D[39]=k,D[40]=r,D[41]=T):T=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(L=(0,i.jsx)(ex.l,{ref:F,mode:"immersive",returnFocusRef:M}),D[42]=L):L=D[42],D[43]!==B?(E=B&&(0,i.jsx)(ey,{closeDialog:()=>{$(!1)},returnFocusRef:M}),D[43]=B,D[44]=E):E=D[44],D[45]!==U?(R=U&&(0,i.jsx)(ev.Y,{onDismiss:()=>V(!1),returnFocusRef:M}),D[45]=U,D[46]=R):R=D[46],D[47]!==T||D[48]!==E||D[49]!==R?(A=(0,i.jsxs)(i.Fragment,{children:[T,L,E,R]}),D[47]=T,D[48]=E,D[49]=R,D[50]=A):A=D[50],A}function ej(){return(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{e_.displayName||(e_.displayName="UserMenu")}catch{}function eC(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:o,toggleSidebar:l}=(0,r.L)();return t[0]!==o||t[1]!==n||t[2]!==s||t[3]!==l?(e=(0,i.jsx)(ew,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:o,onToggleSidebar:l}),t[0]=o,t[1]=n,t[2]=s,t[3]=l,t[4]=e):e=t[4],e}function ew(e){let t,n,r,y,x,v,b,_,j,C,w,S,I,k,T,L,E=(0,a.c)(48),{onSidebarClick:R,onToggleSidebar:A,sidebarExpanded:D,sidebarFloating:P,sidebarVisible:O}=e,M=!P&&!D,F=(0,g.b)(),{threadsLoading:B,threads:$,selectedThreadID:H,ssoOrganizations:W}=(0,f.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations"),q=(0,l.zy)();E[0]!==q.pathname?(t=q.pathname.includes("/share/"),E[0]=q.pathname,E[1]=t):t=E[1];let z=t;E[2]!==F||E[3]!==$.size||E[4]!==B.state?(n=()=>{0===$.size&&"pending"===B.state&&F.fetchThreads()},r=[$.size,F,B.state],E[2]=F,E[3]=$.size,E[4]=B.state,E[5]=n,E[6]=r):(n=E[5],r=E[6]),(0,h.useEffect)(n,r),E[7]!==R||E[8]!==O||E[9]!==A?(y=()=>{R?.(),O&&A()},E[7]=R,E[8]=O,E[9]=A,E[10]=y):y=E[10];let G=y,K=(0,h.useId)();E[11]!==q.hash||E[12]!==q.pathname||E[13]!==q.search?(x=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=q.pathname+q.search+q.hash;return`${t}?return_to=${encodeURIComponent(n)}`},E[11]=q.hash,E[12]=q.pathname,E[13]=q.search,E[14]=x):x=E[14];let Q=x;E[15]!==Q||E[16]!==M||E[17]!==W?(v=()=>{if(0===W.length)return null;if(1===W.length){let e=W[0];return(0,i.jsxs)("a",{href:Q(e.login),className:V.ssoButton,children:[(0,i.jsx)(c.ShieldLockIcon,{size:16}),(0,i.jsx)("span",{className:(0,m.$)(V.ssoContent,M&&V.condensed),children:"Single sign-on"})]})}return(0,i.jsxs)(d.W,{children:[(0,i.jsx)(d.W.Anchor,{children:(0,i.jsxs)("button",{className:V.ssoButton,"aria-label":"Single sign on",children:[(0,i.jsx)(s.I,{icon:c.ShieldLockIcon,size:16}),(0,i.jsx)("div",{className:(0,m.$)(V.ssoContent,M&&V.condensed),children:"Single sign-on"})]})}),(0,i.jsx)(d.W.Overlay,{children:(0,i.jsx)(u.l,{children:W.map(e=>(0,i.jsx)(u.l.LinkItem,{href:Q(e.login),children:e.login},e.login))})})]})},E[15]=Q,E[16]=M,E[17]=W,E[18]=v):v=E[18];let Y=v;E[19]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eN,{}),E[19]=b):b=E[19];let J=`${K}-quick-links`,X=`${K}-quick-links`;return E[20]!==X?(_=(0,i.jsx)("h3",{id:X,className:"sr-only",children:"Quick links"}),E[20]=X,E[21]=_):_=E[21],E[22]!==G||E[23]!==M?(j=(0,i.jsx)(Z,{isSidebarCondensed:M,toggleFloatingSidebar:G}),E[22]=G,E[23]=M,E[24]=j):j=E[24],E[25]!==_||E[26]!==j||E[27]!==J?(C=(0,i.jsxs)("nav",{"aria-labelledby":J,className:V.quicklinks,children:[_,j]}),E[25]=_,E[26]=j,E[27]=J,E[28]=C):C=E[28],E[29]!==G||E[30]!==M||E[31]!==z||E[32]!==H||E[33]!==B.state?(w=p.W.copilotMissionControl?(0,i.jsx)(U,{handleSidebarClick:G,isCondensed:M}):(0,i.jsx)(N,{selectedItemID:z?null:H,loadingState:B.state,onConversationSelect:G,isSidebarCondensed:M}),E[29]=G,E[30]=M,E[31]=z,E[32]=H,E[33]=B.state,E[34]=w):w=E[34],E[35]!==C||E[36]!==w?(S=(0,i.jsxs)(o.t,{fallback:b,children:[C,w]}),E[35]=C,E[36]=w,E[37]=S):S=E[37],E[38]!==Y?(I=Y(),E[38]=Y,E[39]=I):I=E[39],E[40]!==M?(k=(0,i.jsx)(e_,{isCondensed:M}),E[40]=M,E[41]=k):k=E[41],E[42]!==I||E[43]!==k?(T=(0,i.jsxs)("div",{className:V.footer,children:[I,k]}),E[42]=I,E[43]=k,E[44]=T):T=E[44],E[45]!==S||E[46]!==T?(L=(0,i.jsxs)(i.Fragment,{children:[S,T]}),E[45]=S,E[46]=T,E[47]=L):L=E[47],L}function eN(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:V.blankslateContainer,children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{eC.displayName||(eC.displayName="CopilotNavigationWithContext")}catch{}try{ew.displayName||(ew.displayName="CopilotNavigation")}catch{}try{eN.displayName||(eN.displayName="SidebarContentsFallback")}catch{}},1747:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>M,tZ:()=>F,wI:()=>B});var i=n(74848),a=n(21728),s=n(2635),r=n(35247),o=n(42312),l=n(33535),c=n(6551),d=n(40104),u=n(96540),m=n(93380),h=n(79064),p=n(7812),f=n(41649),g=n(33592),y=n(25641),x=n(82075),v=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],_=e=>!!e.isUserEdited,j=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,v.A)(t.get(e),n)),C=(e,t)=>!j(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),w=(e,t)=>!j(new Map(Array.from(e).filter(([,e])=>_(e))),new Map(Array.from(t).filter(([,e])=>_(e))));function N(e){return[e.id,e]}function S(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function T(e){return(0,p.PO)(e)}let L=(0,u.createContext)(void 0),E=new Map,R=[];function A(e){let t,n,d,v,j,A,M,F,B,$,U,V,H,W,q,z=(0,a.c)(55),{children:G}=e,K=(0,l.AI)(!1),Q=(0,l.AI)(!1),Y=(0,o.U)(),[J,X]=(0,u.useState)(E),[Z,ee]=(0,u.useState)(R),[et,en]=(0,u.useState)(R),[ei,ea]=(0,u.useState)(void 0),[es,er,eo]=(0,m.B)(!1),el=(0,c.S)((0,s.pn)(P)),ec=(0,s.pn)(D);z[0]!==K||z[1]!==el||z[2]!==ec?(t=()=>{el&&el!==ec&&(X(E),ee(R),ea(void 0),null===ec&&K.setValue(!1))},n=[ec,el,K],z[0]=K,z[1]=el,z[2]=ec,z[3]=t,z[4]=n):(t=z[3],n=z[4]),(0,u.useEffect)(t,n),z[5]===Symbol.for("react.memo_cache_sentinel")?(d=(e,t)=>{let n=void 0===t||t;ee(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),i=t.findIndex(e=>(0,p.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),ea(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},z[5]=d):d=z[5];let ed=d;z[6]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{X(t=>{let n=new Map(t);return n.set(e.id,e),n})},z[6]=v):v=z[6];let eu=v;z[7]!==Z||z[8]!==ei?(j=e=>{let t=Z.indexOf(e);if(-1===t)return;let n=Z.toSpliced(t,1);ei===e&&ea(n[t-1]??n[0]),ee(n)},z[7]=Z,z[8]=ei,z[9]=j):j=z[9];let em=(0,f.K)(j);z[10]!==Z||z[11]!==ei?(A=e=>{if(e){let t=Z;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ei===n&&ea(t[e-1]??t[0]))}ee(t)}else ee(R),ea(void 0)},z[10]=Z,z[11]=ei,z[12]=A):A=z[12];let eh=(0,f.K)(A);if(z[13]!==J){for(let[e,t]of(M=new Map,J)){let n=(0,p.oy)(e),i=M.get(n)??[];i.push(t.id),M.set(n,i)}for(let e of M.values())e.sort((e,t)=>{let n=J.get(e),i=J.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});z[13]=J,z[14]=M}else M=z[14];let ep=M;z[15]!==em||z[16]!==Z||z[17]!==ep?(F=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),Z.includes(t)){let e=(0,p.oy)(t),n=ep.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?ed(a,!1):em(t)}}else X(E),ee(R),ea(void 0)},z[15]=em,z[16]=Z,z[17]=ep,z[18]=F):F=z[18];let ef=(0,f.K)(F);z[19]!==K.value||z[20]!==Z?(B=()=>K.value?Z:R,z[19]=K.value,z[20]=Z,z[21]=B):B=z[21];let eg=(0,f.K)(B);z[22]!==Y||z[23]!==K?($=()=>{K.setValue(!0),queueMicrotask(()=>{Y.current?.focus()})},z[22]=Y,z[23]=K,z[24]=$):$=z[24];let ey=$;z[25]!==K||z[26]!==Q?(U=()=>{K.setValue(!1),Q.setValue(!1)},z[25]=K,z[26]=Q,z[27]=U):U=z[27];let ex=U;z[28]!==Q?(V=()=>Q.setValue(!0),z[28]=Q,z[29]=V):V=z[29];let ev=V;z[30]!==Q?(H=()=>Q.setValue(!1),z[30]=Q,z[31]=H):H=z[31];let eb=H;z[32]!==em||z[33]!==eh||z[34]!==ex||z[35]!==eb||z[36]!==Y||z[37]!==eo||z[38]!==er||z[39]!==eg||z[40]!==K||z[41]!==Q||z[42]!==J||z[43]!==Z||z[44]!==et||z[45]!==ey||z[46]!==ev||z[47]!==ef||z[48]!==ei||z[49]!==es||z[50]!==ep?(W={items:J,versionedItems:ep,contentPreviewRef:Y,isContentPreviewOpen:K,isResourcePanelOpen:Q,getOpenItems:eg,allOpenItems:Z,openItemsBeforeSubthreadChange:et,selectedItem:ei,updateItem:eu,setOpenItemsBeforeSubthreadChange:en,openItem:ed,closeItem:em,closeItems:eh,openPreviewPane:ey,closePreviewPane:ex,openResourcePanel:ev,closeResourcePanel:eb,removeItems:ef,showLoadingState:es,enableLoadingState:er,disableLoadingState:eo},z[32]=em,z[33]=eh,z[34]=ex,z[35]=eb,z[36]=Y,z[37]=eo,z[38]=er,z[39]=eg,z[40]=K,z[41]=Q,z[42]=J,z[43]=Z,z[44]=et,z[45]=ey,z[46]=ev,z[47]=ef,z[48]=ei,z[49]=es,z[50]=ep,z[51]=W):W=z[51];let e_=W;return!function(e){let t,n,i=(0,a.c)(6),{updateItem:o,openItem:l,openPreviewPane:c}=e,d=(0,s.Pk)();i[0]!==d||i[1]!==l||i[2]!==c||i[3]!==o?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=h.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of(d.currentReferences.push(...e),e)){let e=(0,p.g)(t);o(e),l(e.id)}c(),h.Jt.removeCopilotDiffReferences()}},n=[o,l,c,d],i[0]=d,i[1]=l,i[2]=c,i[3]=o,i[4]=t,i[5]=n):(t=i[4],n=i[5]),(0,u.useEffect)(t,n)}(e_),O(e_),!function(e){let t,n,i,o=(0,a.c)(10),{items:l,removeItems:c,updateItem:d}=e,{currentReferences:m,messages:h,selectedThreadID:f}=(0,s.Pk)(),v=(0,g.b)(),j=(0,u.useRef)(l),L=(0,u.useRef)(m);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.A)("sessionStorage"),o[0]=t):t=o[0];let E=t;o[1]!==m||o[2]!==l||o[3]!==v||o[4]!==h.length||o[5]!==c||o[6]!==f||o[7]!==d?(n=()=>{let e=w(j.current,l);j.current=l;let t=C(L.current,m);if(L.current=m,e){let e=new Map(Array.from(l.values()).filter(_).map(T).filter(k).map(I)),t=new Set;for(let n of m)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?C([a],[n])&&v.addReference(a,"content-preview"):v.removeReference(n)}for(let[n,i]of e)t.has(n)||v.addReference(i,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,p.oR)({ref:e,messageIndex:h.length})).filter(S).map(N)),t=new Set;for(let[n,i]of l)if(_(i)){t.add(n);let a=e.get(n);null!=a?w(new Map([[a.id,a]]),new Map([[i.id,i]]))&&d(a):(c([n]),r.W.copilotPersistEditedDraftIssues&&E.removeItem(`edited-${f}-${n}`))}for(let[n,i]of e)t.has(n)||d(i)}},i=[l,v,m,h.length,c,d,E,f],o[1]=m,o[2]=l,o[3]=v,o[4]=h.length,o[5]=c,o[6]=f,o[7]=d,o[8]=n,o[9]=i):(n=o[8],i=o[9]),(0,u.useEffect)(n,i)}(e_),z[52]!==G||z[53]!==e_?(q=(0,i.jsx)(L.Provider,{value:e_,children:G}),z[52]=G,z[53]=e_,z[54]=q):q=z[54],q}function D(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let O=e=>{let t,n,i,o=(0,a.c)(8),{updateItem:l}=e,{messagesLoading:c,selectedThreadID:m}=(0,s.Pk)(),h=`edited-${m}`;if(r.W.copilotPersistEditedDraftIssues){let e;o[0]!==h?(e=(0,d.MV)(h),o[0]=h,o[1]=e):e=o[1],t=e}else{let e;o[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[2]=e):e=o[2],t=e}let p=t;o[3]!==p||o[4]!==c.state||o[5]!==l?(n=()=>{if(p&&"loaded"===c.state)for(let e of p)l(e)},i=[p,l,c.state],o[3]=p,o[4]=c.state,o[5]=l,o[6]=n,o[7]=i):(n=o[6],i=o[7]),(0,u.useEffect)(n,i)};function M(){let e=(0,u.useContext)(L);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function F(){let e=(0,u.useContext)(L);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isContentPreviewOpen)}function B(){let e=(0,u.useContext)(L);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isResourcePanelOpen)}try{L.displayName||(L.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},2691:(e,t,n)=>{n.d(t,{I:()=>d});var i=n(74848),a=n(21728),s=n(73017),r=n(1992),o=n(5524),l=n(96540),c=n(15440);function d(e){let t,n,d,u,m,h,p=(0,a.c)(21),{group:f,onEntrySelect:g}=e,[y,x]=(0,l.useState)(!1),v=(0,l.useRef)(null);p[0]!==y?(t=()=>{x(!y)},p[0]=y,p[1]=t):t=p[1];let b=t;if(p[2]!==f.color||p[3]!==f.icon||p[4]!==f.id||p[5]!==f.name||p[6]!==b||p[7]!==y?(n=(0,i.jsx)(r.W.Anchor,{children:(0,i.jsx)(c.Z,{ref:v,testId:f.id,name:f.name,icon:f.icon,color:f.color,onClick:b,dropdown:!0,open:y})}),p[2]=f.color,p[3]=f.icon,p[4]=f.id,p[5]=f.name,p[6]=b,p[7]=y,p[8]=n):n=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(d={width:"260px"},p[9]=d):d=p[9],p[10]!==f.entries||p[11]!==g){let e;p[13]!==g?(e=e=>(0,i.jsx)(o.l.Item,{onSelect:()=>g(e),children:(0,i.jsx)(s.$6,{html:e.titleHtml})},e.id),p[13]=g,p[14]=e):e=p[14],u=f.entries.map(e),p[10]=f.entries,p[11]=g,p[12]=u}else u=p[12];return p[15]!==u?(m=(0,i.jsx)(r.W.Overlay,{style:d,children:(0,i.jsx)(o.l,{children:u})}),p[15]=u,p[16]=m):m=p[16],p[17]!==y||p[18]!==n||p[19]!==m?(h=(0,i.jsx)("li",{children:(0,i.jsxs)(r.W,{open:y,onOpenChange:x,children:[n,m]})}),p[17]=y,p[18]=n,p[19]=m,p[20]=h):h=p[20],h}try{d.displayName||(d.displayName="StarterGroupWithMenu")}catch{}},15440:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(74848),a=n(21728),s=n(82595),r=n(38621),o=n(96540);let l={container:"StarterPill-module__container--d2dFs",icon:"StarterPill-module__icon--GKvj8",title:"StarterPill-module__title--Nsp36",dropdown:"StarterPill-module__dropdown--NngRn"},c=o.forwardRef((e,t)=>{let n,o,c,d,u=(0,a.c)(15),{testId:m,name:h,icon:p,color:f,onClick:g,dropdown:y,open:x}=e,v=`starter-${m}`;return u[0]!==f||u[1]!==p?(n=s.I&&(0,i.jsx)("div",{className:l.icon,children:(0,i.jsx)(s.I,{icon:p,color:f})}),u[0]=f,u[1]=p,u[2]=n):n=u[2],u[3]!==y?(o=y&&(0,i.jsx)("div",{className:l.dropdown,children:(0,i.jsx)(r.TriangleDownIcon,{})}),u[3]=y,u[4]=o):o=u[4],u[5]!==h||u[6]!==o?(c=(0,i.jsxs)("div",{className:l.title,children:[h,o]}),u[5]=h,u[6]=o,u[7]=c):c=u[7],u[8]!==g||u[9]!==x||u[10]!==t||u[11]!==v||u[12]!==n||u[13]!==c?(d=(0,i.jsxs)("button",{ref:t,className:l.container,onClick:g,"aria-expanded":x,"data-testid":v,children:[n,c]}),u[8]=g,u[9]=x,u[10]=t,u[11]=v,u[12]=n,u[13]=c,u[14]=d):d=u[14],d});c.displayName="StarterPill"},70324:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),o=n(1992),l=n(5524),c=n(73783),d=n(26108);function u(e){let t,n,u,m,h=(0,a.c)(37),{value:p,isLoading:f,onClick:g,onStop:y,variant:x,disabled:v,iconOnly:b,showPickInputsOption:_,onRunWithInputs:j,leadingVisual:C}=e,w=void 0===x?"invisible":x;h[0]!==f||h[1]!==p?(t=()=>f?"Loading...":p?"Run node":"Run loop",h[0]=f,h[1]=p,h[2]=t):t=h[2];let N=t;h[3]!==f||h[4]!==g||h[5]!==y?(n=e=>{f?y?.(e):g(e)},h[3]=f,h[4]=g,h[5]=y,h[6]=n):n=h[6];let S=n;h[7]!==j?(u=()=>{j?.()},h[7]=j,h[8]=u):u=h[8];let I=u;if(void 0!==_&&_&&!f&&!b){let e,t,n,a,d;return h[9]!==v||h[10]!==S||h[11]!==C||h[12]!==w?(e=(0,i.jsx)(r.Q,{disabled:v,variant:w,onClick:S,leadingVisual:C,children:"Run"}),h[9]=v,h[10]=S,h[11]=C,h[12]=w,h[13]=e):e=h[13],h[14]!==v||h[15]!==w?(t=(0,i.jsx)(o.W.Button,{disabled:v,variant:w,icon:s.TriangleDownIcon,"aria-label":"More run options"}),h[14]=v,h[15]=w,h[16]=t):t=h[16],h[17]!==I?(n=(0,i.jsx)(o.W.Overlay,{children:(0,i.jsx)(l.l,{children:(0,i.jsx)(l.l.Item,{onSelect:I,children:"Run with custom inputs"})})}),h[17]=I,h[18]=n):n=h[18],h[19]!==t||h[20]!==n?(a=(0,i.jsxs)(o.W,{children:[t,n]}),h[19]=t,h[20]=n,h[21]=a):a=h[21],h[22]!==e||h[23]!==a?(d=(0,i.jsxs)(c.A,{children:[e,a]}),h[22]=e,h[23]=a,h[24]=d):d=h[24],d}if(!b){let e,t=f?"danger":w,n=f?"Stop":"Run";return h[25]!==v||h[26]!==S||h[27]!==C||h[28]!==t||h[29]!==n?(e=(0,i.jsx)(r.Q,{disabled:v,variant:t,onClick:S,leadingVisual:C,children:n}),h[25]=v,h[26]=S,h[27]=C,h[28]=t,h[29]=n,h[30]=e):e=h[30],e}let k=N(),T=f?s.SquareFillIcon:s.SyncIcon,L=f?"danger":w;return h[31]!==v||h[32]!==S||h[33]!==k||h[34]!==T||h[35]!==L?(m=(0,i.jsx)(d.K,{disabled:v,"aria-label":k,icon:T,onClick:S,variant:L}),h[31]=v,h[32]=S,h[33]=k,h[34]=T,h[35]=L,h[36]=m):m=h[36],m}try{u.displayName||(u.displayName="ExecuteButton")}catch{}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(21728),s=n(5524),r=n(1992),o=n(40928),l=n(96540),c=n(38621),d=n(295),u=n(53419),m=n(25641),h=n(13017),p=n(25407),f=n(64917),g=n(35247);function y(e){let t,n,y,v,b,_,j,C,w,N,S,I,k,T,L,E,R,A,D,P,O=(0,a.c)(66),{onDelete:M,onCopyLoop:F,onDuplicate:B,onShare:$,onEdit:U,onCopyOutput:V,onRename:H,loopId:W,hasOutput:q,returnFocusRef:z}=e,G=void 0!==q&&q,[K,Q]=(0,l.useState)(null),{mutate:Y}=(0,d.h)(),{ownerLogin:J,owned:X,loopURL:Z}=(0,f.I)(x);O[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},O[0]=t):t=O[0];let ee=t;O[1]!==z?(n=()=>{Q(null),setTimeout(()=>z?.current?.focus())},O[1]=z,O[2]=n):n=O[2];let et=n;O[3]!==Y||O[4]!==W||O[5]!==M?(y=async()=>{W&&(Q(null),Y(W,{onSuccess:M}))},O[3]=Y,O[4]=W,O[5]=M,O[6]=y):y=O[6];let en=y;O[7]!==W||O[8]!==B?(v=()=>{W&&B&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),B(W))},O[7]=W,O[8]=B,O[9]=v):v=O[9];let ei=v;O[10]!==$?(b=()=>{$?.()},O[10]=$,O[11]=b):b=O[11];let ea=b;O[12]!==U?(_=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),U?.()},O[12]=U,O[13]=_):_=O[13];let es=_;O[14]!==V?(j=()=>{V&&V()},O[14]=V,O[15]=j):j=O[15];let er=j;return W?(O[16]!==er||O[17]!==G||O[18]!==V?(C=V&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!G,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy output"]}),O[16]=er,O[17]=G,O[18]=V,O[19]=C):C=O[19],O[20]!==es||O[21]!==W||O[22]!==U?(w=U&&(0,i.jsxs)(s.l.LinkItem,{as:h.N_,to:`${m.Jz}/l/${W}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.PencilIcon,{})}),"Edit loop"]}),O[20]=es,O[21]=W,O[22]=U,O[23]=w):w=O[23],O[24]!==F||O[25]!==V||O[26]!==B||O[27]!==U||O[28]!==$?(N=(V||U)&&(B||$||F)&&(0,i.jsx)(s.l.Divider,{}),O[24]=F,O[25]=V,O[26]=B,O[27]=U,O[28]=$,O[29]=N):N=O[29],O[30]!==ei||O[31]!==B?(S=B&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.DuplicateIcon,{})}),"Duplicate"]}),O[30]=ei,O[31]=B,O[32]=S):S=O[32],O[33]!==H?(I=H&&(0,i.jsxs)(s.l.Item,{onSelect:H,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.PencilIcon,{})}),"Rename"]}),O[33]=H,O[34]=I):I=O[34],O[35]!==ea||O[36]!==$?(k=$&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link"]}),O[35]=ea,O[36]=$,O[37]=k):k=O[37],O[38]!==F?(T=F&&(0,i.jsxs)(s.l.Item,{onSelect:F,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy JSON"]}),O[38]=F,O[39]=T):T=O[39],O[40]!==F||O[41]!==B||O[42]!==$?(L=(B||$||F)&&(0,i.jsx)(s.l.Divider,{}),O[40]=F,O[41]=B,O[42]=$,O[43]=L):L=O[43],O[44]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.TrashIcon,{})}),"Delete"]}),O[44]=E):E=O[44],O[45]!==Z||O[46]!==X||O[47]!==J?(R=g.W.loopsAbusePrevention&&J&&!X&&Z&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,p.YPg)({report:`${J} (User)`,contentURL:Z}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.AlertIcon,{})}),"Report"]}),O[45]=Z,O[46]=X,O[47]=J,O[48]=R):R=O[48],O[49]!==w||O[50]!==N||O[51]!==S||O[52]!==I||O[53]!==k||O[54]!==T||O[55]!==L||O[56]!==R||O[57]!==C?(A=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[C,w,N,S,I,k,T,L,E,R]})}),O[49]=w,O[50]=N,O[51]=S,O[52]=I,O[53]=k,O[54]=T,O[55]=L,O[56]=R,O[57]=C,O[58]=A):A=O[58],O[59]!==et||O[60]!==en||O[61]!==K?(D="delete"===K&&(0,i.jsx)(o.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),O[59]=et,O[60]=en,O[61]=K,O[62]=D):D=O[62],O[63]!==A||O[64]!==D?(P=(0,i.jsxs)(i.Fragment,{children:[A,D]}),O[63]=A,O[64]=D,O[65]=P):P=O[65],P):null}function x(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},11128:(e,t,n)=>{n.d(t,{n:()=>c});var i=n(74848),a=n(21728),s=n(38621),r=n(21373);let o={errorContainer:"ErrorDisplay-module__errorContainer--r2xoZ",errorNotice:"ErrorDisplay-module__errorNotice--Ey4vJ",errorIcon:"ErrorDisplay-module__errorIcon--SP3WM",errorTitle:"ErrorDisplay-module__errorTitle--P8tnN",errorText:"ErrorDisplay-module__errorText--c4NUQ",errorActions:"ErrorDisplay-module__errorActions--NW0lt"};var l=n(22053);function c(e){let t,n,c,u,m,h,p,f=(0,a.c)(17),{additionalActions:g,errors:y,onFixErrorClick:x,title:v}=e,{isReadonly:b}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:o.errorIcon,size:"medium"}),f[0]=t):t=f[0],f[1]!==v?(n=(0,i.jsx)("h2",{className:o.errorTitle,children:v}),f[1]=v,f[2]=n):n=f[2],f[3]!==y?(c=y.map(d),f[3]=y,f[4]=c):c=f[4],f[5]!==n||f[6]!==c?(u=(0,i.jsxs)("div",{className:o.errorNotice,children:[n,c]}),f[5]=n,f[6]=c,f[7]=u):u=f[7],f[8]!==b||f[9]!==x?(m=!b&&x&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:x,children:"Try to fix it"}),f[8]=b,f[9]=x,f[10]=m):m=f[10],f[11]!==g||f[12]!==m?(h=(0,i.jsxs)("div",{className:o.errorActions,children:[g,m]}),f[11]=g,f[12]=m,f[13]=h):h=f[13],f[14]!==u||f[15]!==h?(p=(0,i.jsxs)("div",{className:o.errorContainer,children:[t,u,h]}),f[14]=u,f[15]=h,f[16]=p):p=f[16],p}function d(e){return(0,i.jsx)("p",{className:o.errorText,children:e},e)}try{c.displayName||(c.displayName="ErrorDisplay")}catch{}},19336:(e,t,n)=>{n.d(t,{G:()=>h});var i=n(74848),a=n(21728),s=n(34031),r=n(11128),o=n(12357),l=n(70324);let c={emptyState:"ExecutionView-module__emptyState--gD9en",emptyStateText:"ExecutionView-module__emptyStateText--awSRT",emptyStateTitle:"ExecutionView-module__emptyStateTitle--F8TRM"};var d=n(53419),u=n(38621);let m=[];function h(e){let t,n=(0,a.c)(9),{outputNodeExists:h,isRunning:p,nodeValue:f,nodeError:g,validationErrors:y,additionalActions:x,onRun:v,onStop:b}=e,_=void 0===y?m:y;return n[0]!==x||n[1]!==p||n[2]!==g||n[3]!==f||n[4]!==v||n[5]!==b||n[6]!==h||n[7]!==_?(t=(0,i.jsx)(i.Fragment,{children:h?p&&!f?(0,i.jsx)(s.M,{isRunning:p,messages:{running:"Running the loop...",waiting:"Waiting..."}}):_.length>0?(0,i.jsx)(r.n,{errors:_,title:"Oops, this loop is configured incorrectly",additionalActions:x}):g?(0,i.jsx)(r.n,{errors:[g],title:"Oops, there was an error running this loop",additionalActions:x}):f?(0,i.jsx)(o.U,{isRunning:p,nodeValue:f}):(0,i.jsxs)("div",{className:c.emptyState,children:[(0,i.jsxs)("div",{className:c.emptyStateText,children:[(0,i.jsx)("span",{className:c.emptyStateTitle,children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(l.c,{onClick:()=>{v(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:p,value:f,variant:"default",leadingVisual:(0,i.jsx)(u.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=x,n[1]=p,n[2]=g,n[3]=f,n[4]=v,n[5]=b,n[6]=h,n[7]=_,n[8]=t):t=n[8],t}try{h.displayName||(h.displayName="ExecutionView")}catch{}},12357:(e,t,n)=>{n.d(t,{U:()=>I});var i=n(74848),a=n(21728),s=n(4817);let r={outputValue:"OutputDisplay-module__outputValue--I7SuT",jsonOutput:"OutputDisplay-module__jsonOutput--NA93D",markdownOutput:"OutputDisplay-module__markdownOutput--c47bk"};var o=n(85094),l=n(98755);let c={container:"CodeBlocks-module__container--GV7vX",copyContainer:"CodeBlocks-module__copyContainer--PlsVH",copyContent:"CodeBlocks-module__copyContent--_B0qO",copyButton:"CodeBlocks-module__copyButton--xrG5L",immersive:"CodeBlocks-module__immersive--pP6K5",code:"CodeBlocks-module__code--wvK8k",codeContainer:"CodeBlocks-module__codeContainer--wOuWu",codeWrap:"CodeBlocks-module__codeWrap--YQDq8"};var d=n(96540),u=n(57826),m=n(34164),h=n(53419);function p(e){let t,n,s,r,o,p,f,g,y,x=(0,a.c)(18),{children:v,code:b}=e,_=(0,d.useId)(),{chatMode:j,wrapCodeLines:C}=(0,d.useContext)(u.F);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)(c.container,c.immersive),x[0]=t):t=x[0],x[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)(c.copyContainer),s=(0,m.$)(c.copyContent),x[1]=n,x[2]=s):(n=x[1],s=x[2]),x[3]!==j?(r=()=>{(0,h.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:j})},x[3]=j,x[4]=r):r=x[4],x[5]!==b||x[6]!==r?(o=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:b,ariaLabel:"Copy code",className:c.copyButton,size:"small",onCopy:r})})}),x[5]=b,x[6]=r,x[7]=o):o=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.$)(c.codeContainer),x[8]=p):p=x[8];let w=C&&c.codeWrap;return x[9]!==w?(f=(0,m.$)(w),x[9]=w,x[10]=f):f=x[10],x[11]!==v||x[12]!==f?(g=(0,i.jsx)("div",{className:p,children:(0,i.jsx)("pre",{className:c.code,tabIndex:0,children:(0,i.jsx)("code",{className:f,children:v})})}),x[11]=v,x[12]=f,x[13]=g):g=x[13],x[14]!==_||x[15]!==o||x[16]!==g?(y=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":_,children:[o,g]})}),x[14]=_,x[15]=o,x[16]=g,x[17]=y):y=x[17],y}try{p.displayName||(p.displayName="CodeBlocksForLoop")}catch{}var f=n(47970);let g="data-codeblock-for-loop-props",y=(0,o.F)(g),x={code:(e,t)=>{let n=(0,o.k)(e,g);return n?(0,i.jsx)(p,{...n,children:e.children}):t}};var v=n(90122),b=n(76219),_=n(69726);let j={diagramContainer:"Mermaid-module__diagramContainer--YUzME",hiddenSourceCode:"Mermaid-module__hiddenSourceCode--dlgHV",loaderContainer:"Mermaid-module__loaderContainer--pyhaT"},C="data-mermaid-props",w=(0,o.F)(C);function N(e){let t,n,s,r,o,l,c,d=(0,a.c)(16),{code:u,identity:h,viewscreenHost:p}=e,f=`${p}/markdown/mermaid`,g=btoa(encodeURIComponent(u));d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)("js-render-needs-enrichment","render-needs-enrichment",j.diagramContainer),d[0]=t):t=d[0];let y=`${f}?data=${g}`;return d[1]!==u?(n=JSON.stringify({data:u}),d[1]=u,d[2]=n):n=d[2],d[3]!==u?(s=(0,i.jsx)("div",{className:j.hiddenSourceCode,children:(0,i.jsx)("pre",{lang:"mermaid",children:u})}),d[3]=u,d[4]=s):s=d[4],d[5]!==u||d[6]!==n||d[7]!==s?(r=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":n,"data-plain":u,children:s}),d[5]=u,d[6]=n,d[7]=s,d[8]=r):r=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.$)("js-render-enrichment-loader",j.loaderContainer),d[9]=o):o=d[9],d[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("span",{className:o,role:"presentation",children:(0,i.jsx)(_.A,{})}),d[10]=l):l=d[10],d[11]!==p||d[12]!==h||d[13]!==y||d[14]!==r?(c=(0,i.jsxs)("section",{className:t,"data-identity":h,"data-host":p,"data-src":y,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[r,l]}),d[11]=p,d[12]=h,d[13]=y,d[14]=r,d[15]=c):c=d[15],c}let S={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,o.k)(e,C);return n?(0,i.jsx)(N,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{N.displayName||(N.displayName="MermaidRenderer")}catch{}function I(e){let t,n,o,l,c,d,u=(0,a.c)(15),{className:h,isRunning:p,nodeValue:g,renderAsJson:_}=e,j=void 0!==_&&_,{previewUrl:C}=(0,b.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,f.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[y]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&y in i.properties&&n.children.splice(t,1,i)}),reactComponents:x},u[0]=t):t=u[0],u[1]!==C){var N;n=[t],C&&n.push((N={viewscreenHost:C},{transformMarkdown:e=>(0,f.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[w]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:N.viewscreenHost})}})}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&w in i.properties&&n.children.splice(t,1,i)}),reactComponents:S})),u[1]=C,u[2]=n}else n=u[2];let I=n;u[3]!==g?(o=(0,v.DO)(g),u[3]=g,u[4]=o):o=u[4];let k=o;return u[5]!==h?(l=(0,m.$)(r.outputValue,h),u[5]=h,u[6]=l):l=u[6],u[7]!==I||u[8]!==p||u[9]!==j||u[10]!==k?(c=j?(0,i.jsx)("pre",{className:r.jsonOutput,children:k}):(0,i.jsx)(s.To,{extensions:I,className:r.markdownOutput,isStreaming:p,markdown:k}),u[7]=I,u[8]=p,u[9]=j,u[10]=k,u[11]=c):c=u[11],u[12]!==l||u[13]!==c?(d=(0,i.jsx)("div",{className:l,children:c}),u[12]=l,u[13]=c,u[14]=d):d=u[14],d}try{I.displayName||(I.displayName="OutputDisplay")}catch{}},34031:(e,t,n)=>{n.d(t,{M:()=>o});var i=n(74848),a=n(21728);let s={container:"RunningDisplay-module__container--dUZ8X",text:"RunningDisplay-module__text--nICc0"};var r=n(74807);function o(e){let t,n,o,l,c=(0,a.c)(8),{isRunning:d,messages:u}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},c[0]=t):t=c[0];let m=t,h=u||m,p=d?h.running:h.waiting,f=d?"thinking":"static";return c[1]!==f?(n=(0,i.jsx)(r.N,{animationType:f,loopAnimation:!0}),c[1]=f,c[2]=n):n=c[2],c[3]!==p?(o=(0,i.jsx)("div",{className:s.text,children:p}),c[3]=p,c[4]=o):o=c[4],c[5]!==n||c[6]!==o?(l=(0,i.jsxs)("div",{className:s.container,children:[n,o]}),c[5]=n,c[6]=o,c[7]=l):l=c[7],l}try{o.displayName||(o.displayName="RunningDisplay")}catch{}},76219:(e,t,n)=>{n.d(t,{Q:()=>o,U:()=>l});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(null);function o(e){let t,n,s=(0,a.c)(7),{availableModels:o,previewUrl:l,sendChatMessage:c,children:d}=e;s[0]!==o||s[1]!==l||s[2]!==c?(t={availableModels:o,previewUrl:l,sendChatMessage:c},s[0]=o,s[1]=l,s[2]=c,s[3]=t):t=s[3];let u=t;return s[4]!==d||s[5]!==u?(n=(0,i.jsx)(r.Provider,{value:u,children:d}),s[4]=d,s[5]=u,s[6]=n):n=s[6],n}function l(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{o.displayName||(o.displayName="AppContextProvider")}catch{}},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>x,Ud:()=>y});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),o=n(88431),l=n(96868),c=n(21728),d=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var h=n(53627);let p=(0,s.createContext)(new a.Lj(l.qB)),f=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,c.c)(9),[r]=(0,d.o)();a[0]!==r?(e=(0,u.hW)(r),a[0]=r,a[1]=e):e=a[1];let[o,l]=(0,s.useReducer)(m,e);return a[2]!==o?(t=()=>{let e=(0,u.Ts)(o);(0,h.MM)(e)},a[2]=o,a[3]=t):t=a[3],a[4]!==r||a[5]!==o?(n=[o,r],a[4]=r,a[5]=o,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==o?(i=[o,l],a[7]=o,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,o.N)(()=>{a.value=t},[t,a]);let l=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(p.Provider,{value:a,children:(0,i.jsx)(f.Provider,{value:l,children:e})})}function y(e){let t=(0,s.useContext)(p);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function x(){return(0,s.useContext)(f)}try{p.displayName||(p.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},86909:(e,t,n)=>{n.d(t,{Y:()=>y});var i,a=n(74848),s=n(77430),r=n(73017),o=n(38621),l=n(98552),c=n(69497),d=n(21373),u=n(34164),m=n(48505);let h={annotation:"Annotation-module__annotation--KlX5M",annotationSource:"Annotation-module__annotationSource--fZyli",annotationMessage:"Annotation-module__annotationMessage--gFM9M"};var p=n(90274),f=n(96540);let g={[m.UZ.Failure]:(0,a.jsx)(o.StopIcon,{className:"fgColor-danger"}),[m.UZ.Warning]:(0,a.jsx)(o.AlertIcon,{className:"fgColor-attention"}),[m.UZ.Notice]:(0,a.jsx)(o.InfoIcon,{className:"fgColor-muted"})};function y({annotation:e,inSidePanel:t}){let n=(0,f.useMemo)(()=>t?"h3":"h2",[t]);return(0,a.jsxs)("div",{className:(0,u.$)("p-3 bgColor-default",p.GF[e.annotationLevel].borderColor,h.annotation),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[g[e.annotationLevel],(0,a.jsx)(l.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:p.GF[e.annotationLevel].ariaLabel})]}),(0,a.jsx)("div",{className:"ml-4",children:e.title&&(0,a.jsx)(l.A,{weight:"semibold",size:"medium",className:p.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,a.jsxs)(n,{className:"sr-only",children:[p.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(r.$6,{html:e.message,className:h.annotationMessage})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,a.jsxs)("div",{className:h.annotationSource,children:[(0,a.jsx)(s.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(c.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(l.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(l.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(d.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{y.displayName||(y.displayName="Annotation")}catch{}try{(i=AnnotationHeadingTag).displayName||(i.displayName="AnnotationHeadingTag")}catch{}},90274:(e,t,n)=>{n.d(t,{GF:()=>c,S:()=>l,Xh:()=>r});var i=n(74848),a=n(38267),s=n(48505);function r({annotationLevel:e,...t}){let{icon:n,...a}=c[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:s}){return(0,i.jsx)("svg",{"aria-label":n,className:s,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let o=(0,a.i7)(["0%{opacity:0;}100%{opacity:1;}"]),l=(0,a.Ay)(r).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-541735e4-0"})(["animation:"," 0.1s ease-in;"],o),c={[s.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[s.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[s.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{r.displayName||(r.displayName="AnnotationIcon")}catch{}try{l.displayName||(l.displayName="AnimatedAnnotationIcon")}catch{}},70109:(e,t,n)=>{n.d(t,{S:()=>l});var i=n(74848),a=n(8046),s=n(96540),r=n(76648),o=n(59201);let l=(0,s.forwardRef)(({children:e,...t},n)=>{let{pullRequest:s,repository:l}=(0,r.B)(),c=(0,o.L3)(),d={type:"pull_request",id:{id:s.id},pullRequestNumber:s.number,repository:{databaseId:l.id,nwo:`${l.ownerLogin}/${l.name}`,slashCommandsEnabled:!1},comparison:{startCommitOid:c.selectedRange.baseOid,endCommitOid:c.selectedRange.headOid}};return(0,i.jsx)(a.hF,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:d,showLabel:!1})});l.displayName="ConversationCommentBox"},39525:(e,t,n)=>{n.d(t,{U:()=>et});var i=n(74848),a=n(8046),s=n(26156),r=n(71073),o=n(81156),l=n(63352),c=n(73189),d=n(78809),u=n(73017),m=n(71315),h=n(43258),p=n(38621),f=n(72511),g=n(40928),y=n(21998),x=n(34164),v=n(96540),b=n(25407),_=n(94747),j=n(59201),C=n(1932),w=n(96379),N=n(48845),S=n(20622),I=n(34784),k=n(8748),T=n(50625),L=n(93642),E=n(70109);let R={ReviewThreadContainer:"ReviewThreadComment-module__ReviewThreadContainer--mI1dg",ReviewThreadWrapper:"ReviewThreadComment-module__ReviewThreadWrapper--zXqpP",ReviewThreadBox:"ReviewThreadComment-module__ReviewThreadBox--Ddyuz",ReviewThreadInnerContainer:"ReviewThreadComment-module__ReviewThreadInnerContainer--xw85s",ReplyWrapper:"ReviewThreadComment-module__ReplyWrapper--yIUaX",SafeHTMLBox:"ReviewThreadComment-module__SafeHTMLBox--SVSQJ",BodyHTMLContainer:"ReviewThreadComment-module__BodyHTMLContainer--O6lsx"};var A=n(88431),D=n(40961),P=n(80081),O=n(2265),M=n(30459),F=n(21373);function B(){let{sendAnalyticsEvent:e}=(0,M.s)();return(0,i.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,i.jsx)(F.Q,{variant:"primary",onClick:()=>{e("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},children:"Add suggestion to batch"})})}try{B.displayName||(B.displayName="AddToExistingBatch")}catch{}var $=n(73783),U=n(1992),V=n(26108),H=n(5524);let W={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function q({onOpenDialog:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,M.s)(),[a,s]=(0,v.useState)(W.applySuggestion),[r,o]=(0,v.useState)(!1),l=(0,v.useRef)(null),c=(0,v.useRef)(null),d=()=>o(!r),u=(0,v.useCallback)(e=>void 0,[]),m=(0,v.useCallback)(()=>{a===W.addSuggestionToBatch&&(u(t),n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),a===W.applySuggestion&&e(c)},[u,e,a,n,t]);return(0,i.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,i.jsxs)($.A,{children:[(0,i.jsx)(F.Q,{variant:"primary",onClick:m,ref:c,children:a.text}),(0,i.jsxs)(U.W,{anchorRef:l,open:r,onOpenChange:d,children:[(0,i.jsx)(U.W.Anchor,{children:(0,i.jsx)(V.K,{ref:l,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:p.TriangleDownIcon,size:"medium",variant:"primary",onClick:d})}),(0,i.jsx)(U.W.Overlay,{width:"medium",children:(0,i.jsx)(H.l,{selectionVariant:"single",children:Object.keys(W).map(e=>{let t=W[e];return(0,i.jsx)(H.l.Item,{selected:a===t,onSelect:()=>s(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{q.displayName||(q.displayName="ApplyOrAddToBatch")}catch{}var z=n(3585);function G({reason:e,className:t="m-2"}){return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("small",{className:"fgColor-muted",children:e})})}try{G.displayName||(G.displayName="CodeSuggestionUnavailable")}catch{}var K=n(26607);function Q({onOpenDialog:e,pendingSuggestedChangesBatch:t}){let n=(0,v.useRef)(null),a=(0,v.useCallback)(()=>{e(n)},[e]),s=t.length,{sendAnalyticsEvent:r}=(0,M.s)(),o=(0,v.useCallback)(()=>{r("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},[r]);return(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,i.jsx)(K.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[(0,i.jsx)(F.Q,{size:"medium",variant:"danger",onClick:o,children:"Remove from batch"}),(0,i.jsx)(F.Q,{ref:n,size:"medium",count:s,variant:"primary",onClick:a,children:`Apply suggestion${s>1?"s":""}`})]})]})}try{Q.displayName||(Q.displayName="CommitOrRemoveFromBatch")}catch{}function Y({suggestedChange:e}){let{setIsDialogOpen:t}=(0,O.W)(),[n,a]=(0,v.useState)(!1),s=(0,v.useRef)(void 0),r=(0,v.useMemo)(()=>[],[]),o=(0,P.c0)(e,r),l=0===r.length,{isValid:c,reason:d}=(0,P.EJ)(e,r),u=(0,v.useMemo)(()=>o?r:[e],[o,r,e]),h=(0,v.useCallback)(e=>{a(e),t?.(e)},[t]),p=(0,v.useCallback)(()=>{if(h(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[h]),f=(0,v.useCallback)(e=>{h(!0),s.current=e},[h,s]),{mutate:g}=function(){let e=(0,j.Kp)(),t=`${e}/page_data/${S.u.submitSuggestedChanges}`;return(0,_.n)({mutationFn:async({changes:e,currentOid:n,message:i})=>{let a=await (0,N.q$)(t,{method:"POST",body:{changes:e,currentOid:n,message:i}}),s=await (0,N.hp)(a);return(0,N.R)(a,s),s},onSuccess:()=>{m.cg?.location.reload()}})}(),{fullDiff:{headOid:y}}=(0,j.L3)(),x=(0,v.useCallback)((e,t,n)=>{g({changes:u,message:e,currentOid:y},{onSuccess:()=>{p(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},[u,p,y,g]);return(0,i.jsxs)("div",{className:"border-top p-2",children:[o&&(0,i.jsx)(Q,{onOpenDialog:f,pendingSuggestedChangesBatch:r}),!o&&!c&&d&&(0,i.jsx)(G,{reason:d,className:"m-0"}),!o&&l&&(0,i.jsx)(q,{suggestedChange:e,onOpenDialog:f}),!o&&c&&!l&&(0,i.jsx)(B,{}),n&&(0,i.jsx)(z.$,{authorLogins:u.map(e=>e.authorLogin),batchSize:u.length,onClose:p,onCommit:x})]})}try{Y.displayName||(Y.displayName="CodeSuggestionActions")}catch{}function J({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,filePath:a,isOutdated:s,isThreadResolved:r,suggestedChangesConfig:o,databaseId:l,viewerCanApplySuggestion:c}){let d=(0,j.XN)(),u=function(e,t,n,i,a){let[s,r]=(0,v.useState)();return(0,A.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r of s){let s=r?.closest("div.js-suggested-changes-blob");if(!s)continue;let o=[...s.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:r,suggestion:o.map(e=>e.textContent),lineRange:a.lineRange,threadId:i})}r(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),s}(n,t,a,l,e);return(0,i.jsx)(i.Fragment,{children:u?.length?u.map(n=>{let{isValid:a,reason:l}=(0,P.o_)({suggestedChange:n,isOutdated:s,isPending:"PENDING"===t.state.toUpperCase(),isResolved:r,pullRequestIsClosed:void 0===d||"CLOSED"===d||"MERGED"===d,pullRequestIsInMergeQueue:"QUEUED"===d,userCanApplySuggestion:!!c,applySuggestedChangesValidationData:e,suggestedChangesConfig:o});return!a&&l?(0,D.createPortal)((0,i.jsx)(G,{reason:l}),n.ref):(0,D.createPortal)((0,i.jsx)(Y,{suggestedChange:n}),n.ref)}):null})}try{J.displayName||(J.displayName="SuggestedChangeView")}catch{}var X=n(30721),Z=n(83494),ee=n(20459);function et({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:A,isOutdated:D,isThreadResolved:P,lineMarkersKey:O,anchorPrefix:M="r",comment:F,disableDialogMode:B,enableDialogMode:$,filePath:U,gridCellId:V,hideActions:H,isFirstComment:W=!1,isInDialogMode:q,onDeleteLineComment:z,onQuoteReply:G=c.l,subjectId:K,threadCommentCount:Q,threadId:Y,threadPositionNumber:et,suggestedChangesConfig:en,applySuggestedChangesValidationData:ei,viewerData:ea,ghostUser:es=o.t.ghostUser,originalDiffPathUri:er,headingLevel:eo="h3"}){let{addToast:el}=(0,h.Y6)(),[ec,ed]=(0,v.useState)(!1),[eu,em]=(0,v.useState)(F.isHidden),[eh,ep]=(0,v.useState)(!1),[ef,eg]=(0,v.useState)(F.body),[ey,ex]=(0,v.useState)(!1),[ev,eb]=(0,v.useState)(!1),[e_,ej]=(0,v.useState)(""),{persistCommentToStorage:eC,removePersistedCommentFromStorage:ew}=(0,T.L)({subjectId:K,filePath:U,fileLevelComment:"FILE"===F.subjectType,threadId:F.id,handlePersistedCommentExists:({text:e})=>{e&&eg(e)}}),eN=(0,v.useRef)(null),eS=(0,v.useRef)(null),[eI,ek]=(0,v.useState)(""),eT=()=>{eN.current?.focus()};(0,v.useEffect)(()=>{if(ec){let e=window.setTimeout(eT);return()=>{window.clearTimeout(e)}}},[ec]);let{mutate:eL}=function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,j.Kp)(),{deleteThreadComment:a}=(0,j.an)(),{onCommentThreadDeleted:s}=(0,j.Ud)(),r=(0,j.SM)(),{removePendingComment:o}=(0,j._N)();return(0,_.n)({mutationFn:async({commentId:n,threadId:a})=>{let s=r(Number(a),e,t)?.commentsData?.comments?.find(e=>e.id===n);if(!s)return;let o=`${i}/page_data/review_comments/${s.databaseId}`,l=await (0,N.q$)(`${o}`,{method:"DELETE"});if(204===l.status||200===l.status)return;let c=await (0,N.hp)(l);(0,N.R)(l,c)},onSuccess:(i,{commentId:r,threadId:l})=>{let c=a(Number(l),r,e,t);o(Number(l)),"thread_deleted"===c&&("thread_deleted"===c&&s({path:e,threadID:l}),n?.())}})}({filePath:U,lineMarkersKey:O,onSuccess:()=>{ep(!1),eb(!1),z?.()}}),eE=async()=>{B?.(),ep(!0)},{mutate:eR}=function(e,t){let n=(0,j.Kp)(),i=`${n}/page_data/${S.u.hideComment}`,{updateThreadComment:a}=(0,j.an)();return(0,_.n)({mutationFn:async({commentDatabaseId:e,reason:t})=>{let n=await (0,N.q$)(i,{method:"POST",body:{classifier:t,commentId:e}}),a=await (0,N.hp)(n);return(0,N.R)(n,a),a},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})}})}(U,O),{mutate:eA}=function(e,t){let n=(0,j.Kp)(),i=`${n}/page_data/${S.u.unhideComment}`,{updateThreadComment:a}=(0,j.an)();return(0,_.n)({mutationFn:async({commentDatabaseId:e})=>{let t=await (0,N.q$)(i,{method:"POST",body:{commentId:e}}),n=await (0,N.hp)(t);return(0,N.R)(t,n),n},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!1,minimizedReason:null}}})}})}(U,O),{mutate:eD}=function(){let{updateThreads:e}=(0,j.an)();return(0,_.n)({mutationFn:async({duration:e,hiddenReason:t,organizationLogin:n,notifyBlockedUser:i,shouldHideComment:a,userLogin:s})=>{let r=new FormData;r.append("duration",e),r.append("hide_comment",a.toString()),t&&r.append("hidden_reason",t),r.append("login",s),r.append("send_notification",i.toString()),await (0,w.DI)((0,b.ggd)({owner:n}),{method:"POST",body:r,redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=n.shouldHideComment||e.isHidden,e.minimizedReason=n.hiddenReason||null)}))}})}(),{mutate:eP}=function(){let{updateThreads:e}=(0,j.an)();return(0,_.n)({mutationFn:async({organizationLogin:e,userLogin:t})=>{await (0,N.q$)(`${(0,b.ggd)({owner:e})}/${(0,b.QU3)(t)}`,{method:"DELETE",redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}})}(),{mutate:eO}=function(e,t){let n=(0,j.Kp)(),{updateThreadComment:i}=(0,j.an)();return(0,_.n)({mutationFn:async({commentDatabaseId:e,reaction:t,viewerHasReacted:i})=>{let a=`${n}/page_data/${i?S.u.removeCommentReaction:S.u.addCommentReaction}`,s=await (0,N.q$)(a,{method:"POST",body:{reaction:t,commentId:e}}),r=await (0,N.hp)(s);return(0,N.R)(s,r),r},onSuccess:(n,a)=>{i({threadID:parseInt(a.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===a.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})}})}(U,O),{mutate:eM}=function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,j.Kp)(),a=`${i}/page_data/${S.u.updateReviewComment}`,{updateThreadComment:s}=(0,j.an)();return(0,_.n)({mutationFn:async({commentId:e,bodyVersion:t,body:n})=>{let i=await (0,N.q$)(`${a}${t?`?body_version=${t}`:""}`,{method:"PUT",body:{body:n,commentId:e}}),s=await (0,N.hp)(i);return(0,N.R)(i,s),s},onSuccess:i=>{s({threadID:i.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,body:i.body,bodyHTML:i.bodyHTML,bodyVersion:i.bodyVersion}}}),n?.()}})}({filePath:U,lineMarkersKey:O,onSuccess:()=>{ed(!1),ex(!1),ew()}}),eF=(0,v.useCallback)(()=>{ex(!0);let e=(0,L.u)(ef,en?.sourceContentFromDiffLines??"");if(!e.isValid){ej(e.errorMessage),ex(!1);return}eM({commentId:String(F.databaseId),body:ef,bodyVersion:F.bodyVersion},{onError:()=>{ex(!1),el({type:"error",message:"Failed to update comment"})}})},[el,ef,F,en?.sourceContentFromDiffLines,eM]),eB=F.databaseId?.toString(),e$=eB?`${M}${eB}`:void 0,eU=e$&&m.fV?new URL(`${m.fV.pathname}#${e$}`,m.fV.origin).toString():"",eV=(0,v.useRef)(null);(0,k.u)({isAnchorable:e,commentId:eB,commentAnchor:e$,containerRef:eV});let eH={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eW=t>0,eq=t>1,ez=ec?"editing":eu?"hidden":"visible",eG={headingProps:{as:eo},avatarUrl:F.author?.avatarUrl??es.avatarUrl,comment:{...F,url:eU,referenceText:F.reference.text??`#${F.reference.number}`},commentRef:eV,deleteComment:eE,editComment:()=>{ed(!0)},editHistoryComponent:void 0,hideComment:e=>{if(!F.databaseId)throw Error("Comment not found");eR({commentDatabaseId:F.databaseId,reason:e},{onError:()=>{ex(!1),ek("Failed to hide comment")},onSuccess:()=>em(!0)})},onBlock:(e,t,n,i,a,s)=>eD({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>ek("Failed to block user"),onSuccess:()=>{t&&em(!0)}}),onUnblock:(e,t)=>eP({organizationLogin:e,userLogin:t},{onError:()=>ek("Failed to unblock user")}),onMinimize:em,onSuccessfulBlock:()=>{setTimeout(()=>m.cg?.location.reload(),800)},isMinimized:eu,commentAuthorLogin:F.author?.login??es.login,navigate:c.l,commentSubjectAuthorLogin:F.reference?.author?.login??"",onReplySelect:G,unhideComment:()=>{if(!F.databaseId)throw Error("Comment not found");eA({commentDatabaseId:F.databaseId},{onError:()=>{ex(!1),ek("Failed to unhide comment")},onSuccess:()=>em(!1)})},hideActions:H,isReply:eW,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:er,isOutdated:D,commentAuthorSlug:"copilot"===F.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===F.reviewVariantType?"Bot":void 0},eK=(0,v.useMemo)(()=>(0,X.E7)(),[]);return(0,i.jsx)(Z.tL,{commands:{"pull-requests-diff-view:quote-reply":()=>{if(ec)return;let e=m.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;G((0,ee.E)(eV?.current,t,F.body))}},children:(0,i.jsxs)(y.az,{ref:eV,id:e?e$:void 0,tabIndex:n?q?0:-1:0,"data-first-thread-comment":W,"data-marker-navigation-comment-thread-id":Y,"data-marker-navigation-comment-id":F.id,...q?{role:"document","aria-roledescription":"comment","aria-label":eW?void 0!==et?`Reply ${t} to Comment ${et}`:`Reply ${t}`:void 0!==et?`Comment ${et}`:"Comment"}:{},sx:{":target":eH,":focus":eH,scrollMarginTop:e?"120px":0},className:(0,x.$)(R.ReviewThreadContainer,"hidden"===ez&&"pb-2"),children:[eq&&(0,i.jsx)("div",{className:R.ReviewThreadWrapper,"data-is-reply":eW,children:(0,i.jsx)("div",{className:R.ReviewThreadBox})}),(0,i.jsx)("div",{className:R.ReviewThreadInnerContainer,"data-is-nested-reply":eq,children:(0,i.jsx)(s.v,{...eG,commentBody:F.body,threadCommentCount:Q,isInDialogMode:q,actions:H?void 0:(0,i.jsx)(I.RelayEnvironmentProvider,{environment:eK,children:(0,i.jsx)(r.p,{...eG})}),isOutdated:D})}),eI&&(0,i.jsxs)(f.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(p.StopIcon,{className:"mr-2"}),eI]}),(0,i.jsxs)("div",{className:R.ReviewThreadWrapper,"data-is-reply":eW,children:[eW&&(0,i.jsx)("div",{className:R.ReplyWrapper,"data-is-last-child":A}),"editing"===ez&&(0,i.jsx)("div",{className:(0,x.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eW?"pl-0":"pl-2"),children:(0,i.jsxs)(E.S,{ref:eN,label:"Update comment",value:ef,onChange:e=>{eC({text:e}),eg(e),ej(void 0)},onPrimaryAction:eF,suggestedChangesConfig:en,markdownErrorMessage:e_,children:[(0,i.jsx)(a.xR,{variant:"default",onClick:()=>{ed(!1),ew(),eg(F.body)},children:"Cancel"}),(0,i.jsx)(a.xR,{disabled:ey||!ef.length,loading:ey,variant:"primary",onClick:eF,children:"Update"})]})}),"visible"===ez&&(0,i.jsxs)("div",{className:R.BodyHTMLContainer,"data-is-reply":eW,children:[F.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.vb,{ref:eS,className:(0,x.$)("markdown-body",R.SafeHTMLBox),"comment-testid":`Comment body html for comment ${F.id}`,html:F.bodyHTML}),"copilot"===F.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===F.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(l.Z,{commentUrl:F.url,commentId:F.databaseId?.toString()??""})}),F.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(d.P,{reactionGroups:F.reactionGroups,onReact:(e,t)=>{if(!F.databaseId)throw Error("Comment not found");eO({commentDatabaseId:F.databaseId,threadId:Y,reaction:e,viewerHasReacted:t},{onError:()=>{ex(!1),el({type:"error",message:"Failed to react to comment"})}})},canReact:F.viewerCanReact})})]}),ei&&(0,i.jsx)(J,{comment:F,commentBodyRef:eS,filePath:U,isOutdated:D,isThreadResolved:P,databaseId:F.databaseId,suggestedChangesConfig:en,applySuggestedChangesValidationData:ei,viewerCanApplySuggestion:ea?.viewerCanApplySuggestion})]}),eh&&(0,i.jsx)(g.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:ev,onClose:e=>{"confirm"===e?(eb(!0),eL({commentId:F.id,threadId:Y,filePath:U},{onError:()=>{ep(!1),el({type:"error",message:"Failed to delete comment"}),eb(!1)}})):(V&&$?.(V),ep(!1),eb(!1))},children:"Are you sure you want to delete this comment?"})]})]})]})})}try{et.displayName||(et.displayName="ReviewThreadComment")}catch{}},2265:(e,t,n)=>{n.d(t,{W:()=>o,j:()=>r});var i=n(74848),a=n(96540);let s=(0,a.createContext)({});function r({children:e}){let[t,n]=(0,a.useState)(!1),r=(0,a.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(s.Provider,{value:r,children:e})}let o=()=>(0,a.useContext)(s);try{s.displayName||(s.displayName="DialogStateContext")}catch{}try{r.displayName||(r.displayName="DialogStateProvider")}catch{}},95280:(e,t,n)=>{n.d(t,{B:()=>f});var i=n(74848),a=n(35247),s=n(53419),r=n(38621),o=n(73783),l=n(73077),c=n(1992),d=n(26108),u=n(5524);let m={actions:"EditorMenu-module__actions--PsLtQ",editorButton:"EditorMenu-module__editorButton--MKhLx"};var h=n(56487),p=n(60429);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,i)=>{a.W.freeToPaidTelemetry?(0,h.F)({eventName:n,menuLocation:e,mode:t,action:i}):(0,s.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,i.jsxs)(o.A,{className:m.actions,children:[(0,i.jsx)(l.z,{className:m.editorButton,href:p.A.vscode.url,leadingVisual:(0,i.jsx)("img",{src:p.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:p.A.vscode.name}),(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(d.K,{"aria-label":"More editors",icon:r.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,i.jsx)(c.W.Overlay,{align:"end",children:(0,i.jsx)(u.l,{children:(0,i.jsx)(h.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},56487:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var i=n(74848),a=n(35247),s=n(53419),r=n(5524),o=n(60429);function l({eventName:e,menuLocation:t,mode:n,action:i,text:a}){let r=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,s.BI)("dotcom_chat.activate",{target:r,text:a,category:t,action:i,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(o.A).map(([s,{name:o,url:c,icon:d}])=>(0,i.jsxs)(r.l.LinkItem,{href:c,onClick:()=>{n?.(),a.W.freeToPaidTelemetry&&l({eventName:s,menuLocation:e,mode:t,action:"menu_item_click",text:o})},children:[o,(0,i.jsx)(r.l.LeadingVisual,{children:(0,i.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},s))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},16070:(e,t,n)=>{n.d(t,{Y0:()=>M,$I:()=>P,kR:()=>F});var i=n(74848),a=n(21728),s=n(96540),r=n(97949),o=n(38621),l=n(13017),c=n(31315),d=n(69599),u=n(51587),m=n(11083),h=n(30459),p=n(79634);let f={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx",dismissedOrgList:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",durationSelector:"GlobalSSOBanner-module__durationSelector--DOJjX"};function g({children:e,hidden:t}){let[n,a]=s.useState("visible"),r=s.useRef(null),o=s.useRef(void 0);return(s.useEffect(()=>{if(t&&"visible"===n){a("collapsing");let e=r.current;if(e){let t=e.getBoundingClientRect().height;o.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{a("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,i.jsx)("div",{ref:r,style:{height:"visible"===n?o.current??"auto":0},className:f.bannerOuterWrapper,children:(0,i.jsx)("div",{className:f.bannerInnerWrapper,style:{transform:"visible"===n?void 0:`translateY(-${o.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{g.displayName||(g.displayName="SlideDismiss")}catch{}var y=n(1805),x=n(15042);function v(e){let t,n,s,r=(0,a.c)(7),{ssoOrgs:o}=e;if(1===o.length){let e,t=o[0],n=t?.name;return r[0]!==n?(e=(0,i.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",n," organization on this device."]}),r[0]=n,r[1]=e):e=r[1],e}return r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),r[2]=t):t=r[2],r[3]!==o?(n=o.map(b),r[3]=o,r[4]=n):n=r[4],r[5]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)("ul",{className:f.dismissedOrgList,children:n})]}),r[5]=n,r[6]=s):s=r[6],s}function b(e){return(0,i.jsx)("li",{children:e.name},e.id)}try{v.displayName||(v.displayName="DismissalSummary")}catch{}var _=n(1992),j=n(5524),C=n(46251);let w=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:30},{id:"one-year",text:"One year",days:365}],N=()=>w.findIndex(e=>30===e.days);function S(e){let t,n,s,r,l,c=(0,a.c)(11),{selectedDurationIndex:d,onDurationChange:u}=e,m=w[d];c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),c[0]=t):t=c[0];let h=m?.text||"Pick duration";return c[1]!==h?(n=(0,i.jsx)(_.W.Button,{trailingAction:o.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:h}),c[1]=h,c[2]=n):n=c[2],c[3]!==u||c[4]!==d?(s=w.map((e,t)=>(0,i.jsx)(j.l.Item,{role:"menuitemradio",selected:t===d,"aria-checked":t===d,onSelect:()=>u(t),children:e.text},e.id)),c[3]=u,c[4]=d,c[5]=s):s=c[5],c[6]!==s?(r=(0,i.jsx)(_.W.Overlay,{children:(0,i.jsx)(j.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:s})}),c[6]=s,c[7]=r):r=c[7],c[8]!==n||c[9]!==r?(l=(0,i.jsxs)(C.B,{align:"center",direction:"horizontal",className:f.durationSelector,children:[t,(0,i.jsxs)(_.W,{children:[n,r]})]}),c[8]=n,c[9]=r,c[10]=l):l=c[10],l}try{S.displayName||(S.displayName="DurationMenu")}catch{}function I(e){let t,n,r,o,l,c,d,u,m,h,p=(0,a.c)(23),{isOpen:f,onClose:g,onConfirm:b,ssoOrgs:_}=e,[j,C]=s.useState(N);p[0]!==f?(t=()=>{f&&C(N())},n=[f],p[0]=f,p[1]=t,p[2]=n):(t=p[1],n=p[2]),s.useEffect(t,n),p[3]!==b||p[4]!==j?(r=()=>{let e=w[j];b(e?.days??30)},p[3]=b,p[4]=j,p[5]=r):r=p[5];let I=r;return f?(p[6]!==g?(o={buttonType:"default",content:"Cancel",onClick:g},p[6]=g,p[7]=o):o=p[7],p[8]!==I?(l={buttonType:"primary",content:"Confirm",onClick:I},p[8]=I,p[9]=l):l=p[9],p[10]!==o||p[11]!==l?(c=[o,l],p[10]=o,p[11]=l,p[12]=c):c=p[12],p[13]!==_?(d=(0,i.jsx)(v,{ssoOrgs:_}),p[13]=_,p[14]=d):d=p[14],p[15]!==j?(u=(0,i.jsx)(S,{selectedDurationIndex:j,onDurationChange:C}),p[15]=j,p[16]=u):u=p[16],p[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,i.jsx)(y.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),p[17]=m):m=p[17],p[18]!==g||p[19]!==c||p[20]!==d||p[21]!==u?(h=(0,i.jsxs)(x.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:g,footerButtons:c,children:[d,u,m]}),p[18]=g,p[19]=c,p[20]=d,p[21]=u,p[22]=h):h=p[22],h):null}try{I.displayName||(I.displayName="ConfirmationDialog")}catch{}var k=n(21373),T=n(77430),L=n(79988);function E(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,i=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(i)}`}function R(e){let t,n,s,r,o,l=(0,a.c)(20),{ssoOrgs:c,redirectLocation:d}=e,{sendClickAnalyticsEvent:u}=(0,h.S)();if(0===c.length)return null;l[0]!==u?(t=()=>{u({category:L.c$,action:"click_single_sso_button",label:"sso_authentication"})},l[0]=u,l[1]=t):t=l[1];let m=t;l[2]!==u?(n=e=>{u({category:L.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},l[2]=u,l[3]=n):n=l[3];let p=n;if(1===c.length){let e,t,n=c[0];return void 0===n?null:(l[4]!==n.login||l[5]!==d?(e=E(n.login,d),l[4]=n.login,l[5]=d,l[6]=e):e=l[6],l[7]!==m||l[8]!==e?(t=(0,i.jsx)(k.Q,{as:"a",href:e,onClick:m,children:"Single sign-on"}),l[7]=m,l[8]=e,l[9]=t):t=l[9],t)}if(l[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(_.W.Button,{size:"small",children:"Single sign-on"}),l[10]=s):s=l[10],l[11]!==p||l[12]!==d||l[13]!==c){let e;l[15]!==p||l[16]!==d?(e=e=>(0,i.jsxs)(j.l.LinkItem,{href:E(e.login,d),onClick:()=>p(e.name),children:[e.avatar_url&&(0,i.jsx)(j.l.LeadingVisual,{children:(0,i.jsx)(T.r,{size:24,src:e.avatar_url})}),e.name]},e.login),l[15]=p,l[16]=d,l[17]=e):e=l[17],r=c.map(e),l[11]=p,l[12]=d,l[13]=c,l[14]=r}else r=l[14];return l[18]!==r?(o=(0,i.jsxs)(_.W,{children:[s,(0,i.jsx)(_.W.Overlay,{children:(0,i.jsx)(j.l,{children:r})})]}),l[18]=r,l[19]=o):o=l[19],o}try{R.displayName||(R.displayName="SSOActionMenu")}catch{}function A(){let e=(0,c.Ri)(L.z4);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,c.Yj)(L.z4)}return[]}function D(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function P(e){let t,n,u,p,y,x,v,b,_,j,C,w,N,S,k,T=(0,a.c)(35),{ssoOrgs:E}=e,D=(0,l.zy)(),[P,M]=s.useState("visible"),[F,B]=s.useState(!1),$=s.useRef(!1),{sendClickAnalyticsEvent:U}=(0,h.S)();T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.G7)("global_sso_banner_dismiss_dialog"),T[0]=t):t=T[0];let V=t;if(T[1]!==E.length?(n=()=>{!$.current&&E.length>0&&((0,d.G7)("record_sso_banner_metrics")&&(0,m.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),$.current=!0)},T[1]=E.length,T[2]=n):n=T[2],T[3]!==E?(u=[E],T[3]=E,T[4]=u):u=T[4],s.useEffect(n,u),0===E.length)return null;T[5]!==E?(p=e=>{M("hidden");let t=E.map(e=>e.id);(0,d.G7)("global_sso_banner_dismiss_dialog")&&(t=[...new Set([...A(),...t])].sort()),(0,c.Yj)(L.z4);let n=new Date(Date.now()+24*((void 0===e?30:e)??30)*36e5).toUTCString();(0,c.TV)(L.z4,JSON.stringify(t),n)},T[5]=E,T[6]=p):p=T[6];let H=p;T[7]!==H||T[8]!==U?(y=()=>{U({category:L.c$,action:"click_dismiss_button",label:"banner_dismissed"}),V?B(!0):H()},T[7]=H,T[8]=U,T[9]=y):y=T[9];let W=y;T[10]!==H?(x=e=>{H(e),B(!1)},T[10]=H,T[11]=x):x=T[11];let q=x;T[12]!==E?(v=()=>{if(0===E.length)return"Single sign-on to see results";let e=E.slice(0,L.n5),t=E.length-L.n5,n=1===E.length?"organization":"organizations";return(0,i.jsxs)(i.Fragment,{children:["Single sign-on to see results in the ",(()=>{let n=e.map(O);if(1===n.length)return n[0];{if(2===n.length)return(0,i.jsxs)(i.Fragment,{children:[n[0]," and ",n[1]]});let e=n.length-1,a=(0,i.jsxs)(i.Fragment,{children:[n[0],", ",n[1],", and ",n[e]]});return t>0?(0,i.jsxs)(i.Fragment,{children:[a,", and ",t," more"]}):a}})()," ",n]})},T[12]=E,T[13]=v):v=T[13];let z=v,G="visible"!==P;T[14]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(o.ShieldLockIcon,{}),T[14]=b):b=T[14],T[15]!==z?(_=z(),T[15]=z,T[16]=_):_=T[16],T[17]!==D||T[18]!==E?(j=(0,i.jsx)(R,{ssoOrgs:E,redirectLocation:D}),T[17]=D,T[18]=E,T[19]=j):j=T[19],T[20]!==W||T[21]!==_||T[22]!==j?(C=(0,i.jsx)(r.l,{title:"Single-sign on",className:f.banner,hideTitle:!0,icon:b,description:_,onDismiss:W,primaryAction:j,"data-testid":"global-sso-banner"}),T[20]=W,T[21]=_,T[22]=j,T[23]=C):C=T[23],T[24]!==C||T[25]!==G?(w=(0,i.jsx)(g,{hidden:G,children:C}),T[24]=C,T[25]=G,T[26]=w):w=T[26];let K=V&&F;return T[27]===Symbol.for("react.memo_cache_sentinel")?(N=()=>B(!1),T[27]=N):N=T[27],T[28]!==q||T[29]!==E||T[30]!==K?(S=(0,i.jsx)(I,{isOpen:K,onClose:N,onConfirm:q,ssoOrgs:E}),T[28]=q,T[29]=E,T[30]=K,T[31]=S):S=T[31],T[32]!==w||T[33]!==S?(k=(0,i.jsxs)(i.Fragment,{children:[w,S]}),T[32]=w,T[33]=S,T[34]=k):k=T[34],k}function O(e){return(0,i.jsx)("strong",{children:e.name},e.login)}function M(){let e,t=(0,a.c)(2),{ssoOrgs:n,suppressBanner:r}=function(){let{ssoOrgs:e,baseAvatarUrl:t}=(0,u.N)(),{current_sso_orgs_match_dismissed_cookie:n}=(0,p.X)()??{},i=s.useMemo(()=>e.filter(D).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[e,t]);return{suppressBanner:!0===n||function(e){let t=A();return e.length===t.length&&e.every(e=>t.includes(e.id))}(i),ssoOrgs:i,baseAvatarUrl:t}}();return 0===n.length||!(0,d.G7)("global_sso_banner")||r?null:(t[0]!==n?(e=(0,i.jsx)(P,{ssoOrgs:n}),t[0]=n,t[1]=e):e=t[1],e)}let F=L.z4;try{P.displayName||(P.displayName="GlobalSsoBanner")}catch{}try{M.displayName||(M.displayName="ContextualGlobalSsoBanner")}catch{}},42312:(e,t,n)=>{n.d(t,{KL:()=>l,U:()=>m});var i=n(74848),a=n(21728),s=n(71315),r=n(96540);let o=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function l(e){let t,n,l,m,h,p,f,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[x,v]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{v(t=>t.filter(t=>t!==e))},g[2]=l):l=g[2];let _=l;g[3]!==x?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=x.filter(u).sort(d);if(0===t.length)return;let n=t.findIndex(c),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},h=[x],g[3]=x,g[4]=m,g[5]=h):(m=g[4],h=g[5]),(0,r.useEffect)(m,h),g[6]===Symbol.for("react.memo_cache_sentinel")?(p={registerNavigableRef:b,unregisterNavigableRef:_},g[6]=p):p=g[6];let j=p;return g[7]!==y?(f=(0,i.jsx)(o.Provider,{value:j,children:y}),g[7]=y,g[8]=f):f=g[8],f}function c(e){return e.current?.contains(s.XC?.activeElement||null)}function d(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:l}=(0,r.useContext)(o);return n[0]!==s||n[1]!==l?(e=()=>(s(i),()=>{l(i)}),t=[s,l],n[0]=s,n[1]=l,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{o.displayName||(o.displayName="NavigableRefContext")}catch{}try{l.displayName||(l.displayName="NavigableRefProvider")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>m});var i=n(74848),a=n(21728),s=n(96540),r=n(13017),o=n(21373),l=n(1992),c=n(5524);let d={container:"Breadcrumbs-module__container--bnnIp",list:"Breadcrumbs-module__list--hG7n1",item:"Breadcrumbs-module__item--fekY7",link:"Breadcrumbs-module__link--A48Bt",text:"Breadcrumbs-module__text--yZS1N",icon:"Breadcrumbs-module__icon--CWnGJ",condensed:"Breadcrumbs-module__condensed--l60Z1",condensedList:"Breadcrumbs-module__condensedList--vpMXO",alwaysVisible:"Breadcrumbs-module__alwaysVisible--dK_nL",fullList:"Breadcrumbs-module__fullList--aHVvT"};var u=n(38621);let m=e=>{let t,n,r,u,m,y=(0,a.c)(31),{children:x,"aria-label":v,condensed:b}=e,_=void 0===v?"Breadcrumbs":v;if(y[0]!==x){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===h?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===p&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(x),y[0]=x,y[1]=t}else t=y[1];let j=t[t.length-1];y[2]!==t?(n=t.slice(0,-1),y[2]=t,y[3]=n):n=y[3];let C=n,w=t.length>=3,N=void 0!==b&&b&&w,S=s.useRef(null);if(void 0!==b)if(N){let e,t,n,a,s;return y[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(o.Q,{ref:S,className:d.link,children:"..."}),y[4]=e):e=y[4],y[5]!==C?(t=(0,i.jsx)("li",{className:d.item,children:(0,i.jsxs)(l.W,{children:[e,(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(c.l,{children:C.map(f)})})]})}),y[5]=C,y[6]=t):t=y[6],y[7]!==j?(n=j&&(j.hasMenu&&j.menuOverlay?(0,i.jsx)(p,{menuOverlay:j.menuOverlay,children:j.children}):j.href?(0,i.jsx)(h,{href:j.href,children:j.children}):null),y[7]=j,y[8]=n):n=y[8],y[9]!==t||y[10]!==n?(a=(0,i.jsxs)("ol",{className:d.list,children:[t,n]}),y[9]=t,y[10]=n,y[11]=a):a=y[11],y[12]!==_||y[13]!==a?(s=(0,i.jsx)("nav",{className:`${d.container} ${d.condensed}`,"aria-label":_,children:a}),y[12]=_,y[13]=a,y[14]=s):s=y[14],s}else{let e,t;return y[15]!==x?(e=(0,i.jsx)("ol",{className:d.list,children:x}),y[15]=x,y[16]=e):e=y[16],y[17]!==_||y[18]!==e?(t=(0,i.jsx)("nav",{className:d.container,"aria-label":_,children:e}),y[17]=_,y[18]=e,y[19]=t):t=y[19],t}let I=`${d.list} ${w?d.fullList:d.alwaysVisible}`;return y[20]!==x||y[21]!==I?(r=(0,i.jsx)("ol",{className:I,children:x}),y[20]=x,y[21]=I,y[22]=r):r=y[22],y[23]!==w||y[24]!==j||y[25]!==C?(u=w&&(0,i.jsxs)("ol",{className:`${d.list} ${d.condensedList}`,children:[(0,i.jsx)("li",{className:d.item,children:(0,i.jsxs)(l.W,{children:[(0,i.jsx)(o.Q,{ref:S,className:d.link,children:"..."}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(c.l,{children:C.map(g)})})]})}),j&&(j.hasMenu&&j.menuOverlay?(0,i.jsx)(p,{menuOverlay:j.menuOverlay,children:j.children}):j.href?(0,i.jsx)(h,{href:j.href,children:j.children}):null)]}),y[23]=w,y[24]=j,y[25]=C,y[26]=u):u=y[26],y[27]!==_||y[28]!==r||y[29]!==u?(m=(0,i.jsxs)("nav",{className:d.container,"aria-label":_,children:[r,u]}),y[27]=_,y[28]=r,y[29]=u,y[30]=m):m=y[30],m},h=e=>{let t,n,s,o,l,c=(0,a.c)(10);return c[0]!==e?({href:n,children:t,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=s):(t=c[1],n=c[2],s=c[3]),c[4]!==t?(o=(0,i.jsx)("span",{className:d.text,children:t}),c[4]=t,c[5]=o):o=c[5],c[6]!==n||c[7]!==s||c[8]!==o?(l=(0,i.jsx)("li",{className:d.item,children:(0,i.jsx)(r.N_,{...s,to:n,className:d.link,"aria-current":"page",children:o})}),c[6]=n,c[7]=s,c[8]=o,c[9]=l):l=c[9],l},p=e=>{let t,n,s,r,o=(0,a.c)(9),{buttonRef:c,children:m,menuOverlay:h}=e;return o[0]!==m?(t=(0,i.jsx)("span",{className:d.text,children:m}),o[0]=m,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:d.icon,children:(0,i.jsx)(u.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsxs)("button",{className:d.link,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==c||o[6]!==h||o[7]!==s?(r=(0,i.jsx)("li",{className:d.item,children:(0,i.jsxs)(l.W,{anchorRef:c,children:[s,h]})}),o[5]=c,o[6]=h,o[7]=s,o[8]=r):r=o[8],r};m.Item=h,m.ItemWithMenu=p;try{m.displayName||(m.displayName="Breadcrumbs")}catch{}try{h.displayName||(h.displayName="Item")}catch{}try{p.displayName||(p.displayName="ItemWithMenu")}catch{}function f(e){return(0,i.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}function g(e){return(0,i.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}},11607:(e,t,n)=>{n.d(t,{$:()=>c});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),o=n(13017);let l={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},c=(0,r.forwardRef)((e,t)=>{let n,r,c,d,u,m,h,p,f,g,y,x,v,b,_,j,C,w=(0,a.c)(65);w[0]!==e?({size:m,variant:h,condensed:p,iconOnly:f,icon:d,className:r,children:n,disabled:c,...u}=e,w[0]=e,w[1]=n,w[2]=r,w[3]=c,w[4]=d,w[5]=u,w[6]=m,w[7]=h,w[8]=p,w[9]=f):(n=w[1],r=w[2],c=w[3],d=w[4],u=w[5],m=w[6],h=w[7],p=w[8],f=w[9]);let N=void 0===h?"default":h,S=void 0!==p&&p,I=void 0!==f&&f,k=l[void 0===m?"small":m],T=l[N],L=S&&l.condensed,E=I&&l.iconOnly,R=c&&l.disabled;w[10]!==r||w[11]!==k||w[12]!==T||w[13]!==L||w[14]!==E||w[15]!==R?(g=(0,s.$)(l.button,k,T,L,E,R,r),w[10]=r,w[11]=k,w[12]=T,w[13]=L,w[14]=E,w[15]=R,w[16]=g):g=w[16];let A=g;w[17]!==d?(y=null!=d?(0,i.jsx)("span",{className:l.icon,children:d}):null,w[17]=d,w[18]=y):y=w[18],w[19]!==n||w[20]!==I?(x=!I&&n?(0,i.jsx)("span",{className:l.text,children:n}):null,w[19]=n,w[20]=I,w[21]=x):x=w[21],w[22]!==y||w[23]!==x?(v=(0,i.jsxs)(i.Fragment,{children:[y,x]}),w[22]=y,w[23]=x,w[24]=v):v=w[24];let D=v;if("to"in u){let e,n,a,s;return w[25]!==u?({to:a,onClick:e,...n}=u,w[25]=u,w[26]=e,w[27]=n,w[28]=a):(e=w[26],n=w[27],a=w[28]),w[29]!==A||w[30]!==D||w[31]!==c||w[32]!==e||w[33]!==n||w[34]!==t||w[35]!==a?(s=(0,i.jsx)(o.N_,{ref:t,to:a,className:A,"aria-disabled":c,onClick:e,...n,children:D}),w[29]=A,w[30]=D,w[31]=c,w[32]=e,w[33]=n,w[34]=t,w[35]=a,w[36]=s):s=w[36],s}if("href"in u){let e,n,a,s,r,o;return w[37]!==u?({href:e,target:r,rel:a,onClick:n,...s}=u,w[37]=u,w[38]=e,w[39]=n,w[40]=a,w[41]=s,w[42]=r):(e=w[38],n=w[39],a=w[40],s=w[41],r=w[42]),w[43]!==A||w[44]!==D||w[45]!==c||w[46]!==e||w[47]!==n||w[48]!==a||w[49]!==s||w[50]!==t||w[51]!==r?(o=(0,i.jsx)("a",{ref:t,href:e,target:r,rel:a,className:A,"aria-disabled":c,onClick:n,...s,children:D}),w[43]=A,w[44]=D,w[45]=c,w[46]=e,w[47]=n,w[48]=a,w[49]=s,w[50]=t,w[51]=r,w[52]=o):o=w[52],o}w[53]!==u?({onClick:b,type:j,..._}=u,w[53]=u,w[54]=b,w[55]=_,w[56]=j):(b=w[54],_=w[55],j=w[56]);let P=void 0===j?"button":j;return w[57]!==A||w[58]!==D||w[59]!==c||w[60]!==b||w[61]!==_||w[62]!==t||w[63]!==P?(C=(0,i.jsx)("button",{ref:t,type:P,onClick:b,disabled:c,className:A,..._,children:D}),w[57]=A,w[58]=D,w[59]=c,w[60]=b,w[61]=_,w[62]=t,w[63]=P,w[64]=C):C=w[64],C});c.displayName="Button"},27912:(e,t,n)=>{n.d(t,{X:()=>L,P:()=>D});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),o=n(57919),l=n(69599),c=n(16070);let d={container:"Layout-module__container--qlyoa",resizing:"Layout-module__resizing--rf7h4",banner:"Layout-module__banner--b14up",sidebar:"Layout-module__sidebar--r6coV",mainColumn:"Layout-module__mainColumn--OFMVb",secondaryColumn:"Layout-module__secondaryColumn--Ut9LZ",monoView:"Layout-module__monoView--z920C",sidebarCondensed:"Layout-module__sidebarCondensed--m7Zsu",panelView:"Layout-module__panelView--l6qZ7",columnLeft:"Layout-module__columnLeft--jY2aC",secondaryColumnVisible:"Layout-module__secondaryColumnVisible--RdfK7",resourcePanelOpen:"Layout-module__resourcePanelOpen--vh9_8",splitView:"Layout-module__splitView--ldg6X",columnRight:"Layout-module__columnRight--WBwz7",mainColumnRight:"Layout-module__mainColumnRight--Izd_P",verticalSecondaryColumn:"Layout-module__verticalSecondaryColumn--O2DEP",secondaryColumnHidden:"Layout-module__secondaryColumnHidden--y3gv6"},u={header:"Header-module__header--tjtIT",columnHeader:"Header-module__columnHeader--UxTKW",column:"Header-module__column--ysX1b",leftColumn:"Header-module__leftColumn--MghGY",rightColumn:"Header-module__rightColumn--AckUb"};var m=n(38621),h=n(894),p=n(11607);let f={sidebarToggleButton:"SidebarToggle-module__sidebarToggleButton--NAVdU"};function g(){let e,t,n=(0,a.c)(3),{toggleSidebar:s}=(0,h.L)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(m.ThreeBarsIcon,{}),n[0]=e):e=n[0],n[1]!==s?(t=(0,i.jsx)("div",{className:f.sidebarToggleButton,children:(0,i.jsx)(p.$,{icon:e,iconOnly:!0,onClick:s,"aria-label":"Toggle sidebar"})}),n[1]=s,n[2]=t):t=n[2],t}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,r,o,l,c=(0,a.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.leftColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,i.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function x(e){let t,n,r,o,l,c=(0,a.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.rightColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,i.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function v(e){let t,n,r,l,c,d,m,h=(0,a.c)(20);h[0]!==e?({children:t,className:n,...r}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=r):(t=h[1],n=h[2],r=h[3]),h[4]===Symbol.for("react.memo_cache_sentinel")?(l={leftColumn:y,rightColumn:x},h[4]=l):l=h[4];let[p]=(0,o.H)(t,l);if(p.leftColumn&&p.rightColumn){let e,t,a;return h[5]!==n?(e=(0,s.$)(u.columnHeader,n),h[5]=n,h[6]=e):e=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(g,{}),h[7]=t):t=h[7],h[8]!==r||h[9]!==p.leftColumn||h[10]!==p.rightColumn||h[11]!==e?(a=(0,i.jsxs)("header",{className:e,...r,children:[t,p.leftColumn,p.rightColumn]}),h[8]=r,h[9]=p.leftColumn,h[10]=p.rightColumn,h[11]=e,h[12]=a):a=h[12],a}return h[13]!==n?(c=(0,s.$)(u.header,n),h[13]=n,h[14]=c):c=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(g,{}),h[15]=d):d=h[15],h[16]!==t||h[17]!==r||h[18]!==c?(m=(0,i.jsxs)("header",{className:c,...r,children:[d,t]}),h[16]=t,h[17]=r,h[18]=c,h[19]=m):m=h[19],m}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{x.displayName||(x.displayName="HeaderRight")}catch{}try{v.displayName||(v.displayName="Header")}catch{}let b={headerToggleOnly:"HeaderToggleOnly-module__headerToggleOnly--wC7_E"};function _(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:b.headerToggleOnly,children:(0,i.jsx)(g,{})}),t[0]=e):e=t[0],e}try{_.displayName||(_.displayName="HeaderToggleOnly")}catch{}let j={container:"Sidebar-module__container--onmDW",header:"Sidebar-module__header--rIhJd",sidebar:"Sidebar-module__sidebar--u6QU6",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--fQq3y",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--_YU5M",githubLogo:"Sidebar-module__githubLogo--qLZu3",visible:"Sidebar-module__visible--NW0KW",toggleSidebarContainer:"Sidebar-module__toggleSidebarContainer--QtdhW",iconLineTop:"Sidebar-module__iconLineTop--Ef2Ww",iconLineBottom:"Sidebar-module__iconLineBottom--QhwW5",condensed:"Sidebar-module__condensed--DvFLD",toggleIcon:"Sidebar-module__toggleIcon--MWRyj"};var C=n(36523),w=n(77999);function N(e){let t,n,o,l,c,d,u,h,f,g,y,x,v=(0,a.c)(37),{children:b,className:_,isVisible:N,isExpanded:S,sidebarRef:I,onToggle:k,"data-testid":T}=e,L=!S,E=(0,C.L)(I),R=(0,r.useId)();v[0]!==N?(t=()=>N?(0,i.jsx)(m.XIcon,{}):(0,i.jsx)(m.ThreeBarsIcon,{}),v[0]=N,v[1]=t):t=v[1];let A=t,D=`${R}-copilot-navigation`;v[2]!==_||v[3]!==L||v[4]!==N?(n=(0,s.$)(j.container,_,{[j.visible]:N,[j.condensed]:L}),v[2]=_,v[3]=L,v[4]=N,v[5]=n):n=v[5];let P=`${R}-copilot-navigation`;v[6]!==P?(o=(0,i.jsx)("h2",{id:P,className:"sr-only",children:"Copilot navigation"}),v[6]=P,v[7]=o):o=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("a",{href:"/",target:"_self",className:j.githubLogo,"aria-label":"GitHub homepage",children:(0,i.jsx)(m.MarkGithubIcon,{size:32})}),v[8]=l):l=v[8];let O=N?"Close sidebar":"Open sidebar",M=N?"invisible":"default";v[9]!==A?(c=A(),v[9]=A,v[10]=c):c=v[10],v[11]!==k||v[12]!==O||v[13]!==M||v[14]!==c?(d=(0,i.jsx)(p.$,{className:j.toggleSidebarFloating,"aria-label":O,onClick:k,iconOnly:!0,variant:M,icon:c}),v[11]=k,v[12]=O,v[13]=M,v[14]=c,v[15]=d):d=v[15],v[16]!==d||v[17]!==o?(u=(0,i.jsxs)("div",{className:j.header,children:[o,l,d]}),v[16]=d,v[17]=o,v[18]=u):u=v[18],v[19]!==b||v[20]!==u?(h=(0,i.jsxs)("div",{className:j.sidebar,children:[u,b]}),v[19]=b,v[20]=u,v[21]=h):h=v[21];let F=N||S?"Condense":"Expand",B=S?-8:0,$=N||S?"Condense sidebar":"Expand sidebar";return v[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",className:j.toggleIcon,children:[(0,i.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineTop}),(0,i.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineBottom})]}),v[22]=f):f=v[22],v[23]!==k||v[24]!==$?(g=(0,i.jsx)("button",{className:j.toggleSidebarVertical,"aria-label":$,onClick:k,children:f}),v[23]=k,v[24]=$,v[25]=g):g=v[25],v[26]!==F||v[27]!==B||v[28]!==g?(y=(0,i.jsx)("div",{className:j.toggleSidebarContainer,children:(0,i.jsx)(w.m,{text:F,offset:B,children:g})}),v[26]=F,v[27]=B,v[28]=g,v[29]=y):y=v[29],v[30]!==T||v[31]!==E||v[32]!==h||v[33]!==y||v[34]!==D||v[35]!==n?(x=(0,i.jsxs)("aside",{"aria-labelledby":D,ref:E,className:n,"data-testid":T,children:[h,y]}),v[30]=T,v[31]=E,v[32]=h,v[33]=y,v[34]=D,v[35]=n,v[36]=x):x=v[36],x}try{N.displayName||(N.displayName="Sidebar")}catch{}function S(e){let t,n,r,o,l,c,u=(0,a.c)(17);if(u[0]!==e){let{children:i,className:a,onToggle:s,"data-testid":l,...c}=e;t=i,n=a,r=l,o=c,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o}else t=u[1],n=u[2],r=u[3],o=u[4];let{sidebarExpanded:m,sidebarVisible:p,layoutBreakpoint:f,toggleSidebar:g,sidebarRef:y}=(0,h.L)();return u[5]!==n?(l=(0,s.$)(d.sidebar,n),u[5]=n,u[6]=l):l=u[6],u[7]!==t||u[8]!==r||u[9]!==f||u[10]!==o||u[11]!==m||u[12]!==y||u[13]!==p||u[14]!==l||u[15]!==g?(c=(0,i.jsx)(N,{className:l,isFloating:f,isVisible:p,isExpanded:m,onToggle:g,sidebarRef:y,"data-testid":r,...o,children:t}),u[7]=t,u[8]=r,u[9]=f,u[10]=o,u[11]=m,u[12]=y,u[13]=p,u[14]=l,u[15]=g,u[16]=c):c=u[16],c}function I(e){let t,n,r,o,l,c=(0,a.c)(11);c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]);let{mainColumn:u}=(0,h.L)(),m="left"===u?d.mainColumn:d.secondaryColumn;return c[4]!==n||c[5]!==m?(o=(0,s.$)(d.columnLeft,m,n),c[4]=n,c[5]=m,c[6]=o):o=c[6],c[7]!==t||c[8]!==r||c[9]!==o?(l=(0,i.jsx)("div",{className:o,"data-column-position":"left",...r,children:t}),c[7]=t,c[8]=r,c[9]=o,c[10]=l):l=c[10],l}function k(e){let t,n,r,o,l,c,u=(0,a.c)(13);u[0]!==e?({children:t,className:n,"data-testid":r,...o}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o):(t=u[1],n=u[2],r=u[3],o=u[4]);let{mainColumn:m}=(0,h.L)(),p="right"===m?d.mainColumn:d.secondaryColumn;return u[5]!==n||u[6]!==p?(l=(0,s.$)(d.columnRight,p,n),u[5]=n,u[6]=p,u[7]=l):l=u[7],u[8]!==t||u[9]!==r||u[10]!==o||u[11]!==l?(c=(0,i.jsx)("div",{className:l,"data-testid":r,"data-column-position":"right",...o,children:t}),u[8]=t,u[9]=r,u[10]=o,u[11]=l,u[12]=c):c=u[12],c}function T(){let e,t=(0,a.c)(1);return(0,l.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:d.banner,children:(0,i.jsx)(c.Y0,{})}),t[0]=e):e=t[0],e):null}let L="(max-width: 1024px)",E="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function R(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(E);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function A(e){let t,n,l,c,u,m,p,f,g,b,j,C,w,N,A,D=(0,a.c)(30);D[0]!==e?({children:t,className:n,mainColumn:f,"data-testid":l,secondaryColumnState:p,resourcePanelState:m,faviconOverride:c,mobileSecondaryColumnDirection:g,...u}=e,D[0]=e,D[1]=t,D[2]=n,D[3]=l,D[4]=c,D[5]=u,D[6]=m,D[7]=p,D[8]=f,D[9]=g):(t=D[1],n=D[2],l=D[3],c=D[4],u=D[5],m=D[6],p=D[7],f=D[8],g=D[9]);let P=void 0===f?"left":f,O=void 0===g?"horizontal":g;D[10]===Symbol.for("react.memo_cache_sentinel")?(b={banner:T,header:v,sidebar:S,columnLeft:I,columnRight:k},D[10]=b):b=D[10];let[M]=(0,o.H)(t,b),F=function(e){if(!e||!(0,r.isValidElement)(e))return!1;let t=!1,n=!1,i=e.props.children;for(let e of r.Children.toArray(i))(0,r.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===x&&(n=!0));return t&&n}(M.header||null),B=!!M.columnLeft&&!M.columnRight||!M.columnLeft&&!!M.columnRight,$=!!M.columnLeft&&!!M.columnRight,U=!F&&!B,V=function(e,t,n){let i,s,o,l,c,d,u,m=(0,a.c)(27),[h,p]=(0,r.useState)(R),[f,g]=(0,r.useState)(!1),y=(0,r.useState)(!1),x=(0,r.useState)(!1),[v,b]=t??y,[_,j]=n??x;m[0]!==j||m[1]!==b?(i=e=>{e?(b(!1),j(!1)):g(!1)},m[0]=j,m[1]=b,m[2]=i):i=m[2];let C=function(e,t){let n,i,s,o=(0,a.c)(6);o[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,o[0]=e,o[1]=n):n=o[1];let[l,c]=(0,r.useState)(n);return o[2]!==t||o[3]!==e?(i=()=>{let n=window.matchMedia(e),i=e=>{c(e.matches),t&&t(e.matches)};return c(n.matches),n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},s=[e,t],o[2]=t,o[3]=e,o[4]=i,o[5]=s):(i=o[4],s=o[5]),(0,r.useEffect)(i,s),l}(L,i),w=(0,r.useRef)(null),N=(0,r.useRef)(null);m[3]!==C||m[4]!==h||m[5]!==f?(s=()=>{if(C)g(!f);else{let e=!h;p(e);if("undefined"!=typeof window)try{localStorage.setItem(E,JSON.stringify(e))}catch{}}},m[3]=C,m[4]=h,m[5]=f,m[6]=s):s=m[6];let S=s;m[7]!==v||m[8]!==j||m[9]!==b?(o=()=>{v&&j(!1),b(!v)},m[7]=v,m[8]=j,m[9]=b,m[10]=o):o=m[10];let I=o;m[11]!==_||m[12]!==j?(l=()=>{j(!_)},m[11]=_,m[12]=j,m[13]=l):l=m[13];let k=l;return m[14]!==f?(c=()=>{if(f&&N.current){let e=e=>{N.current&&!N.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},d=[f],m[14]=f,m[15]=c,m[16]=d):(c=m[15],d=m[16]),(0,r.useEffect)(c,d),m[17]!==C||m[18]!==e||m[19]!==_||m[20]!==v||m[21]!==h||m[22]!==f||m[23]!==k||m[24]!==I||m[25]!==S?(u={sidebarExpanded:h,sidebarVisible:f,toggleSidebar:S,secondaryColumnVisible:v,toggleSecondaryColumn:I,resourcePanelOpen:_,toggleResourcePanel:k,layoutBreakpoint:C,mainColumn:e,containerRef:w,sidebarRef:N},m[17]=C,m[18]=e,m[19]=_,m[20]=v,m[21]=h,m[22]=f,m[23]=k,m[24]=I,m[25]=S,m[26]=u):u=m[26],u}(P,p,m),{containerRef:H,secondaryColumnVisible:W,sidebarExpanded:q,resourcePanelOpen:z}=V,G=function(e,t){let n,i,s=(0,a.c)(6),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(void 0);return void 0!==s[0]||s[1]!==e.current?(n=()=>{if(!e.current)return;let t=new ResizeObserver(e=>{l(!0),c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{l(!1)},150)});return t.observe(e.current),()=>{t.disconnect(),c.current&&clearTimeout(c.current)}},s[0]=t,s[1]=e.current,s[2]=n):n=s[2],s[3]!==t||s[4]!==e?(i=[e,t],s[3]=t,s[4]=e,s[5]=i):i=s[5],(0,r.useEffect)(n,i),o}(H),K=h.M,Q=(0,s.$)(d.container,U&&d.panelView,F&&d.splitView,F&&"right"===P&&d.mainColumnRight,W&&d.secondaryColumnVisible,!W&&$&&d.secondaryColumnHidden,z&&d.resourcePanelOpen,B&&d.monoView,!q&&d.sidebarCondensed,G&&d.resizing,"vertical"===O&&d.verticalSecondaryColumn,n);return D[11]!==c?(j=c&&(0,i.jsx)("span",{"data-favicon-override":c,"data-testid":"favicon-override"}),D[11]=c,D[12]=j):j=D[12],D[13]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)(T,{}),D[13]=C):C=D[13],D[14]!==M.header?(w=M.header||(0,i.jsx)(_,{}),D[14]=M.header,D[15]=w):w=D[15],D[16]!==H||D[17]!==l||D[18]!==u||D[19]!==M.columnLeft||D[20]!==M.columnRight||D[21]!==M.sidebar||D[22]!==Q||D[23]!==j||D[24]!==w?(N=(0,i.jsxs)("div",{className:Q,"data-testid":l,ref:H,...u,children:[j,C,w,M.sidebar,M.columnLeft,M.columnRight]}),D[16]=H,D[17]=l,D[18]=u,D[19]=M.columnLeft,D[20]=M.columnRight,D[21]=M.sidebar,D[22]=Q,D[23]=j,D[24]=w,D[25]=N):N=D[25],D[26]!==V||D[27]!==K.Provider||D[28]!==N?(A=(0,i.jsx)(K.Provider,{value:V,children:N}),D[26]=V,D[27]=K.Provider,D[28]=N,D[29]=A):A=D[29],A}let D=Object.assign(A,{Banner:T,Sidebar:S,ColumnLeft:I,ColumnRight:k,Header:v,HeaderLeft:y,HeaderRight:x});try{S.displayName||(S.displayName="LayoutSidebar")}catch{}try{I.displayName||(I.displayName="ColumnLeft")}catch{}try{k.displayName||(k.displayName="ColumnRight")}catch{}try{T.displayName||(T.displayName="Banner")}catch{}try{L.displayName||(L.displayName="LAYOUT_BREAKPOINT")}catch{}try{A.displayName||(A.displayName="LayoutRoot")}catch{}try{D.displayName||(D.displayName="Layout")}catch{}},71205:(e,t,n)=>{n.d(t,{W:()=>l});var i=n(74848),a=n(21728),s=n(34164),r=n(13017);let o={item:"SidebarListItem-module__item--x3BBP",link:"SidebarListItem-module__link--_g1X4",statusIcon:"SidebarListItem-module__statusIcon--Oc8Sk",text:"SidebarListItem-module__text--xnDP7",trailingAction:"SidebarListItem-module__trailingAction--S8yi9"};function l(e){let t,n,l,c,d,u,m=(0,a.c)(18),{href:h,text:p,isSelected:f,trailingAction:g,onClick:y,className:x,leadingVisual:v}=e;m[0]!==x?(t=(0,s.$)(o.item,x),m[0]=x,m[1]=t):t=m[1];let b=f?"page":void 0;return m[2]!==v?(n=v&&(0,i.jsx)("span",{className:o.statusIcon,children:(0,i.jsx)(v,{})}),m[2]=v,m[3]=n):n=m[3],m[4]!==p?(l=(0,i.jsx)("span",{className:o.text,children:p}),m[4]=p,m[5]=l):l=m[5],m[6]!==h||m[7]!==y||m[8]!==b||m[9]!==n||m[10]!==l?(c=(0,i.jsxs)(r.N_,{className:o.link,to:h,"aria-current":b,onClick:y,children:[n,l]}),m[6]=h,m[7]=y,m[8]=b,m[9]=n,m[10]=l,m[11]=c):c=m[11],m[12]!==g?(d=g?(0,i.jsx)("span",{className:o.trailingAction,children:g}):null,m[12]=g,m[13]=d):d=m[13],m[14]!==t||m[15]!==c||m[16]!==d?(u=(0,i.jsxs)("li",{className:t,children:[c,d]}),m[14]=t,m[15]=c,m[16]=d,m[17]=u):u=m[17],u}try{l.displayName||(l.displayName="SidebarListItem")}catch{}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),o=n(71988),l=n(96540);let c={tooltip:"Tooltip-module__tooltip--hAat9"},d=(0,l.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:u=8,...m},h)=>{let[p,f]=(0,l.useState)(!1),g=(0,l.useRef)(null),{refs:y,floatingStyles:x,context:v,isPositioned:b}=(0,s.we)({open:p,onOpenChange:f,placement:t,middleware:[(0,r.cY)(u),...t?[]:[(0,r.RK)()]],whileElementsMounted:o.ll}),_=(0,s.Mk)(v,{move:!1,delay:{open:100,close:0}}),j=(0,s.iQ)(v),C=(0,s.s9)(v),w=(0,s.It)(v,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:N,getFloatingProps:S}=(0,s.bv)([_,j,C,w]),I=N();"label"===d?m["aria-label"]=e:"description"===d&&(m["aria-describedby"]=v.floatingId);let k=(0,s.SV)([y.setReference,h]),T=(0,l.cloneElement)(n,{...I,...m,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),g.current&&(clearTimeout(g.current),g.current=null)},ref:k});return(0,i.jsxs)(i.Fragment,{children:[T,p&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:y.setFloating,id:v.floatingId,style:{...x,visibility:b?"visible":"hidden"},className:(0,a.$)(c.tooltip),...S(),children:e})})]})});d.displayName="Tooltip"},95807:(e,t,n)=>{n.d(t,{i:()=>p});var i=n(74848),a=n(96379),s=n(21373),r=n(69726),o=n(11196),l=n(96540),c=n(30459),d=n(57224),u=n(70263);let m={button:"PullRequestsProcessingIndicator-module__button--IKkby",indicator:"PullRequestsProcessingIndicator-module__indicator--iNiwb",text:"PullRequestsProcessingIndicator-module__text--JUMXg"},h={stale:!1,latest_unsynced_push_to_head_ref_at:null};function p({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[s,r]=(0,l.useState)(h),o=(0,u.A)(),c=(0,l.useCallback)(async()=>{try{let t=await (0,a.lS)(e);if(t.ok){let e=await t.json();o()&&r(e)}}catch{o()&&r(h)}},[o,e]);(0,l.useEffect)(()=>{c()},[]);let{stale:m,latest_unsynced_push_to_head_ref_at:p}=s;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(d.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(f,{pullRequestId:n,repositoryId:t,stale:m,latest_unsynced_push_to_head_ref_at:p})})})}function f({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:l}=(0,c.s)();if(!n||!a)return null;let d=new Date,u=new Date(a),h=Math.round(d.getTime()-u.getTime())/1e3;return h<20||h>=86400?null:(l("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:h}),(0,i.jsx)(o.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(s.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:m.button,children:(0,i.jsxs)("div",{className:m.indicator,children:[(0,i.jsx)(r.A,{size:"small"}),(0,i.jsx)("span",{className:m.text,children:"Processing updates"})]})})}))}try{p.displayName||(p.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{f.displayName||(f.displayName="PullRequestsProcessingIndicator")}catch{}},79658:(e,t,n)=>{n.d(t,{b:()=>nB});var i,a,s,r,o,l=n(74848),c=n(46001),d=n(70719),u=n(79472),m=n(18799),h=n(71315),p=n(83494),f=n(70843),g=n(69726),y=n(15042),x=n(87555),v=n(34164),b=n(96540),_=n(70170),j=n(56051),C=n(5524),w=n(96459),N=n(53627),S=n(82603);function I({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:i,viewerLogin:a,setFileFilterState:s}){let[r]=(0,w.o)(),{data:o}=(0,S.dG)({basePath:e}),{filterText:c,fileExtensions:d,unselectedFileExtensions:u,showOnlyOwnedFiles:m,showDeletedFiles:h,showOnlyManifestFiles:p,showVendoredFiles:f,showViewedFiles:g}={...n},{canSeeDeletedFilesFilter:y,canSeeOnlyManifestFilesFilter:x,canSeeVendorFilesFilter:v}=t,{canSeeCodeownersFilter:I}=t,k=0;o&&(I=o.isViewerOneOfMultipleCodeowners,k=Object.values(o.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let T=(0,b.useRef)((0,_.s)(e=>L({filterText:e}),250)),L=(0,b.useCallback)((e,t)=>{t&&(0,N.MM)(t),s({...e})},[s]);return(0,l.jsx)(j.kF,{filterSize:i,filterText:c,fileExtensions:d,unselectedFileExtensions:u,onFilterTextChange:e=>T.current(e),onFilterChange:(e,t)=>{let n=u;"selectFileExtension"===e?n=new Set([...u].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...u,t.extension]));let i=Object.keys(d).filter(e=>!n.has(e)),a=new URLSearchParams(r);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),L({unselectedFileExtensions:n},a)},additionalFilterGroups:(0,l.jsxs)(l.Fragment,{children:[I&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.l.Divider,{}),(0,l.jsx)(C.l.Group,{selectionVariant:"single",children:(0,l.jsx)(C.l.Item,{selected:m,onSelect:()=>{if(!a)return;let e=new URLSearchParams(r);m?e.delete("owned-by[]",a):e.set("owned-by[]",a),L({showOnlyOwnedFiles:!m},e)},children:`Only files owned by you (${k})`})})]}),(0,l.jsx)(C.l.Divider,{}),(0,l.jsxs)(C.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[x&&(0,l.jsx)(C.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(r);e.set("manifests",`${!p}`),L({showOnlyManifestFiles:!p},e)},children:"Only manifest files"}),y&&(0,l.jsx)(C.l.Item,{selected:h,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-deleted-files",`${!h}`),L({showDeletedFiles:!h},e)},children:"Deleted files"}),v&&(0,l.jsx)(C.l.Item,{selected:f,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-vendored-files",`${!f}`),L({showVendoredFiles:!f},e)},children:"Vendored files"}),(0,l.jsx)(C.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-viewed-files",`${!g}`),L({showViewedFiles:!g},e)},children:"Viewed files"})]})]})})}try{I.displayName||(I.displayName="FileFilter")}catch{}var k=n(1946),T=n(75202),L=n(59201),E=n(81960),R=n(11196);let A={GroupsListContainer:"GroupsList-module__GroupsListContainer--x6dMy",GroupItem:"GroupsList-module__GroupItem--vAFCe"};var D=n(34535),P=n(30459);function O(){let{sendAnalyticsEvent:e}=(0,P.s)();return{sendPullRequestAnalyticsEvent:(0,b.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}var M=n(38621),F=n(26108),B=n(64451),$=n(36284),U=n(88432),V=n(4175),H=n(21373);let W=[{label:"Groups contain changes that do not belong together",value:"NOT_RELEVANT"},{label:"Groups are harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Groups are poorly formatted",value:"POORLY_FORMATTED"},{label:"Groups are not helpful",value:"NOT_HELPFUL"},{label:"Groups miss changes that should be included",value:"MISSED_CONTENT"},{label:"Other",value:"OTHER"}];function q({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i=W}){let[a,s]=(0,b.useState)(!1),[r,o]=(0,b.useState)([]),[c,d]=(0,b.useState)(""),u=e=>{e.preventDefault(),s(!0),r.length&&t({type:"NEGATIVE",feedbackChoice:r,textResponse:c})};return(0,l.jsx)(y.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,l.jsxs)("form",{onSubmit:u,children:[(0,l.jsxs)(y.l.Body,{children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsxs)(B.A,{onChange:o,required:!0,children:[(0,l.jsx)(B.A.Label,{children:"Category"}),i.map(e=>(0,l.jsxs)($.A,{id:`feedback_choice_${e.value}`,children:[(0,l.jsx)(U.A,{value:e.value}),(0,l.jsx)($.A.Label,{children:e.label})]},e.value)),a&&!r.length&&(0,l.jsx)(B.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,l.jsxs)($.A,{id:"text_response",children:[(0,l.jsx)($.A.Label,{children:"How should we improve this response?"}),(0,l.jsx)(V.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>d(e.currentTarget.value)})]})]}),(0,l.jsx)(y.l.Footer,{children:(0,l.jsx)(H.Q,{type:"submit",disabled:a&&(!c||!r),children:"Submit"})})]})})}try{q.displayName||(q.displayName="NegativeFeedbackForm")}catch{}function z({disabled:e,onClick:t}){return(0,l.jsx)(F.K,{size:"small",variant:"invisible",disabled:e,icon:M.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:()=>t({type:"POSITIVE"})})}function G({disabled:e,onClick:t,feedbackOptions:n}){let[i,a]=(0,b.useState)(!1),s=(0,b.useRef)(null);return(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(q,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,l.jsx)(F.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:M.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:()=>a(!0)})]})}try{z.displayName||(z.displayName="PositiveFeedbackButton")}catch{}try{G.displayName||(G.displayName="NegativeFeedbackButton")}catch{}var K=n(20622),Q=n(53885),Y=n(94747),J=n(48845);let X=({feedbackOptions:e})=>{let[t,n]=(0,b.useState)(),{mutate:i}=function(){let e=(0,Q.e)(K.u.submitCopilotGroupsFeedback);return(0,Y.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,J.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,J.hp)(s);return(0,J.R)(s,r),r}})}(),a=e=>{n(e.type),i(e)};return(0,l.jsxs)("div",{className:"d-flex gap-1",children:["NEGATIVE"!==t&&(0,l.jsx)(z,{disabled:!!t,onClick:a,feedbackOptions:e}),"POSITIVE"!==t&&(0,l.jsx)(G,{disabled:!!t,onClick:a,feedbackOptions:e})]})},Z=()=>(0,l.jsx)(T.t,{fallback:null,children:(0,l.jsx)(X,{})});try{X.displayName||(X.displayName="Feedback")}catch{}try{Z.displayName||(Z.displayName="GroupsFeedback")}catch{}function ee({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i}){let{sendPullRequestAnalyticsEvent:a}=O();return 0===e.length?null:(0,l.jsxs)("div",{className:A.GroupsListContainer,children:[(0,l.jsxs)(E.A,{as:"h2",className:"h6 fgColor-muted d-flex flex-items-center flex-justify-between gap-2",children:["Groups by Copilot",(0,l.jsx)(Z,{})]}),(0,l.jsxs)(C.l,{children:[(0,l.jsx)(C.l.Item,{active:void 0===t,onSelect:()=>{a("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},children:"All files"},"All files"),e.sort((e,t)=>e.priority-t.priority).map(e=>(0,l.jsx)(et,{group:e,activeGroupId:t,onSelectGroup:n},e.id))]})]})}function et({group:e,activeGroupId:t,onSelectGroup:n}){let{sendPullRequestAnalyticsEvent:i}=O(),a=(0,b.useRef)(null),s=(0,D.Z)({focusRowRef:a,mouseRowRef:a}),r=(0,l.jsx)(C.l.Item,{active:t===e.id,onSelect:()=>{i("groups_list.select_group","GROUPS_LIST_ITEM"),n(e.id)},ref:a,children:(0,l.jsx)("div",{className:(0,v.$)(A.GroupItem,"PRIVATE_TreeView-item-content-text"),children:e.name})},e.name);return s?(0,l.jsx)(R.m,{text:e.name,direction:"ne",children:r}):r}try{ee.displayName||(ee.displayName="GroupsList")}catch{}try{et.displayName||(et.displayName="GroupItem")}catch{}let en="pr-file-tree";function ei({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,showPullRequestGroups:s=!1}){let r=(0,b.useCallback)(e=>(0,l.jsx)(ea,{...e},e.file.filePath),[]),o=(0,L.iY)(),c=(0,L.YL)();return(0,l.jsxs)(l.Fragment,{children:[s&&o&&(0,l.jsx)(ee,{activeGroupId:c,groups:o,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})}}),(0,l.jsx)(T.t,{fallback:(0,l.jsx)("span",{children:"File tree failed to load."}),children:(0,l.jsxs)("div",{className:(0,v.$)("d-flex flex-column",e),id:en,children:[(0,l.jsx)("div",{className:"pb-3 pr-3",children:t}),(0,l.jsxs)("div",{style:{overflowY:"auto"},children:[(0,l.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,l.jsx)(k.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-3"})]})]})})]})}let ea=(0,b.memo)(function({file:e,...t}){let n=Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),i=(0,L.Qb)(n),a={...e,diff:{...e.diff,totalCommentsCount:i}};return(0,l.jsx)(k.ZH,{file:a,...t})});try{ei.displayName||(ei.displayName="PullRequestFileTree")}catch{}try{ea.displayName||(ea.displayName="PullRequestFile")}catch{}let es={sidebar:"PullRequestFileTree-module__sidebar--A_ZKx"};var er=n(1805),eo=n(97949),el=n(25407),ec=n(96379);function ed({pageLimits:e,repository:t,urls:n}){let i=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function a(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ec.DI)((0,el.ZD8)({repo:t}),{body:e,method:"POST"})}let s=(0,l.jsxs)(l.Fragment,{children:[(()=>{let t=[];e.filesLimitExceeded&&t.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&t.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&t.push(`${e.annotationsLimit} alerts`);let n="";return 1===t.length?n=`${t[0]}`:2===t.length?n=`${t[0]} and ${t[1]}`:3===t.length&&(n=`${t[0]}, ${t[1]}, and ${t[2]}`),"Only the first "+n+" are currently being shown."})()," To see more,"," ",(0,l.jsx)(er.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:a,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return i?(0,l.jsx)(eo.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:s,className:"mb-3"}):null}try{ed.displayName||(ed.displayName="PageLimitsBanner")}catch{}var eu=n(19976),em=n(26382);function eh(){return(0,l.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,l.jsx)(em.E,{border:!1,spacious:!0,children:(0,l.jsx)(em.E.Heading,{children:"No files matched your search"})})})}try{eh.displayName||(eh.displayName="FilesChangedFilterBlankSlate")}catch{}var ep=n(59523),ef=n(87459),eg=n(66358);function ey({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){var a,s,r,o;let c,d,u=(0,b.useId)(),m=(0,S.o5)({basePath:e,diffPath:n});if(!m)return null;let{isOwnedByViewer:h,owners:p,ruleLineNumber:f,ruleUrl:g}=m.data;if(!(h||p.length>0))return null;let y=(a=h,s=p,r=f,o=i,c="Owned by ",d=s,a&&(c+="you",o&&(d=s.filter(e=>e!==`@${o}`)),d.length>0&&(c+=" along with ")),c+=d.join(", "),r&&(c+=` (from CODEOWNERS line ${r})`),c);return(0,l.jsx)(R.m,{id:u,"aria-label":y,text:y,children:g?(0,l.jsx)(er.A,{"aria-labelledby":u,href:g,className:t,muted:!h,children:(0,l.jsx)(M.ShieldLockIcon,{})}):(0,l.jsx)(M.ShieldLockIcon,{className:t})})}try{ey.displayName||(ey.displayName="CodeownersBadge")}catch{}var ex=n(78252),ev=n(1992);function eb({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:o=!0,copilotDiffChatProps:c,returnToPullRequestPath:d}){return(0,l.jsxs)(ev.W,{children:[(0,l.jsx)(ev.W.Anchor,{children:(0,l.jsx)(F.K,{icon:M.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,l.jsx)(ev.W.Overlay,{children:(0,l.jsxs)(C.l,{children:[(0,l.jsxs)(C.l.LinkItem,{href:(0,el.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,l.jsx)(C.l.LeadingVisual,{children:(0,l.jsx)(M.EyeIcon,{})}),"View file"]}),i&&o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(C.l.LinkItem,{href:(0,el.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:d}),inactiveText:r?void 0:"Action unavailable",children:[(0,l.jsx)(C.l.LeadingVisual,{children:(0,l.jsx)(M.PencilIcon,{})}),"Edit file"]}),(0,l.jsxs)(C.l.LinkItem,{variant:"danger",href:(0,el.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,l.jsx)(C.l.LeadingVisual,{children:(0,l.jsx)(M.TrashIcon,{})}),"Delete file"]})]}),c&&(0,l.jsx)(ex.$,{...c})]})})]})}try{eb.displayName||(eb.displayName="BlobActionsMenu")}catch{}let e_={viewed:"MarkAsViewedButton-module__viewed--czELS"};var ej=n(81355),eC=n(61583);function ew(){let e=(0,L.mU)(),t=(0,L.$W)(e),{selectedPathDigest:n}=(0,ej.U)(),i=(0,b.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),a=(0,b.useCallback)(e=>{(0,eC.pk)(`diff-${e}`),(0,N.kd)(window.location.href)},[]);return{navigateToPrevious:(0,b.useCallback)(()=>{if(t.length>0){let e;e=i<=0?t.length-1:i-1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),navigateToNext:(0,b.useCallback)(()=>{if(t.length>0){let e;e=i>=t.length-1||i<0?0:i+1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),currentPathDigest:n,currentIndex:i>=0?i:void 0}}function eN({path:e,setIsCollapsed:t,basePath:n}){let i=(0,L.Mv)(e),{mutate:a}=function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,Y.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,ec.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})}(n,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:s}=(0,L.Ud)(),r=(0,L.j5)(),{navigateToNext:o}=ew();return(0,l.jsx)(H.Q,{"aria-pressed":i,size:"small",leadingVisual:()=>i?(0,l.jsx)(M.CheckboxFillIcon,{className:"color-fg-accent"}):(0,l.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),className:(0,v.$)(i&&e_.viewed),onClick:()=>{a({viewedStatus:!i,path:e}),s(e,!i),r?o():t(!i)},children:"Viewed"})}try{eN.displayName||(eN.displayName="MarkAsViewedButton")}catch{}let eS={ProgressContainer:"ViewedFileProgress-module__ProgressContainer--ZQ1e8",FilesCountText:"ViewedFileProgress-module__FilesCountText--q4rKx",ViewedText:"ViewedFileProgress-module__ViewedText--vvFsM"},eI=({progress:e})=>(0,l.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,l.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]});function ek({totalFilesCount:e}){let t=(0,L.gi)();return 0===e?null:(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,l.jsx)(eI,{progress:(t??0)/e||0}),(0,l.jsxs)("span",{className:(0,v.$)("ml-1",eS.ProgressContainer),children:[(0,l.jsx)("span",{className:eS.FilesCountText,children:t})," /"," ",(0,l.jsx)("span",{className:eS.FilesCountText,children:e})," ",(0,l.jsx)("span",{className:eS.ViewedText,children:"viewed"})]})]})}try{eI.displayName||(eI.displayName="ProgressIcon")}catch{}try{ek.displayName||(ek.displayName="ViewedFileProgress")}catch{}function eT(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var eL=n(99511),eE=n(77430);let eR={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0};function eA({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,l.jsxs)("div",{className:(0,v.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,l.jsx)(eL.A,{block:!0,"aria-label":"Filter comments",leadingVisual:M.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,l.jsxs)(ev.W,{children:[(0,l.jsx)(ev.W.Anchor,{children:(0,l.jsx)(H.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:M.FilterIcon,trailingAction:M.TriangleDownIcon,children:"Filter"})}),(0,l.jsx)(ev.W.Overlay,{width:"small",children:(0,l.jsxs)(C.l,{selectionVariant:"single",children:[(0,l.jsx)(C.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,l.jsx)(C.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.l.Divider,{}),(0,l.jsxs)(C.l.Group,{children:[(0,l.jsx)(C.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,l.jsxs)(C.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,l.jsx)(C.l.LeadingVisual,{children:(0,l.jsx)(eE.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})}try{eA.displayName||(eA.displayName="CommentsFilter")}catch{}var eD=n(39525),eP=n(98091),eO=n(58615),eM=n(72511),eF=n(82075),eB=n(26607);let e$={"file-name-overflow":"ConversationHeader-module__file-name-overflow--Ymb0e"};function eU({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:o,rightSideContent:c,threadId:d,headingLevel:u="h3"}){let m=(0,eF.A)("localStorage"),[h,p]=(0,b.useState)(t);return(0,b.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d}`);null!==e&&p(JSON.parse(e))},[h,d]),(0,l.jsxs)("div",{className:(0,v.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",h&&"rounded-2",h&&"border-bottom-0"),children:[(0,l.jsx)(F.K,{"aria-label":h?"Open review comment":"Close review comment",icon:h?M.ChevronRightIcon:M.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${d}`,JSON.stringify(!h)),p(e=>!e),s()}}),(0,l.jsxs)(E.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,l.jsx)(R.m,{direction:"n",text:o,type:"label",children:(0,l.jsxs)(er.A,{className:(0,v.$)(e$["file-name-overflow"],"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",o,"\u200E"]})}),!!a&&(0,l.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,l.jsx)(eB.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,l.jsx)(eB.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,l.jsx)(F.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:M.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),c]})}try{eU.displayName||(eU.displayName="ConversationHeader")}catch{}let eV={ThreadHeaderIconButton:"ThreadHeader-module__ThreadHeaderIconButton--RGjVM"};var eH=n(97695),eW=n(39698),eq=n(36729);function ez({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s}){let{sendPullRequestAnalyticsEvent:r}=O(),[o,c]=(0,b.useState)(void 0),d=a.thread,u=a.previewInfo,{mutate:m}=(0,eH.H)(u.path,d?.line?`R${d?.line}`:eq.zW),{mutate:h}=(0,eW.i)(u.path,d?.line?`L${d?.line}`:eq.zW),p=async()=>{a&&d?.isResolved&&(h({threadId:a.previewInfo.threadId},{onError:()=>c("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),r("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eU,{firstCommentId:e,isCollapsed:t,isOutdated:d?.isOutdated||!1,isResolved:d?.isResolved||!1,line:d?.line,path:u.path,rightSideContent:(0,l.jsx)(F.K,{"aria-label":d?.isResolved?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:d?.isResolved?M.CheckCircleFillIcon:M.CheckCircleIcon,"data-thread-resolved":d?.isResolved,className:eV.ThreadHeaderIconButton,variant:"invisible",onClick:d?.isResolved?p:()=>{d?.isResolved||m({threadId:u.threadId},{onError:()=>c("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}),onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:u.threadId,headingLevel:s}),o&&(0,l.jsxs)(eM.A,{variant:"danger",className:"m-2",children:[(0,l.jsx)(M.StopIcon,{className:"mr-2"}),o]})]})}try{ez.displayName||(ez.displayName="ThreadHeader")}catch{}var eG=n(94602);function eK({commentAuthors:e}){return e.length<1?null:(0,l.jsx)(eG.A,{children:e.map(({login:e,avatarUrl:t})=>(0,l.jsx)(eE.r,{alt:e,size:18,src:t},e))})}try{eK.displayName||(eK.displayName="PreviewAuthors")}catch{}var eQ=n(73017);let eY=(0,b.memo)(function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,b.useState)(!1),s=e.commentId,r=(0,b.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),o=eJ(s,e.commentsData??{comments:[]}),c=e.threadPreviewComments.length,d=`${c} previous ${1===c?"comment":"comments"}`;return(0,l.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,l.jsx)(eU,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,l.jsx)(eP.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),c>0&&(0,l.jsx)("div",{className:"my-2 px-2",children:(0,l.jsx)(H.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:M.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,l.jsx)("span",{children:d}),(0,l.jsx)(eK,{commentAuthors:o})]})})}),(0,l.jsx)(eQ.vb,{className:"markdown-body",html:function(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}(e),sx:{p:3,fontSize:1}})]})]})});function eJ(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",o=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:o}),n.add(a)),t},[])}try{eY.displayName||(eY.displayName="PendingCommentPreview")}catch{}let eX=(0,b.memo)(function({onNavigateToDiffComment:e,pullRequestId:t,tabSize:n,threadPreview:i,headingLevel:a}){let{thread:s,previewInfo:r}=i,{threadId:o,firstComment:c}=r,d=s?.isOutdated??!1,u=c?.id,m=r.path,h=(0,L.j5)(),{navigateToSelectedComment:p}=(0,L.Lh)(),f=(0,b.useCallback)(()=>{if(d&&r.originalDiffPathUri){let e=new URL(r.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${c?.databaseId}`,h&&c?.databaseId&&p(c?.databaseId);e()},[d,r.originalDiffPathUri,e,c?.databaseId,h,p]),[g,y]=(0,eO.M)(`panel-thread-collapsed-state-${o}`,!1),x=r.threadPreviewComments.length,v=0===x?"No replies":`${x} ${1===x?"reply":"replies"}`,_={...s,id:s?.id??"",commentsData:{comments:[]}};if(!c||!_)return null;let j=s?.subjectType==="FILE"?"FILE":`R${s?.line}`,C=eJ(r.commentId,s?.commentsData??{comments:[]});return(0,l.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,l.jsx)(ez,{firstCommentId:c?.databaseId,isCollapsed:g,threadPreview:i,onNavigateToDiffComment:f,onToggleCollapsed:()=>y(!g),headingLevel:a}),!g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,l.jsx)(eP.i,{diffTableClassName:"border-0",diffLines:r?.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),(0,l.jsx)("div",{children:(0,l.jsx)(eD.U,{lineMarkersKey:j,hideActions:!0,isInlineComment:!1,comment:c,filePath:m,index:0,isAnchorable:!1,isOutdated:d,isThreadResolved:s?.isResolved||!1,subjectId:t,threadId:o,originalDiffPathUri:r.originalDiffPathUri,headingLevel:"h3"},u)}),(0,l.jsx)("div",{className:"mb-2 px-2",children:(0,l.jsx)(H.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:M.ChevronRightIcon,variant:"invisible",onClick:f,children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,l.jsx)("span",{children:v}),(0,l.jsx)(eK,{commentAuthors:C})]})})})]})]})});try{eX.displayName||(eX.displayName="ThreadPreview")}catch{}var eZ=n(4559);function e0({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,l.jsxs)(em.E,{children:[(0,l.jsx)(em.E.Visual,{children:(0,l.jsx)(n,{size:"medium"})}),(0,l.jsx)(em.E.Heading,{as:i,children:e}),t&&(0,l.jsx)(em.E.Description,{children:t})]})}try{e0.displayName||(e0.displayName="ZeroState")}catch{}var e1=n(69510);function e2({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,pullRequestId:a,isOpen:s,setThreadPreviews:r,tabSize:o}){let{data:c=[]}=(0,e1._l)({pathName:i});(0,b.useEffect)(()=>{r(c)},[c,r]);let d=(0,b.useRef)(null),u=(0,b.useMemo)(()=>(0,_.s)(eZ.i,300),[]),m=c.length>0,h=(0,b.useCallback)(()=>{t()},[t]),p=c.map(t=>t&&e.has(t.previewInfo.threadId)?(0,l.jsx)(eX,{tabSize:o,threadPreview:t,onNavigateToDiffComment:h,pullRequestId:a,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,b.useEffect)(()=>{s&&u(p.length>0?`${p.length} ${1===p.length?"comment":"comments"}`:"No comments found",{element:d.current})},[s,u,p]),(0,l.jsxs)(l.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,l.jsx)(eo.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),p.length>0?(0,l.jsx)(b.Suspense,{fallback:(0,l.jsx)(g.A,{}),children:(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:p})}):(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,l.jsx)(e0,{description:"Comments will show up here as soon as there are some.",heading:m?"No comments match the current filter":"No comments on changes yet",icon:M.CommentIcon,headingLevel:"h2"})}),(0,l.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:d})]})}let e3=(0,b.memo)(function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,b.useState)([]),[r,o]=(0,b.useState)(()=>({...eR})),c=new Set([...a.filter(e=>{let{thread:t,previewInfo:n}=e;var i={authorLogin:n.firstComment?.author?.login??"",body:n.firstComment?.body??"",id:n.threadId,isResolved:t?.isResolved??!1,isOutdated:t?.isOutdated??!1,path:n.path},a=r;let{filterText:s,showResolvedThreads:o}=a;if(!o&&i.isResolved||!a.showOutdatedThreads&&i.isOutdated)return!1;if(s){let e=s.toLowerCase();if(!i.authorLogin.toLowerCase().includes(e)&&!i.body.toLowerCase().includes(e)&&!i.path.toLowerCase().includes(e))return!1}return!a.selectedAuthor||i.authorLogin===a.selectedAuthor}).map(e=>e.previewInfo.threadId??"")]),d=(0,b.useRef)(null),u=(0,b.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,l.jsx)(y.l,{initialFocusRef:d,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,l.jsxs)(y.l.Header,{className:"p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,l.jsx)(y.l.Title,{id:e,children:"Comments"}),(0,l.jsx)(F.K,{ref:d,"aria-label":"Close comments panel",icon:M.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,l.jsx)(eA,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:o})]}),children:(0,l.jsx)(b.Suspense,{fallback:(0,l.jsx)("div",{className:"d-flex flex-justify-center",children:(0,l.jsx)(g.A,{})}),children:(0,l.jsx)(e2,{...i,filteredThreadIds:c,pathName:t,setThreadPreviews:s})})}):null});try{e2.displayName||(e2.displayName="CommentsSidePanelContent")}catch{}try{e3.displayName||(e3.displayName="CommentsSidePanel")}catch{}function e4({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,b.useState)(!1),r=(0,b.useRef)(null),o=n.id,c=(0,L.Qb)(),{sendPullRequestAnalyticsEvent:d}=O();return(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsxs)(T.t,{fallback:(0,l.jsx)(H.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:M.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,l.jsx)(H.Q,{ref:r,"aria-label":"Open comments side panel",count:c,leadingVisual:M.CommentDiscussionIcon,size:"small",onClick:()=>{d("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eT(),s(!0)},children:e&&(0,l.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,l.jsx)(e3,{isOpen:a,pageLimits:t,pathName:n.pathName,pullRequestId:o,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})}try{e4.displayName||(e4.displayName="OpenCommentsSidePanelButton")}catch{}var e5=n(86909);function e6({className:e,filteredText:t,onFilteredTextChange:n}){return(0,l.jsx)("div",{className:e,children:(0,l.jsx)(eL.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:M.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})}try{e6.displayName||(e6.displayName="AlertsFilter")}catch{}let e7={annotationsHeaderFileName:"AlertsSidePanel-module__annotationsHeaderFileName--JzcsF"};function e8({databaseId:e,lineNumber:t,path:n,onNavigateToAnnotation:i}){return(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,l.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,l.jsx)(R.m,{direction:"n",text:n,type:"label",children:(0,l.jsxs)(er.A,{className:(0,v.$)("overflow-hidden text-mono text-semibold f6 no-wrap",e7.annotationsHeaderFileName),href:`#annotation_${e}`,onClick:i,muted:!0,children:["\u200E",n]})}),(0,l.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,l.jsx)(F.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:M.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:i})]})}let e9=(0,b.memo)(function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,b.useState)(""),o=new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,s)).map(e=>e.id)),c=(0,b.useRef)(null),d=e.length>0,u=(0,L.j5)(),{navigateToSelectedAnnotation:m}=(0,L.Lh)(),h=(0,b.useCallback)(e=>{u&&m(e),t()},[t,u,m]),p=e.map(e=>e&&o.has(e.id)?(0,l.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,l.jsx)(e8,{databaseId:e.databaseId,lineNumber:e.endLine,path:e.path,onNavigateToAnnotation:()=>h(e.databaseId)}),(0,l.jsx)(e5.Y,{annotation:e,inSidePanel:!0})]},e.id):null).filter(Boolean),f=(0,b.useRef)(null),g=(0,b.useMemo)(()=>(0,_.s)(eZ.i,300),[]);return((0,b.useEffect)(()=>{n&&g(p.length>0?`${p.length} ${1===p.length?"alert":"alerts"}`:"No alerts found",{element:f.current})},[n,g,p]),n)?(0,l.jsxs)(y.l,{initialFocusRef:c,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,l.jsxs)(y.l.Header,{className:"p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,l.jsx)(E.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,l.jsx)(F.K,{ref:c,"aria-label":"Close alerts panel",icon:M.XIcon,variant:"invisible",onClick:t})]}),(0,l.jsx)(e6,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,l.jsx)(eo.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),p.length>0?(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:p}):(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,l.jsx)(e0,{heading:d?"No alerts match the current filter":"No alerts on changes yet",icon:M.AlertIcon})}),(0,l.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:f})]}):null});try{e8.displayName||(e8.displayName="AnnotationHeader")}catch{}try{e9.displayName||(e9.displayName="AlertsSidePanel")}catch{}function te({isFileTreeExpanded:e,pageLimits:t}){let[n,i]=(0,b.useState)(!1),a=(0,b.useRef)(null),s=(0,b.useCallback)(()=>i(!1),[]),r=(0,L.wI)(),{sendPullRequestAnalyticsEvent:o}=O();if(!r)return null;let c=Object.values(r),d=c.length;return d>0?(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsxs)(T.t,{fallback:(0,l.jsx)(H.Q,{"aria-label":"The alerts side panel cannot currently be opened.",icon:M.AlertIcon,size:"small",variant:"invisible"}),children:[(0,l.jsx)(H.Q,{ref:a,"aria-label":"Open alerts side panel",count:d,leadingVisual:M.AlertIcon,size:"small",onClick:()=>{o("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eT(),i(!0)},children:e&&(0,l.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,l.jsx)(e9,{annotations:c,isOpen:n,pageLimits:t,returnFocusRef:a,onClose:s})]})}):null}try{te.displayName||(te.displayName="OpenAlertsPanelButton")}catch{}var tt=n(70109),tn=n(42255),ti=n(31604),ta=n(46251),ts=n(33578);let tr={approve:"approve",comment:"comment",requestChanges:"request changes"};var to=n(46747);let{getItem:tl,removeItem:tc,setItem:td}=(0,eF.D)("localStorage"),tu={ReviewMenuButton:"ReviewMenuButton-module__ReviewMenuButton--uK7FN",SubmitReviewButton:"ReviewMenuButton-module__SubmitReviewButton--ZSu4L",ErrorMessage:"ReviewMenuButton-module__ErrorMessage--bglZe",ExpandSection:"ReviewMenuButton-module__ExpandSection--sAB8o",AnchoredReviewBody:"ReviewMenuButton-module__AnchoredReviewBody--nirqE"};var tm=n(69014),th=n(55461),tp=n(15837),tf=n(39183),tg=n(74079);let ty={Radio:"ReviewMenu-module__Radio--i3DSd",RadioGroup:"ReviewMenu-module__RadioGroup--uQwUG",RadioText:"ReviewMenu-module__RadioText--dXY49"};function tx({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:o,handleReviewSubmit:c}){return e?(0,l.jsx)(p.tL,{commands:{"pull-request-files-changed:submit-review":c},children:(0,l.jsx)(tv,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:o})}):null}let tv=(0,b.memo)(function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){var o,c,d,u,m;return(0,l.jsxs)(tp.A,{name:"reviewEvent",onChange:e,className:ty.RadioGroup,children:[(0,l.jsx)(tp.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,l.jsx)(tb,{checked:t===tr.comment,label:(0,th.ZH)(tr.comment),subLabel:"Submit general feedback without explicit approval.",value:tr.comment}),(0,l.jsx)(tb,{checked:t===tr.approve,disabled:!n.includes("APPROVE"),label:(0,th.ZH)(tr.approve),subLabel:r?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes.",value:tr.approve,disabledTooltip:(o=s,c=!!a,d=n,o?"Pull request authors can't approve their own pull requests.":c?"Users that pushed changes to this pull request after it was opened can't approve":d.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests")}),(0,l.jsx)(tb,{checked:t===tr.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:(u=s,m=n,u?"Pull request authors can't request changes on their own pull requests.":m.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"),label:(0,th.ZH)(tr.requestChanges),value:tr.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})});function tb({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,l.jsxs)($.A,{disabled:t,children:[(0,l.jsx)(tf.A,{checked:e,value:s,className:ty.Radio}),(0,l.jsxs)($.A.Label,{className:"d-flex flex-column",children:[(0,l.jsx)("span",{className:"text-bold",children:i}),(0,l.jsx)("span",{className:ty.RadioText,children:a})]})]});return t&&n?(0,l.jsx)(tg.A,{text:n,children:r}):r}try{tx.displayName||(tx.displayName="ReviewTypeSelector")}catch{}try{tv.displayName||(tv.displayName="ReviewRadioButtons")}catch{}try{tb.displayName||(tb.displayName="RadioButton")}catch{}var t_=n(4908),tj=n(23398),tC=n(67955);function tw({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,t_.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(tj.A,{...i(),children:[(0,l.jsx)(tj.A.Summary,{children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,l.jsx)(M.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,l.jsx)(M.ChevronRightIcon,{className:"fgColor-muted"}),(0,l.jsxs)(E.A,{as:"h2",className:"f5",children:["Pending comments ",(0,l.jsx)(tC.A,{children:e})]})]})}),(0,l.jsx)(b.Suspense,{fallback:(0,l.jsx)(g.A,{}),children:(0,l.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,l.jsx)(eY,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null}try{tw.displayName||(tw.displayName="ReviewCommentsSection")}catch{}var tN=n(56149);let tS=({portalName:e})=>{let t=(0,b.useRef)(null);return(0,b.useEffect)(()=>{t.current&&(0,tN.cw)(t.current,e)},[e]),(0,l.jsx)("div",{ref:t})};try{tS.displayName||(tS.displayName="OverlayPortalContainer")}catch{}let tI="review-menu-portal-root";function tk({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:o,viewerHasViolatedPushPolicy:c,viewerIsCopilotAttributed:d,comparison:u}=t,m=(0,L.ys)(),h=(0,L.HZ)(),{persistedReview:p,persistReviewToStorage:f,removePersistedReviewFromStorage:g}=function(e){let[t,n]=(0,b.useState)(!1),i=(0,b.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:tl(i),persistReviewToStorage:(0,to.d)((e,a)=>{if(!t)try{td(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{tc(i)}}}(s),x=function(e,t){let n=(0,L.BI)(e),i=(0,L.l0)();return(0,b.useMemo)(()=>{let a=e;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let o=0,{path:l,diffLines:c}=r,d=i[l];if(d){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let o=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...o)}return i}(d,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),c.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let o=n.markersMap[r],l=[],c=[];if(o){for(let t of o.threads){let n;if(void 0===t.id)continue;let o=i.find(e=>Number(e.id)===t.id);if(!o)continue;let d=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=d-u),m>a&&(m=a+1);let h=s.slice(a+1-m,a+1);for(let e=0;e<h.length;e++)h[e]?.type==="HUNK"&&h.splice(0,e+1);let p=o.commentsData?.comments.slice(0,-1),f=[];for(let e of p??[])e.author&&f.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});l.push(t.id),o.commentsData&&(c=c.concat(o.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:o.id,commentId:(t.databaseId??0).toString(),isOutdated:o.isOutdated??!1,isResolved:!1,line:d,path:e,subject:{diffLines:h,endLine:d,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:o.commentsData,threadPreviewComments:f}))))}return{pendingCommentsReturnArray:c,markersFoundInLine:l}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,d,n,o,c);o++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}(m?.pendingReviewIDs??[],h),v=x?.length??0,_=a?.login===e,j=r!==ts.Q.Closed&&r!==ts.Q.Merged,C="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,w=u.headOid,[N,S]=(0,tn.A)("none"),[I,k]=(0,tn.A)("idle"),[T,R]=(0,tn.A)(),[A,D]=(0,tn.A)(p?.event??tr.comment),P=(m?.pendingReviewIDs??[]).length>0,B=(0,b.useRef)(null),$=p?.text??"",U=(0,b.useRef)($),[V,W]=(0,tn.A)(!!p?.text),q="submitting"===I||!V&&A===tr.comment&&!v,{sendPullRequestAnalyticsEvent:z}=O(),G=(0,b.useCallback)(e=>{U.current=e,W(!!e.trim()),f(A,e)},[f,A,W]),J=(0,b.useCallback)(e=>{Object.values(tr).includes(e)&&(D(e),f(e,U.current))},[f,D]),{mutate:X}=function({onSuccess:e,onError:t}){let n=(0,Q.e)(K.u.submitReview);return(0,Y.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,ec.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{k("idle"),R(e.message)}}),{mutate:Z}=function({onSuccess:e,onError:t}){let n=(0,Q.e)(K.u.abandonReview);return(0,Y.n)({mutationFn:async()=>(0,ec.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{k("idle"),R(e.message)}}),ee=(0,b.useCallback)(()=>{q||(T&&R(void 0),k("submitting"),z("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),X({body:U.current,event:A,headSha:w}))},[T,w,A,z,R,k,q,X]),et=(0,b.useCallback)(()=>{0!==(m?.pendingReviewIDs??[]).length&&confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(T&&R(void 0),k("canceling"),z("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Z())},[Z,T,m?.pendingReviewIDs,z,R,k]),en=(0,b.useMemo)(()=>(function({totalPendingComments:e,viewerIsAuthor:t,viewerAllowedNonCommentReviewTypes:n,isPROpen:i}){let a=(e??0)>0,s=n.includes("APPROVE"),r=n.includes("REQUEST_CHANGES");switch(!0){case!i:return{isHidden:!a,text:"comments"};case t:case s:case r:return{isHidden:!1,text:"review"};case!s&&a:return{isHidden:!1,text:"comments"};default:return{isHidden:!0}}})({isPROpen:j,viewerAllowedNonCommentReviewTypes:o,viewerIsAuthor:_,totalPendingComments:v}),[o,v,j,_]),ei=(0,b.useCallback)(()=>{window.innerWidth<768?S("dialog"):S("anchored"),z("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[z,S]),ea=(0,b.useCallback)(()=>{S("none")},[S]),es=(0,b.useCallback)(()=>{S("none")},[S]),er=(0,b.useCallback)(()=>{"none"===N?ei():ea()},[ea,ei,N]),eo=(0,b.useMemo)(()=>(0,l.jsx)(tE,{initialReviewBody:$,isPROpen:j,onReviewBodyChange:G,reviewEvent:A,viewerAllowedNonCommentReviewTypes:o,viewerCanWriteToRepo:C,viewerHasViolatedPushPolicy:c,viewerIsAuthor:_,viewerIsCopilotAttributed:d,commentsList:x,totalPendingComments:v,handleNavigateToDiffComment:es,handleReviewSubmit:ee,handleReviewEventChange:J}),[x,es,J,ee,$,j,G,A,v,o,C,c,_,d]);if(en.isHidden)return null;let el=()=>(0,l.jsx)(tL,{errorMessage:T,hasPendingReviews:P,reviewSubmissionState:I,handleReviewCancel:et,handleCloseReviewDialog:ea,handleReviewSubmit:ee,submitDisabled:q,reviewMenuButtonDisplayState:en});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(H.Q,{count:v||void 0,className:tu.ReviewMenuButton,trailingAction:M.TriangleDownIcon,variant:"primary",onClick:er,size:"small",ref:B,children:["Submit ",en.text]}),(0,l.jsx)(tS,{portalName:tI}),(0,l.jsxs)(ti.T,{open:"anchored"===N,anchorRef:B,width:"xlarge",onClose:ea,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:tI},children:[(0,l.jsxs)(ta.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,l.jsxs)(E.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",en.text]}),(0,l.jsxs)(ta.B,{direction:"horizontal",align:"center",gap:"none",children:[P&&(0,l.jsx)(F.K,{icon:M.MaximizeIcon,className:tu.ExpandSection,variant:"invisible","aria-label":"Expand this section",onClick:()=>S("dialog")}),(0,l.jsx)(F.K,{icon:M.XIcon,variant:"invisible","aria-label":"Close",onClick:ea})]})]}),(0,l.jsx)("div",{className:tu.AnchoredReviewBody,children:eo}),(0,l.jsx)("div",{className:"p-3 border-top",children:(0,l.jsx)(el,{})})]}),"dialog"===N&&(0,l.jsx)(y.l,{onClose:ea,returnFocusRef:B,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${en.text}`,renderFooter:()=>(0,l.jsx)(y.l.Footer,{children:(0,l.jsx)(el,{})}),children:eo})]})}let tT=(0,b.forwardRef)(({initialValue:e,onChange:t,...n},i)=>{let[a,s]=(0,tn.A)(e),r=(0,b.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,l.jsx)(tt.S,{...n,value:a,onChange:r,ref:i})});function tL({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:o}){let c="canceling"===o,d="submitting"===o;return(0,l.jsxs)(l.Fragment,{children:[e&&(0,l.jsxs)(eM.A,{className:tu.ErrorMessage,variant:"danger",children:[(0,l.jsx)(M.StopIcon,{className:"mr-2"}),e]}),(0,l.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,l.jsx)(H.Q,{disabled:c||d,loading:c,onClick:t,tabIndex:0,variant:"danger",children:(0,l.jsxs)(ta.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,l.jsx)(H.Q,{onClick:n,disabled:c||d,children:"Cancel"}),(0,l.jsx)(H.Q,{disabled:s||d,variant:"primary",onClick:i,loading:d,className:tu.SubmitReviewButton,trailingVisual:(0,l.jsx)(tm.U,{keys:"Mod+enter",variant:"onPrimary"}),children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})}function tE({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:o,viewerIsCopilotAttributed:c,commentsList:d,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:h,handleReviewEventChange:p}){let f=(0,b.useRef)(null);return(0,b.useEffect)(()=>{let e=window.setTimeout(()=>f.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tT,{ref:f,label:"Add review comment",placeholder:"Leave a comment",sx:{flexGrow:"1",width:"100%"},initialValue:e,onChange:n,onPrimaryAction:h}),(0,l.jsx)(tx,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:o,viewerIsCopilotAttributed:c,handleReviewEventChange:p,handleReviewSubmit:h}),(0,l.jsx)(tw,{totalPendingComments:u,commentsList:d,handleNavigateToDiffComment:m})]})}tT.displayName="ControlledCommentBox";try{tk.displayName||(tk.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{tL.displayName||(tL.displayName="ReviewMenuFooterComponent")}catch{}try{tE.displayName||(tE.displayName="ReviewMenuBodyComponent")}catch{}var tR=n(27028),tA=n(39029);let tD={refresh:"RefreshButton-module__refresh--gOrN1"};function tP({aliveChannel:e,pathName:t}){let[n,i]=(0,b.useState)(!1);return((0,tA.Zi)(e,()=>{i(!0)},{git_updated:!0}),n)?(0,l.jsx)(H.Q,{as:er.A,variant:"invisible",href:`${t}/files`,className:tD.refresh,leadingVisual:M.SyncIcon,size:"small",onClick:e=>{e.preventDefault(),window.location.href=`${t}/files`},children:"Refresh"}):null}try{tP.displayName||(tP.displayName="RefreshButton")}catch{}var tO=n(45270),tM=n(62935),tF=n(18096);let tB=(0,b.memo)(function({baseRefOid:e,commitOids:t,commits:n,endOid:i,onClose:a,onRangeUpdated:s,startOid:r}){let[o,c]=(0,b.useState)(()=>{if(!r||!i)return;let e=r?t.indexOf(r)+1:-1,n=i?t.indexOf(i):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),d=o?t.slice(o.start,o.end+1):[];return(0,l.jsxs)(tF.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:a,onClearSelection:()=>{c(void 0)},onSubmit:()=>{let n,l;if(o&&(o.start>0||o.end<t.length-1)&&(n=o.start>0?t[o.start-1]:e,l=t[o.end]),n===r&&l===i)return void a();n&&l?o&&o.start===o.end?s({type:"single",oid:l}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:l}):s({type:"unfiltered"})},children:[(0,l.jsx)(C.l,{children:n.map(e=>{let n=d.includes(e.oid);return(0,l.jsxs)(C.l.Item,{selected:n,onSelect:()=>((e,n)=>{let i,a=t.indexOf(e);if(o){if(o.start!==o.end||"removed"!==n){var s,r;let e,t,{newStartIndex:l,newEndIndex:c}=(s=o.start,r=o.end,"added"===n?(e=Math.min(a,s),t=Math.max(a,r)):a===s?(e=s+1,t=r):(e=s,t=a-1),{newStartIndex:e,newEndIndex:t});i={start:l,end:c}}}else i="added"===n?{start:a,end:a}:void 0;c(i)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,l.jsxs)(C.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,l.jsx)(tM.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,l.jsx)(tF.X.Footer,{})]})});try{tB.displayName||(tB.displayName="CommitsSelector")}catch{}let t$="All commits",tU={default:{variant:"default",leadingVisual:M.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}};function tV({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:i="default"}){let{endOid:a,startOid:s,baseRefOid:r}=(0,tO.Xv)(),o=(0,tO.ww)(),c=(0,b.useMemo)(()=>t.map(e=>e.oid),[t]),d=c[c.length-1],u=!!n&&s===n&&a===d,[m,h]=(0,b.useState)(!1),[p,f]=(0,b.useState)(!1),g=(0,b.useMemo)(()=>{if(!s)return;if(s===r)return c[0];let e=c.findIndex(e=>e===s);if(!(e<0))return c[e+1]},[r,c,s]),y=function({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:t$}({endOid:a,startOid:s,firstCommitInRange:g}),x=function({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let i=e.indexOf(n),a=e.indexOf(t);if(i>-1&&a>-1)return`${a-i+1} commits...`}return"Specific commit\u2026"}({endOid:a,firstCommitInRange:g,commitOids:c}),{sendPullRequestAnalyticsEvent:v}=O(),_=t=>{f(!1),e(t)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ev.W,{open:m,onOpenChange:e=>{h(e),e&&v("commits_menu.open","COMMITS_MENU")},children:[(0,l.jsx)(ev.W.Anchor,{children:(0,l.jsx)(H.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:tU[i].leadingVisual,size:"small",variant:tU[i].variant,trailingAction:M.TriangleDownIcon,children:y})}),(0,l.jsx)(ev.W.Overlay,{side:"outside-bottom",width:"small",children:(0,l.jsxs)(C.l,{selectionVariant:"single",children:[(0,l.jsx)(C.l.Item,{selected:!o,onSelect:()=>{e({type:"unfiltered"})},children:t$}),n&&d&&n!==d&&(0,l.jsx)(C.l.Item,{selected:u,onSelect:()=>_({type:"range",fromPRBase:n===r,baseOid:n,endOid:d}),children:"Changes since your last review"}),(0,l.jsx)(C.l.Divider,{}),(0,l.jsx)(C.l.Item,{selected:o&&!u,onSelect:()=>{v("commits_menu.select_commit","COMMITS_MENU_ITEM"),h(!1),f(!0)},children:x})]})})]}),p&&(0,l.jsx)(tB,{baseRefOid:r||"",commitOids:c,commits:t,endOid:a,startOid:s,onClose:()=>f(!1),onRangeUpdated:_})]})}try{tV.displayName||(tV.displayName="CommitsDropdown")}catch{}function tH({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){return(0,l.jsx)(tV,{commits:i,lastReviewOid:a,onRangeUpdated:i=>{let a;if("unfiltered"===i.type)a=(0,el.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,el.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,el.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},variant:s})}try{tH.displayName||(tH.displayName="ChangesSelector")}catch{}var tW=n(33644),tq=n(2694),tz=n(81070),tG=n(33195);let tK={"is-stuck":"PullRequestFilesToolbar-module__is-stuck--pCXhL","show-when-stuck":"PullRequestFilesToolbar-module__show-when-stuck--ONyyF","hide-when-stuck":"PullRequestFilesToolbar-module__hide-when-stuck--WUhjy","pr-sticky-title":"PullRequestFilesToolbar-module__pr-sticky-title--Fu24T","file-controls":"PullRequestFilesToolbar-module__file-controls--XN2fA","file-controls-navigation":"PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo","file-controls-divider":"PullRequestFilesToolbar-module__file-controls-divider--oWuSw",toolbar:"PullRequestFilesToolbar-module__toolbar--bXrnB"};var tQ=n(21968),tY=n(34261),tJ=n(89155),tX=n(73783),tZ=n(29295);let t0={PopoverContainer:"SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",PopoverContent:"SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",Heading:"SingleFileModeOnboardingPopover-module__Heading--BRcrc"};var t1=n(21067),t2=n(76648);function t3(e){return 0===(function(){let e=(0,t2.B)();return e?(e.userNotices??[]).filter(e=>!e.dismissed):[]})().filter(t=>t.name===e).length}let t4="single_file_mode";function t5(){let e=t3(t4),t=(0,L.j5)(),[n,i]=(0,b.useState)(!0),{dismissNotice:a}=function(e){let t=t3(e);return{dismissNotice:(0,b.useCallback)(()=>{(0,t1.M3)()&&!t&&(0,ec.DI)((0,el.VB1)({noticeName:e}),{method:"POST"})},[t,e])}}(t4);return!t||e?null:(0,l.jsx)(tZ.A,{className:t0.PopoverContainer,open:n,children:(0,l.jsxs)(tZ.A.Content,{className:(0,v.$)("d-flex flex-column gap-2",t0.PopoverContent),children:[(0,l.jsx)(E.A,{as:"h3",variant:"small",className:t0.Heading,children:"You're in single-file mode"}),(0,l.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,l.jsxs)("p",{children:["Use the ",(0,l.jsx)("strong",{children:"Previous"})," and ",(0,l.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsx)(H.Q,{onClick:()=>{a(),i(!1)},children:"OK, got it"})})]})})}try{t5.displayName||(t5.displayName="SingleFileModeOnboardingPopover")}catch{}var t6=n(44569);function t7(){let e=(0,t6.zw)(),{navigateToPrevious:t,navigateToNext:n}=ew();return(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)(tX.A,{children:[(0,l.jsx)(F.K,{icon:M.ChevronUpIcon,"aria-label":e?"Previous file (K)":"Previous file",size:"small",onClick:t,"data-hotkey":"k"}),(0,l.jsx)(F.K,{icon:M.ChevronDownIcon,"aria-label":e?"Next file (J)":"Next file",size:"small",onClick:n,"data-hotkey":"j"})]}),(0,l.jsx)(t5,{})]})}try{t7.displayName||(t7.displayName="ReviewNavigationButtonGroup")}catch{}function t8({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,...r}){let{data:{pullRequest:o}}=(0,tY.W)();(0,tY.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,tJ.F)(e);let c={...n,...o};return(0,l.jsx)(t9,{repository:t,pullRequest:c,...r})}function t9({commits:e,currentUserLogin:t,fileFilter:n,isFileTreeExpanded:i,lastReviewOid:a,pageLimits:s,pullRequest:r,repository:o,shouldShowViewedFilesCount:c,totalFilesCount:d,treeToggleElement:u}){let{mutate:m}=function(){let e=(0,L.Kp)(),{updateWhitespace:t}=(0,L.yo)();return(0,Y.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${K.u.updateWhitespacePreference}`,i=await (0,J.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,J.hp)(i);return(0,J.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})}(),h=r.pathName,{hideWhitespace:p}=(0,L.L3)(),[f,g]=(0,b.useState)(!1),y=c||!i,x=(0,L.j5)(),[_,j]=(0,tq.B)(e=>{e[0]&&g(!e[0].isIntersecting)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tz.X,{sx:{visibility:"hidden",height:"1px"},onObserve:_,onUnobserve:j}),(0,l.jsxs)(ta.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,v.$)(tW.A.stickyHeader,tK.toolbar,f&&tK["is-stuck"]),children:[(0,l.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,l.jsxs)(ta.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,l.jsx)("div",{children:u}),(0,l.jsx)("div",{className:tK["show-when-stuck"],children:(0,l.jsx)(tG.u,{state:r.state})}),(0,l.jsx)("div",{className:tK["hide-when-stuck"],children:(0,l.jsx)(tH,{commits:e,lastReviewOid:a,ownerLogin:o.ownerLogin,pullRequestNumber:r.number,repositoryName:o.name})}),(0,l.jsxs)(ta.B,{direction:"vertical",gap:"none",className:(0,v.$)(tK["show-when-stuck"],"min-width-0"),children:[(0,l.jsxs)("div",{className:"d-flex mb-n1",children:[(0,l.jsx)(R.m,{type:"label",direction:"s",text:r.title,children:(0,l.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,l.jsx)("bdi",{className:(0,v.$)("f5 text-bold overflow-hidden no-wrap",tK["pr-sticky-title"]),children:r.title})})}),(0,l.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",r.number]})]}),(0,l.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,l.jsx)(tH,{commits:e,lastReviewOid:a,ownerLogin:o.ownerLogin,pullRequestNumber:r.number,repositoryName:o.name,variant:"condensed"}),(0,l.jsxs)("div",{className:"d-none d-lg-flex flex-items-center min-width-0",children:[(0,l.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,l.jsx)(tQ.O,{author:r.author.login,baseBranch:r.baseBranch,baseRepositoryOwnerLogin:o.ownerLogin,baseRepositoryName:o.name,commitsCount:r.commitsCount,headBranch:r.headBranch,headRepositoryOwnerLogin:r.headRepositoryOwnerLogin,headRepositoryName:r.headRepositoryName,isInAdvisoryRepo:r.isInAdvisoryRepo,mergedBy:r.mergedBy,state:r.state,pullRequestId:r.id,pullRequestNumber:r.number,repositoryId:o.id})]})]})]})]}),(0,l.jsxs)(ta.B,{direction:"horizontal",align:"center",children:[(0,l.jsx)(tP,{aliveChannel:r.aliveChannel,pathName:h}),(0,l.jsxs)("div",{className:tK["file-controls"],children:[c&&(0,l.jsx)(ek,{totalFilesCount:d}),!i&&n,x&&d>1&&(0,l.jsx)("div",{className:tK["file-controls-navigation"],children:(0,l.jsx)(t7,{})})]}),y&&(0,l.jsx)("div",{className:tK["file-controls-divider"],"data-testid":"file-controls-divider"}),(0,l.jsx)(e4,{pageLimits:s,pullRequest:r,isFileTreeExpanded:i}),(0,l.jsx)(te,{pageLimits:s,isFileTreeExpanded:i}),t&&(0,l.jsx)(tk,{currentUserLogin:t,pullRequest:r,repository:o}),(0,l.jsx)(tR.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:e=>{m({hideWhitespace:e})},defaultHideWhitespace:p,small:!0})]})]})]})}try{t8.displayName||(t8.displayName="LivePullRequestFilesToolbar")}catch{}try{t9.displayName||(t9.displayName="PullRequestFilesToolbar")}catch{}var ne=n(79634);async function nt({basePath:e,fullDiff:t,selectedRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${K.u.richDiff}?${s.toString()}`;try{let e=await (0,ec.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,J.hp)(e);return(0,J.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var nn=n(15697);function ni(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function na({basePath:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,diffLines:s,path:r,isSelected:o=!1,reviewed:c,...d}){let u=(0,L.JA)(),{fetchContextLines:m}=(0,L.QV)(),p=(0,L.L3)().hideWhitespace?"1":"0",f=function({basePath:e,path:t}){let n=(0,L.L3)(),i=function({basePath:e,selectedRange:t,path:n}){return[K.u.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}({basePath:e,path:t,...n});return{fetcher:nt,key:i,args:{path:t,basePath:e,...n,signal:void 0}}}({basePath:e,path:r}),g=(0,b.useRef)(null),y=(0,b.useRef)(null),{helpUrl:x}=(0,ne.X)(),v=(0,L.kN)(r),{updateAllFilesCollapsedStatus:_,updateFileCollapsedStatus:j}=(0,L.JR)(),C=(0,L.GR)(),[w,S]=(0,b.useState)(!1),I=(0,L.Fm)(r),k=(0,L.ne)(r),T=(0,b.useMemo)(()=>k?k[eq.zW]?.threads??[]:[],[k]),E=(0,b.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let o=!1;for(let t of e)if(o){if(i.push(t),ni(t,r.endLine)&&(o=!1,!(r=a[++s])))break}else ni(t,r.startLine)&&(o=!0,i.push(r.headerLine),i.push(t));return i}(s,u,r):s,[u,r,s]),R=(0,b.useCallback)(()=>{j(r,!1)},[r,j]),A=(0,b.useCallback)(()=>{C()&&v&&R()},[v,R,C]),D=(0,b.useCallback)(()=>{(0,N.K3)(),A()},[A]),P=(0,b.useCallback)(()=>{(0,eC.o9)()===d.pathDigest&&v&&R()},[d.pathDigest,R,v]),O=(0,b.useCallback)(()=>{A(),P()},[A,P]);(0,b.useEffect)(()=>{O()},[]),(0,b.useEffect)(()=>(h.cg?.addEventListener("hashchange",O),()=>{h.cg?.removeEventListener("hashchange",O)}),[O]);let B=(0,b.useCallback)((e,t,n)=>{if(n&&n.altKey)_(e);else{if(j(t,e),!e)return;h.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();e&&e.top<62&&h.cg?.scrollTo({top:e.top+h.cg.scrollY-62})})}},[_,j]),$=(0,b.useRef)((0,nn.B)({diffSummary:I})),[U,V]=(0,b.useState)(!1),H=(0,b.useCallback)(async e=>{D(),$.current.push(e),m({contextLineRanges:$.current,path:r,w:p})},[D,m,r,p]),W=(0,b.useCallback)(async()=>{await m({contextLineRanges:[],path:r})},[m,r]),q=(0,b.useMemo)(()=>{if(d.isBinary||d.isSubmodule||d.isTooBig||(0,ep.dK)({linesChanged:d.linesChanged,newTreeEntry:d.newTreeEntry,oldTreeEntry:d.oldTreeEntry,status:d.status,truncatedReason:d.truncatedReason}))return!1;if(U)return!0;if(0===E.length)return!1;if((E[1]?.blobLineNumber||0)>1)return!0;let e=E.length,t=E[e-1]?.blobLineNumber||0,n=d.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[d.isBinary,d.isSubmodule,d.isTooBig,d.linesChanged,d.newTreeEntry,d.oldTreeEntry,d.status,d.truncatedReason,E,U]),z=async()=>{let e,t;$.current=[],U||$.current.push({start:1,end:Math.max(d.oldTreeEntry?.lineCount??0,d.newTreeEntry?.lineCount??0)});let n=document.activeElement;await m({contextLineRanges:$.current,path:r,w:p}),V(!U),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},G=(0,b.useMemo)(()=>{let e=new Set([]);return u&&e.add(eg.YR.diffStats).add(eg.YR.expandLines).add(eg.YR.markAsViewed),e},[u]);return(0,l.jsx)(ef.oO,{loadDiff:W,...d,addFileCommentButtonRef:y,basePath:e,diffManuallyExpanded:t,fileComments:T,hiddenFeatures:G,isAddingFileComment:w,isSelected:o,leftSideContent:(0,l.jsx)(b.Suspense,{children:(0,l.jsx)(ey,{className:"d-flex px-1 flex-items-center flex-order-2 flex-sm-order-1",diffPath:r,pullRequestBasePath:e,viewerLogin:d.currentUser.login})}),rightSideContent:(0,l.jsxs)("div",{className:"d-flex flex-items-center",children:[!G.has(eg.YR.markAsViewed)&&(0,l.jsx)(eN,{path:r,basePath:e,setIsCollapsed:e=>B(e,r)}),d.currentUser.canComment&&(0,l.jsx)(F.K,{ref:y,icon:M.CommentIcon,"aria-label":"Comment on this file","aria-expanded":w,variant:"invisible",size:"small",onClick:()=>S(!0),className:"ml-1"}),(0,l.jsx)(eb,{oid:"REMOVED"===d.status&&d.oldCommitOid?d.oldCommitOid:d.newCommitOid||"",path:r,repo:{name:i||d.repository.name,ownerLogin:a||d.repository.ownerLogin},isViewable:!d.isSubmodule,isDeleteable:!d.isSubmodule,isEditable:!d.isSubmodule,shouldShowEditOptions:d.currentUser.shouldDisplayEditOptions,branchName:n,returnToPullRequestPath:e})]}),canExpandOrCollapseLines:q,expandAllContextLines:z,hasExpandedAllRanges:U,addInjectedContextLines:H,onToggleCollapse:(e,t)=>B(t,r,e),path:r,ref:g,setIsAddingFileComment:S,collapsed:v,helpUrl:x,linesAdded:I?.linesAdded||d.linesAdded||0,linesChanged:I?.linesChanged||d.linesChanged||0,linesDeleted:I?.linesDeleted||d.linesDeleted||0,diffLines:E,richDiffQueryConfig:f})}try{na.displayName||(na.displayName="PullRequestDiff")}catch{}var ns=n(81945),nr=n(29731),no=n(8431);let nl=(0,b.memo)(function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5}){let{data:a}=(0,u.ID)(),s=a?.lineSpacing==="compact"?20:25;return(0,l.jsx)("div",{className:no.A.diffTargetable,role:"region","aria-label":e,...(0,nr.G)(t),id:n,children:(0,l.jsx)("div",{className:"border borderColor-muted rounded-top-2",children:(0,l.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:s*i},children:[(0,l.jsx)(ns.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(ns.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(ns.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(ns.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{nl.displayName||(nl.displayName="DiffEntryLoadingSkeleton")}catch{}var nc=n(91747);let nd=(0,b.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,L.pV)(),i=(0,nc.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,b.useState)(!1),[r,o]=(0,tq.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,l.jsx)(tz.X,{onObserve:r,onUnobserve:o,children:(0,l.jsx)(nl,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{nd.displayName||(nd.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let nu=(0,b.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,L.pV)(),i=(0,nc.u)("pulls-files-skip-prefer-any-solo-entry");return(0,b.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,l.jsx)(nl,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nu.displayName||(nu.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let nm=(0,b.memo)(function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:o}){return(0,l.jsx)(ef.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:o})});try{nm.displayName||(nm.displayName="PullRequestDiffEntryErrorFallback")}catch{}var nh=n(2087),np=n(73189);let nf=(0,b.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,l.jsx)(nl,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nf.displayName||(nf.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let ng=(0,b.memo)(ny,(e,t)=>e.basePath===t.basePath&&e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing);function ny({basePath:e,currentUser:t,diffManuallyExpanded:n,headBranchName:i,headRepoName:a,headRepoOwner:s,isSelected:r,isSelectingLineOrRange:o=!1,onScrollToAndFocusEntry:c,progressiveDiffEntry:d,pullRequestGlobalRelayId:u,repository:m,testRenderFn:p}){let f=(0,L.jT)(d.path),g=(0,L.Fm)(d.path),y=(0,L.j5)();p&&p();let x=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{if(!x.current){if(!x.current&&void 0===r){let e=h.fV.hash??"",t=(0,eC.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==d.pathDigest&&(x.current=!0)}if(r&&"HIDE"!==d.renderMode&&(!o||"RENDER"===d.renderMode)){let e=h.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;x.current=!0,c(d.pathDigest)}}},[r,o,c,d.pathDigest,d.renderMode]),"HIDE"===d.renderMode||"LAZY_AUTO_LOAD"===d.renderMode||"EAGER_AUTO_LOAD"===d.renderMode){let e=(0,l.jsx)(l.Fragment,{}),t=g?.linesChanged??5;return(g?.changeType==="REMOVED"||g?.changeType==="DELETED")&&(t=5),"HIDE"===d.renderMode?e=(0,l.jsx)(nf,{progressiveDiffEntry:d,approximateLineCount:t}):"LAZY_AUTO_LOAD"===d.renderMode?e=(0,l.jsx)(nd,{progressiveDiffEntry:d,approximateLineCount:t}):"EAGER_AUTO_LOAD"===d.renderMode&&(e=(0,l.jsx)(nu,{progressiveDiffEntry:d,approximateLineCount:t})),(0,l.jsxs)("div",{role:"region",id:`diff-${d.pathDigest}`,className:(0,v.$)(no.A.diffTargetable,no.A.diff),"data-targeted":r??!1,children:[(0,l.jsx)("div",{className:no.A.diffHeaderWrapper,children:(0,l.jsx)(nh.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${d.pathDigest}`,canToggleRichDiff:!1,linesAdded:g?.linesAdded??0,linesChanged:g?.linesChanged??0,linesDeleted:g?.linesDeleted??0,newPath:d.path,patchStatus:"",path:d.path,onToggleExpandAllLines:np.l,onToggleFileCollapsed:np.l,onToggleDiffDisplay:np.l,isInSingleFileMode:y})}),e]},`${d.pathDigest}_${d.path}`)}return f?(0,l.jsx)(T.t,{fallback:(0,l.jsx)(nm,{...f}),children:(0,l.jsx)(na,{basePath:e,changeType:f.status,currentUser:t,diffLines:f.diffLines,diffManuallyExpanded:n,diffSize:f.diffSize,headBranchName:i,headRepoName:a,headRepoOwner:s,helpUrl:f.helpUrl,isBinary:f.isBinary,isSelected:r??!1,isSubmodule:f.isSubmodule,isTooBig:f.isTooBig,linesAdded:f.linesAdded,linesChanged:f.linesChanged,linesDeleted:f.linesDeleted,newCommitOid:f.newCommitOid,newTreeEntry:f.newTreeEntry,objectId:f.objectId,oldCommitOid:f.oldCommitOid,oldTreeEntry:f.oldTreeEntry,path:f.path,pathDigest:f.pathDigest,pullRequestGlobalRelayId:u,repository:m,reviewed:f.reviewed??!1,richDiff:f.richDiff,status:f.status,submodule:f.submodule,truncatedReason:f.truncatedReason})}):(0,l.jsx)(nm,{linesAdded:0,linesChanged:0,linesDeleted:0,path:d.path,pathDigest:d.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}try{ng.displayName||(ng.displayName="ProgressivePullRequestDiffEntry")}catch{}try{ny.displayName||(ny.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}function nx(){return(0,l.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,l.jsxs)(em.E,{border:!1,spacious:!0,children:[(0,l.jsx)(em.E.Heading,{children:"No changes to show"}),(0,l.jsx)(em.E.Description,{children:"This commit does not include any file changes"})]})})}try{nx.displayName||(nx.displayName="EmptyPullRequestBlankSlate")}catch{}let nv={wrapper:"PullRequestDiffsAnimation-module__wrapper--j5QjR",imageContainer:"PullRequestDiffsAnimation-module__imageContainer--ISOgX",image:"PullRequestDiffsAnimation-module__image--MMHno",firstFrameImage:"PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",animatedImage:"PullRequestDiffsAnimation-module__animatedImage--yjDlC",reducedMotionImage:"PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y"};var nb=n(69895);let n_=n.p+"mona-hifive-first-frame-0d428028d4d7.png",nj=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",nC=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",nw=()=>{let e=(0,nb.j)(),t=(0,b.useRef)(null),n=(0,b.useRef)(null);return(0,l.jsxs)("div",{className:nv.wrapper,children:[(0,l.jsxs)("div",{className:nv.imageContainer,children:[(0,l.jsx)("img",{src:nC,alt:"GIF of two octocats high fiving each other",className:(0,v.$)(nv.image,nv.animatedImage),ref:t}),(0,l.jsx)("img",{src:n_,alt:"Two octocats",className:(0,v.$)(nv.image,nv.firstFrameImage),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,l.jsx)("img",{src:nj,alt:"Two octocats high fiving each other",className:(0,v.$)(nv.image,nv.reducedMotionImage)})]}),(0,l.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},nN=(0,b.memo)(nw);try{nw.displayName||(nw.displayName="PullRequestDiffsAnimationComponent")}catch{}try{nN.displayName||(nN.displayName="PullRequestDiffsAnimation")}catch{}function nS(){let e=(0,b.useRef)(!0),{selectedFullDiffHash:t}=(0,ej.U)(),n=(0,eC.jU)(t)??void 0,i=(0,eC.yI)(t),a=(0,b.useRef)(new Map),s=(0,b.useCallback)(()=>a.current,[]);return{onScrollToAndFocusEntry:(0,b.useCallback)((n,{focusPathName:a}={})=>{let r=s().get(n);if(!r)return;let o=r,l=r.querySelector("button");if(a&&(l=r.querySelector("a")),i){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(l=o=n)}else e.current||(o=null);if(o){let e=h.cg?.scrollY??0,t=o.getBoundingClientRect().top+e-57-60;h.cg?.scrollTo({top:t,left:0})}l&&l.focus(),e.current=!1},[s,i,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:i,getTargetableEntriesMap:s}}let nI=(0,b.memo)(nk);function nk({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:o,repository:c,showPullRequestGroups:d}){let[u,m]=(0,b.useState)(!1),h=(0,b.useRef)(null),p=(0,L.$W)(n),f=(0,L.JA)(),{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:v}=nS(),_=(0,L.qg)(),j=p.length;return 0===_?(0,l.jsx)(nx,{}):0===n.length?(0,l.jsx)(eh,{}):(0,l.jsxs)("div",{ref:h,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[d&&f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"f3 text-semibold mb-0",children:[(0,l.jsx)("span",{className:"fgColor-accent",children:(0,l.jsx)(er.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ","/ ",f.name]}),(0,l.jsx)("p",{children:f.description})]}):null,p.map(n=>(0,l.jsx)("div",{ref:e=>{let t=y();e?t.set(n.pathDigest,e):t.delete(n.pathDigest)},children:(0,l.jsx)(ng,{basePath:e,currentUser:t,diffManuallyExpanded:u,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:o,isSelected:void 0===x?void 0:n.pathDigest===x,isSelectingLineOrRange:v,onScrollToAndFocusEntry:g,progressiveDiffEntry:n,repository:c})},n.pathDigest)),j>=15&&(0,l.jsx)(nN,{}),(0,l.jsx)(eu.nq,{})]})}try{nI.displayName||(nI.displayName="PullRequestDiffsList")}catch{}try{nk.displayName||(nk.displayName="PullRequestDiffsListUnmemoized")}catch{}let nT={L:"LEFT",R:"RIGHT"};function nL(e){return"L"===e||"R"===e}let nE={HiddenPane:"DiffComparisonViewer-module__HiddenPane--pMKU7",Pane:"DiffComparisonViewer-module__Pane--FbQgQ",MobileExpanded:"DiffComparisonViewer-module__MobileExpanded--w1t6O",TreeExpanded:"DiffComparisonViewer-module__TreeExpanded--sy49K",Content:"DiffComparisonViewer-module__Content--Cv2ab"};var nR=n(53215),nA=n(24798),nD=n(21132);let nP=(0,b.memo)(function({diffEntryPathDigest:e,basePath:t,currentUser:n,diffManuallyExpanded:i,filteredDiffSummaries:a,headBranchName:s,headRepoName:r,headRepoOwner:o,isSelectingLineOrRange:c,pullRequestGlobalRelayId:d,repository:u,onScrollToAndFocusEntry:m}){let h=(0,L.m9)()||e,p=(0,L.mY)().find(e=>e.pathDigest===h),f=(0,L.Fm)(p?.path||""),g=p?.path||"",y=(0,L.jT)(g),x=(0,L.j5)(),_=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{_.current||p?.loadingStatus===nD.s.Loaded&&(m(h,{focusPathName:!0}),_.current=!0)},[c,m,p?.loadingStatus,h]),!a.some(e=>e.path===g))return(0,l.jsx)(eh,{});if(p&&p.loadingStatus!==nD.s.Loaded){let e=(0,l.jsx)(nl,{ariaLabel:`Loading ${g}`,testId:`eager-load-${g}`,approximateLineCount:5,id:`diff-${g}`});return(0,l.jsxs)("div",{role:"region",id:`diff-${g}`,className:(0,v.$)(no.A.diffTargetable,no.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,l.jsx)("div",{className:no.A.diffHeaderWrapper,children:(0,l.jsx)(nh.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${h}`,canToggleRichDiff:!1,linesAdded:f?.linesAdded??0,linesChanged:f?.linesChanged??0,linesDeleted:f?.linesDeleted??0,newPath:g,patchStatus:"",path:g,onToggleExpandAllLines:np.l,onToggleFileCollapsed:np.l,onToggleDiffDisplay:np.l,isInSingleFileMode:x})}),e]},`${h}_${g}`)}return y?(0,l.jsxs)(T.t,{fallback:(0,l.jsx)(nm,{...y}),children:[(0,l.jsx)(na,{basePath:t,changeType:y.status,currentUser:n,diffLines:y.diffLines,diffManuallyExpanded:i,diffSize:y.diffSize,headBranchName:s,headRepoName:r,headRepoOwner:o,helpUrl:y.helpUrl,isBinary:y.isBinary,isSelected:!1,isTooBig:y.isTooBig,linesAdded:y.linesAdded,linesChanged:y.linesChanged,linesDeleted:y.linesDeleted,newCommitOid:y.newCommitOid,newTreeEntry:y.newTreeEntry,objectId:y.objectId,oldCommitOid:y.oldCommitOid,oldTreeEntry:y.oldTreeEntry,path:y.path,pathDigest:y.pathDigest,pullRequestGlobalRelayId:d,repository:u,reviewed:y.reviewed??!1,richDiff:y.richDiff,status:y.status,submodule:y.submodule,truncatedReason:y.truncatedReason}),(0,l.jsx)(eu.nq,{})]}):(0,l.jsx)(nm,{linesAdded:0,linesChanged:0,linesDeleted:0,path:g,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{nP.displayName||(nP.displayName="SingleFileModePullRequestDiffEntry")}catch{}let nO=(0,b.memo)(function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:o}){let c=(0,L.HZ)(),d=(0,b.useMemo)(()=>Object.values(c??{}).filter(e=>null!==e),[c])[0],u=(0,L.m9)(),{onScrollToAndFocusEntry:m,getTargetableEntriesMap:h,isSelectingLineOrRange:p}=nS(),f=(0,L.qg)(),g=(0,L.uh)()[0],y=(0,L.zK)(),x=(0,L.mF)(),{navigateToSelectedComment:v,navigateToSelectedAnnotation:_,handleHashUpdate:j}=(0,L.Lh)(),{setSelectedHash:C}=(0,ej.U)(),w=(0,b.useRef)(!0),S=(0,L.mY)().find(e=>e.pathDigest===u),{loadMore:I}=(0,L.pV)(),k=(0,b.useCallback)(()=>{y?v(y):x&&!isNaN(Number(x))?_(Number(x)):u&&S?I(S):!u&&g?.pathDigest&&(C(g.pathDigest),(0,N.Zu)(`diff-${g.pathDigest}`))},[g?.pathDigest,I,_,v,x,y,u,S,C]);if((0,b.useEffect)(()=>{w.current&&(k(),w.current=!1)},[]),(0,b.useEffect)(()=>{let e=()=>{j()};return j(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[j]),0===f)return(0,l.jsx)(nx,{});if(0===n.length)return(0,l.jsx)(eh,{});let T=u||d?.pathDigest||g?.pathDigest;return T?(0,l.jsx)("div",{ref:e=>{let t=h();e?t.set(T,e):t.delete(T)},children:(0,l.jsx)(nP,{diffEntryPathDigest:T,basePath:e,currentUser:t,diffManuallyExpanded:!1,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:o,onScrollToAndFocusEntry:m,isSelectingLineOrRange:p})}):null});try{nO.displayName||(nO.displayName="SingleFileModeDiffEntryNavigator")}catch{}var nM=n(50129),nF=n(97286);function nB({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,useChangeGroups:s,useCommenting:r,useEditOptions:o,useFileTree:c,useToolbar:d}){let u=(0,b.useMemo)(()=>({useChangeGroups:s??!1,useCommenting:r??!1,useEditOptions:o??!1,useFileTree:c??!1,useToolbar:d??!1,shouldFetchInitialData:void 0!==i,forceUnifiedView:n??!1}),[r,o,c,s,d,i,n]),{data:m,isLoading:p}=function({basePath:e,headSha:t,baseSha:n,initialData:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${K.u.baseComparisonInfo}?${a.toString()}`,r=function({basePath:e,selectedRange:t}){return[K.u.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t??"head-sha-not-provided"}});return(0,nF.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,ec.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},initialData:i,staleTime:1/0})}({basePath:e,headSha:i,baseSha:t,initialData:a});return(0,l.jsx)(l.Fragment,{children:m&&!p?(0,l.jsx)(nM.Kg,{basePageDataUrl:m.pullRequest.pathName,children:(0,l.jsx)(tO.Dp,{baseRefOid:m.pullRequest.comparison.baseOid,path:h.fV.pathname??"",children:(0,l.jsx)(nR.v,{initData:m,children:(0,l.jsx)(n$,{...m,configOpts:u})})})}):(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:20,width:"100%"},children:(0,l.jsx)(g.A,{size:"large",srText:"Loading Diff Comparison content"})})})}function n$({codeowners:e,commits:t,configOpts:n,diffSummaries:i,fileFilter:a,pullRequest:s,repository:r,markers:o,pageLimits:h,urls:g,user:_,isSingleFileMode:j}){(0,b.useMemo)(()=>{if(o&&i){for(let e of i)if(e.markersMap)for(let t in e.markersMap){let n=e.markersMap[t];if(n?.threads)for(let e of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!nL(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];nL(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:nT[n],startLine:a,startDiffSide:nT[s],isOutdated:!!t.outdatedReason}}(t,e),i=o.threads[Number(e.id)];if(i&&n){let{isOutdated:e,...t}=n;i.positioning=n,i.subject=t}}}}},[i,o]),(0,f.L)(!0);let C=function(e){let t=(0,u.C0)(e.viewSettings.splitPreference),n=(0,u.Qn)(e.viewSettings.hideWhitespace);return(0,b.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])}(_),{mutate:w}=(0,d.U)({onSuccess:()=>{},onError:()=>{}}),{data:N}=(0,u.ID)(C),k=(0,b.useCallback)(()=>{w({commentsPreference:N?.commentsPreference===m.sI.Visible?m.sI.Collapsed:m.sI.Visible})},[N?.commentsPreference,w]),T=(0,b.useMemo)(()=>({avatarURL:_.currentUserAvatarUrl||"",login:_.currentUserLogin||"",tabSize:_.tabSize,splitPreference:n.forceUnifiedView?"unified":N?.splitPreference??"unified",shouldDisplayComments:n.useCommenting??!1,shouldDisplayEditOptions:n.useEditOptions??!1,lineSpacing:N?.lineSpacing??"relaxed",canComment:!!n.useCommenting&&_.canComment,canApplySuggestion:_.canApplySuggestion,commentsPreference:N?.commentsPreference??"visible",hasCopilotAccess:_.hasCopilotAccess}),[n.forceUnifiedView,n.useCommenting,n.useEditOptions,N?.commentsPreference,N?.lineSpacing,N?.splitPreference,_.canApplySuggestion,_.canComment,_.currentUserAvatarUrl,_.currentUserLogin,_.hasCopilotAccess,_.tabSize]),{splitPagePaneHidden:E,splitPageContentHidden:R,isTreeExpanded:A,isMobileTreeExpanded:D,treeToggleElement:P,collapseTree:O}=(0,c.q)(en,_.isFileTreeExpanded,T,{size:"small",mobileBreakpoint:"lg"}),M={basePath:s.pathName};e&&(M.initialData=e);let{data:F}=(0,S.dG)(M),{setCodeowners:B}=(0,L.wh)();(0,b.useEffect)(()=>{B(F)},[F,B]);let $=(0,L.qg)(),U=(0,L.I8)(),{updateDiffFilter:V}=(0,L.or)();(0,b.useEffect)(()=>{V({...a.initialState,unselectedFileExtensions:new Set(a.initialState.unselectedFileExtensions)})},[V,a.initialState]);let H=(0,L.mU)(),W=(0,b.useCallback)(e=>{V(e,!0)},[V]),q=(0,b.useCallback)(()=>{D&&O()},[O,D]),z=(0,b.useMemo)(()=>(0,l.jsx)(I,{basePath:s.pathName,fileFilterMenuOptions:a.menuOptions,fileFilterState:U,setFileFilterState:W,viewerLogin:T.login,filterSize:A?"medium":"small"}),[T.login,a.menuOptions,U,A,s.pathName,W]),{aliveChannel:G,bannersData:K}=(0,nA.o)(),Q=(0,L.gt)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.ak,{commands:{"commit-diff-view:collapse-expand-comments":k}}),n.useToolbar?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t8,{commits:t,currentUserLogin:_.currentUserLogin,fileFilter:z,isFileTreeExpanded:A,lastReviewOid:_.lastReviewOid,pageLimits:h,pullRequest:s,repository:r,shouldShowViewedFilesCount:_.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:P,bannersData:K,urls:g,user:_,aliveChannel:G}),D&&(0,l.jsx)(y.l,{onClose:()=>O(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,l.jsx)(ei,{fileFilter:z,filteredDiffs:H,onFileSelected:q,onSetFilterState:W,showPullRequestGroups:n.useChangeGroups&&Q})})]}):null,n.useFileTree?(0,l.jsx)(x.O7.Pane,{position:"start",sticky:!0,offsetHeader:"60px","aria-label":"File tree",padding:"none",className:(0,v.$)(E?nE.HiddenPane:nE.Pane,D&&nE.MobileExpanded,A&&nE.TreeExpanded),divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,children:(0,l.jsx)(ei,{className:es.sidebar,fileFilter:z,filteredDiffs:H,onFileSelected:q,onSetFilterState:W,showPullRequestGroups:n.useChangeGroups&&Q})}):null,(0,l.jsxs)(x.O7.Content,{as:"div",width:"full",hidden:R,padding:"none",className:(0,v.$)(nE.Content,A&&nE.TreeExpanded),children:[(0,l.jsx)(ed,{pageLimits:h,repository:r,urls:g}),j?(0,l.jsx)(nO,{basePath:s.pathName,currentUser:T,filteredDiffSummaries:H,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,pullRequestGlobalRelayId:s.globalRelayId,repository:r}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(nI,{basePath:s.pathName,currentUser:T,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,onSetFilterState:W,pullRequestGlobalRelayId:s.globalRelayId,filteredDiffSummaries:H,repository:r,showPullRequestGroups:!0})})]})]})}try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{nB.displayName||(nB.displayName="DiffComparisonViewer")}catch{}try{n$.displayName||(n$.displayName="InternalDiffComparisonViewer")}catch{}try{(o=FilterFilterComponent).displayName||(o.displayName="FilterFilterComponent")}catch{}},21968:(e,t,n)=>{n.d(t,{O:()=>L});var i=n(74848),a=n(96540),s=n(98755),r=n(25407),o=n(69726),l=n(1805),c=n(56149),d=n(21373),u=n(62935),m=n(72579),h=n(99906),p=n(73155),f=n(79634),g=n(79431),y=n(11196),x=n(97665),v=n(33578),b=n(30923),_=n(20622),j=n(53885),C=n(96379),w=n(94747);let N={truncateBranch:"PullRequestHeaderSummary-module__truncateBranch--bdsQu",summaryContainer:"PullRequestHeaderSummary-module__summaryContainer--iNR1T"};var S=n(34261),I=n(2022),k=n(95807),T=n(99223);function L({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:m="",baseRepositoryOwnerLogin:y="",canChangeBase:L=!1,commitsCount:R,headBranch:A,headRepositoryOwnerLogin:D="",headRepositoryName:P="",isInAdvisoryRepo:O,isEditing:M=!1,mergedBy:F,mergedTime:B,pullRequestId:$,pullRequestNumber:U,repositoryId:V,setIsEditing:H,state:W}){let q=(0,x.jE)(),{refListCacheKey:z}=(0,f.X)(),[G,K]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(!1),[J,X]=(0,a.useState)(""),[Z,ee]=(0,a.useState)(""),et=(0,S.f)(),en=(0,I.E)(),{mutate:ei}=function(){let e=(0,j.e)(_.u.changeBase);return(0,w.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,C.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,b.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})}(),ea=e=>{Y(!1),X(e)},es=Q?()=>(0,i.jsx)(o.A,{size:"small"}):null,er=D&&D!==y?`${y}:${t}`:t,eo=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(y,D,P,A,O),el=W===v.Q.Merged?F:e,ec=function(e,t,n){let i=`${t} ${t>1?"commits":"commit"}`;return e!==v.Q.Merged?`wants to merge ${i} into`:n?`merged ${i} into`:`${i} merged into`}(W,R,el);return(0,i.jsxs)("span",{className:`fgColor-muted d-flex flex-items-center overflow-hidden ${N.summaryContainer}`,children:[el?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,r.dCN)({owner:el}),href:`/${el}`,children:el})," "]}):null,ec,L&&M?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.PI,{cacheKey:z,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:y,repo:m,types:["branch"],onSelectItem:e=>{K(!0),ee(e)}}),(0,i.jsx)(c.ZL,{children:(0,i.jsxs)(h.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:G,onDismiss:()=>{K(!1),ee(""),X("")},children:[(0,i.jsx)(h.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),J&&(0,i.jsx)(g.v,{className:"mt-2",variant:"critical",children:J}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:Q?"Base branch update in progress.":""}),(0,i.jsx)(d.Q,{alignContent:"center","aria-disabled":Q?"true":void 0,block:!0,className:"mt-3",disabled:Q,leadingVisual:es,onClick:()=>{Y(!0),ei({newBaseBranch:Z},{onError:e=>ea(e.message),onSuccess:async()=>{try{await Promise.all([q.refetchQueries({queryKey:et},{throwOnError:!0}),q.refetchQueries({queryKey:en},{throwOnError:!0})]),Y(!1),H?.(!1),K(!1)}catch{ea("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:Q?null:"Change base"})]})]})})]}):(0,i.jsx)(E,{branch:t,branchText:er,repositoryName:m,repositoryOwner:y}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(E,{branch:A,branchText:eo,repositoryName:P,repositoryOwner:D}),(0,i.jsx)(s.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:D?eo:A})]}),W===v.Q.Merged&&(0,i.jsx)(u.A,{datetime:B}),W===v.Q.Open&&!(0,T.k)()&&(0,i.jsx)(k.i,{processingIndicatorUrl:(0,r.CZ9)({owner:y,repo:m,number:U}),repositoryId:V,pullRequestId:$})]})}function E({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(m.A,{as:"span",className:N.truncateBranch,title:"This repository has been deleted",children:e});{let s=(0,r.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(y.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(m.A,{href:s,className:N.truncateBranch,children:e})})}}try{L.displayName||(L.displayName="PullRequestHeaderSummary")}catch{}try{E.displayName||(E.displayName="PullRequestBranchName")}catch{}},33195:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(35406),s=n(96540),r=n(34164);let o={unlisted:"PullRequestStateLabel-module__unlisted--pcrfP"};var l=n(33578);function c({className:e,state:t}){let n=(0,s.useMemo)(()=>l.a[t],[t]);return t===l.Q.Unlisted?(0,i.jsxs)("span",{className:o.unlisted,children:[(0,i.jsx)(d,{})," Unlisted"]}):(0,i.jsx)(a.A,{className:(0,r.$)("flex-self-start",e),status:n.status,children:n.description})}function d(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})}try{c.displayName||(c.displayName="PullRequestStateLabel")}catch{}try{d.displayName||(d.displayName="GitPullRequestUnlistedSvg")}catch{}},45270:(e,t,n)=>{n.d(t,{Dp:()=>l,ww:()=>d,Xv:()=>c});var i=n(74848),a=n(96540);let s=/^(?<startOid>[a-fA-F0-9]{7,40})\.\.(?<endOid>[a-fA-F0-9]{7,40})$/,r=/^[a-fA-F0-9]{7,40}$/,o=(0,a.createContext)({});function l({baseRefOid:e,path:t,children:n}){let l=(0,a.useMemo)(()=>{let n,i,a=t.split("/"),o=a[a.length-1];if(o){let t=function(e){let t=e.match(s),n=t?.groups?.startOid,i=t?.groups?.endOid;return t&&n&&i?{startOid:n,endOid:i}:r.test(e)?{singleCommitOid:e}:void 0}(o);t&&(n="startOid"in t?t.startOid:e,i="endOid"in t?t.endOid:t.singleCommitOid)}return{endOid:i,startOid:n,baseRefOid:e}},[e,t]);return(0,i.jsx)(o.Provider,{value:l,children:n})}let c=()=>(0,a.useContext)(o);function d(){let{endOid:e,startOid:t}=c();return!!e||!!t}try{o.displayName||(o.displayName="SelectedRefContext")}catch{}try{l.displayName||(l.displayName="SelectedRefContextProvider")}catch{}},53215:(e,t,n)=>{n.d(t,{v:()=>E,n:()=>L});var i=n(74848),a=n(96540),s=n(71323),r=n(97283),o=n(87134),l=n(1932),c=n(21132),d=n(15697);function u({diffSummaries:e,loadedPathDigests:t,loadingPathDigests:n,selectedPathDigest:i}){let a=!0,s=Object.values(e),r=s.findIndex(e=>e.pathDigest===i);return s.map(({path:e,pathDigest:i},s)=>{let o,l;switch(!0){case t.has(i):o=c.s.Loaded;break;case n.has(i):o=c.s.Loading;break;default:o=c.s.NotLoaded}let d=!1;return o===c.s.Loaded?(l="RENDER",d=!1):(s===r?(l="EAGER_AUTO_LOAD",d=!0):(l=s<r?"LAZY_AUTO_LOAD":s===r+1?"EAGER_AUTO_LOAD":a?"EAGER_AUTO_LOAD":"HIDE",d=!1),a&&"LAZY_AUTO_LOAD"!==l&&(a=!1)),{path:e,pathDigest:i,loadingStatus:o,renderMode:l,loadSolo:d}})}var m=n(70170),h=n(91747),p=n(61583),f=n(79472),g=n(45270),y=n(43362),x=n(48845),v=n(20622),b=n(96379),_=n(16235),j=n(69599);function C({basePath:e,selectedRange:t,hideWhitespace:n}){return[v.u.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`hideWhitespace:${n}`]}async function w(e){let t=(0,_.S)(),n=C(e),i=await S(e);return i&&i.length>0&&t.setQueryData(n,(0,l.jM)(e=>{if(!e)return i;for(let t of i)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),i}async function N(e){let t,n=(0,_.S)(),i=C(e),a=n.getQueryData(i);if(a?.length){let n=new Set(a.map(e=>e.path));if(0===(t=e.paths.filter(e=>!n.has(e))).length)return a}else t=e.paths;let s=await S({...e,paths:t});return s&&s.length>0&&n.setQueryData(i,(0,l.jM)(e=>{if(!e)return s;for(let t of s)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),(n.getQueryData(i)||[]).filter(t=>e.paths.includes(t.path))}async function S({basePath:e,fullDiff:t,selectedRange:n,paths:i,contextRanges:a,signal:s,hideWhitespace:r}){let o=new URLSearchParams;if(o.append("paths",i.join(",")),a){let e=i.map(e=>(a[e]??[]).map(([e,t])=>`${e}-${t}`).join(",")).join(":");o.append("ctx",e)}o.append("w",r?"1":"0"),n.baseOid===t.baseOid?o.append("range",n.headOid):o.append("range",`${n.baseOid}..${n.headOid}`);let l=`${e}/page_data/${v.u.diffEntries}?${o.toString()}`;try{let e=await (0,b.Sr)(l,{signal:s});if(s?.aborted)return;let t=await (0,x.hp)(e);return(0,x.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}function I(e,t,n,i){return[v.u.diffContextLines,e,t,n,i]}async function k({contextLineRanges:e,basePath:t,path:n,w:i="0",fullDiff:a,selectedRange:s}){let r=new URLSearchParams;for(let t of(r.append("path",n),e))r.append("context_line_ranges[]",JSON.stringify(t));r.append("w",i),s.baseOid===a.baseOid?r.append("range",s.headOid):r.append("range",`${s.baseOid}..${s.headOid}`);let o=`${t}/page_data/${v.u.diffContextLines}?${r.toString()}`,l=await (0,b.QJ)(o);if(l.ok)return await l.json()??void 0}let T=(0,a.createContext)(null);function L(e){let t=(0,a.useContext)(T);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,s.P)(t,e)}let E=({initData:e,children:t})=>{let n=(0,a.useRef)(null),s=(0,h.u)("prx_files_lite_throttle"),r=(0,h.u)("prx_files_medium_throttle"),o=(0,f.Qn)(e.user.viewSettings.hideWhitespace),l=(0,g.Xv)(),c=(0,y.Wp)(e.diffSummaries),d=(0,y.Be)(e.diffSummaries),u=(0,y.wm)(e.viewerPendingReview),m=(0,y.Sl)(e.diffContents),x=(0,y.jH)(e.markers,e.diffSummaries);return n.current||(function(e,t,n,i,a,s){let r=(0,_.S)(),o=C({basePath:n,selectedRange:{baseOid:e??a.baseOid,headOid:t??a.headOid},hideWhitespace:s});r.setQueryData(o,i)}(l.startOid,l.endOid,e.pullRequest.pathName,e.diffContents,e.pullRequest.comparison,o),n.current=R({baseOid:e.pullRequest.comparison.baseOid,headOid:e.pullRequest.comparison.headOid,selectedCommitRange:{baseOid:l.startOid??void 0,headOid:l.endOid??void 0},changeGroupGeneration:e.changeGroupGeneration,hideWhitespace:o,isSingleFileMode:e.isSingleFileMode,collapsedFilesMap:d,initialSummariesViewedStatus:d,initialSummariesViewedCount:e.user.viewedFilesCount,diffEntries:m,initialDiffSummaries:c,initialLoadedPathDigests:new Set(e.diffContents.map(e=>e.pathDigest)),markers:x,basePath:e.pullRequest.pathName,pendingReview:u,prxFilesLiteThrottle:s,prxFilesMediumThrottle:r,pullRequest:e.pullRequest,selectedPathDigest:(0,p.jU)((0,p.o9)())})),(0,i.jsx)(T.Provider,{value:n.current,children:t})},R=e=>(0,r.y)()((0,o.lt)((...t)=>({...(({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t}})=>()=>({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t}}))(e)(...t),...((e,t)=>({codeowners:void 0,codeownersActions:{setCodeowners:t=>{e({codeowners:t},void 0,"updateCodeowners")}}}))(...t),...(({baseOid:e,headOid:t,selectedCommitRange:n,hideWhitespace:i})=>a=>({comparisonInfo:{fullDiff:{baseOid:e,headOid:t},selectedRange:{baseOid:n.baseOid??e,headOid:n.headOid??t},hideWhitespace:i},comparisonInfoActions:{updateWhitespace:e=>a(t=>({comparisonInfo:{...t.comparisonInfo,hideWhitespace:e}}),void 0,"comparisonInfo#updateWhitespace")}}))(e)(...t),...((e,t)=>({diffFilter:{state:{activeChangeGroupId:void 0,filterText:"",fileExtensions:{},unselectedFileExtensions:new Set,showDeletedFiles:!0,showOnlyManifestFiles:!1,showOnlyOwnedFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!1},diffFilterActions:{updateDiffFilter:(n,i)=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,...n},filtersInteractedWith:t().diffFilter.filtersInteractedWith||!!i}},void 0,"updateFilters")}}}))(...t),...(({initialDiffSummaries:e,initialSummariesViewedStatus:t,initialSummariesViewedCount:n})=>(i,a)=>({diffSummaries:e,summariesViewedCount:n,summariesViewedStatus:t,codeowners:void 0,getPathDigestFromThreadID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.threads.some(t=>Number(t.id)===Number(e)))return t.pathDigest}},getPathDigestFromAnnotationID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.annotations.some(t=>t.id===e))return t.pathDigest}},diffSummariesActions:{setDiffSummaries:e=>{i({diffSummaries:e},void 0,"updateDiffSummaries")},setDiffViewed:(e,t)=>{i(n=>n.diffSummaries?{summariesViewedStatus:(0,l.jM)(n.summariesViewedStatus,n=>{n[e]=t}),summariesViewedCount:n.summariesViewedCount+(t?1:-1),diffSummaries:(0,l.jM)(n.diffSummaries,n=>{n[e]&&(n[e].markedAsViewed=t)})}:n)},onCommentThreadAdded:({path:e,diffLineKey:t,startPosition:n,threadID:a})=>{i((0,l.jM)(i=>{if(!i.diffSummaries)return;let s=i.diffSummaries[e];if(!s)return;let r=s.markersMap??{};r[t]||(r[t]={threads:[],annotations:[]}),r[t].threads.push({id:parseInt(a),start:n}),s.totalCommentsCount=(s.totalCommentsCount||0)+1}),void 0,"commentAddedForDiffSummary")},onCommentThreadDeleted:({path:e,threadID:t})=>{i((0,l.jM)(n=>{if(!n.diffSummaries)return;let i=n.diffSummaries[e];if(i&&i?.totalCommentsCount&&i?.markersMap)for(let[e,n]of Object.entries(i.markersMap))n.threads=n.threads.filter(e=>e.id!==parseInt(t)),0===n.threads.length&&0===n.annotations.length&&delete i.markersMap[e]}),void 0,"commentDeletedForDiffSummary")}}}))(e)(...t),...(({markers:e})=>(t,n)=>({markers:e,getThread:(e,t,i)=>{let a=n().markers;if(a)return a[t]?.[i]?.threads?.find(t=>Number(t.id)===e)},getThreadFromCommentID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(i){for(let t of Object.values(i))if(t?.commentsData?.comments.some(t=>t.databaseId===e))return t}},getAnnotationFromID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(i){for(let t of Object.values(i))if(t.databaseId===e)return t}},markersActions:{updateThread:(e,i,a,s)=>{let r=n().markers;if(!r)return;let o=s(r[i]?.[a]?.threads?.find(t=>Number(t.id)===e));o&&t({markers:(0,l.jM)(r,t=>{let n=t[i]?.[a]?.threads?.findIndex(t=>Number(t.id)===e);if(void 0===n||-1===n)t[i]||(t[i]={}),t[i][a]||(t[i][a]={threads:[],annotations:[]}),t[i][a].threads.push(o);else if(t[i]&&t[i][a]&&-1!==n){let e=o.positioning??t[i][a].threads[n]?.positioning,s=o.subject??t[i][a].threads[n]?.subject,r={...o,positioning:e,subject:s};t[i][a].threads[n]=r}})},void 0,"updateThread")},updateThreads:e=>{let i=n().markers;i&&t({markers:(0,l.jM)(i,t=>{for(let n of Object.keys(i)){let i=t[n];if(i)for(let t of Object.keys(i)){let n=i[t];if(!n)continue;let a=n.threads;a&&(n.threads=e(a))}}})})},deleteThreadComment:(e,i,a,s)=>{let r="not_found",o=n().markers;return o&&t({markers:(0,l.jM)(o,t=>{let n=t[a]?.[s]?.threads?.find(t=>Number(t.id)===e);if(!n){r="not_found";return}let o=n.commentsData,l=o?.comments.filter(e=>e.id!==i)??[];if(!o||o.comments.length===l.length){r="not_found";return}if(0===l.length){r="thread_deleted";let n=t[a]?.[s]?.threads;if(n){let t=n.findIndex(t=>Number(t.id)===e);-1!==t&&n.splice(t,1)}}else r="comment_deleted",o&&(o.comments=l)})},void 0,"deleteThreadComment"),r},updateThreadComment:({threadID:e,filePath:i,lineMarkersKey:a,match:s,transform:r})=>{let o=n().markers;o&&t({markers:(0,l.jM)(o,t=>{let n,o=t[i]?.[a]?.threads?.find(t=>Number(t.id)===e);if(!o)return;let l=o.commentsData,c=l?.comments.findIndex(s);"number"==typeof c&&-1!==c&&(n=l?.comments[c]);let d=r(n);d&&(-1===c||"number"!=typeof c?l?.comments.push(d):l&&l.comments&&(l.comments[c]=d))})},void 0,"updateThreadComment")}}}))(e)(...t),...(({prxFilesLiteThrottle:e,prxFilesMediumThrottle:t,initialDiffSummaries:n,initialLoadedPathDigests:i,selectedPathDigest:a})=>(s,r)=>{let o;return o=t?100:50*!!e,{entries:u({diffSummaries:n,loadedPathDigests:i,loadingPathDigests:new Set,selectedPathDigest:a}),selectedPathDigest:a,internalProgressiveDiffsActions:{loadSelectedEntries:(0,m.n)(async e=>{if(0===e.length)return;let t=e.map(e=>e.path),n=e.map(e=>e.pathDigest),i=r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),a=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);s(e=>({entries:u({diffSummaries:e.diffSummaries,loadedPathDigests:new Set(i),loadingPathDigests:new Set([...a,...n]),selectedPathDigest:e.selectedPathDigest})}),void 0,"loadSelectedEntries#preFetch");let{loadDiffEntries:o}=r().diffEntriesActions,l=(0,d.i)({paths:new Set(t),diffSummaries:r().diffSummaries}),m=await o({paths:t,contextRanges:l});if(!m||0===m.length){let e=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest)],t=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);return s({entries:u({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(e),loadingPathDigests:new Set(t),selectedPathDigest:r().selectedPathDigest})},void 0,"loadSelectedEntries#postFetch#noAPIData")}let h=m.map(e=>e.pathDigest),p=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),...h],f=r().entries.filter(e=>e.loadingStatus===c.s.Loading).filter(e=>!h.includes(e.pathDigest)).map(e=>e.pathDigest);s(e=>({...e,entries:u({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(p),loadingPathDigests:new Set(f),selectedPathDigest:r().selectedPathDigest})}),void 0,"loadSelectedEntries#postFetch")},o)},progressiveDiffsActions:{loadMore:async(e,{preferAnySoloEntry:t}={})=>{let n=function({progressiveDiffEntries:e,startingAt:t,preferAnySoloEntry:n}){if(n){let t=e.find(e=>e.loadSolo&&e.loadingStatus===c.s.NotLoaded);if(t)return[t]}let i=e.findIndex(e=>e.pathDigest===t.pathDigest);if(-1===i)return[];let a=e[i];if(a&&a.loadSolo&&a.loadingStatus===c.s.NotLoaded)return[a];let s=[];for(let t=i;t<e.length;t++){let n=e[t];if(!n||(n.loadingStatus===c.s.NotLoaded&&s.push(n),s.length>=4))break}return s}({progressiveDiffEntries:r().entries,startingAt:e,preferAnySoloEntry:t});return r().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{s(t=>({...t,selectedPathDigest:e}));let t=r().entries.find(t=>t.pathDigest===e);if(t)return r().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}})(e)(...t),...(({collapsedFilesMap:e})=>(t,n)=>({collapsedFilesMap:e,filesCollapsedStatusActions:{updateFileCollapsedStatus:(e,i)=>{let a=n().collapsedFilesMap;a&&t({collapsedFilesMap:(0,l.jM)(a,t=>{t[e]=i})},void 0,"updateFileCollapsedStatus")},updateAllFilesCollapsedStatus:e=>{let i=n().collapsedFilesMap;i&&t({collapsedFilesMap:(0,l.jM)(i,t=>{for(let n of Object.keys(t))t[n]=e})},void 0,"deleteThreadComment")}}}))(e)(...t),...(({pendingReview:e})=>(t,n)=>({pendingReview:e,pendingReviewActions:{addPendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,l.jM)(i,t=>{t.pendingReviewIDs||(t.pendingReviewIDs=[]),t.pendingReviewIDs.push(e)})},void 0,"addPendingComment")},removePendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,l.jM)(i,t=>{let n=t.pendingReviewIDs?.filter(t=>t!==e);t.pendingReviewIDs=n})},void 0,"removePendingComment")},clearPendingReview:()=>{let e=n().pendingReview;e&&t({pendingReview:(0,l.jM)(e,e=>{e.id=void 0,e.pendingReviewIDs=[],e.comments=[]})},void 0,"clearPendingReview")}}}))(e)(...t),...(({basePath:e,diffEntries:t,baseOid:n,headOid:i,selectedCommitRange:a})=>(s,r)=>{let o=(0,_.S)();for(let[s,r]of Object.entries(t)){let t=I(e,r.path,a.baseOid??n,a.headOid??i);o.setQueryData(t,()=>r.diffLines)}return{diffEntries:t,diffEntriesActions:{updateDiffEntries:t=>{let n=r().diffEntries??{},i={};for(let n of t){let t=I(e,n.path,r().comparisonInfo.selectedRange.baseOid,r().comparisonInfo.selectedRange.headOid);o.setQueryData(t,n.diffLines),i[n.path]=n}s({diffEntries:(0,l.jM)(n,e=>{for(let t of Object.keys(i))i[t]&&(e[t]=i[t])})},void 0,"updateDiffEntriesInMap")},loadDiffEntries:async t=>{let n=await (e=>(0,j.G7)("pr_sfv_new_diff_fetch")?N(e):w(e))({basePath:e,...t,...r().comparisonInfo});return n&&0!==n.length?(r().diffEntriesActions.updateDiffEntries(n),n):[]},fetchContextLines:async({path:t,contextLineRanges:n,w:i="0"})=>{let a=I(e,t,r().comparisonInfo.selectedRange.baseOid,r().comparisonInfo.selectedRange.headOid),l=r().diffEntries[t];l&&await o.fetchQuery({queryKey:a,queryFn:async()=>{let c=await k({contextLineRanges:n,basePath:e,path:t,w:i,...r().comparisonInfo}),d=l.diffLines,u=o.setQueryData(a,e=>d=function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})}(e??l.diffLines,c?.diffEntryLines??[]));return s(e=>({...e,diffEntries:{...e.diffEntries,[t]:{...l,diffLines:d}}}),void 0,"addContextLinesToDiffEntry"),u}})}}}})(e)(...t),...(({markers:e})=>(t,n)=>{let i,a,s=(0,p.Gl)(),r=(0,p.e3)();if(e){if(s){let t=Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(t){let e=Number(s);for(let n of Object.values(t)){let t=n?.commentsData?.comments;if(n&&t)for(let s of t)Number(s.databaseId)===e&&(i=n.id,a=e)}}}else if(r){let t=Object.values(e).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(t){let e=Number(r);for(let n of Object.values(t))Number(n.databaseId)===e&&(i=n.id)}}}return{markerAndDiffNavigation:{markerId:i,commentId:a,getCommentId:()=>n().markerAndDiffNavigation.commentId,getMarkerId:()=>n().markerAndDiffNavigation.markerId},markerAndDiffNavigationActions:{navigateToSelectedComment:e=>{let i=n().getThreadFromCommentID(e);if(i){let a=n().getPathDigestFromThreadID(i.id);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(t=>({markerAndDiffNavigation:{...t.markerAndDiffNavigation,commentId:e,markerId:i?.id}}))}},navigateToSelectedAnnotation:e=>{let i=n().getAnnotationFromID(e);if(i){let a=n().getPathDigestFromAnnotationID(e);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(e=>({markerAndDiffNavigation:{...e.markerAndDiffNavigation,commentId:void 0,markerId:i.id}}))}},handleHashUpdate:()=>{let e=(0,p.Gl)(),t=(0,p.e3)(),i=(0,p.jU)(window.location.hash),a=n(),s=a.markerAndDiffNavigation.commentId,r=a.markerAndDiffNavigation.markerId,o=a.selectedPathDigest;if(e&&e!==s)a.markerAndDiffNavigationActions.navigateToSelectedComment(e);else if(t){let e=a.getAnnotationFromID(t),n=e?.id;n&&n!==r&&a.markerAndDiffNavigationActions.navigateToSelectedAnnotation(t)}else i&&i!==o?a.progressiveDiffsActions.updateSelectedPathDigest(i):e||t||i||!o||a.progressiveDiffsActions.updateSelectedPathDigest(void 0)}}}})(e)(...t),...(({isSingleFileMode:e})=>t=>({isSingleFileMode:e}))(e)(...t),...(({pullRequest:e})=>t=>({pullRequest:{state:e.state,basePath:e.pathName},pullRequestActions:{updatePullRequestState:n=>{t({pullRequest:{state:n,basePath:e.pathName}},void 0,"pullRequest#updatePullRequestState")}}}))(e)(...t)}),{name:"pull-request-store"}));try{T.displayName||(T.displayName="PullRequestStoreContext")}catch{}try{E.displayName||(E.displayName="PullRequestStoreProvider")}catch{}},18373:(e,t,n)=>{n.d(t,{U:()=>_});var i=n(74848),a=n(21728),s=n(96540),r=n(43883),o=n(21373),l=n(67955),c=n(72511),d=n(15837),u=n(39183),m=n(36284),h=n(4175),p=n(46251),f=n(15042),g=n(38621);let y={dismissalCommentTextarea:"BaseSharedDismissalDialog-module__dismissalCommentTextarea--xxBPO"};var x=n(55127),v=n.n(x);let b={FalsePositive:"false_positive",UsedInTests:"used_in_tests",WontFix:"wont_fix"};function _(e){let t,n,x,_,j,C,w,N,S,I,k,T,L,E,R,A,D,P,O,M,F,B,$,U=(0,a.c)(59),{setOpen:V,count:H,error:W,isPending:q,delegatedAlertDismissalEnabled:z,codeSecurity:G,onSubmit:K}=e,[Q,Y]=(0,s.useState)(""),[J,X]=(0,s.useState)(""),[Z,ee]=(0,s.useState)(!1),et=!z||!!J.trim(),en=!!Q&&et;U[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{Y(e??"")},U[0]=t):t=U[0];let ei=t,ea=G?"alert":"finding";U[1]!==H||U[2]!==ea?(n=function(e,t){let n=v()(e,t),i=t>1,a=`Dismiss ${n}`,s=`Select a reason to dismiss ${v()("this",t)} ${n}.`,r=`Request to dismiss ${n}`,o=i?`These ${n} need approval before they can be dismissed. Requests are sent to all approvers.`:`This ${n} needs approval before it can be dismissed. Requests are sent to all approvers.`,l=i?`These ${n} are not valid`:`This ${n} is not valid`;return{title:a,subtitle:s,submitButtonLabel:"Dismiss",delegatedAlertDismissal:{title:r,subtitle:o,submitButtonLabel:"Submit request"},reasons:{falsePositiveDescription:l,usedInTestsDescription:i?`These ${n} are not in production code`:`This ${n} is not in production code`,wontFixDescription:i?`These ${n} are not relevant`:`This ${n} is not relevant`}}}(ea,H),U[1]=H,U[2]=ea,U[3]=n):n=U[3];let{title:es,subtitle:er,submitButtonLabel:eo,delegatedAlertDismissal:el,reasons:ec}=n;U[4]!==J||U[5]!==en||U[6]!==K||U[7]!==Q?(x=async()=>{if(!en)return void ee(!0);ee(!1),K({resolution:Q,dismissalComment:J})},U[4]=J,U[5]=en,U[6]=K,U[7]=Q,U[8]=x):x=U[8];let ed=x;U[9]!==V?(_=()=>V(!1),U[9]=V,U[10]=_):_=U[10];let eu=z?el.title:es,em=z?el.subtitle:er;return U[11]!==H||U[12]!==el||U[13]!==z||U[14]!==q||U[15]!==en||U[16]!==ed||U[17]!==V||U[18]!==eo?(j=()=>(0,i.jsxs)(f.l.Footer,{children:[(0,i.jsx)(o.Q,{onClick:()=>V(!1),children:"Cancel"}),(0,i.jsxs)(o.Q,{variant:"primary",onClick:ed,disabled:!en||q,leadingVisual:q?g.SyncIcon:null,children:[(0,i.jsx)("span",{children:z?el.submitButtonLabel:eo}),H>1&&(0,i.jsx)(l.A,{scheme:"primary",className:"ml-2",children:(0,r.ai)(H)})]})]}),U[11]=H,U[12]=el,U[13]=z,U[14]=q,U[15]=en,U[16]=ed,U[17]=V,U[18]=eo,U[19]=j):j=U[19],U[20]!==W?(C=W&&(0,i.jsx)(c.A,{variant:"danger",children:W.message}),U[20]=W,U[21]=C):C=U[21],U[22]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(d.A.Label,{visuallyHidden:!0,children:"Dismissal reason"}),U[22]=w):w=U[22],U[23]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(u.A,{value:b.FalsePositive}),S=(0,i.jsx)(m.A.Label,{children:"False positive"}),U[23]=N,U[24]=S):(N=U[23],S=U[24]),U[25]!==ec.falsePositiveDescription?(I=(0,i.jsxs)(m.A,{children:[N,S,(0,i.jsx)(m.A.Caption,{children:ec.falsePositiveDescription})]}),U[25]=ec.falsePositiveDescription,U[26]=I):I=U[26],U[27]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsx)(u.A,{value:b.UsedInTests}),T=(0,i.jsx)(m.A.Label,{children:"Used in tests"}),U[27]=k,U[28]=T):(k=U[27],T=U[28]),U[29]!==ec.usedInTestsDescription?(L=(0,i.jsxs)(m.A,{children:[k,T,(0,i.jsx)(m.A.Caption,{children:ec.usedInTestsDescription})]}),U[29]=ec.usedInTestsDescription,U[30]=L):L=U[30],U[31]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)(u.A,{value:b.WontFix}),R=(0,i.jsx)(m.A.Label,{children:"Won't fix"}),U[31]=E,U[32]=R):(E=U[31],R=U[32]),U[33]!==ec.wontFixDescription?(A=(0,i.jsxs)(m.A,{children:[E,R,(0,i.jsx)(m.A.Caption,{children:ec.wontFixDescription})]}),U[33]=ec.wontFixDescription,U[34]=A):A=U[34],U[35]!==q||U[36]!==I||U[37]!==L||U[38]!==A?(D=(0,i.jsxs)(d.A,{name:"resolution",onChange:ei,disabled:q,children:[w,I,L,A]}),U[35]=q,U[36]=I,U[37]=L,U[38]=A,U[39]=D):D=U[39],U[40]!==z?(P=(0,i.jsx)(m.A.Label,{required:z,children:"Comment"}),U[40]=z,U[41]=P):P=U[41],U[42]===Symbol.for("react.memo_cache_sentinel")?(O=(0,i.jsx)(h.Ay,{placeholder:"Add a comment",rows:5,maxLength:280,name:"dismissal_comment",onChange:e=>X(e.target.value),className:y.dismissalCommentTextarea}),U[42]=O):O=U[42],U[43]!==Z?(M=Z&&(0,i.jsx)(m.A.Validation,{variant:"error",children:"This field is required"}),U[43]=Z,U[44]=M):M=U[44],U[45]!==q||U[46]!==P||U[47]!==M?(F=(0,i.jsx)("div",{children:(0,i.jsxs)(m.A,{disabled:q,children:[P,O,M]})}),U[45]=q,U[46]=P,U[47]=M,U[48]=F):F=U[48],U[49]!==D||U[50]!==F||U[51]!==C?(B=(0,i.jsxs)(p.B,{gap:"normal",children:[C,D,F]}),U[49]=D,U[50]=F,U[51]=C,U[52]=B):B=U[52],U[53]!==B||U[54]!==_||U[55]!==eu||U[56]!==em||U[57]!==j?($=(0,i.jsx)(f.l,{width:"large",height:"auto",onClose:_,title:eu,subtitle:em,renderFooter:j,children:B}),U[53]=B,U[54]=_,U[55]=eu,U[56]=em,U[57]=j,U[58]=$):$=U[58],$}try{_.displayName||(_.displayName="BaseSharedDismissalDialog")}catch{}},77274:(e,t,n)=>{n.d(t,{NE:()=>g,Mm:()=>x,YS:()=>y,mN:()=>_,XF:()=>v,Cf:()=>b});var i=n(74848),a=n(96540),s=n(36284),r=n(4175),o=n(1805),l=n(11196),c=n(21373),d=n(15042),u=n(38621);let m={bodyContainer:"UserFeedback-module__bodyContainer--G2bmg",ratingContainer:"UserFeedback-module__ratingContainer--Mg11z",ratingOption:"UserFeedback-module__ratingOption--ZLoA0",ratingButton:"UserFeedback-module__ratingButton--wgOnk",ratingCaption:"UserFeedback-module__ratingCaption--TCp_8",footerContainer:"UserFeedback-module__footerContainer--wvEjF",footerActionButtonGroup:"UserFeedback-module__footerActionButtonGroup--FzuM1",copyLogsSuccessIcon:"UserFeedback-module__copyLogsSuccessIcon--i0uqN",messageContainer:"UserFeedback-module__messageContainer--FW6dD",validationError:"UserFeedback-module__validationError--e3pDo",privacyText:"UserFeedback-module__privacyText--J0awt",Dialog:"UserFeedback-module__Dialog--n5pi6"},h={verySatisfied:"UserFeedbackColors-module__verySatisfied--HQthN",good:"UserFeedbackColors-module__good--a6lz4",satisfied:"UserFeedbackColors-module__satisfied--R1wkm",dissatisfied:"UserFeedbackColors-module__dissatisfied--fRn_n",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--C4vDF",bad:"UserFeedbackColors-module__bad--FROJd"};var p=n(34164);function f({title:e="Give feedback",requestID:t,options:n,returnFocusRef:f,onSubmit:g,onClose:y},x){let[v,b]=(0,a.useState)(null),[_,j]=(0,a.useState)(""),[C,w]=(0,a.useState)([]),[N,S]=(0,a.useState)(0),[I,k]=(0,a.useState)(!1),[T,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.length>0&&S(e=>e+1)},[C]),(0,a.useImperativeHandle)(x,()=>({openDialog:e=>{if(null!=e){if(!n.some(t=>t.value===e))throw Error("invalid initial option value");b(e)}k(!0)}}));let E=async e=>{e.preventDefault();let t=[];try{t=await g(v,_)}catch{t=["An error occurred while submitting your feedback."]}w(t),0===t.length&&R()},R=()=>{b(null),j(""),w([]),k(!1),y?.()},A=e=>{j(e.target.value),w([])},D=async()=>{if(t){try{await navigator.clipboard.writeText(`Request ID: ${t}`)}catch{w(e=>[...e,"Failed to copy logs."]);return}L(!0),setTimeout(()=>{L(!1)},1e3)}};return(0,i.jsx)(i.Fragment,{children:I&&(0,i.jsx)(d.l,{onClose:R,title:e,renderBody:()=>(0,i.jsxs)("div",{className:m.bodyContainer,children:[(0,i.jsxs)(s.A,{required:!0,children:[(0,i.jsx)(s.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,i.jsx)("div",{className:m.ratingContainer,children:n.map(e=>(0,i.jsxs)("div",{className:m.ratingOption,children:[(0,i.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":v===e.value,onClick:()=>{b(e.value),w([])},className:(0,p.$)(m.ratingButton,h[e.color]),children:e.icon}),(0,i.jsx)("span",{className:m.ratingCaption,children:e.name})]},e.name))})]}),(0,i.jsxs)("div",{className:m.messageContainer,children:[(0,i.jsxs)(s.A,{children:[(0,i.jsx)(s.A.Label,{children:"Message"}),(0,i.jsx)(r.Ay,{placeholder:"Tell us what you liked or what could be better",value:_,onChange:A,resize:"vertical",block:!0,rows:5})]}),(0,i.jsxs)("span",{className:m.privacyText,children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,i.jsx)(o.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,i.jsx)("div",{className:m.validationError,role:"alert",children:C.map(e=>(0,i.jsx)("div",{children:e},e))},N)]})]}),renderFooter:()=>(0,i.jsxs)("div",{className:m.footerContainer,children:[(0,i.jsx)("div",{children:t&&(0,i.jsx)(l.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,i.jsx)(c.Q,{leadingVisual:T?(0,i.jsx)(u.CheckIcon,{className:m.copyLogsSuccessIcon,size:16}):(0,i.jsx)(u.CopyIcon,{size:16}),onClick:D,variant:"default",children:T?"Copied!":"Copy logs"})})}),(0,i.jsxs)("div",{className:m.footerActionButtonGroup,children:[(0,i.jsx)(c.Q,{onClick:R,children:"Cancel"}),(0,i.jsx)(c.Q,{variant:"primary",type:"submit",onClick:E,children:"Send"})]})]}),className:m.Dialog,returnFocusRef:f})})}let g=(0,a.forwardRef)(f),y=(0,i.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),x=(0,i.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,i.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,i.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),v=(0,i.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,i.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,i.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),b=(0,i.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,i.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,i.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),_=(0,i.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{f.displayName||(f.displayName="UserFeedbackInner")}catch{}try{g.displayName||(g.displayName="UserFeedback")}catch{}}},e=>{e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-2f4e04","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-1fff13","vendors-node_modules_tanstack_query-core_build_modern_mutation_js-node_modules_tanstack_query-9bf7e4","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_hydro-analytics-c-c228f9","vendors-node_modules_swc_helpers_esm__class_private_method_get_js-node_modules_swc_helpers_es-d6b1a6","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_lodash-es__isIterateeCa-89abd9","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-c7919d","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-5ada6e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_primer_styled-react_dist_index_js-node_modules_lodash-es_cloneDeep_js","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_comma-separated-tokens_index_js-node_modules_mdast-util-from-markdown_li-6db53e","vendors-node_modules_hastscript_lib_index_js-node_modules_mdast-util-gfm_lib_index_js-node_mo-2895d2","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js-node_modules_diff_lib_index_mjs","vendors-node_modules_remark-parse_lib_index_js-node_modules_unified_lib_index_js","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_lowlight_lib_all_js-node_modules_react-markdown_lib_index_js-node_module-5ac2ea","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-4a827a","vendors-node_modules_codemirror_language-data_dist_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_github_quote-select-7a2123","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-d1dec4","vendors-node_modules_pluralize_pluralize_js-node_modules_tanstack_react-query_build_modern_us-a36010","vendors-node_modules_lodash_merge_index_js-node_modules_lodash_mergewith_index_js","vendors-node_modules_tanstack_react-query_build_modern_useQueries_js-node_modules_lodash-es__-204510","vendors-node_modules_emoji-regex_index_js-node_modules_codemirror_merge_dist_index_js-node_mo-8041f4","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_copilot-chat_utils_copilot-local-storage_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_filter_utils_index_ts-packages_fuzzy-score_fuzzy-score_ts-packages_use-analytics_use-efa20b","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_components_tracing_TraceProvider_tsx","packages_copilot-chat_utils_CopilotChatContext_tsx-packages_safe-html_VerifiedHTML_tsx","packages_item-picker_components_RepositoryPicker_tsx","packages_copilot-markdown_MarkdownRenderer_tsx","packages_alive_alive_ts-packages_alive_connect-alive-subscription_ts-packages_history_history-ab6ca5","packages_code-view-shared_hooks_use-repos-analytics_ts-packages_code-view-shared_hooks_use-tr-fbe81a","packages_issue-fields-shared_issue-field_ts-packages_use-client-value_use-client-value_ts-pac-b53755","packages_copilot-chat_components_ModelPicker_tsx","packages_issue-create_dialog_CreateIssueDialogEntry_tsx-packages_agent-sessions_components_ne-e085d7","packages_commenting_constants_values_ts-packages_document-metadata_document-metadata_ts-packa-c2a275","packages_code-mirror_CodeMirror_tsx","packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfill_ts-packages_diff-lin-c17115","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_fuzzy-score_fuzzy-filter_ts-packages_diff-lines_components_conversations_AutomatedRe-6d86f0","packages_app-uuid_app-uuid_ts-packages_signed-commit-badge_index_ts","packages_diff-file-header_diff-file-header_ts-packages_diff-file-tree_diff-file-tree-helpers_-6ec15d","packages_agent-sessions_utils_generate-task-path_ts-packages_agent-sessions_utils_get-leading-e25e16","packages_markdown-viewer_NewMarkdownViewer_tsx","packages_use-hide-footer_use-hide-footer_ts-packages_commits_shared_use-tree-pane_tsx-package-9c5f33","packages_issue-viewer_components_IssueViewer_tsx-packages_issue-viewer_contexts_IssueViewerCo-f7ccde","packages_agent-sessions_components_AgentsIcon_tsx-packages_agent-sessions_components_PremiumR-61a3b8","packages_copilot-chat_components_tracing_TraceDisplay_tsx"],()=>e(e.s=62193)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-3d49ea3ae59f.js.map