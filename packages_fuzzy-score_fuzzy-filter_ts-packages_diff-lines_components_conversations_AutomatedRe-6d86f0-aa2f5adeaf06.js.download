"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_fuzzy-score_fuzzy-filter_ts-packages_diff-lines_components_conversations_AutomatedRe-6d86f0"],{89758:(e,t,a)=>{a.d(t,{U:()=>o});let o={None:"none",Error:"error",Warning:"warning",Note:"note"}},48505:(e,t,a)=>{a.d(t,{UZ:()=>o,fO:()=>n,hH:()=>s,vk:()=>i});let o={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"},s={Vanilla:"vanilla",CodeScanning:"code_scanning",Copilot:"copilot",Dependabot:"dependabot",CodeQuality:"code_quality",Automated:"automated"},n={NoSuggestion:"no_suggestion",Pending:"pending",Present:"present",Outdated:"outdated",Error:"error",Applied:"applied"},i={CodeScanning:"code_scanning",CodeQuality:"code_quality"}},8748:(e,t,a)=>{a.d(t,{u:()=>s});var o=a(96540);function s({isAnchorable:e,commentId:t,commentAnchor:a,containerRef:s}){(0,o.useEffect)(()=>{e&&t&&a&&window.location.hash.split("#").pop()===a&&s.current?.focus()},[a,t,e,s])}},84363:(e,t,a)=>{a.d(t,{t:()=>s});var o=a(59403);let s=({items:e,filter:t,key:a,secondaryKey:s})=>{let n=e.map(e=>[(0,o.dt)(t,a(e)),e]);return s&&(n=n.map(([e,a])=>[Math.max(e,(0,o.dt)(t,s(a))),a])),n.filter(([e])=>e>o.IP).sort(([e,t],[o,s])=>o===e?a(t).localeCompare(a(s)):o-e).map(([,e])=>e)}},48845:(e,t,a)=>{a.d(t,{R:()=>n,hp:()=>s,ol:()=>AuthSessionExpiredError,q$:()=>i});var o=a(96379);let FetchRequestError=class FetchRequestError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="FetchRequestError",this.cause=e}};let ServerUnavailableError=class ServerUnavailableError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="ServerUnavailableError",this.cause=e}};let JSONParseFetchError=class JSONParseFetchError extends Error{constructor(e){super("Unable to read response from the server. Please try again later."),this.name="JSONParseFetchError",this.cause=e}};let AuthSessionExpiredError=class AuthSessionExpiredError extends Error{constructor(){super("Unable to perform this operation. Please try again later."),this.name="AuthSessionExpiredError"}};async function s(e){try{return await e.json()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw new JSONParseFetchError(e)}}function n(e,t,a){if(!e.ok){if(e.status>=500)throw new ServerUnavailableError(e.status);if(a)throw a;if(t)throw Error(t?.error||"Unknown error occurred",{cause:e.status});throw Error(`HTTP ${e.status}`)}}async function i(e,t){try{return await (0,o.Sr)(e,t)}catch(e){throw new FetchRequestError(e)}}},57311:(e,t,a)=>{a.d(t,{B:()=>r});var o=a(74848),s=a(38621),n=a(26607),i=a(89758);function r({severity:e}){switch(e){case i.U.Note:return(0,o.jsxs)(n.A,{variant:"secondary",children:[(0,o.jsx)(s.NoteIcon,{className:"color-fg-default pr-1"}),"Note"]});case i.U.Warning:return(0,o.jsxs)(n.A,{variant:"secondary",children:[(0,o.jsx)(s.AlertIcon,{className:"color-fg-attention pr-1"}),"Warning"]});case i.U.Error:return(0,o.jsxs)(n.A,{variant:"secondary",children:[(0,o.jsx)(s.CircleSlashIcon,{className:"color-fg-danger pr-1"}),"Error"]})}}try{r.displayName||(r.displayName="RuleSeverityBadge")}catch{}},63352:(e,t,a)=>{a.d(t,{Z:()=>_});var o=a(74848),s=a(21728),n=a(75202),i=a(71315),r=a(96540),l=a(38621),d=a(26108),m=a(15042),c=a(64451),u=a(36284),h=a(4175),g=a(21373),p=a(88432);let f=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Comment is a duplicate of another comment",value:"DUPLICATE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],v=e=>{let t,a,n,i,l=(0,s.c)(16),{commentId:d,onClose:p,onSubmit:v,feedbackOptions:y,returnFocusRef:b}=e,C=void 0===y?f:y,[N,_]=(0,r.useState)(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],l[0]=t):t=l[0];let[A,w]=(0,r.useState)(t),[E,j]=(0,r.useState)("");l[1]!==d||l[2]!==A||l[3]!==v||l[4]!==E?(a=e=>{e.preventDefault(),_(!0),A.length&&v({commentId:d,type:"NEGATIVE",feedbackChoice:A,textResponse:E})},l[1]=d,l[2]=A,l[3]=v,l[4]=E,l[5]=a):a=l[5];let S=a;return l[6]!==N||l[7]!==A||l[8]!==C||l[9]!==S||l[10]!==E?(n=()=>(0,o.jsxs)("form",{onSubmit:S,children:[(0,o.jsxs)(m.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(c.A,{onChange:w,required:!0,children:[(0,o.jsx)(c.A.Label,{children:"Category"}),C.map(x),N&&!A&&(0,o.jsx)(c.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(u.A,{id:"text_response",children:[(0,o.jsx)(u.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:E,resize:"vertical",onChange:e=>j(e.currentTarget.value)})]})]}),(0,o.jsx)(m.l.Footer,{children:(0,o.jsx)(g.Q,{type:"submit",disabled:N&&(!E||!A),children:"Submit"})})]}),l[6]=N,l[7]=A,l[8]=C,l[9]=S,l[10]=E,l[11]=n):n=l[11],l[12]!==p||l[13]!==b||l[14]!==n?(i=(0,o.jsx)(m.l,{onClose:p,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:b,renderBody:n}),l[12]=p,l[13]=b,l[14]=n,l[15]=i):i=l[15],i};try{v.displayName||(v.displayName="NegativeFeedbackForm")}catch{}function x(e){return(0,o.jsxs)(u.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(p.A,{value:e.value}),(0,o.jsx)(u.A.Label,{children:e.label})]},e.value)}let y=e=>{let t,a,n=(0,s.c)(6),{onClick:i,commentId:r,disabled:m}=e;return n[0]!==r||n[1]!==i?(t=()=>i({type:"POSITIVE",commentId:r}),n[0]=r,n[1]=i,n[2]=t):t=n[2],n[3]!==m||n[4]!==t?(a=(0,o.jsx)(d.K,{size:"small",variant:"invisible",disabled:m,icon:l.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),n[3]=m,n[4]=t,n[5]=a):a=n[5],a},b=e=>{let t,a,n,i,m,c=(0,s.c)(13),{onClick:u,commentId:h,disabled:g,feedbackOptions:p}=e,[f,x]=(0,r.useState)(!1),y=(0,r.useRef)(null);c[0]!==u?(t=e=>{u(e),x(!1)},c[0]=u,c[1]=t):t=c[1];let b=t;return c[2]!==h||c[3]!==f||c[4]!==p||c[5]!==b?(a=f&&(0,o.jsx)(v,{onClose:()=>x(!1),onSubmit:b,commentId:h,feedbackOptions:p,returnFocusRef:y}),c[2]=h,c[3]=f,c[4]=p,c[5]=b,c[6]=a):a=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>x(!0),c[7]=n):n=c[7],c[8]!==g?(i=(0,o.jsx)(d.K,{ref:y,size:"small",variant:"invisible",disabled:g,icon:l.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:n}),c[8]=g,c[9]=i):i=c[9],c[10]!==a||c[11]!==i?(m=(0,o.jsxs)(o.Fragment,{children:[a,i]}),c[10]=a,c[11]=i,c[12]=m):m=c[12],m};try{y.displayName||(y.displayName="PositiveFeedbackButton")}catch{}try{b.displayName||(b.displayName="NegativeFeedbackButton")}catch{}var C=a(96379);let N=e=>{let t,a,n,l,d,m,c=(0,s.c)(18),{commentId:u,commentUrl:h,feedbackPath:g,feedbackOptions:p,additionalParameters:f}=e,[v,x]=(0,r.useState)();e:{if(g){t=g;break e}if(h){let e=new URL(h,i.fV.origin);e.hash="",t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let N=t;c[0]!==f||c[1]!==N?(a={path:N,additionalParameters:f},c[0]=f,c[1]=N,c[2]=a):a=c[2];let _=(({path:e,additionalParameters:t})=>(0,r.useCallback)(({type:a,commentId:o,feedbackChoice:s,textResponse:n})=>{try{let i=new FormData;if(i.set("comment_id",o),i.set("feedback",a),t)for(let[e,a]of Object.entries(t))i.set(e,a);for(let e of s??[])i.append("feedback_choice[]",e);n&&i.set("text_response",n),(0,C.DI)(e,{method:"POST",body:i})}catch{}},[e,t]))(a);c[3]!==_?(n=e=>{x(e.type),_(e)},c[3]=_,c[4]=n):n=c[4];let A=n,w=`copilot-code-review-feedback-${u}`;return c[5]!==u||c[6]!==A||c[7]!==v?(l="NEGATIVE"!==v&&(0,o.jsx)(y,{disabled:!!v,commentId:u,onClick:A}),c[5]=u,c[6]=A,c[7]=v,c[8]=l):l=c[8],c[9]!==u||c[10]!==p||c[11]!==A||c[12]!==v?(d="POSITIVE"!==v&&(0,o.jsx)(b,{disabled:!!v,onClick:A,commentId:u,feedbackOptions:p}),c[9]=u,c[10]=p,c[11]=A,c[12]=v,c[13]=d):d=c[13],c[14]!==w||c[15]!==l||c[16]!==d?(m=(0,o.jsxs)("div",{"data-testid":w,className:"d-flex gap-1",children:[l,d]}),c[14]=w,c[15]=l,c[16]=d,c[17]=m):m=c[17],m},_=e=>{let t,a=(0,s.c)(2);return a[0]!==e?(t=(0,o.jsx)(n.t,{fallback:null,children:(0,o.jsx)(N,{...e})}),a[0]=e,a[1]=t):t=a[1],t};try{N.displayName||(N.displayName="Feedback")}catch{}try{_.displayName||(_.displayName="CopilotCodeReviewFeedback")}catch{}},95542:(e,t,a)=>{a.d(t,{y:()=>z});var o,s,n,i=a(74848),r=a(57311),l=a(26156),d=a(71073),m=a(81156),c=a(73189),u=a(73017),h=a(71315),g=a(38621),p=a(72511),f=a(96540),v=a(8748);let x={automatedComment:"AutomatedReviewThreadComment-module__automatedComment--xAOVq",automatedComment__headerContainer:"AutomatedReviewThreadComment-module__automatedComment__headerContainer--ryz0T",automatedComment__bodyContainer:"AutomatedReviewThreadComment-module__automatedComment__bodyContainer--rNhxB",automatedComment__body:"AutomatedReviewThreadComment-module__automatedComment__body--hjhIQ",automatedComment__content:"AutomatedReviewThreadComment-module__automatedComment__content--FCGsQ",automatedComment__withBorderBottom:"AutomatedReviewThreadComment-module__automatedComment__withBorderBottom--ZoiBo",automatedComment__title:"AutomatedReviewThreadComment-module__automatedComment__title--G1Aug",automatedComment__message:"AutomatedReviewThreadComment-module__automatedComment__message--KWGoo"};var y=a(48505),b=a(67955),C=a(69726),N=a(21373),_=a(26108),A=a(98091);let w={diffEntryHeader:"AutomatedReviewDiffEntry-module__diffEntryHeader--GNsEP",automatedReviewDiff:"AutomatedReviewDiffEntry-module__automatedReviewDiff--scQuw"};var E=a(34164);function j({diffEntry:e}){let[t,a]=(0,f.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-column overflow-hidden",children:[(0,i.jsxs)("div",{className:(0,E.$)("d-flex flex-items-center px-3 py-2 text-small gap-2 text-mono",w.diffEntryHeader,t&&"rounded-2"),children:[(0,i.jsx)(_.K,{"aria-label":t?"Open review comment":"Close review comment",icon:t?g.ChevronRightIcon:g.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>a(!t)}),e.path]}),!t&&(0,i.jsx)(A.i,{tabSize:4,className:(0,E.$)("m-0 border-bottom borderColor-default overflow-hidden",w.automatedReviewDiff),diffTableClassName:"borderColor-default",diffLines:e.diffLines})]},e.path)}try{j.displayName||(j.displayName="AutomatedReviewDiffEntry")}catch{}var S=a(3585),R=a(48845),I=a(94747),k=a(25407),T=a(76648);let O={suggestion:"AutomatedReviewSuggestionStates-module__suggestion--VptIw",suggestionPending:"AutomatedReviewSuggestionStates-module__suggestionPending--BZd8B",suggestionError:"AutomatedReviewSuggestionStates-module__suggestionError--FZ0LD",suggestionErrorTitle:"AutomatedReviewSuggestionStates-module__suggestionErrorTitle--iGoNX",suggestionApplied:"AutomatedReviewSuggestionStates-module__suggestionApplied--BwHeB",suggestionAppliedText:"AutomatedReviewSuggestionStates-module__suggestionAppliedText--aHYoo"};var F=a(63352);function P({automatedCommentId:e,feedbackOptions:t,path:a}){let{feedbackPath:o}=function(e,t){let a=(0,T.B)(),o=a?.pullRequest?.pathName||t;if(!o)throw Error("basePath could not be determined: both payload.pullRequest and path are undefined");return{feedbackPath:(0,k.YLS)({basePath:o,automatedReviewCommentId:e})}}(e,a);return(0,i.jsx)(F.Z,{commentId:e,feedbackPath:o,feedbackOptions:t})}try{P.displayName||(P.displayName="AutomatedReviewFeedback")}catch{}function D({suggestion:e,actions:t}){let a=e.diffEntries||[],o=e.description||"",s=a.length||0;return(0,i.jsxs)("div",{className:`d-flex flex-column color-fg-default ${O.suggestion}`,children:[(0,i.jsx)("div",{className:"color-fg-default",children:o}),s>0&&(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between text-small color-fg-muted pt-2",children:[(0,i.jsxs)("div",{className:"text-semibold",children:["Suggested changeset ",(0,i.jsx)(b.A,{scheme:"secondary",children:s})]}),(0,i.jsx)("span",{children:" Copilot is powered by AI and may make mistakes. Always verify output."})]}),a.map(e=>(0,i.jsx)(j,{diffEntry:e},e.path)),t]})}function U(e){return(0,i.jsxs)("div",{className:O.suggestionPending,children:[(0,i.jsx)(C.A,{size:"medium"}),"Loading suggestion..."]})}function G(e){return(0,i.jsxs)("div",{className:O.suggestionError,children:[(0,i.jsx)("h3",{className:O.suggestionErrorTitle,children:"Sorry, we could not generate an autofix suggestion."}),(0,i.jsxs)("p",{className:"color-fg-muted",children:["Try pushing a new commit or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-link",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}function M({suggestion:e,feedbackOptions:t,automatedCommentId:a,basePath:o}){let s=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,i.jsx)("span",{className:"color-fg-muted text-small text-semibold",children:"Unable to commit as this autofix suggestion is now outdated."}),(0,i.jsx)(N.Q,{size:"small",disabled:!0,children:"Commit suggestion"})]}),t&&(0,i.jsx)(P,{automatedCommentId:a,feedbackOptions:t,path:o})]});return e&&(0,i.jsx)(D,{suggestion:e,actions:s})}function B({suggestion:e,automatedCommentId:t,feedbackOptions:a,basePath:o}){let[s,n]=(0,f.useState)(!0),r=(0,i.jsx)(i.Fragment,{children:a&&(0,i.jsx)(P,{automatedCommentId:t,feedbackOptions:a,path:o})});return(0,i.jsxs)("div",{className:O.suggestionApplied,children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsx)("span",{className:O.suggestionAppliedText,children:"This autofix suggestion was applied."}),(0,i.jsxs)(N.Q,{variant:"invisible",onClick:()=>n(!s),leadingVisual:s?g.UnfoldIcon:g.FoldIcon,size:"small",className:"color-fg-muted",children:[s?"Show":"Hide"," autofix suggestion"]})]}),!s&&e&&(0,i.jsx)(D,{suggestion:e,actions:r})]})}function $({automatedCommentId:e,basePath:t,commentAuthorLogin:a,commentTitle:o,feedbackOptions:s,suggestion:n}){let[r,l]=(0,f.useState)(!1),d=(n?.diffEntries||[]).length||0,m=(0,f.useRef)(null),c="Commit suggestion",u=`Potential fix for pull request finding${o?` '${o}'`:""}`,{mutate:g}=function(e,t){let a=(0,T.B)(),o=a?.pullRequest?.pathName||t;if(!o)throw Error("basePath could not be determined: both payload.pullRequest and path are undefined");let s=(0,k.m5w)({basePath:o,automatedReviewCommentId:e});return(0,I.n)({mutationFn:async({message:e})=>{let t=await (0,R.q$)(s,{method:"POST",body:{message:e}}),a=await (0,R.hp)(t);return(0,R.R)(t,a),a},onSuccess:()=>{h.cg?.location.reload()}})}(e,t),p=(0,f.useCallback)(()=>l(!1),[]),v=(0,f.useCallback)((e,t,a)=>{g({message:e},{onSuccess:()=>{p(),a()},onError:e=>{t(e,"applyAutomatedSuggestion","Failed to commit suggested changes")}})},[g,p]),x=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[s&&(0,i.jsx)(P,{automatedCommentId:e,feedbackOptions:s,path:t}),(0,i.jsx)(N.Q,{size:"small",ref:m,onClick:()=>l(!r),children:c})]}),r&&d>0&&(0,i.jsx)(S.$,{authorLogins:a?[a]:[],batchSize:d,defaultCommitMessage:u,onClose:p,onCommit:v,dialogTitle:c})]});return n&&(0,i.jsx)(D,{suggestion:n,actions:x})}try{D.displayName||(D.displayName="AutomatedReviewSuggestionBase")}catch{}try{U.displayName||(U.displayName="AutomatedReviewSuggestionPending")}catch{}try{G.displayName||(G.displayName="AutomatedReviewSuggestionError")}catch{}try{M.displayName||(M.displayName="AutomatedReviewSuggestionOutdated")}catch{}try{(o=Actions).displayName||(o.displayName="Actions")}catch{}try{B.displayName||(B.displayName="AutomatedReviewSuggestionApplied")}catch{}try{(s=FeedbackAction).displayName||(s.displayName="FeedbackAction")}catch{}try{$.displayName||($.displayName="AutomatedReviewSuggestionPresent")}catch{}try{(n=Actions).displayName||(n.displayName="Actions")}catch{}let L={[y.fO.Pending]:U,[y.fO.Error]:G,[y.fO.Outdated]:M,[y.fO.Applied]:B,[y.fO.Present]:$};function H({automatedCommentId:e,basePath:t,commentAuthorLogin:a,commentTitle:o,feedbackOptions:s,suggestion:n,suggestionState:r}){if(!r||r===y.fO.NoSuggestion)return null;let l=L[r];return l?(0,i.jsx)(l,{automatedCommentId:e,basePath:t,commentTitle:o,commentAuthorLogin:a,feedbackOptions:s,suggestion:n}):null}try{H.displayName||(H.displayName="AutomatedReviewSuggestion")}catch{}function z({anchorPrefix:e="r",basePath:t,comment:a,isAnchorable:o=!1,isInDialogMode:s,isOutdated:n,onQuoteReply:y=c.l,threadId:b,threadPositionNumber:C,originalDiffPathUri:N}){let[_,A]=(0,f.useState)(a.isHidden),[w,E]=(0,f.useState)(""),j=(0,f.useRef)(null),S=(0,f.useRef)(null),{id:R,title:I,message:k,severity:T,suggestion:O,suggestionState:F,feedbackOptions:P}=a.automatedComment||{},D=a.databaseId?.toString()||a.id,U=D?`${e}${D}`:void 0,G=_?"hidden":"visible",M=U&&h.fV?new URL(`${h.fV.pathname}#${U}`,h.fV.origin).toString():"";(0,v.u)({isAnchorable:o,commentId:D,commentAnchor:U,containerRef:S});let B={headingProps:{as:"h3"},avatarUrl:a.author?.avatarUrl??m.t.ghostUser.avatarUrl,comment:{...a,url:M,referenceText:a.reference.text??`#${a.reference.number}`,viewerCanMinimize:!1,viewerCanUpdate:!1,viewerCanDelete:!1,viewerCanBlockFromOrg:!1,viewerCanUnblockFromOrg:!1,viewerCanReport:!1,viewerCanReportToMaintainer:!1,viewerCanReferenceInIssue:!1,viewerCanQuoteReply:!1},commentRef:S,editHistoryComponent:void 0,onBlock:void 0,onUnblock:void 0,onMinimize:A,onSuccessfulBlock:()=>{setTimeout(()=>h.cg?.location.reload(),800)},isMinimized:_,navigate:c.l,onReplySelect:y,isReply:!1,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:N,isOutdated:n,editComment:()=>null,deleteComment:()=>null,hideComment:()=>null,unhideComment:()=>null,commentAuthorSlug:void 0,commentAuthorType:void 0,commentAuthorLogin:a.author?.login??m.t.ghostUser.login};return(0,i.jsxs)("div",{ref:S,id:o?U:void 0,className:x.automatedComment,style:{scrollMarginTop:o?"120px":0},"data-first-thread-comment":!0,"data-marker-navigation-comment-thread-id":b,"data-marker-navigation-comment-id":a.id,"data-testid":"automated-review-comment",...s?{role:"document","aria-roledescription":"comment","aria-label":void 0!==C?`Comment ${C}`:"Comment"}:{},children:[(0,i.jsx)("div",{className:x.automatedComment__headerContainer,children:(0,i.jsx)(l.v,{...B,commentBody:a.body,isInDialogMode:s,actions:(0,i.jsx)(d.p,{...B}),isOutdated:n})}),w&&(0,i.jsxs)(p.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),w]}),(0,i.jsx)("div",{className:x.automatedComment__bodyContainer,children:"visible"===G&&(0,i.jsxs)("div",{className:x.automatedComment__body,children:[(0,i.jsxs)("div",{className:`${x.automatedComment__content} ${O?x.automatedComment__withBorderBottom:""}`,children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("h3",{className:x.automatedComment__title,children:I}),T&&(0,i.jsx)(r.B,{severity:T})]}),(0,i.jsx)(u.JR,{ref:j,className:`${x.automatedComment__message} markdown-body`,"comment-testid":`Comment message html for automated comment ${D}`,html:k})]}),R&&(0,i.jsx)(H,{commentTitle:I,commentAuthorLogin:a.author?.login,feedbackOptions:P,suggestion:O,suggestionState:F,automatedCommentId:R,basePath:t})]})})]})}try{z.displayName||(z.displayName="AutomatedReviewThreadComment")}catch{}},3585:(e,t,a)=>{a.d(t,{$:()=>v});var o=a(74848),s=a(30459),n=a(70263),i=a(11683),r=a(45800),l=a(69726),d=a(36284),m=a(99511),c=a(4175),u=a(15042),h=a(96540);function g({children:e,footerButtons:t}){let{containerRef:a}=(0,r.G)({bindKeys:i.z0.ArrowHorizontal|i.z0.Tab,focusInStrategy:"closest"});return t?(0,o.jsx)(u.l.Footer,{ref:a,children:(0,o.jsxs)("div",{className:"d-flex flex-column",children:[(0,o.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,o.jsx)(u.l.Buttons,{buttons:t})}),e]})}):null}let p={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function f(e,t){switch(t.type){case p.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case p.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function v({authorLogins:e,batchSize:t,onClose:a,onCommit:i,defaultCommitMessage:r,dialogTitle:v}){let x=(0,n.A)(),{sendAnalyticsEvent:y}=(0,s.s)(),[b,C]=(0,h.useState)(!1),[N,_]=(0,h.useState)(),[A,w]=(0,h.useReducer)(f,{commitMessage:r||(1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review"),extendedDescription:""}),E=(0,h.useCallback)((e,t,a)=>{if(!x())return;let o="There was an error trying to commit changes";a?o+=`: ${a}`:o+=".",C(!1),_(o)},[x]),j=(0,h.useCallback)(()=>{x()&&(C(!1),N&&_(void 0))},[N,x]),S=(0,h.useCallback)(()=>{b||(C(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),i(`${A.commitMessage}

${A.extendedDescription}`,E,j))},[t,A.commitMessage,A.extendedDescription,j,E,b,i,y]);return(0,o.jsxs)(u.l,{title:v||"Apply suggestion",renderFooter:()=>(0,o.jsx)(g,{footerButtons:[{content:"Cancel",onClick:a},{content:(0,o.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",b&&(0,o.jsx)(l.A,{size:"small",className:"ml-1"})]}),onClick:S,buttonType:"primary"}],children:N&&(0,o.jsx)(d.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:N})}),onClose:a,children:[(0,o.jsxs)(d.A,{className:"mb-2",children:[(0,o.jsx)(d.A.Label,{children:"Commit message"}),(0,o.jsx)(m.A,{block:!0,name:"commit_message",onChange:e=>w({type:p.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:A.commitMessage})]}),(0,o.jsxs)(d.A,{children:[(0,o.jsx)(d.A.Label,{children:"Extended description (optional)"}),(0,o.jsx)(c.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>w({type:p.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:A.extendedDescription})]})]})}try{g.displayName||(g.displayName="DialogFooter")}catch{}try{v.displayName||(v.displayName="ApplySuggestionDialog")}catch{}}}]);
//# sourceMappingURL=packages_fuzzy-score_fuzzy-filter_ts-packages_diff-lines_components_conversations_AutomatedRe-6d86f0-7af858046422.js.map